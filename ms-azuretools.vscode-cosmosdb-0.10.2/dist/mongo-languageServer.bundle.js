module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1216)}({0:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.NotNull=function(e,t,r){},t.Nullable=function(e,t,r){},t.Override=function(e,t,r){},t.SuppressWarnings=function(e){return(e,t,r)=>{}}},109:function(e,t,r){"use strict";var n=r(158),o=r(3),i=r(3).toError,s=r(3).handleCallback,a=o.shallowClone,l=n.BulkWriteResult,c=r(5).BSON.ObjectID,u=r(20),p=r(5).BSON,h=n.Batch,d=n.mergeBatchResults,f=new p([p.Binary,p.Code,p.DBRef,p.Decimal128,p.Double,p.Int32,p.Long,p.Map,p.MaxKey,p.MinKey,p.ObjectId,p.BSONRegExp,p.Symbol,p.Timestamp]),m=function(e){this.s=e.s};m.prototype.update=function(e){var t="boolean"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,r={q:this.s.currentOp.selector,u:e,multi:!0,upsert:t};return this.s.currentOp=null,g(this,n.UPDATE,r)},m.prototype.updateOne=function(e){var t="boolean"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,r={q:this.s.currentOp.selector,u:e,multi:!1,upsert:t};return this.s.currentOp=null,g(this,n.UPDATE,r)},m.prototype.replaceOne=function(e){this.updateOne(e)},m.prototype.upsert=function(){return this.s.currentOp.upsert=!0,this},m.prototype.deleteOne=function(){var e={q:this.s.currentOp.selector,limit:1};return this.s.currentOp=null,g(this,n.REMOVE,e)},m.prototype.removeOne=m.prototype.deleteOne,m.prototype.delete=function(){var e={q:this.s.currentOp.selector,limit:0};return this.s.currentOp=null,g(this,n.REMOVE,e)},m.prototype.remove=m.prototype.delete;var g=function(e,t,r){var o=f.calculateObjectSize(r,{checkKeys:!1});if(o>=e.s.maxBatchSizeBytes)throw i("document is larger than the maximum size "+e.s.maxBatchSizeBytes);if(null==e.s.currentBatch&&(e.s.currentBatch=new h(t,e.s.currentIndex)),e.s.currentBatchSize+1>=e.s.maxWriteBatchSize||e.s.currentBatchSizeBytes+e.s.currentBatchSizeBytes>=e.s.maxBatchSizeBytes||e.s.currentBatch.batchType!=t?(e.s.batches.push(e.s.currentBatch),e.s.currentBatch=new h(t,e.s.currentIndex),e.s.currentBatchSize=0,e.s.currentBatchSizeBytes=0):(e.s.currentBatchSize=e.s.currentBatchSize+1,e.s.currentBatchSizeBytes=e.s.currentBatchSizeBytes+o),t==n.INSERT&&e.s.bulkResult.insertedIds.push({index:e.s.currentIndex,_id:r._id}),Array.isArray(r))throw i("operation passed in cannot be an Array");return e.s.currentBatch.originalIndexes.push(e.s.currentIndex),e.s.currentBatch.operations.push(r),e.s.currentBatchSizeBytes=e.s.currentBatchSizeBytes+o,e.s.currentIndex=e.s.currentIndex+1,e};function y(e,t,o){o=null==o?{}:o;var i=e.bson,s=t.collectionName,l=e.isMasterDoc&&e.isMasterDoc.maxBsonObjectSize?e.isMasterDoc.maxBsonObjectSize:16793600,c=e.isMasterDoc&&e.isMasterDoc.maxWriteBatchSize?e.isMasterDoc.maxWriteBatchSize:1e3,u=n.writeConcern(a(o),t,o),p=o.promiseLibrary;p||(p="function"==typeof global.Promise?global.Promise:r(16).Promise);this.s={bulkResult:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},currentBatch:null,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,batches:[],writeConcern:u,maxBatchSizeBytes:l,maxWriteBatchSize:c,namespace:s,bson:i,topology:e,options:o,currentOp:null,executed:!1,collection:t,promiseLibrary:p,err:null,bypassDocumentValidation:"boolean"==typeof o.bypassDocumentValidation&&o.bypassDocumentValidation}}var v=y.define=new u("OrderedBulkOperation",y,!1);y.prototype.raw=function(e){var t=Object.keys(e)[0],r="boolean"==typeof this.s.options.forceServerObjectId?this.s.options.forceServerObjectId:this.s.collection.s.db.options.forceServerObjectId;if(e.updateOne&&e.updateOne.q||e.updateMany&&e.updateMany.q||e.replaceOne&&e.replaceOne.q)return e[t].multi=!e.updateOne&&!e.replaceOne,g(this,n.UPDATE,e[t]);if(e.updateOne||e.updateMany||e.replaceOne){var o=!e.updateOne&&!e.replaceOne,s={q:e[t].filter,u:e[t].update||e[t].replacement,multi:o};return s.upsert=!!e[t].upsert,e.collation&&(s.collation=e.collation),g(this,n.UPDATE,s)}if(e.removeOne||e.removeMany||e.deleteOne&&e.deleteOne.q||e.deleteMany&&e.deleteMany.q)return e[t].limit=e.removeOne?1:0,g(this,n.REMOVE,e[t]);if(e.deleteOne||e.deleteMany){var a=e.deleteOne?1:0;return s={q:e[t].filter,limit:a},e.collation&&(s.collation=e.collation),g(this,n.REMOVE,s)}if(e.insertOne&&null==e.insertOne.document)return!0!==r&&null==e.insertOne._id&&(e.insertOne._id=new c),g(this,n.INSERT,e.insertOne);if(e.insertOne&&e.insertOne.document)return!0!==r&&null==e.insertOne.document._id&&(e.insertOne.document._id=new c),g(this,n.INSERT,e.insertOne.document);if(!e.insertMany)throw i("bulkWrite only supports insertOne, insertMany, updateOne, updateMany, removeOne, removeMany, deleteOne, deleteMany");for(var l=0;l<e.insertMany.length;l++)!0!==r&&null==e.insertMany[l]._id&&(e.insertMany[l]._id=new c),g(this,n.INSERT,e.insertMany[l])},y.prototype.insert=function(e){return!0!==this.s.collection.s.db.options.forceServerObjectId&&null==e._id&&(e._id=new c),g(this,n.INSERT,e)},y.prototype.find=function(e){if(!e)throw i("Bulk find operation must specify a selector");return this.s.currentOp={selector:e},new m(this)},Object.defineProperty(y.prototype,"length",{enumerable:!0,get:function(){return this.s.currentIndex}});var b=function(e,t){if(0==e.s.batches.length)return s(t,null,new l(e.s.bulkResult));var r=e.s.batches.shift(),o=function(n,o){return n&&n.driver||n&&n.message?s(t,n):(n&&(n.ok=0),null!=d(!0,r,e.s.bulkResult,n,o)?s(t,null,new l(e.s.bulkResult)):e.s.bulkResult.writeErrors.length>0?s(t,i(e.s.bulkResult.writeErrors[0]),new l(e.s.bulkResult)):void b(e,t))},a={ordered:!0};null!=e.s.writeConcern&&(a.writeConcern=e.s.writeConcern),e.operationId&&(o.operationId=e.operationId),e.s.options.serializeFunctions&&(a.serializeFunctions=!0),e.s.options.ignoreUndefined&&(a.ignoreUndefined=!0),1==e.s.bypassDocumentValidation&&(a.bypassDocumentValidation=!0);try{r.batchType==n.INSERT?e.s.topology.insert(e.s.collection.namespace,r.operations,a,o):r.batchType==n.UPDATE?e.s.topology.update(e.s.collection.namespace,r.operations,a,o):r.batchType==n.REMOVE&&e.s.topology.remove(e.s.collection.namespace,r.operations,a,o)}catch(n){n.ok=0,s(t,null,d(!1,r,e.s.bulkResult,n,null))}};y.prototype.execute=function(e,t){var r=this;if(this.s.executed){var n=i("batch cannot be re-executed");return"function"==typeof t?t(n,null):this.s.promiseLibrary.reject(n)}if("function"==typeof e?t=e:e&&"object"==typeof e&&(this.s.writeConcern=e),this.s.currentBatch&&this.s.batches.push(this.s.currentBatch),0==this.s.batches.length){var o=i("Invalid Operation, no operations specified");return"function"==typeof t?t(o,null):this.s.promiseLibrary.reject(o)}return"function"==typeof t?b(this,t):new this.s.promiseLibrary(function(e,t){b(r,function(r,n){if(r)return t(r);e(n)})})},v.classMethod("execute",{callback:!0,promise:!1});var x=function(e,t,r){return new y(e,t,r)};x.OrderedBulkOperation=y,e.exports=x,e.exports.Bulk=y},11:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0}),function(e){const t=0;function r(e=t){return e}function n(e,t){null==t?t=0:"string"==typeof t?t=function(e){let t=e.length;if(0===t)return 0;let r=0;for(let n=0;n<t;n++){let t=e.charCodeAt(n);r=(r<<5>>>0)-r+t,r|=0}return r}(t):"object"==typeof t&&(t=t.hashCode());let r=t;return r=(r=Math.imul(r,3432918353))<<15|r>>>17,e=(e^=r=Math.imul(r,461845907))<<13|e>>>19,4294967295&(e=Math.imul(e,5)+3864292196)}function o(e,t){return e^=4*t,e^=e>>>16,e=Math.imul(e,2246822507),e^=e>>>13,e=Math.imul(e,3266489909),e^=e>>>16}e.initialize=r,e.update=n,e.finish=o,e.hashCode=function(e,i=t){let s=r(i),a=0;for(let t of e)s=n(s,t),a++;return s=o(s,a)}}(t.MurmurHash||(t.MurmurHash={}))},110:function(e,t,r){"use strict";var n=r(158),o=r(3),i=r(3).toError,s=r(3).handleCallback,a=o.shallowClone,l=n.BulkWriteResult,c=r(5).BSON.ObjectID,u=r(5).BSON,p=r(20),h=n.Batch,d=n.mergeBatchResults,f=new u([u.Binary,u.Code,u.DBRef,u.Decimal128,u.Double,u.Int32,u.Long,u.Map,u.MaxKey,u.MinKey,u.ObjectId,u.BSONRegExp,u.Symbol,u.Timestamp]),m=function(e){this.s=e.s};m.prototype.update=function(e){var t="boolean"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,r={q:this.s.currentOp.selector,u:e,multi:!0,upsert:t};return this.s.currentOp=null,g(this,n.UPDATE,r)},m.prototype.updateOne=function(e){var t="boolean"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,r={q:this.s.currentOp.selector,u:e,multi:!1,upsert:t};return this.s.currentOp=null,g(this,n.UPDATE,r)},m.prototype.replaceOne=function(e){this.updateOne(e)},m.prototype.upsert=function(){return this.s.currentOp.upsert=!0,this},m.prototype.removeOne=function(){var e={q:this.s.currentOp.selector,limit:1};return this.s.currentOp=null,g(this,n.REMOVE,e)},m.prototype.remove=function(){var e={q:this.s.currentOp.selector,limit:0};return this.s.currentOp=null,g(this,n.REMOVE,e)};var g=function(e,t,r){var o=f.calculateObjectSize(r,{checkKeys:!1});if(o>=e.s.maxBatchSizeBytes)throw i("document is larger than the maximum size "+e.s.maxBatchSizeBytes);if(e.s.currentBatch=null,t==n.INSERT?e.s.currentBatch=e.s.currentInsertBatch:t==n.UPDATE?e.s.currentBatch=e.s.currentUpdateBatch:t==n.REMOVE&&(e.s.currentBatch=e.s.currentRemoveBatch),null==e.s.currentBatch&&(e.s.currentBatch=new h(t,e.s.currentIndex)),(e.s.currentBatch.size+1>=e.s.maxWriteBatchSize||e.s.currentBatch.sizeBytes+o>=e.s.maxBatchSizeBytes||e.s.currentBatch.batchType!=t)&&(e.s.batches.push(e.s.currentBatch),e.s.currentBatch=new h(t,e.s.currentIndex)),Array.isArray(r))throw i("operation passed in cannot be an Array");return e.s.currentBatch.operations.push(r),e.s.currentBatch.originalIndexes.push(e.s.currentIndex),e.s.currentIndex=e.s.currentIndex+1,t==n.INSERT?(e.s.currentInsertBatch=e.s.currentBatch,e.s.bulkResult.insertedIds.push({index:e.s.bulkResult.insertedIds.length,_id:r._id})):t==n.UPDATE?e.s.currentUpdateBatch=e.s.currentBatch:t==n.REMOVE&&(e.s.currentRemoveBatch=e.s.currentBatch),e.s.currentBatch.size=e.s.currentBatch.size+1,e.s.currentBatch.sizeBytes=e.s.currentBatch.sizeBytes+o,e},y=function(e,t,o){o=null==o?{}:o;var i=t.collectionName,s=e.bson,l=e.isMasterDoc&&e.isMasterDoc.maxBsonObjectSize?e.isMasterDoc.maxBsonObjectSize:16793600,c=e.isMasterDoc&&e.isMasterDoc.maxWriteBatchSize?e.isMasterDoc.maxWriteBatchSize:1e3,u=n.writeConcern(a(o),t,o),p=o.promiseLibrary;p||(p="function"==typeof global.Promise?global.Promise:r(16).Promise);this.s={bulkResult:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},currentInsertBatch:null,currentUpdateBatch:null,currentRemoveBatch:null,currentBatch:null,currentIndex:0,batches:[],writeConcern:u,maxBatchSizeBytes:l,maxWriteBatchSize:c,namespace:i,bson:s,topology:e,options:o,currentOp:null,executed:!1,collection:t,promiseLibrary:p,bypassDocumentValidation:"boolean"==typeof o.bypassDocumentValidation&&o.bypassDocumentValidation}},v=y.define=new p("UnorderedBulkOperation",y,!1);y.prototype.insert=function(e){return!0!==this.s.collection.s.db.options.forceServerObjectId&&null==e._id&&(e._id=new c),g(this,n.INSERT,e)},y.prototype.find=function(e){if(!e)throw i("Bulk find operation must specify a selector");return this.s.currentOp={selector:e},new m(this)},Object.defineProperty(y.prototype,"length",{enumerable:!0,get:function(){return this.s.currentIndex}}),y.prototype.raw=function(e){var t=Object.keys(e)[0],r="boolean"==typeof this.s.options.forceServerObjectId?this.s.options.forceServerObjectId:this.s.collection.s.db.options.forceServerObjectId;if(e.updateOne&&e.updateOne.q||e.updateMany&&e.updateMany.q||e.replaceOne&&e.replaceOne.q)return e[t].multi=!e.updateOne&&!e.replaceOne,g(this,n.UPDATE,e[t]);if(e.updateOne||e.updateMany||e.replaceOne){var o=!e.updateOne&&!e.replaceOne,s={q:e[t].filter,u:e[t].update||e[t].replacement,multi:o};return e[t].upsert&&(s.upsert=!0),g(this,n.UPDATE,s)}if(e.removeOne||e.removeMany||e.deleteOne&&e.deleteOne.q||e.deleteMany&&e.deleteMany.q)return e[t].limit=e.removeOne?1:0,g(this,n.REMOVE,e[t]);if(e.deleteOne||e.deleteMany){var a=e.deleteOne?1:0;return s={q:e[t].filter,limit:a},g(this,n.REMOVE,s)}if(e.insertOne&&null==e.insertOne.document)return!0!==r&&null==e.insertOne._id&&(e.insertOne._id=new c),g(this,n.INSERT,e.insertOne);if(e.insertOne&&e.insertOne.document)return!0!==r&&null==e.insertOne.document._id&&(e.insertOne.document._id=new c),g(this,n.INSERT,e.insertOne.document);if(!e.insertMany)throw i("bulkWrite only supports insertOne, insertMany, updateOne, updateMany, removeOne, removeMany, deleteOne, deleteMany");for(var l=0;l<e.insertMany.length;l++)!0!==r&&null==e.insertMany[l]._id&&(e.insertMany[l]._id=new c),g(this,n.INSERT,e.insertMany[l])};var b=function(e,t,r){var o={ordered:!1};null!=e.s.writeConcern&&(o.writeConcern=e.s.writeConcern);var i=function(n,o){if(n&&n.driver||n&&n.message)return s(r,n);n&&(n.ok=0),s(r,null,d(!1,t,e.s.bulkResult,n,o))};e.operationId&&(i.operationId=e.operationId),e.s.options.serializeFunctions&&(o.serializeFunctions=!0),1==e.s.bypassDocumentValidation&&(o.bypassDocumentValidation=!0);try{t.batchType==n.INSERT?e.s.topology.insert(e.s.collection.namespace,t.operations,o,i):t.batchType==n.UPDATE?e.s.topology.update(e.s.collection.namespace,t.operations,o,i):t.batchType==n.REMOVE&&e.s.topology.remove(e.s.collection.namespace,t.operations,o,i)}catch(n){n.ok=0,s(r,null,d(!1,t,e.s.bulkResult,n,null))}},x=function(e,t){for(var r=e.s.batches.length,n=0;n<e.s.batches.length;n++)b(e,e.s.batches[n],function(n){if(n&&(o=n),0==(r-=1)){if(o)return s(t,o);var o=e.s.bulkResult.writeErrors.length>0?i(e.s.bulkResult.writeErrors[0]):null;s(t,o,new l(e.s.bulkResult))}})};y.prototype.execute=function(e,t){var r=this;if(this.s.executed){var n=i("batch cannot be re-executed");return"function"==typeof t?t(n,null):this.s.promiseLibrary.reject(n)}if("function"==typeof e?t=e:e&&"object"==typeof e&&(this.s.writeConcern=e),this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch),0==this.s.batches.length){var o=i("Invalid Operation, no operations specified");return"function"==typeof t?t(o,null):this.s.promiseLibrary.reject(o)}return"function"==typeof t?x(this,t):new this.s.promiseLibrary(function(e,t){x(r,function(r,n){if(r)return t(r);e(n)})})},v.classMethod("execute",{callback:!0,promise:!1});var S=function(e,t,r){return new y(e,t,r)};S.UnorderedBulkOperation=y,e.exports=S,e.exports.Bulk=y},111:function(e,t,r){"use strict";var n=r(26).EventEmitter,o=r(112),i=r(4).inherits,s=r(3).getSingleProperty,a=r(3).shallowClone,l=r(3).parseIndexOptions,c=r(3).debugOptions,u=r(48),p=r(3).handleCallback,h=r(3).filterOptions,d=r(3).toError,f=r(28),m=r(4).format,g=r(161),y=r(5).BSON.Code,v=r(5).ReadPreference,b=r(5).MongoError,x=r(5).ObjectID,S=r(20),C=r(5).Logger,_=r(89),O=r(15),T=r(3).mergeOptionsAndWriteConcern,N=r(3).assign,A=["authSource","w","wtimeout","j","native_parser","forceServerObjectId","serializeFunctions","raw","promoteLongs","promoteValues","promoteBuffers","bufferMaxEntries","numberOfRetries","retryMiliSeconds","readPreference","pkFactory","parentDb","promiseLibrary","noListener"],E=["w","wtimeout","j","fsync","autoIndexId","strict","serializeFunctions","pkFactory","raw","readPreference"],w=["w","wtimeout","fsync","j","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","bufferMaxEntries","authSource","ignoreUndefined","promoteLongs","promiseLibrary","readConcern","retryMiliSeconds","numberOfRetries","parentDb","noListener","loggerLevel","logger","promoteBuffers","promoteLongs","promoteValues"],P=function(e,t,o){if(o=o||{},!(this instanceof P))return new P(e,t,o);n.call(this);var i=o.promiseLibrary;i||(i="function"==typeof global.Promise?global.Promise:r(16).Promise),(o=h(o,w)).promiseLibrary=i,this.s={databaseName:e,dbCache:{},children:[],topology:t,options:o,logger:C("Db",o),bson:t?t.bson:null,authSource:o.authSource,readPreference:o.readPreference,bufferMaxEntries:"number"==typeof o.bufferMaxEntries?o.bufferMaxEntries:-1,parentDb:o.parentDb||null,pkFactory:o.pkFactory||x,nativeParser:o.nativeParser||o.native_parser,promiseLibrary:i,noListener:"boolean"==typeof o.noListener&&o.noListener,readConcern:o.readConcern},K(this.s.databaseName),s(this,"serverConfig",this.s.topology),s(this,"bufferMaxEntries",this.s.bufferMaxEntries),s(this,"databaseName",this.s.databaseName),o.parentDb||this.s.noListener||(t.on("error",G(this,"error",this)),t.on("timeout",G(this,"timeout",this)),t.on("close",G(this,"close",this)),t.on("parseError",G(this,"parseError",this)),t.once("open",G(this,"open",this)),t.once("fullsetup",G(this,"fullsetup",this)),t.once("all",G(this,"all",this)),t.on("reconnect",G(this,"reconnect",this)),t.on("reconnectFailed",G(this,"reconnectFailed",this)))};i(P,n);var k=P.define=new S("Db",P,!1);Object.defineProperty(P.prototype,"topology",{enumerable:!0,get:function(){return this.s.topology}}),Object.defineProperty(P.prototype,"options",{enumerable:!0,get:function(){return this.s.options}}),Object.defineProperty(P.prototype,"slaveOk",{enumerable:!0,get:function(){return null!=this.s.options.readPreference&&("primary"!=this.s.options.readPreference||"primary"!=this.s.options.readPreference.mode)}}),Object.defineProperty(P.prototype,"writeConcern",{enumerable:!0,get:function(){var e={};return null!=this.s.options.w&&(e.w=this.s.options.w),null!=this.s.options.j&&(e.j=this.s.options.j),null!=this.s.options.fsync&&(e.fsync=this.s.options.fsync),null!=this.s.options.wtimeout&&(e.wtimeout=this.s.options.wtimeout),e}});var I=function(e,t){e.s.topology.connect(e,e.s.options,function(r){if(null!=t){var n=t;if(r)return e.close(),n(r);n(null,e)}})};P.prototype.open=function(e){var t=this;return"function"==typeof e?I(t,e):new t.s.promiseLibrary(function(e,r){I(t,function(t,n){if(t)return r(t);e(n)})})},k.classMethod("open",{callback:!0,promise:!0});var R=function(e){if(e&&"string"==typeof e)return new v(e);if(e instanceof f)return new v(e.mode,e.tags,{maxStalenessSeconds:e.maxStalenessSeconds});if(e&&"object"==typeof e){var t=e.mode||e.preference;t&&"string"==typeof t&&(e=new v(t,e.tags,{maxStalenessSeconds:e.maxStalenessSeconds}))}return e},L=function(e,t,r,n){if(e.serverConfig&&e.serverConfig.isDestroyed())return n(new b("topology was destroyed"));var o=r.dbName||r.authdb||e.s.databaseName;null==r.readPreference&&e.s.readPreference&&(r.readPreference=e.s.readPreference),r.readPreference?r.readPreference=R(r.readPreference):r.readPreference=v.primary,e.s.logger.isDebug()&&e.s.logger.debug(m("executing command %s against %s with options [%s]",JSON.stringify(t),m("%s.$cmd",o),JSON.stringify(c(A,r)))),e.s.topology.command(m("%s.$cmd",o),t,r,function(e,t){return e?p(n,e):r.full?p(n,null,t):void p(n,null,t.result)})};P.prototype.command=function(e,t,r){var n=this;return"function"==typeof t&&(r=t,t={}),t=a(t),"function"==typeof r?L(n,e,t,r):new this.s.promiseLibrary(function(r,o){L(n,e,t,function(e,t){if(e)return o(e);r(t)})})},k.classMethod("command",{callback:!0,promise:!0}),P.prototype.close=function(e,t){"function"==typeof e&&(t=e,e=!1),this.s.topology.close(e);if(this.listeners("close").length>0){if(this.emit("close"),null==this.parentDb)for(var r=0;r<this.s.children.length;r++)this.s.children[r].emit("close");this.removeAllListeners("close")}return this.s.parentDb&&this.s.parentDb.close(),"function"==typeof t?process.nextTick(function(){p(t,null)}):new this.s.promiseLibrary(function(e){e()})},k.classMethod("close",{callback:!0,promise:!0}),P.prototype.admin=function(){return new g(this,this.s.topology,this.s.promiseLibrary)},k.classMethod("admin",{callback:!1,promise:!1,returns:[g]});var D=["pkFactory","readPreference","serializeFunctions","strict","readConcern","ignoreUndefined","promoteValues","promoteBuffers","promoteLongs"];function M(e,t,r){if(t.s.topology.capabilities().commandsTakeWriteConcern){var n=Y(a(r),t,r);n.writeConcern&&(e.writeConcern=n.writeConcern)}}P.prototype.collection=function(e,t,r){var n=this;if("function"==typeof t&&(r=t,t={}),(t=a(t=t||{})).promiseLibrary=this.s.promiseLibrary,t.readConcern=t.readConcern||this.s.readConcern,this.s.options.ignoreUndefined&&(t.ignoreUndefined=this.s.options.ignoreUndefined),null==(t=T(t,this.s.options,D,!0))||!t.strict)try{var o=new _(this,this.s.topology,this.s.databaseName,e,this.s.pkFactory,t);return r&&r(null,o),o}catch(e){if(r)return r(e);throw e}if("function"!=typeof r)throw d(m("A callback is required in strict mode. While getting collection %s.",e));if(n.serverConfig&&n.serverConfig.isDestroyed())return r(new b("topology was destroyed"));this.listCollections({name:e},t).toArray(function(o,i){if(null!=o)return p(r,o,null);if(0==i.length)return p(r,d(m("Collection %s does not exist. Currently in strict mode.",e)),null);try{return p(r,null,new _(n,n.s.topology,n.s.databaseName,e,n.s.pkFactory,t))}catch(o){return p(r,o,null)}})},k.classMethod("collection",{callback:!0,promise:!1,returns:[_]});var j=function(e,t,r,n){var o=Y(a(r),e,r);if(e.serverConfig&&e.serverConfig.isDestroyed())return n(new b("topology was destroyed"));e.listCollections({name:t}).setReadPreference(f.PRIMARY).toArray(function(i,s){if(null!=i)return p(n,i,null);if(s.length>0&&o.strict)return p(n,b.create({message:m("Collection %s already exists. Currently in strict mode.",t),driver:!0}),null);if(s.length>0)try{return p(n,null,new _(e,e.s.topology,e.s.databaseName,t,e.s.pkFactory,r))}catch(i){return p(n,i)}var a={create:t};for(var l in M(a,e,r),r)null!=r[l]&&"function"!=typeof r[l]&&-1==E.indexOf(l)&&(a[l]=r[l]);o.readPreference=f.PRIMARY,e.command(a,o,function(o){if(o)return p(n,o);p(n,null,new _(e,e.s.topology,e.s.databaseName,t,e.s.pkFactory,r))})})};P.prototype.createCollection=function(e,t,r){var n=this,o=Array.prototype.slice.call(arguments,0);return"function"!=typeof(r=o.pop())&&o.push(r),e=o.length?o.shift():null,(t=o.length&&o.shift()||{}).promiseLibrary=t.promiseLibrary||this.s.promiseLibrary,"string"==typeof r&&(e=r),"function"==typeof r?j(n,e,t,r):new this.s.promiseLibrary(function(r,o){j(n,e,t,function(e,t){if(e)return o(e);r(t)})})},k.classMethod("createCollection",{callback:!0,promise:!0}),P.prototype.stats=function(e,t){"function"==typeof e&&(t=e,e={});var r={dbStats:!0};return null!=(e=e||{}).scale&&(r.scale=e.scale),null==e.readPreference&&this.s.readPreference&&(e.readPreference=this.s.readPreference),this.command(r,e,t)},k.classMethod("stats",{callback:!0,promise:!0});P.prototype.listCollections=function(e,t){if(e=e||{},(t=a(t=t||{})).promiseLibrary=this.s.promiseLibrary,t.readPreference?t.readPreference=R(t.readPreference):t.readPreference=this.s.readPreference||v.primary,this.serverConfig.capabilities().hasListCollectionsCommand){var r=t.batchSize?{batchSize:t.batchSize}:{},n={listCollections:!0,filter:e,cursor:r};return t.cursorFactory=u,r=this.s.topology.cursor(m("%s.$cmd",this.s.databaseName),n,t),t.readPreference&&r.setReadPreference(t.readPreference),r}this.serverConfig.capabilities().hasListCollectionsCommand||"string"!=typeof e.name||new RegExp("^"+this.databaseName+"\\.").test(e.name)||((e=a(e)).name=m("%s.%s",this.s.databaseName,e.name)),null==e&&(e.name=m("/%s/",this.s.databaseName)),e=e.name?{$and:[{name:e.name},{name:/^((?!\$).)*$/}]}:{name:/^((?!\$).)*$/};var o,i,s={transforms:(o=this.s.databaseName,i=m("%s.",o),{doc:function(e){var t=e.name.indexOf(i);return e.name&&0==t&&(e.name=e.name.substr(t+i.length)),e}})};return r=this.collection(P.SYSTEM_NAMESPACE_COLLECTION).find(e,s),t.readPreference&&r.setReadPreference(t.readPreference),t.batchSize&&(r=r.batchSize(t.batchSize)),r},k.classMethod("listCollections",{callback:!1,promise:!1,returns:[u]});var F=function(e,t,r,n,o){var i=t,s=[];if(e.serverConfig&&e.serverConfig.isDestroyed())return o(new b("topology was destroyed"));i&&"Code"==i._bsontype||(i=new y(i)),null==r||Array.isArray(r)||"function"==typeof r?null!=r&&Array.isArray(r)&&"function"!=typeof r&&(s=r):s=[r];var a={$eval:i,args:s};n.nolock&&(a.nolock=n.nolock),n.readPreference=new v(f.PRIMARY),e.command(a,n,function(e,t){return e?p(o,e,null):t&&1==t.ok?p(o,null,t.retval):t?p(o,b.create({message:m("eval failed: %s",t.errmsg),driver:!0}),null):void p(o,e,t)})};P.prototype.eval=function(e,t,r,n){var o=this,i=Array.prototype.slice.call(arguments,1);return"function"!=typeof(n=i.pop())&&i.push(n),t=i.length?i.shift():t,r=i.length&&i.shift()||{},"function"==typeof n?F(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){F(o,e,t,r,function(e,t){if(e)return i(e);n(t)})})},k.classMethod("eval",{callback:!0,promise:!0}),P.prototype.renameCollection=function(e,t,r,n){var o=this;return"function"==typeof r&&(n=r,r={}),(r=r||{}).new_collection=!0,"function"==typeof n?this.collection(e).rename(t,r,n):new this.s.promiseLibrary(function(n,i){o.collection(e).rename(t,r,function(e,t){if(e)return i(e);n(t)})})},k.classMethod("renameCollection",{callback:!0,promise:!0}),P.prototype.dropCollection=function(e,t,r){var n=this;"function"==typeof t&&(r=t,t={});var o={drop:e};return M(o,n,t=t||{}),t=N({},this.s.options,{readPreference:f.PRIMARY}),"function"==typeof r?this.command(o,t,function(e,t){return n.serverConfig&&n.serverConfig.isDestroyed()?r(new b("topology was destroyed")):e?p(r,e):t.ok?p(r,null,!0):void p(r,null,!1)}):((t=a(n.s.options)).readPreference=f.PRIMARY,new this.s.promiseLibrary(function(e,r){n.command(o,t,function(t,o){return n.serverConfig&&n.serverConfig.isDestroyed()?r(new b("topology was destroyed")):t?r(t):o.ok?e(!0):void e(!1)})}))},k.classMethod("dropCollection",{callback:!0,promise:!0}),P.prototype.dropDatabase=function(e,t){var r=this;"function"==typeof e&&(t=e,e={});var n={dropDatabase:1};return M(n,r,e=e||{}),e=N({},this.s.options,{readPreference:f.PRIMARY}),"function"==typeof t?this.command(n,e,function(e,n){return r.serverConfig&&r.serverConfig.isDestroyed()?t(new b("topology was destroyed")):null!=t?e?p(t,e,null):void p(t,null,!!n.ok):void 0}):new this.s.promiseLibrary(function(t,o){r.command(n,e,function(e,n){return r.serverConfig&&r.serverConfig.isDestroyed()?o(new b("topology was destroyed")):e?o(e):n.ok?t(!0):void t(!1)})})},k.classMethod("dropDatabase",{callback:!0,promise:!0});var z=function(e,t){e.listCollections().toArray(function(r,n){if(null!=r)return p(t,r,null);n=n.filter(function(e){return-1==e.name.indexOf("$")}),p(t,null,n.map(function(t){return new _(e,e.s.topology,e.s.databaseName,t.name,e.s.pkFactory,e.s.options)}))})};P.prototype.collections=function(e){var t=this;return"function"==typeof e?z(t,e):new t.s.promiseLibrary(function(e,r){z(t,function(t,n){if(t)return r(t);e(n)})})},k.classMethod("collections",{callback:!0,promise:!0}),P.prototype.executeDbAdminCommand=function(e,t,r){var n=this;return"function"==typeof t&&(r=t,t={}),t=t||{},"function"==typeof r?(t.readPreference&&(t.readPreference=R(t.readPreference)),n.s.topology.command("admin.$cmd",e,t,function(e,t){return n.serverConfig&&n.serverConfig.isDestroyed()?r(new b("topology was destroyed")):e?p(r,e):void p(r,null,t.result)})):new n.s.promiseLibrary(function(r,o){n.s.topology.command("admin.$cmd",e,t,function(e,t){return n.serverConfig&&n.serverConfig.isDestroyed()?o(new b("topology was destroyed")):e?o(e):void r(t.result)})})},k.classMethod("executeDbAdminCommand",{callback:!0,promise:!0}),P.prototype.createIndex=function(e,t,r,n){var o=this,i=Array.prototype.slice.call(arguments,2);return"function"!=typeof(n=i.pop())&&i.push(n),r=i.length&&i.shift()||{},r=a(r=null==(r="function"==typeof n?r:n)?{}:r),"function"==typeof n?U(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){U(o,e,t,r,function(e,t){if(e)return i(e);n(t)})})};var U=function(e,t,r,n,o){var i=Y({},e,n,{readPreference:f.PRIMARY});if(i.writeConcern&&"function"!=typeof o)throw b.create({message:"Cannot use a writeConcern without a provided callback",driver:!0});if(n.readPreference=f.PRIMARY,e.serverConfig&&e.serverConfig.isDestroyed())return o(new b("topology was destroyed"));W(e,t,r,n,function(s,a){if(null==s)return p(o,s,a);if(67===s.code||11e3==s.code||85===s.code||11600==s.code)return p(o,s,a);var l=$(e,t,r,n);i.checkKeys=!1,e.s.topology.insert(m("%s.%s",e.s.databaseName,P.SYSTEM_INDEX_COLLECTION),l,i,function(e,t){if(null!=o)return e?p(o,e):null==t?p(o,null,null):t.result.writeErrors?p(o,b.create(t.result.writeErrors[0]),null):void p(o,null,l.name)})})};k.classMethod("createIndex",{callback:!0,promise:!0}),P.prototype.ensureIndex=function(e,t,r,n){var o=this;return"function"==typeof r&&(n=r,r={}),r=r||{},"function"==typeof n?B(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){B(o,e,t,r,function(e,t){if(e)return i(e);n(t)})})};var B=function(e,t,r,n,o){var i=Y({},e,n),s=$(e,t,r,n).name;if(e.serverConfig&&e.serverConfig.isDestroyed())return o(new b("topology was destroyed"));i.readPreference=f.PRIMARY,e.indexInformation(t,i,function(i,a){if(null!=i&&26!=i.code)return p(o,i,null);if(null!=a&&a[s]){if("function"==typeof o)return p(o,null,s)}else e.createIndex(t,r,n,o)})};k.classMethod("ensureIndex",{callback:!0,promise:!0}),P.prototype.addChild=function(e){if(this.s.parentDb)return this.s.parentDb.addChild(e);this.s.children.push(e)},P.prototype.db=function(e,t){t=t||{};var r=N({},this.options,t);if(this.s.dbCache[e]&&!0!==r.returnNonCachedInstance)return this.s.dbCache[e];null!=r.noListener&&0!=r.noListener||(r.parentDb=this),r.promiseLibrary=this.s.promiseLibrary;var n=new P(e,this.s.topology,r);return null!=r.noListener&&0!=r.noListener||this.addChild(n),this.s.dbCache[e]=n,n},k.classMethod("db",{callback:!1,promise:!1,returns:[P]});var V=function(e,t,r,n,o){if(e.serverConfig&&e.serverConfig.isDestroyed())return o(new b("topology was destroyed"));!function(e,t,r,n,o){if("string"==typeof t&&null!=r&&"object"==typeof r&&(n=r,r=null),"function"==typeof n&&(o=n,n={}),null!=n.digestPassword)throw d("The digestPassword option is not supported via add_user. Please use db.command('createUser', ...) instead for this option.");var i=null!=n.customData?n.customData:{},s=Array.isArray(n.roles)?n.roles:[],a="number"==typeof n.maxTimeMS?n.maxTimeMS:null;0==s.length&&console.log("Creating a user without roles is deprecated in MongoDB >= 2.6");var l={writeCommand:!0};n.dbName&&(l.dbName=n.dbName),null!=a&&(l.maxTimeMS=a),"admin"!=e.databaseName.toLowerCase()&&"admin"!=n.dbName||Array.isArray(n.roles)?Array.isArray(n.roles)||(s=["dbOwner"]):s=["root"];var c={createUser:t,customData:i,roles:s,digestPassword:!1};c=Y(c,e,n);var u=O.createHash("md5");u.update(t+":mongo:"+r);var h=u.digest("hex");"string"==typeof r&&(c.pwd=h),l.readPreference=f.primary,e.command(c,l,function(e,r){return e&&0==e.ok&&null==e.code?p(o,{code:-5e3},null):e?p(o,e,null):void p(o,r.ok?null:d(r),r.ok?[{user:t,pwd:""}]:null)})}(e,t,r,n,function(i,s){if(i&&-5e3==i.code){var l=Y(a(n),e,n),c=O.createHash("md5");c.update(t+":mongo:"+r);var u=c.digest("hex"),h=(n.dbName?e.db(n.dbName):e).collection(P.SYSTEM_USER_COLLECTION);h.count({},function(e,r){if(null!=e)return p(o,e,null);h.find({user:t},{dbName:n.dbName}).toArray(function(e){if(null!=e)return p(o,e,null);l.upsert=!0,h.update({user:t},{$set:{user:t,pwd:u}},l,function(e){return 0==r&&e?p(o,null,[{user:t,pwd:u}]):e?p(o,e,null):void p(o,null,[{user:t,pwd:u}])})})})}else{if(i)return p(o,i);p(o,i,s)}})};P.prototype.addUser=function(e,t,r,n){var o=this,i=Array.prototype.slice.call(arguments,2);return"function"!=typeof(n=i.pop())&&i.push(n),r=i.length&&i.shift()||{},"function"==typeof n?V(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){V(o,e,t,r,function(e,t){if(e)return i(e);n(t)})})},k.classMethod("addUser",{callback:!0,promise:!0});var q=function(e,t,r,n){!function(e,t,r,n){if("function"==typeof r&&(n=r,r={}),e.serverConfig&&e.serverConfig.isDestroyed())return n(new b("topology was destroyed"));var o={writeCommand:!0};r.dbName&&(o.dbName=r.dbName);var i="number"==typeof r.maxTimeMS?r.maxTimeMS:null;null!=i&&(o.maxTimeMS=i);var s={dropUser:t};s=Y(s,e,r),o.readPreference=f.primary,e.command(s,o,function(e,t){return e&&!e.ok&&null==e.code?p(n,{code:-5e3}):e?p(n,e,null):void p(n,null,!!t.ok)})}(e,t,r,function(o,i){if(o&&-5e3==o.code){var s=Y(a(r),e,r),l=(r.dbName?e.db(r.dbName):e).collection(P.SYSTEM_USER_COLLECTION);l.findOne({user:t},{},function(e,r){if(null==r)return p(n,e,!1);l.remove({user:t},s,function(e){p(n,e,!0)})})}else{if(o)return p(n,o);p(n,o,i)}})};k.classMethod("removeUser",{callback:!0,promise:!0}),P.prototype.removeUser=function(e,t,r){var n=this,o=Array.prototype.slice.call(arguments,1);return"function"!=typeof(r=o.pop())&&o.push(r),t=o.length&&o.shift()||{},"function"==typeof r?q(n,e,t,r):new this.s.promiseLibrary(function(r,o){q(n,e,t,function(e,t){if(e)return o(e);r(t)})})},P.prototype.authenticate=function(e,t,r,n){return console.warn("Db.prototype.authenticate method will no longer be available in the next major release 3.x as MongoDB 3.6 will only allow auth against users in the admin db and will no longer allow multiple credentials on a socket. Please authenticate using MongoClient.connect with auth credentials."),o.apply(this,[this].concat(Array.prototype.slice.call(arguments)))},k.classMethod("authenticate",{callback:!0,promise:!0}),P.prototype.logout=function(e,t){var r=this;"function"==typeof e&&(t=e,e={}),e=e||{};var n=this.s.authSource?this.s.authSource:this.s.databaseName;return n=e.dbName?e.dbName:n,"function"==typeof t?r.s.topology.logout(n,function(e){if(e)return t(e);t(null,!0)}):new this.s.promiseLibrary(function(e,t){r.s.topology.logout(n,function(r){if(r)return t(r);e(!0)})})},k.classMethod("logout",{callback:!0,promise:!0}),P.prototype.indexInformation=function(e,t,r){var n=this;return"function"==typeof t&&(r=t,t={}),t=t||{},"function"==typeof r?H(n,e,t,r):new this.s.promiseLibrary(function(r,o){H(n,e,t,function(e,t){if(e)return o(e);r(t)})})};var H=function(e,t,r,n){var o=null!=r.full&&r.full;if(e.serverConfig&&e.serverConfig.isDestroyed())return n(new b("topology was destroyed"));e.collection(t).listIndexes(r).toArray(function(e,t){return e?n(d(e)):Array.isArray(t)?o?p(n,null,t):void p(n,null,function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];for(var o in t[n.name]=[],n.key)t[n.name].push([o,n.key[o]])}return t}(t)):p(n,null,[])})};k.classMethod("indexInformation",{callback:!0,promise:!0});var $=function(e,t,r,n){var o=l(r),i=o.fieldHash,s="string"==typeof n.name?n.name:o.name,a={ns:e.databaseName+"."+t,key:i,name:s},c=null!=n&&"object"!=typeof n&&n;n=null==n||"boolean"==typeof n?{}:n;var u=Object.keys(a);for(var p in n)-1==u.indexOf(p)&&(a[p]=n[p]);null==a.unique&&(a.unique=c);for(var h=["w","wtimeout","j","fsync","readPreference"],d=0;d<h.length;d++)delete a[h[d]];return a},W=function(e,t,r,n,o){var i=l(r),s="string"==typeof n.name?n.name:i.name,a=[{name:s,key:i.fieldHash}],c=Object.keys(a[0]);for(var u in n){-1==c.indexOf(u)&&(a[0][u]=n[u]);for(var h=["w","wtimeout","j","fsync","readPreference"],g=0;g<h.length;g++)delete a[0][h[g]]}var y=e.s.topology.capabilities();if(a[0].collation&&y&&!y.commandsTakeCollation){var v=new b(m("server/primary/mongos does not support collation"));return v.code=67,o(v)}var x=Y({createIndexes:t,indexes:a},e,n);M(x,e,n),n.readPreference=f.PRIMARY,e.command(x,n,function(e,t){return e?p(o,e,null):0==t.ok?p(o,d(t),null):void p(o,null,s)})},K=function(e){if("string"!=typeof e)throw b.create({message:"database name must be a string",driver:!0});if(0===e.length)throw b.create({message:"database name cannot be the empty string",driver:!0});if("$external"!=e)for(var t=[" ",".","$","/","\\"],r=0;r<t.length;r++)if(-1!=e.indexOf(t[r]))throw b.create({message:"database names cannot contain the character '"+t[r]+"'",driver:!0})},Y=function(e,t,r){if(null!=r.w||null!=r.j||null!=r.fsync){var n={};r.w&&(n.w=r.w),r.wtimeout&&(n.wtimeout=r.wtimeout),r.j&&(n.j=r.j),r.fsync&&(n.fsync=r.fsync),e.writeConcern=n}else null==t.writeConcern.w&&null==t.writeConcern.j&&null==t.writeConcern.fsync||(e.writeConcern=t.writeConcern);return e},G=function(e,t,r){return function(n){if(r.listeners(t).length>0){r.emit(t,n,e);for(var o=0;o<e.s.children.length;o++)e.s.children[o].emit(t,n,e.s.children[o])}}};P.prototype.unref=function(){this.s.topology.unref()},P.SYSTEM_NAMESPACE_COLLECTION="system.namespaces",P.SYSTEM_INDEX_COLLECTION="system.indexes",P.SYSTEM_PROFILE_COLLECTION="system.profile",P.SYSTEM_USER_COLLECTION="system.users",P.SYSTEM_COMMAND_COLLECTION="$cmd",P.SYSTEM_JS_COLLECTION="system.js",e.exports=P},112:function(e,t,r){var n=r(3).shallowClone,o=r(3).handleCallback,i=r(5).MongoError,s=r(4).format,a=function(e,t,r,n,a){if(e.serverConfig&&e.serverConfig.isDestroyed())return a(new i("topology was destroyed"));var l=n.dbName?n.dbName:e.databaseName;l=e.authSource?e.authSource:l,l=n.authdb?n.authdb:l,l=n.authSource?n.authSource:l;var c=function(t,r){e.listeners("authenticated").length>0&&e.emit("authenticated",t,r),o(a,t,r)},u=n.authMechanism||"";"MONGODB-CR"==(u=u.toUpperCase())?e.s.topology.auth("mongocr",l,t,r,function(e){if(e)return o(a,e,!1);c(null,!0)}):"PLAIN"==u?e.s.topology.auth("plain",l,t,r,function(e){if(e)return o(a,e,!1);c(null,!0)}):"MONGODB-X509"==u?e.s.topology.auth("x509",l,t,r,function(e){if(e)return o(a,e,!1);c(null,!0)}):"SCRAM-SHA-1"==u?e.s.topology.auth("scram-sha-1",l,t,r,function(e){if(e)return o(a,e,!1);c(null,!0)}):"GSSAPI"==u?"win32"==process.platform?e.s.topology.auth("sspi",l,t,r,n,function(e){if(e)return o(a,e,!1);c(null,!0)}):e.s.topology.auth("gssapi",l,t,r,n,function(e){if(e)return o(a,e,!1);c(null,!0)}):"DEFAULT"==u?e.s.topology.auth("default",l,t,r,function(e){if(e)return o(a,e,!1);c(null,!0)}):o(a,i.create({message:s("authentication mechanism %s not supported",n.authMechanism),driver:!0}))};e.exports=function(e,t,r,s,l){if("function"==typeof s&&(l=s,s={}),(s=n(s)).authMechanism){if("GSSAPI"!=s.authMechanism&&"DEFAULT"!=s.authMechanism&&"MONGODB-CR"!=s.authMechanism&&"MONGODB-X509"!=s.authMechanism&&"SCRAM-SHA-1"!=s.authMechanism&&"PLAIN"!=s.authMechanism)return o(l,i.create({message:"only DEFAULT, GSSAPI, PLAIN, MONGODB-X509, SCRAM-SHA-1 or MONGODB-CR is supported by authMechanism",driver:!0}))}else s.authMechanism="DEFAULT";return"function"==typeof l?a(e,t,r,s,function(e,t){if(e&&e.message&&-1!=e.message.indexOf("saslStart")&&(e.code=59),e)return l(e,t);l(null,t)}):new e.s.promiseLibrary(function(n,o){a(e,t,r,s,function(e,t){if(e&&e.message&&-1!=e.message.indexOf("saslStart")&&(e.code=59),e)return o(e);n(t)})})}},113:function(e){e.exports={_args:[["mongodb@2.2.36","/home/vsts/work/1/s"]],_from:"mongodb@2.2.36",_id:"mongodb@2.2.36",_inBundle:!1,_integrity:"sha512-P2SBLQ8Z0PVx71ngoXwo12+FiSfbNfGOClAao03/bant5DgLNkOPAck5IaJcEk4gKlQhDEURzfR3xuBG1/B+IA==",_location:"/mongodb",_phantomChildren:{"buffer-shims":"1.0.0","core-util-is":"1.0.2",inherits:"2.0.3",isarray:"1.0.0","safe-buffer":"5.1.2","util-deprecate":"1.0.2"},_requested:{type:"version",registry:!0,raw:"mongodb@2.2.36",name:"mongodb",escapedName:"mongodb",rawSpec:"2.2.36",saveSpec:null,fetchSpec:"2.2.36"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/mongodb/-/mongodb-2.2.36.tgz",_spec:"2.2.36",_where:"/home/vsts/work/1/s",author:{name:"Christian Kvalheim"},bugs:{url:"https://github.com/mongodb/node-mongodb-native/issues"},dependencies:{"es6-promise":"3.2.1","mongodb-core":"2.1.20","readable-stream":"2.2.7"},description:"The official MongoDB driver for Node.js",devDependencies:{JSONStream:"^1.0.7",betterbenchmarks:"^0.1.0",bluebird:"3.4.6",bson:"latest","cli-table":"^0.3.1",co:"4.6.0",colors:"^1.1.2","conventional-changelog-cli":"^1.3.5",coveralls:"^2.11.6",eslint:"^3.8.1","event-stream":"^3.3.2",gleak:"0.5.0",integra:"0.1.8",jsdoc:"3.4.0","ldjson-stream":"^1.2.1","mongodb-extended-json":"1.7.1","mongodb-topology-manager":"1.0.x","mongodb-version-manager":"github:christkv/mongodb-version-manager#master",nyc:"^8.1.0",optimist:"0.6.1",rimraf:"2.5.4",semver:"5.3.0","worker-farm":"^1.3.1"},engines:{node:">=0.10.3"},homepage:"https://github.com/mongodb/node-mongodb-native",keywords:["mongodb","driver","official"],license:"Apache-2.0",main:"index.js",name:"mongodb",nyc:{include:["lib/**/*.js"]},repository:{type:"git",url:"git+ssh://git@github.com/mongodb/node-mongodb-native.git"},scripts:{changelog:"conventional-changelog -p angular -i HISTORY.md -s",coverage:"nyc node test/runner.js -t functional && node_modules/.bin/nyc report --reporter=text-lcov | node_modules/.bin/coveralls",lint:"eslint lib",test:"node test/runner.js -t functional"},version:"2.2.36"}},116:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(23),s=r(0),a=r(13);let l=class CommonToken{constructor(e,t,r=CommonToken.EMPTY_SOURCE,n=a.Token.DEFAULT_CHANNEL,o=0,i=0){this._line=0,this._charPositionInLine=-1,this._channel=a.Token.DEFAULT_CHANNEL,this.index=-1,this._text=t,this._type=e,this.source=r,this._channel=n,this.start=o,this.stop=i,null!=r.source&&(this._line=r.source.line,this._charPositionInLine=r.source.charPositionInLine)}static fromToken(e){let t=new CommonToken(e.type,void 0,CommonToken.EMPTY_SOURCE,e.channel,e.startIndex,e.stopIndex);return t._line=e.line,t.index=e.tokenIndex,t._charPositionInLine=e.charPositionInLine,e instanceof CommonToken?(t._text=e.text,t.source=e.source):(t._text=e.text,t.source={source:e.tokenSource,stream:e.inputStream}),t}get type(){return this._type}set line(e){this._line=e}get text(){if(null!=this._text)return this._text;let e=this.inputStream;if(null==e)return;let t=e.size;return this.start<t&&this.stop<t?e.getText(i.Interval.of(this.start,this.stop)):"<EOF>"}set text(e){this._text=e}get line(){return this._line}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(e){this._charPositionInLine=e}get channel(){return this._channel}set channel(e){this._channel=e}set type(e){this._type=e}get startIndex(){return this.start}set startIndex(e){this.start=e}get stopIndex(){return this.stop}set stopIndex(e){this.stop=e}get tokenIndex(){return this.index}set tokenIndex(e){this.index=e}get tokenSource(){return this.source.source}get inputStream(){return this.source.stream}toString(e){let t="";this._channel>0&&(t=",channel="+this._channel);let r=this.text;r=null!=r?(r=(r=r.replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/\t/g,"\\t"):"<no text>";let n=String(this._type);return e&&(n=e.vocabulary.getDisplayName(this._type)),"[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+r+"',<"+n+">"+t+","+this._line+":"+this.charPositionInLine+"]"}};l.EMPTY_SOURCE={source:void 0,stream:void 0},n([s.NotNull],l.prototype,"source",void 0),n([s.Override],l.prototype,"type",null),n([s.Override],l.prototype,"text",null),n([s.Override],l.prototype,"line",null),n([s.Override],l.prototype,"charPositionInLine",null),n([s.Override],l.prototype,"channel",null),n([s.Override],l.prototype,"startIndex",null),n([s.Override],l.prototype,"stopIndex",null),n([s.Override],l.prototype,"tokenIndex",null),n([s.Override],l.prototype,"tokenSource",null),n([s.Override],l.prototype,"inputStream",null),n([s.Override],l.prototype,"toString",null),n([o(0,s.NotNull)],l,"fromToken",null),l=n([o(2,s.NotNull)],l),t.CommonToken=l},117:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(118),i=r(0),s=new Int32Array(0),a=4,l=2147483639;class IntegerList{constructor(e){if(e)if(e instanceof IntegerList)this._data=e._data.slice(0),this._size=e._size;else if("number"==typeof e)0===e?(this._data=s,this._size=0):(this._data=new Int32Array(e),this._size=0);else{this._data=s,this._size=0;for(let t of e)this.add(t)}else this._data=s,this._size=0}add(e){this._data.length===this._size&&this.ensureCapacity(this._size+1),this._data[this._size]=e,this._size++}addAll(e){if(Array.isArray(e))this.ensureCapacity(this._size+e.length),this._data.subarray(this._size,this._size+e.length).set(e),this._size+=e.length;else if(e instanceof IntegerList)this.ensureCapacity(this._size+e._size),this._data.subarray(this._size,this._size+e.size).set(e._data),this._size+=e._size;else{this.ensureCapacity(this._size+e.size);let t=0;for(let r=e.iterator();r.hasNext();)this._data[this._size+t]=r.next(),t++;this._size+=e.size}}get(e){if(e<0||e>=this._size)throw RangeError();return this._data[e]}contains(e){for(let t=0;t<this._size;t++)if(this._data[t]===e)return!0;return!1}set(e,t){if(e<0||e>=this._size)throw RangeError();let r=this._data[e];return this._data[e]=t,r}removeAt(e){let t=this.get(e);return this._data.copyWithin(e,e+1,this._size),this._data[this._size-1]=0,this._size--,t}removeRange(e,t){if(e<0||t<0||e>this._size||t>this._size)throw RangeError();if(e>t)throw RangeError();this._data.copyWithin(t,e,this._size),this._data.fill(0,this._size-(t-e),this._size),this._size-=t-e}get isEmpty(){return 0===this._size}get size(){return this._size}trimToSize(){this._data.length!==this._size&&(this._data=this._data.slice(0,this._size))}clear(){this._data.fill(0,0,this._size),this._size=0}toArray(){return 0===this._size?[]:Array.from(this._data.subarray(0,this._size))}sort(){this._data.subarray(0,this._size).sort()}equals(e){if(e===this)return!0;if(!(e instanceof IntegerList))return!1;if(this._size!==e._size)return!1;for(let t=0;t<this._size;t++)if(this._data[t]!==e._data[t])return!1;return!0}hashCode(){let e=1;for(let t=0;t<this._size;t++)e=31*e+this._data[t];return e}toString(){return this._data.toString()}binarySearch(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=this._size),t<0||r<0||t>this._size||r>this._size)throw new RangeError;if(t>r)throw new RangeError;return o.Arrays.binarySearch(this._data,e,t,r)}ensureCapacity(e){if(e<0||e>l)throw new RangeError;let t;for(t=0===this._data.length?a:this._data.length;t<e;)((t*=2)<0||t>l)&&(t=l);let r=new Int32Array(t);r.set(this._data),this._data=r}}n([i.NotNull],IntegerList.prototype,"_data",void 0),n([i.Override],IntegerList.prototype,"equals",null),n([i.Override],IntegerList.prototype,"hashCode",null),n([i.Override],IntegerList.prototype,"toString",null),t.IntegerList=IntegerList},118:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.binarySearch=function(e,t,r,n){return function(e,t,r,n){let o=t,i=r-1;for(;o<=i;){let t=o+i>>>1,r=e[t];if(r<n)o=t+1;else{if(!(r>n))return t;i=t-1}}return-(o+1)}(e,void 0!==r?r:0,void 0!==n?n:e.length,t)},e.toString=function(e){let t="[",r=!0;for(let n=0;n<e.length;n++){r?r=!1:t+=", ";let o=e[n];t+=null===o?"null":void 0===o?"undefined":o}return t+="]"}}(t.Arrays||(t.Arrays={}))},119:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(60),i=r(0),s=r(29),a=r(24),l=r(9);class PredictionContextCache{constructor(e=!0){this.contexts=new o.Array2DHashMap(s.ObjectEqualityComparator.INSTANCE),this.childContexts=new o.Array2DHashMap(s.ObjectEqualityComparator.INSTANCE),this.joinContexts=new o.Array2DHashMap(s.ObjectEqualityComparator.INSTANCE),this.enableCache=e}getAsCached(e){if(!this.enableCache)return e;let t=this.contexts.get(e);return t||(t=e,this.contexts.put(e,e)),t}getChild(e,t){if(!this.enableCache)return e.getChild(t);let r=new PredictionContextCache.PredictionContextAndInt(e,t),n=this.childContexts.get(r);return n||(n=e.getChild(t),n=this.getAsCached(n),this.childContexts.put(r,n)),n}join(e,t){if(!this.enableCache)return a.PredictionContext.join(e,t,this);let r=new PredictionContextCache.IdentityCommutativePredictionContextOperands(e,t),n=this.joinContexts.get(r);return n||(n=a.PredictionContext.join(e,t,this),n=this.getAsCached(n),this.joinContexts.put(r,n),n)}}PredictionContextCache.UNCACHED=new PredictionContextCache(!1),t.PredictionContextCache=PredictionContextCache,function(e){class PredictionContextAndInt{constructor(e,t){this.obj=e,this.value=t}equals(e){if(!(e instanceof PredictionContextAndInt))return!1;if(e==this)return!0;let t=e;return this.value===t.value&&(this.obj===t.obj||null!=this.obj&&this.obj.equals(t.obj))}hashCode(){let e=5;return e=7*(e=7*e+(null!=this.obj?this.obj.hashCode():0))+this.value}}n([i.Override],PredictionContextAndInt.prototype,"equals",null),n([i.Override],PredictionContextAndInt.prototype,"hashCode",null),e.PredictionContextAndInt=PredictionContextAndInt;class IdentityCommutativePredictionContextOperands{constructor(e,t){l(null!=e),l(null!=t),this._x=e,this._y=t}get x(){return this._x}get y(){return this._y}equals(e){if(!(e instanceof IdentityCommutativePredictionContextOperands))return!1;if(this===e)return!0;let t=e;return this._x===t._x&&this._y===t._y||this._x===t._y&&this._y===t._x}hashCode(){return this._x.hashCode()^this._y.hashCode()}}n([i.Override],IdentityCommutativePredictionContextOperands.prototype,"equals",null),n([i.Override],IdentityCommutativePredictionContextOperands.prototype,"hashCode",null),e.IdentityCommutativePredictionContextOperands=IdentityCommutativePredictionContextOperands}(PredictionContextCache=t.PredictionContextCache||(t.PredictionContextCache={}))},120:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(72),s=r(93),a=r(0),l=r(24);let c=class ATNSimulator{constructor(e){this.atn=e}static get ERROR(){return ATNSimulator._ERROR||(ATNSimulator._ERROR=new s.DFAState(new i.ATNConfigSet),ATNSimulator._ERROR.stateNumber=l.PredictionContext.EMPTY_FULL_STATE_KEY),ATNSimulator._ERROR}clearDFA(){this.atn.clearDFA()}};n([a.NotNull],c.prototype,"atn",void 0),n([a.NotNull],c,"ERROR",null),c=n([o(0,a.NotNull)],c),t.ATNSimulator=c,c=t.ATNSimulator||(t.ATNSimulator={}),t.ATNSimulator=c},121:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(43);t.AbstractPredicateTransition=class AbstractPredicateTransition extends n.Transition{constructor(e){super(e)}}},1216:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(340),o=r(1221);let i=n.createConnection();console.log=i.console.log.bind(i.console),console.error=i.console.error.bind(i.console),new o.LanguageService(i),i.listen()},1217:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(222),o=r(593);t.ConfigurationFeature=(e=>(class extends e{getConfiguration(e){return e?o.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(n.ConfigurationRequest.type,t).then(t=>Array.isArray(e)?t:t[0])}}))},1218:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(222);t.WorkspaceFoldersFeature=(e=>(class extends e{initialize(e){let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new n.Emitter,this.connection.onNotification(n.DidChangeWorkspaceFoldersNotification.type,e=>{this._onDidChangeWorkspaceFolders.fire(e.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(n.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(n.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}}))},1219:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class ValueUUID{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class V4UUID extends ValueUUID{constructor(){super([V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-","4",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._oneOf(V4UUID._timeHighBits),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return V4UUID._oneOf(V4UUID._chars)}}function n(){return new V4UUID}V4UUID._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],V4UUID._timeHighBits=["8","9","a","b"],t.empty=new ValueUUID("00000000-0000-0000-0000-000000000000"),t.v4=n;const o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function i(e){return o.test(e)}t.isUUID=i,t.parse=function(e){if(!i(e))throw new Error("invalid uuid");return new ValueUUID(e)},t.generateUuid=function(){return n().asHex()}},122:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),s=r(123);let a=class NotSetTransition extends s.SetTransition{constructor(e,t){super(e,t)}get serializationType(){return 8}matches(e,t,r){return e>=t&&e<=r&&!super.matches(e,t,r)}toString(){return"~"+super.toString()}};n([i.Override],a.prototype,"serializationType",null),n([i.Override],a.prototype,"matches",null),n([i.Override],a.prototype,"toString",null),a=n([o(0,i.NotNull),o(1,i.Nullable)],a),t.NotSetTransition=a},1220:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(17),o=r(7);r(34),r(146);t.uriToFilePath=function(e){let t=n.parse(e);if("file:"!==t.protocol||!t.path)return;let r=t.path.split("/");for(var i=0,s=r.length;i<s;i++)r[i]=decodeURIComponent(r[i]);if("win32"===process.platform&&r.length>1){let e=r[0],t=r[1];0===e.length&&t.length>1&&":"===t[1]&&r.shift()}return o.normalize(r.join("/"))},t.resolveModule=function(e,t){throw new Error("Not implemented")},t.resolve=function(e,t,r,n){throw new Error("Not implemented")},t.resolveGlobalNodePath=function(e){throw new Error("Not implemented")},t.resolveGlobalYarnPath=function(e){throw new Error("Not implemented")},t.resolveModulePath=function(e,t,r,n){throw new Error("Not implemented")},t.resolveModule2=function(e,t,r,n){throw new Error("Not implemented")}},1221:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1225),o=r(340),i=r(135),s=r(1222),a=r(1224);t.LanguageService=class LanguageService{constructor(e){this.textDocuments=new o.TextDocuments,this.schemaService=new a.SchemaService,this.textDocuments.listen(e),e.onInitialize(e=>({capabilities:{textDocumentSync:this.textDocuments.syncKind,completionProvider:{triggerCharacters:["."]}}})),e.onCompletion(e=>this.provideCompletionItems(e)),e.onRequest("connect",e=>{i.connectToMongoClient(e.connectionString,e.extensionUserAgent).then(t=>{this.db=t.db(e.databaseName),this.schemaService.registerSchemas(this.db).then(e=>{this.configureSchemas(e)})})}),e.onRequest("disconnect",()=>{this.db=null;for(const e of this.schemas)this.jsonLanguageService.resetSchema(e.uri)}),this.jsonLanguageService=n.getLanguageService({schemaRequestService:e=>this.schemaService.resolveSchema(e),contributions:[]}),this.mongoDocumentsManager=new s.MongoScriptDocumentManager(this.schemaService,this.jsonLanguageService)}provideCompletionItems(e){const t=this.textDocuments.get(e.textDocument.uri);return this.mongoDocumentsManager.getDocument(t,this.db).provideCompletionItemsAt(e.position)}resetSchema(e){this.jsonLanguageService.resetSchema(e)}configureSchemas(e){this.jsonLanguageService.configure({schemas:e})}}},1222:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(299),o=r(300),i=r(23),s=r(63),a=r(83),l=r(219),c=r(220),u=r(221),p=r(1223);t.MongoScriptDocumentManager=class MongoScriptDocumentManager{constructor(e,t){this.schemaService=e,this.jsonLanguageService=t}getDocument(e,t){return new MongoScriptDocument(e,t,this.schemaService,this.jsonLanguageService)}};class MongoScriptDocument{constructor(e,t,r,o){this.textDocument=e,this.db=t,this.schemaService=r,this.jsonLanguageService=o,this._lexer=new l.mongoLexer(new n.ANTLRInputStream(e.getText())),this._lexer.removeErrorListeners()}provideCompletionItemsAt(e){const t=new c.mongoParser(new o.CommonTokenStream(this._lexer));t.removeErrorListeners();const r=this.textDocument.offsetAt(e),n=new NodeFinder(r).visit(t.commands());return n?new p.CompletionItemsVisitor(this.textDocument,this.db,r,this.schemaService,this.jsonLanguageService).visit(n):Promise.resolve([])}}t.MongoScriptDocument=MongoScriptDocument;class NodeFinder extends u.MongoVisitor{constructor(e){super(),this.offset=e}defaultResult(e){if(e instanceof s.ParserRuleContext){return(e.stop?e.stop.stopIndex:e.start.stopIndex)<this.offset?e:null}return e instanceof a.TerminalNode&&e.symbol.stopIndex<this.offset?e:null}aggregateResult(e,t){if(e&&t){const r=e instanceof s.ParserRuleContext?e.start.startIndex:e.symbol.startIndex,n=e instanceof s.ParserRuleContext?e.start.stopIndex:e.symbol.stopIndex,o=t instanceof s.ParserRuleContext?t.start.startIndex:t.symbol.startIndex,a=t instanceof s.ParserRuleContext?t.start.stopIndex:t.symbol.stopIndex;return i.Interval.of(r,n).properlyContains(i.Interval.of(o,a))?e:t}return t||e}}},1223:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(63),o=r(125),i=r(83),s=r(340),a=r(219),l=r(220),c=r(221);t.CompletionItemsVisitor=class CompletionItemsVisitor extends c.MongoVisitor{constructor(e,t,r,n,o){super(),this.textDocument=e,this.db=t,this.offset=r,this.schemaService=n,this.jsonLanguageService=o,this.at=this.textDocument.positionAt(this.offset)}visitCommands(e){return this.thenable(this.createDbKeywordCompletion(this.createRange(e)))}visitEmptyCommand(e){return this.thenable(this.createDbKeywordCompletion(this.createRangeAfter(e)))}visitCommand(e){if(0===e.childCount)return this.thenable(this.createDbKeywordCompletion(this.createRange(e)));const t=this.getLastTerminalNode(e);return t?this.getCompletionItemsFromTerminalNode(t):this.thenable()}visitCollection(e){return Promise.all([this.createCollectionCompletions(this.createRange(e)),this.createDbFunctionCompletions(this.createRange(e))]).then(([e,t])=>[...e,...t])}visitFunctionCall(e){const t=this.getPreviousNode(e);return t instanceof i.TerminalNode?this.getCompletionItemsFromTerminalNode(t):this.thenable()}visitArguments(e){const t=this.getLastTerminalNode(e);return t&&t.symbol===e._CLOSED_PARENTHESIS?this.thenable(this.createDbKeywordCompletion(this.createRangeAfter(t))):this.thenable()}visitArgument(e){return e.parent.accept(this)}visitObjectLiteral(e){let t=this.getFunctionName(e),r=this.getCollectionName(e);return r&&t&&-1!==["find","findOne","findOneAndDelete","findOneAndUpdate","findOneAndReplace","deleteOne","deleteMany","remove"].indexOf(t)?this.getArgumentCompletionItems(this.schemaService.queryDocumentUri(r),r,e):e.parent.accept(this)}visitArrayLiteral(e){let t=this.getFunctionName(e),r=this.getCollectionName(e);return r&&t&&-1!==["aggregate"].indexOf(t)?this.getArgumentCompletionItems(this.schemaService.aggregateDocumentUri(r),r,e):e.parent.accept(this)}getArgumentCompletionItems(e,t,r){const n=this.textDocument.getText(),o=s.TextDocument.create(e,"json",1,n.substring(r.start.startIndex,r.stop.stopIndex+1)),i=this.textDocument.offsetAt(this.at),a=r.start.startIndex,l=o.positionAt(i-a);return this.jsonLanguageService.doComplete(o,l,this.jsonLanguageService.parseJSONDocument(o)).then(e=>e.items.map(e=>{const t=o.offsetAt(e.textEdit.range.start),r=o.offsetAt(e.textEdit.range.end);return e.textEdit.range=s.Range.create(this.textDocument.positionAt(t+a),this.textDocument.positionAt(a+r)),e}))}getFunctionName(e){let t=e.parent;return t&&t instanceof l.ArgumentContext&&(t=t.parent)&&t instanceof l.ArgumentsContext&&(t=t.parent)&&t instanceof l.FunctionCallContext?t._FUNCTION_NAME.text:null}getCollectionName(e){let t=e.parent;if(!(t&&t instanceof l.ArgumentContext))return null;if(!((t=t.parent)&&t instanceof l.ArgumentsContext))return null;if(!((t=t.parent)&&t instanceof l.FunctionCallContext))return null;let r=this.getPreviousNode(t);return r&&r instanceof i.TerminalNode&&r.symbol.type===a.mongoLexer.DOT&&(r=this.getPreviousNode(r))&&r instanceof l.CollectionContext?r.text:null}visitElementList(e){return e.parent.accept(this)}visitPropertyNameAndValueList(e){return e.parent.accept(this)}visitPropertyAssignment(e){return e.parent.accept(this)}visitPropertyValue(e){return e.parent.accept(this)}visitPropertyName(e){return e.parent.accept(this)}visitLiteral(e){return e.parent.accept(this)}visitTerminal(e){return e.parent.accept(this)}visitErrorNode(e){return e.parent.accept(this)}getCompletionItemsFromTerminalNode(e){if(e._symbol.type===l.mongoParser.DB)return this.thenable(this.createDbKeywordCompletion(this.createRange(e)));if(e._symbol.type===l.mongoParser.SEMICOLON)return this.thenable(this.createDbKeywordCompletion(this.createRangeAfter(e)));if(e._symbol.type===l.mongoParser.DOT){const t=this.getPreviousNode(e);if(t&&t instanceof i.TerminalNode&&t._symbol.type===l.mongoParser.DB)return Promise.all([this.createCollectionCompletions(this.createRangeAfter(e)),this.createDbFunctionCompletions(this.createRangeAfter(e))]).then(([e,t])=>[...e,...t]);if(t instanceof l.CollectionContext)return this.createCollectionFunctionsCompletions(this.createRangeAfter(e))}if(e instanceof o.ErrorNode){const t=this.getPreviousNode(e);if(t)return t instanceof i.TerminalNode?this.getCompletionItemsFromTerminalNode(t):t.accept(this)}return this.thenable()}getLastTerminalNode(e){return e.children?e.children.slice().reverse().filter(e=>e instanceof i.TerminalNode&&e.symbol.stopIndex>-1&&e.symbol.stopIndex<this.offset)[0]:null}getPreviousNode(e){let t=null;const r=e.parent;for(let n=0;n<r.childCount;n++){const o=r.getChild(n);if(o===e)break;t=o}return t}createDbKeywordCompletion(e){return{textEdit:{newText:"db",range:e},kind:s.CompletionItemKind.Keyword,label:"db"}}createDbFunctionCompletions(e){return this.thenable(this.createFunctionCompletion("adminCommand",e),this.createFunctionCompletion("auth",e),this.createFunctionCompletion("cloneDatabase",e),this.createFunctionCompletion("commandHelp",e),this.createFunctionCompletion("copyDatabase",e),this.createFunctionCompletion("createCollection",e),this.createFunctionCompletion("createView",e),this.createFunctionCompletion("createUser",e),this.createFunctionCompletion("currentOp",e),this.createFunctionCompletion("dropDatabase",e),this.createFunctionCompletion("eval",e),this.createFunctionCompletion("fsyncLock",e),this.createFunctionCompletion("fsyncUnLock",e),this.createFunctionCompletion("getCollection",e),this.createFunctionCompletion("getCollectionInfos",e),this.createFunctionCompletion("getCollectionNames",e),this.createFunctionCompletion("getLastError",e),this.createFunctionCompletion("getLastErrorObj",e),this.createFunctionCompletion("getLogComponents",e),this.createFunctionCompletion("getMongo",e),this.createFunctionCompletion("getName",e),this.createFunctionCompletion("getPrevError",e),this.createFunctionCompletion("getProfilingLevel",e),this.createFunctionCompletion("getProfilingStatus",e),this.createFunctionCompletion("getReplicationInfo",e),this.createFunctionCompletion("getSiblingDB",e),this.createFunctionCompletion("getWriteConcern",e),this.createFunctionCompletion("hostInfo",e),this.createFunctionCompletion("isMaster",e),this.createFunctionCompletion("killOp",e),this.createFunctionCompletion("listCommands",e),this.createFunctionCompletion("loadServerScripts",e),this.createFunctionCompletion("logout",e),this.createFunctionCompletion("printCollectionStats",e),this.createFunctionCompletion("printReplicationInfo",e),this.createFunctionCompletion("printShardingStatus",e),this.createFunctionCompletion("printSlaveReplicationInfo",e),this.createFunctionCompletion("dropUser",e),this.createFunctionCompletion("repairDatabase",e),this.createFunctionCompletion("runCommand",e),this.createFunctionCompletion("serverStatus",e),this.createFunctionCompletion("setLogLevel",e),this.createFunctionCompletion("setProfilingLevel",e),this.createFunctionCompletion("setWriteConcern",e),this.createFunctionCompletion("unsetWriteConcern",e),this.createFunctionCompletion("setVerboseShell",e),this.createFunctionCompletion("shotdownServer",e),this.createFunctionCompletion("stats",e),this.createFunctionCompletion("version",e))}createCollectionCompletions(e){return this.db?this.db.collections().then(t=>t.map(t=>({textEdit:{newText:t.collectionName,range:e},label:t.collectionName,kind:s.CompletionItemKind.Property,filterText:t.collectionName,sortText:`1:${t.collectionName}`}))):Promise.resolve([])}createCollectionFunctionsCompletions(e){return this.thenable(this.createFunctionCompletion("bulkWrite",e),this.createFunctionCompletion("count",e),this.createFunctionCompletion("copyTo",e),this.createFunctionCompletion("convertToCapped",e),this.createFunctionCompletion("createIndex",e),this.createFunctionCompletion("createIndexes",e),this.createFunctionCompletion("dataSize",e),this.createFunctionCompletion("deleteOne",e),this.createFunctionCompletion("deleteMany",e),this.createFunctionCompletion("distinct",e),this.createFunctionCompletion("drop",e),this.createFunctionCompletion("dropIndex",e),this.createFunctionCompletion("dropIndexes",e),this.createFunctionCompletion("ensureIndex",e),this.createFunctionCompletion("explain",e),this.createFunctionCompletion("reIndex",e),this.createFunctionCompletion("find",e),this.createFunctionCompletion("findOne",e),this.createFunctionCompletion("findOneAndDelete",e),this.createFunctionCompletion("findOneAndReplace",e),this.createFunctionCompletion("findOneAndUpdate",e),this.createFunctionCompletion("getDB",e),this.createFunctionCompletion("getPlanCache",e),this.createFunctionCompletion("getIndexes",e),this.createFunctionCompletion("group",e),this.createFunctionCompletion("insert",e),this.createFunctionCompletion("insertOne",e),this.createFunctionCompletion("insertMany",e),this.createFunctionCompletion("mapReduce",e),this.createFunctionCompletion("aggregate",e),this.createFunctionCompletion("remove",e),this.createFunctionCompletion("replaceOne",e),this.createFunctionCompletion("renameCollection",e),this.createFunctionCompletion("runCommand",e),this.createFunctionCompletion("save",e),this.createFunctionCompletion("stats",e),this.createFunctionCompletion("storageSize",e),this.createFunctionCompletion("totalIndexSize",e),this.createFunctionCompletion("update",e),this.createFunctionCompletion("updateOne",e),this.createFunctionCompletion("updateMany",e),this.createFunctionCompletion("validate",e),this.createFunctionCompletion("getShardVersion",e),this.createFunctionCompletion("getShardDistribution",e),this.createFunctionCompletion("getSplitKeysForChunks",e),this.createFunctionCompletion("getWriteConcern",e),this.createFunctionCompletion("setWriteConcern",e),this.createFunctionCompletion("unsetWriteConcern",e),this.createFunctionCompletion("latencyStats",e))}createFunctionCompletion(e,t){return{textEdit:{newText:e,range:t},kind:s.CompletionItemKind.Function,label:e,sortText:`2:${e}`}}createRange(e){if(e instanceof n.ParserRuleContext){let t=e.start,r=e.stop;r&&t.type!==l.mongoParser.EOF||(r=t);let n=r.stopIndex;return this._createRange(t.startIndex,n)}return e instanceof i.TerminalNode?this._createRange(e.symbol.startIndex,e.symbol.stopIndex):null}createRangeAfter(e){if(e instanceof n.ParserRuleContext){let t=e.stop;t||(t=e.start);let r=t.stopIndex;return this._createRange(r+1,r+1)}return e instanceof i.TerminalNode?this._createRange(e.symbol.stopIndex+1,e.symbol.stopIndex+1):null}_createRange(e,t){const r=this.textDocument.positionAt(t);if(r.line<this.at.line)return s.Range.create(s.Position.create(this.at.line,0),this.at);const n=this.textDocument.positionAt(e);return s.Range.create(n,r)}thenable(...e){return Promise.resolve(e||[])}}},1224:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SchemaService=class SchemaService{constructor(){this._schemasCache=new Map}registerSchemas(e){return this._db=e,this._schemasCache.clear(),this._db.collections().then(e=>{const t=[];for(const r of e)t.push({uri:this.queryCollectionSchema(r.collectionName),fileMatch:[this.queryDocumentUri(r.collectionName)]},{uri:this.aggregateCollectionSchema(r.collectionName),fileMatch:[this.aggregateDocumentUri(r.collectionName)]});return t})}queryCollectionSchema(e){return"mongo://query/"+e+".schema"}aggregateCollectionSchema(e){return"mongo://aggregate/"+e+".schema"}queryDocumentUri(e){return"mongo://query/"+e+".json"}aggregateDocumentUri(e){return"mongo://aggregate/"+e+".json"}resolveSchema(e){const t=this._schemasCache.get(e);return t?Promise.resolve(t):e.startsWith("mongo://query/")?this._resolveQueryCollectionSchema(e.substring("mongo://query/".length,e.length-".schema".length),e).then(t=>(this._schemasCache.set(e,t),t)):e.startsWith("mongo://aggregate/")?this._resolveAggregateCollectionSchema(e.substring("mongo://aggregate/".length,e.length-".schema".length)).then(t=>(this._schemasCache.set(e,t),t)):Promise.resolve("")}_resolveQueryCollectionSchema(e,t){const r=this._db.collection(e).find();return new Promise((e,n)=>{this.readNext([],r,10,r=>{const n={type:"object",properties:{}};for(const e of r)this.setSchemaForDocument(null,e,n);this.setGlobalOperatorProperties(n),this.setLogicalOperatorProperties(n,t),e(JSON.stringify(n))})})}_resolveAggregateCollectionSchema(e){const t=this._db.collection(e).find();return new Promise((r,n)=>{this.readNext([],t,10,t=>{const n={type:"array",items:this.getAggregateStagePropertiesSchema(this.queryCollectionSchema(e))};r(JSON.stringify(n))})})}setSchemaForDocument(e,t,r){if("object"==(Array.isArray(t)?"array":typeof t))for(const n of Object.keys(t))(e||-1===["_id"].indexOf(n))&&this.setSchemaForDocumentProperty(e,n,t,r)}setSchemaForDocumentProperty(e,t,r,n){const o=e?`${e}.${t}`:t,i=r[t],s=Array.isArray(i)?"array":typeof i,a={type:[s,"object"]};if(this.setOperatorProperties(s,a),n.properties[o]=a,"object"===s&&this.setSchemaForDocument(o,i,n),"array"===s)for(const e of i)this.setSchemaForDocument(o,e,n)}setGlobalOperatorProperties(e){e.properties.$text={type:"object",description:"Performs text search",properties:{$search:{type:"string",description:"A string of terms that MongoDB parses and uses to query the text index. MongoDB performs a logical OR search of the terms unless specified as a phrase"},$language:{type:"string",description:'Optional. The language that determines the list of stop words for the search and the rules for the stemmer and tokenizer. If not specified, the search uses the default language of the index.\nIf you specify a language value of "none", then the text search uses simple tokenization with no list of stop words and no stemming'},$caseSensitive:{type:"boolean",description:"Optional. A boolean flag to enable or disable case sensitive search. Defaults to false; i.e. the search defers to the case insensitivity of the text index"},$diacriticSensitive:{type:"boolean",description:"Optional. A boolean flag to enable or disable diacritic sensitive search against version 3 text indexes.Defaults to false; i.e.the search defers to the diacritic insensitivity of the text index\nText searches against earlier versions of the text index are inherently diacritic sensitive and cannot be diacritic insensitive. As such, the $diacriticSensitive option has no effect with earlier versions of the text index"}},required:["$search"]},e.properties.$where={type:"string",description:"Matches documents that satisfy a JavaScript expression.\nUse the $where operator to pass either a string containing a JavaScript expression or a full JavaScript function to the query system"},e.properties.$comment={type:"string",description:"Adds a comment to a query predicate"}}setLogicalOperatorProperties(e,t){e.properties.$or={type:"array",description:"Joins query clauses with a logical OR returns all documents that match the conditions of either clause",items:{$ref:t}},e.properties.$and={type:"array",description:"Joins query clauses with a logical AND returns all documents that match the conditions of both clauses",items:{$ref:t}},e.properties.$nor={type:"array",description:"Joins query clauses with a logical NOR returns all documents that fail to match both clauses",items:{$ref:t}}}setOperatorProperties(e,t){t.properties||(t.properties={});const r={properties:{}};r.properties.$eq={type:e,description:"Matches values that are equal to a specified value"},r.properties.$gt={type:e,description:"Matches values that are greater than a specified value"},r.properties.$gte={type:e,description:"Matches values that are greater than or equal to a specified value"},r.properties.$lt={type:e,description:"Matches values that are less than a specified value"},r.properties.$lte={type:e,description:"Matches values that are less than or equal to a specified value"},r.properties.$ne={type:e,description:"Matches all values that are not equal to a specified value"},r.properties.$in={type:"array",description:"Matches any of the values specified in an array"},r.properties.$nin={type:"array",description:"Matches none of the values specified in an array"},r.properties.$exists={type:"boolean",description:"Matches documents that have the specified field"},r.properties.$type={type:"string",description:"Selects documents if a field is of the specified type"},r.properties.$mod={type:"array",description:"Performs a modulo operation on the value of a field and selects documents with a specified result",maxItems:2,default:[2,0]},r.properties.$regex={type:"string",description:"Selects documents where values match a specified regular expression"};const n={type:"object",properties:{type:{type:"string",default:"GeoJSON object type"},coordinates:{type:"array"},crs:{type:"object",properties:{type:{type:"string"},properties:{type:"object"}}}}};r.properties.$geoWithin={type:"object",description:"Selects geometries within a bounding GeoJSON geometry. The 2dsphere and 2d indexes support $geoWithin",properties:{$geometry:n,$box:{type:"array"},$polygon:{type:"array"},$center:{type:"array"},$centerSphere:{type:"array"}}},r.properties.$geoIntersects={type:"object",description:"Selects geometries that intersect with a GeoJSON geometry. The 2dsphere index supports $geoIntersects",properties:{$geometry:n}},r.properties.$near={type:"object",description:"Returns geospatial objects in proximity to a point. Requires a geospatial index. The 2dsphere and 2d indexes support $near",properties:{$geometry:n,$maxDistance:{type:"number"},$minDistance:{type:"number"}}},r.properties.$nearSphere={type:"object",description:"Returns geospatial objects in proximity to a point. Requires a geospatial index. The 2dsphere and 2d indexes support $near",properties:{$geometry:n,$maxDistance:{type:"number"},$minDistance:{type:"number"}}},"array"===e&&(r.properties.$all={type:"array",description:"Matches arrays that contain all elements specified in the query"},r.properties.$size={type:"number",description:"Selects documents if the array field is a specified size"}),r.properties.$bitsAllSet={type:"array",description:"Matches numeric or binary values in which a set of bit positions all have a value of 1"},r.properties.$bitsAnySet={type:"array",description:"Matches numeric or binary values in which any bit from a set of bit positions has a value of 1"},r.properties.$bitsAllClear={type:"array",description:"Matches numeric or binary values in which a set of bit positions all have a value of 0"},r.properties.$bitsAnyClear={type:"array",description:"Matches numeric or binary values in which any bit from a set of bit positions has a value of 0"},t.properties=Object.assign({},r.properties),t.properties.$not={type:"object",description:"Inverts the effect of a query expression and returns documents that do not match the query expression",properties:Object.assign({},r.properties)},t.properties.$elemMatch={type:"object"}}getAggregateStagePropertiesSchema(e){const t=[];return t.push({type:"object",properties:{$collStats:{type:"object",description:"\tReturns statistics regarding a collection or view"}}}),t.push({type:"object",properties:{$project:{type:"object",description:"Reshapes each document in the stream, such as by adding new fields or removing existing fields. For each input document, outputs one document"}}}),t.push({type:"object",properties:{$match:{type:"object",description:"Filters the document stream to allow only matching documents to pass unmodified into the next pipeline stage. $match uses standard MongoDB queries. For each input document, outputs either one document (a match) or zero documents (no match)",$ref:e}}}),t.push({type:"object",properties:{$redact:{type:"object",description:"Reshapes each document in the stream by restricting the content for each document based on information stored in the documents themselves. Incorporates the functionality of $project and $match. Can be used to implement field level redaction. For each input document, outputs either one or zero documents"}}}),t.push({type:"object",properties:{$limit:{type:"object",description:"Passes the first n documents unmodified to the pipeline where n is the specified limit. For each input document, outputs either one document (for the first n documents) or zero documents (after the first n documents)."}}}),t.push({type:"object",properties:{$skip:{type:"object",description:"Skips the first n documents where n is the specified skip number and passes the remaining documents unmodified to the pipeline. For each input document, outputs either zero documents (for the first n documents) or one document (if after the first n documents)"}}}),t.push({type:"object",properties:{$unwind:{type:"object",description:"Deconstructs an array field from the input documents to output a document for each element. Each output document replaces the array with an element value. For each input document, outputs n documents where n is the number of array elements and can be zero for an empty array"}}}),t.push({type:"object",properties:{$group:{type:"object",description:"Groups input documents by a specified identifier expression and applies the accumulator expression(s), if specified, to each group. Consumes all input documents and outputs one document per each distinct group. The output documents only contain the identifier field and, if specified, accumulated fields.",properties:{_id:{type:["string","object"]}},additionalProperties:{type:"object"}}}}),t.push({type:"object",properties:{$sample:{type:"object",description:"Randomly selects the specified number of documents from its input"}}}),t.push({type:"object",properties:{$sort:{type:"object",description:"Reorders the document stream by a specified sort key. Only the order changes; the documents remain unmodified. For each input document, outputs one document."}}}),t.push({type:"object",properties:{$geoNear:{type:"object",description:"Returns an ordered stream of documents based on the proximity to a geospatial point. Incorporates the functionality of $match, $sort, and $limit for geospatial data. The output documents include an additional distance field and can include a location identifier field."}}}),t.push({type:"object",properties:{$lookup:{type:"object",description:"Performs a left outer join to another collection in the same database to filter in documents from the joined collection for processing"}}}),t.push({type:"object",properties:{$out:{type:"object",description:"Writes the resulting documents of the aggregation pipeline to a collection. To use the $out stage, it must be the last stage in the pipeline"}}}),t.push({type:"object",properties:{$indexStats:{type:"object",description:"Returns statistics regarding the use of each index for the collection"}}}),t.push({type:"object",properties:{$facet:{type:"object",description:"Processes multiple aggregation pipelines within a single stage on the same set of input documents. Enables the creation of multi-faceted aggregations capable of characterizing data across multiple dimensions, or facets, in a single stage"}}}),t.push({type:"object",properties:{$bucket:{type:"object",description:"Categorizes incoming documents into groups, called buckets, based on a specified expression and bucket boundaries"}}}),t.push({type:"object",properties:{$bucketAuto:{type:"object",description:"Categorizes incoming documents into a specific number of groups, called buckets, based on a specified expression. Bucket boundaries are automatically determined in an attempt to evenly distribute the documents into the specified number of buckets"}}}),t.push({type:"object",properties:{$sortByCount:{type:"object",description:"Groups incoming documents based on the value of a specified expression, then computes the count of documents in each distinct group"}}}),t.push({type:"object",properties:{$addFields:{type:"object",description:"Adds new fields to documents. Outputs documents that contain all existing fields from the input documents and newly added fields"}}}),t.push({type:"object",properties:{$replaceRoot:{type:"object",description:"Replaces a document with the specified embedded document. The operation replaces all existing fields in the input document, including the _id field. Specify a document embedded in the input document to promote the embedded document to the top level"}}}),t.push({type:"object",properties:{$count:{type:"object",description:"Returns a count of the number of documents at this stage of the aggregation pipeline"}}}),t.push({type:"object",properties:{$graphLookup:{type:"object",description:"Performs a recursive search on a collection. To each output document, adds a new array field that contains the traversal results of the recursive search for that document"}}}),{type:"object",oneOf:t}}readNext(e,t,r,n){e.length!==r?t.hasNext().then(o=>{o?t.next().then(o=>{e.push(o),this.readNext(e,t,r,n)}):n(e)}):n(e)}}},1225:function(e,t,r){"use strict";r.r(t);var n=r(2);function o(e,t){void 0===t&&(t=!1);var r=0,n=e.length,o="",l=0,c=16,u=0;function p(t,n){for(var o=0,i=0;o<t||!n;){var s=e.charCodeAt(r);if(s>=48&&s<=57)i=16*i+s-48;else if(s>=65&&s<=70)i=16*i+s-65+10;else{if(!(s>=97&&s<=102))break;i=16*i+s-97+10}r++,o++}return o<t&&(i=-1),i}function h(){if(o="",u=0,l=r,r>=n)return l=n,c=17;var t=e.charCodeAt(r);if(i(t)){do{r++,o+=String.fromCharCode(t),t=e.charCodeAt(r)}while(i(t));return c=15}if(s(t))return r++,o+=String.fromCharCode(t),13===t&&10===e.charCodeAt(r)&&(r++,o+="\n"),c=14;switch(t){case 123:return r++,c=1;case 125:return r++,c=2;case 91:return r++,c=3;case 93:return r++,c=4;case 58:return r++,c=6;case 44:return r++,c=5;case 34:return r++,o=function(){for(var t="",o=r;;){if(r>=n){t+=e.substring(o,r),u=2;break}var i=e.charCodeAt(r);if(34===i){t+=e.substring(o,r),r++;break}if(92!==i){if(i>=0&&i<=31){if(s(i)){t+=e.substring(o,r),u=2;break}u=6}r++}else{if(t+=e.substring(o,r),++r>=n){u=2;break}switch(i=e.charCodeAt(r++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var a=p(4,!0);a>=0?t+=String.fromCharCode(a):u=4;break;default:u=5}o=r}}return t}(),c=10;case 47:var h=r-1;if(47===e.charCodeAt(r+1)){for(r+=2;r<n&&!s(e.charCodeAt(r));)r++;return o=e.substring(h,r),c=12}if(42===e.charCodeAt(r+1)){r+=2;for(var f=!1;r<n;){if(42===e.charCodeAt(r)&&r+1<n&&47===e.charCodeAt(r+1)){r+=2,f=!0;break}r++}return f||(r++,u=1),o=e.substring(h,r),c=13}return o+=String.fromCharCode(t),r++,c=16;case 45:if(o+=String.fromCharCode(t),++r===n||!a(e.charCodeAt(r)))return c=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=function(){var t=r;if(48===e.charCodeAt(r))r++;else for(r++;r<e.length&&a(e.charCodeAt(r));)r++;if(r<e.length&&46===e.charCodeAt(r)){if(!(++r<e.length&&a(e.charCodeAt(r))))return u=3,e.substring(t,r);for(r++;r<e.length&&a(e.charCodeAt(r));)r++}var n=r;if(r<e.length&&(69===e.charCodeAt(r)||101===e.charCodeAt(r)))if((++r<e.length&&43===e.charCodeAt(r)||45===e.charCodeAt(r))&&r++,r<e.length&&a(e.charCodeAt(r))){for(r++;r<e.length&&a(e.charCodeAt(r));)r++;n=r}else u=3;return e.substring(t,n)}(),c=11;default:for(;r<n&&d(t);)r++,t=e.charCodeAt(r);if(l!==r){switch(o=e.substring(l,r)){case"true":return c=8;case"false":return c=9;case"null":return c=7}return c=16}return o+=String.fromCharCode(t),r++,c=16}}function d(e){if(i(e)||s(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){r=e,o="",l=0,c=16,u=0},getPosition:function(){return r},scan:t?function(){var e;do{e=h()}while(e>=12&&e<=15);return e}:h,getToken:function(){return c},getTokenValue:function(){return o},getTokenOffset:function(){return l},getTokenLength:function(){return r-l},getTokenError:function(){return u}}}function i(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function s(e){return 10===e||13===e||8232===e||8233===e}function a(e){return e>=48&&e<=57}function l(e,t,r){var n,i,s,a,l;if(t){for(a=t.offset,l=a+t.length,s=a;s>0&&!u(e,s-1);)s--;for(var p=l;p<e.length&&!u(e,p);)p++;i=e.substring(s,p),n=function(e,t){var r=0,n=0,o=t.tabSize||4;for(;r<e.length;){var i=e.charAt(r);if(" "===i)n++;else{if("\t"!==i)break;n+=o}r++}return Math.floor(n/o)}(i,r)}else i=e,n=0,s=0,a=0,l=e.length;var h,d=function(e,t){for(var r=0;r<t.length;r++){var n=t.charAt(r);if("\r"===n)return r+1<t.length&&"\n"===t.charAt(r+1)?"\r\n":"\r";if("\n"===n)return"\n"}return e&&e.eol||"\n"}(r,e),f=!1,m=0;h=r.insertSpaces?c(" ",r.tabSize||4):"\t";var g=o(i,!1),y=!1;function v(){return d+c(h,n+m)}function b(){var e=g.scan();for(f=!1;15===e||14===e;)f=f||14===e,e=g.scan();return y=16===e||0!==g.getTokenError(),e}var x=[];function S(t,r,n){!y&&r<l&&n>a&&e.substring(r,n)!==t&&x.push({offset:r,length:n-r,content:t})}var C=b();if(17!==C){var _=g.getTokenOffset()+s;S(c(h,n),s,_)}for(;17!==C;){for(var O=g.getTokenOffset()+g.getTokenLength()+s,T=b(),N="";!f&&(12===T||13===T);){S(" ",O,g.getTokenOffset()+s),O=g.getTokenOffset()+g.getTokenLength()+s,N=12===T?v():"",T=b()}if(2===T)1!==C&&(m--,N=v());else if(4===T)3!==C&&(m--,N=v());else{switch(C){case 3:case 1:m++,N=v();break;case 5:case 12:N=v();break;case 13:N=f?v():" ";break;case 6:N=" ";break;case 10:if(6===T){N="";break}case 7:case 8:case 9:case 11:case 2:case 4:12===T||13===T?N=" ":5!==T&&17!==T&&(y=!0);break;case 16:y=!0}!f||12!==T&&13!==T||(N=v())}S(N,O,g.getTokenOffset()+s),C=T}return x}function c(e,t){for(var r="",n=0;n<t;n++)r+=e;return r}function u(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}function p(e,t,r){var n=o(e,!1);function i(e){return e?function(){return e(n.getTokenOffset(),n.getTokenLength())}:function(){return!0}}function s(e){return e?function(t){return e(t,n.getTokenOffset(),n.getTokenLength())}:function(){return!0}}var a=i(t.onObjectBegin),l=s(t.onObjectProperty),c=i(t.onObjectEnd),u=i(t.onArrayBegin),p=i(t.onArrayEnd),h=s(t.onLiteralValue),d=s(t.onSeparator),f=i(t.onComment),m=s(t.onError),g=r&&r.disallowComments,y=r&&r.allowTrailingComma;function v(){for(;;){var e=n.scan();switch(n.getTokenError()){case 4:b(14);break;case 5:b(15);break;case 3:b(13);break;case 1:g||b(11);break;case 2:b(12);break;case 6:b(16)}switch(e){case 12:case 13:g?b(10):f();break;case 16:b(1);break;case 15:case 14:break;default:return e}}}function b(e,t,r){if(void 0===t&&(t=[]),void 0===r&&(r=[]),m(e),t.length+r.length>0)for(var o=n.getToken();17!==o;){if(-1!==t.indexOf(o)){v();break}if(-1!==r.indexOf(o))break;o=v()}}function x(e){var t=n.getTokenValue();return e?h(t):l(t),v(),!0}function S(){switch(n.getToken()){case 3:return function(){u(),v();for(var e=!1;4!==n.getToken()&&17!==n.getToken();){if(5===n.getToken()){if(e||b(4,[],[]),d(","),v(),4===n.getToken()&&y)break}else e&&b(6,[],[]);S()||b(4,[],[4,5]),e=!0}return p(),4!==n.getToken()?b(8,[4],[]):v(),!0}();case 1:return function(){a(),v();for(var e=!1;2!==n.getToken()&&17!==n.getToken();){if(5===n.getToken()){if(e||b(4,[],[]),d(","),v(),2===n.getToken()&&y)break}else e&&b(6,[],[]);(10!==n.getToken()?(b(3,[],[2,5]),0):(x(!1),6===n.getToken()?(d(":"),v(),S()||b(4,[],[2,5])):b(5,[],[2,5]),1))||b(4,[],[2,5]),e=!0}return c(),2!==n.getToken()?b(7,[2],[]):v(),!0}();case 10:return x(!0);default:return function(){switch(n.getToken()){case 11:var e=0;try{"number"!=typeof(e=JSON.parse(n.getTokenValue()))&&(b(2),e=0)}catch(e){b(2)}h(e);break;case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return v(),!0}()}}return v(),17===n.getToken()||(S()?(17!==n.getToken()&&b(9,[],[]),!0):(b(4,[],[]),!1))}var h,d,f=o,m=function(e,t,r){void 0===t&&(t=[]);var n=null,o=[],i=[];function s(e){Array.isArray(o)?o.push(e):n&&(o[n]=e)}return p(e,{onObjectBegin:function(){var e={};s(e),i.push(o),o=e,n=null},onObjectProperty:function(e){n=e},onObjectEnd:function(){o=i.pop()},onArrayBegin:function(){var e=[];s(e),i.push(o),o=e,n=null},onArrayEnd:function(){o=i.pop()},onLiteralValue:s,onError:function(e,r,n){t.push({error:e,offset:r,length:n})}},r),o[0]},g=function e(t,r,n){if(void 0===n&&(n=!1),function(e,t,r){return void 0===r&&(r=!1),t>=e.offset&&t<e.offset+e.length||r&&t===e.offset+e.length}(t,r,n)){var o=t.children;if(Array.isArray(o))for(var i=0;i<o.length&&o[i].offset<=r;i++){var s=e(o[i],r,n);if(s)return s}return t}},y=function e(t){if(!t.parent||!t.parent.children)return[];var r=e(t.parent);if("property"===t.parent.type){var n=t.parent.children[0].value;r.push(n)}else if("array"===t.parent.type){var o=t.parent.children.indexOf(t);-1!==o&&r.push(o)}return r},v=function e(t){switch(t.type){case"array":return t.children.map(e);case"object":for(var r=Object.create(null),n=0,o=t.children;n<o.length;n++){var i=o[n],s=i.children[1];s&&(r[i.children[0].value]=e(s))}return r;case"null":case"string":case"number":case"boolean":return t.value;default:return}};function b(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;var r,n;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!b(e[r],t[r]))return!1}else{var o=[];for(n in e)o.push(n);o.sort();var i=[];for(n in t)i.push(n);if(i.sort(),!b(o,i))return!1;for(r=0;r<o.length;r++)if(!b(e[o[r]],t[o[r]]))return!1}return!0}function x(e){return"number"==typeof e}function S(e){return void 0!==e}function C(e){return"boolean"==typeof e}!function(e){e[e.Undefined=0]="Undefined",e[e.EnumValueMismatch=1]="EnumValueMismatch",e[e.UnexpectedEndOfComment=257]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=258]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=259]="UnexpectedEndOfNumber",e[e.InvalidUnicode=260]="InvalidUnicode",e[e.InvalidEscapeCharacter=261]="InvalidEscapeCharacter",e[e.InvalidCharacter=262]="InvalidCharacter",e[e.PropertyExpected=513]="PropertyExpected",e[e.CommaExpected=514]="CommaExpected",e[e.ColonExpected=515]="ColonExpected",e[e.ValueExpected=516]="ValueExpected",e[e.CommaOrCloseBacketExpected=517]="CommaOrCloseBacketExpected",e[e.CommaOrCloseBraceExpected=518]="CommaOrCloseBraceExpected",e[e.TrailingComma=519]="TrailingComma",e[e.DuplicateKey=520]="DuplicateKey",e[e.CommentNotPermitted=521]="CommentNotPermitted",e[e.SchemaResolveError=768]="SchemaResolveError"}(h||(h={})),(d||(d={})).LATEST={textDocument:{completion:{completionItem:{documentationFormat:[n.MarkupKind.Markdown,n.MarkupKind.PlainText]}}}};var _,O,T=r(53),N=(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});if("object"==typeof process)O="win32"===process.platform;else if("object"==typeof navigator){var A=navigator.userAgent;O=A.indexOf("Windows")>=0}var E=/^\w[\w\d+.-]*$/,w=/^\//,P=/^\/\//;var k,I="",R="/",L=/^(([^:\/?#]+?):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,D=function(){function e(e,t,r,n,o){"object"==typeof e?(this.scheme=e.scheme||I,this.authority=e.authority||I,this.path=e.path||I,this.query=e.query||I,this.fragment=e.fragment||I):(this.scheme=e||I,this.authority=t||I,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==R&&(t=R+t):t=R}return t}(this.scheme,r||I),this.query=n||I,this.fragment=o||I,function(e){if(e.scheme&&!E.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!w.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(P.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this))}return e.isUri=function(t){return t instanceof e||!!t&&("string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme)},Object.defineProperty(e.prototype,"fsPath",{get:function(){return B(this)},enumerable:!0,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,r=e.authority,n=e.path,o=e.query,i=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=I),void 0===r?r=this.authority:null===r&&(r=I),void 0===n?n=this.path:null===n&&(n=I),void 0===o?o=this.query:null===o&&(o=I),void 0===i?i=this.fragment:null===i&&(i=I),t===this.scheme&&r===this.authority&&n===this.path&&o===this.query&&i===this.fragment?this:new j(t,r,n,o,i)},e.parse=function(e){var t=L.exec(e);return t?new j(t[2]||I,decodeURIComponent(t[4]||I),decodeURIComponent(t[5]||I),decodeURIComponent(t[7]||I),decodeURIComponent(t[9]||I)):new j(I,I,I,I,I)},e.file=function(e){var t=I;if(O&&(e=e.replace(/\\/g,R)),e[0]===R&&e[1]===R){var r=e.indexOf(R,2);-1===r?(t=e.substring(2),e=R):(t=e.substring(2,r),e=e.substring(r)||R)}return new j("file",t,e,I,I)},e.from=function(e){return new j(e.scheme,e.authority,e.path,e.query,e.fragment)},e.prototype.toString=function(e){return void 0===e&&(e=!1),V(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var r=new j(t);return r._fsPath=t.fsPath,r._formatted=t.external,r}return t},e}(),M=D,j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return N(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=B(this)),this._fsPath},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?V(this,!0):(this._formatted||(this._formatted=V(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(D),F=((k={})[58]="%3A",k[47]="%2F",k[63]="%3F",k[35]="%23",k[91]="%5B",k[93]="%5D",k[64]="%40",k[33]="%21",k[36]="%24",k[38]="%26",k[39]="%27",k[40]="%28",k[41]="%29",k[42]="%2A",k[43]="%2B",k[44]="%2C",k[59]="%3B",k[61]="%3D",k[32]="%20",k);function z(e,t){for(var r=void 0,n=-1,o=0;o<e.length;o++){var i=e.charCodeAt(o);if(i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||45===i||46===i||95===i||126===i||t&&47===i)-1!==n&&(r+=encodeURIComponent(e.substring(n,o)),n=-1),void 0!==r&&(r+=e.charAt(o));else{void 0===r&&(r=e.substr(0,o));var s=F[i];void 0!==s?(-1!==n&&(r+=encodeURIComponent(e.substring(n,o)),n=-1),r+=s):-1===n&&(n=o)}}return-1!==n&&(r+=encodeURIComponent(e.substring(n))),void 0!==r?r:e}function U(e){for(var t=void 0,r=0;r<e.length;r++){var n=e.charCodeAt(r);35===n||63===n?(void 0===t&&(t=e.substr(0,r)),t+=F[n]):void 0!==t&&(t+=e[r])}return void 0!==t?t:e}function B(e){var t;return t=e.authority&&e.path.length>1&&"file"===e.scheme?"//"+e.authority+e.path:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?e.path[1].toLowerCase()+e.path.substr(2):e.path,O&&(t=t.replace(/\//g,"\\")),t}function V(e,t){var r=t?U:z,n="",o=e.scheme,i=e.authority,s=e.path,a=e.query,l=e.fragment;if(o&&(n+=o,n+=":"),(i||"file"===o)&&(n+=R,n+=R),i){var c=i.indexOf("@");if(-1!==c){var u=i.substr(0,c);i=i.substr(c+1),-1===(c=u.indexOf(":"))?n+=r(u,!1):(n+=r(u.substr(0,c),!1),n+=":",n+=r(u.substr(c+1),!1)),n+="@"}-1===(c=(i=i.toLowerCase()).indexOf(":"))?n+=r(i,!1):(n+=r(i.substr(0,c),!1),n+=i.substr(c))}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2))(p=s.charCodeAt(1))>=65&&p<=90&&(s="/"+String.fromCharCode(p+32)+":"+s.substr(3));else if(s.length>=2&&58===s.charCodeAt(1)){var p;(p=s.charCodeAt(0))>=65&&p<=90&&(s=String.fromCharCode(p+32)+":"+s.substr(2))}n+=r(s,!0)}return a&&(n+="?",n+=r(a,!1)),l&&(n+="#",n+=t?l:z(l,!1)),n}var q,H=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$=T.loadMessageBundle(),W=/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/,K=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Y=function(){function e(e,t,r){this.offset=t,this.length=r,this.parent=e}return Object.defineProperty(e.prototype,"children",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")},e}(),G=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type="null",n.value=null,n}return H(t,e),t}(Y),J=function(e){function t(t,r,n){var o=e.call(this,t,n)||this;return o.type="boolean",o.value=r,o}return H(t,e),t}(Y),Q=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type="array",n.items=[],n}return H(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.items},enumerable:!0,configurable:!0}),t}(Y),X=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type="number",n.isInteger=!0,n.value=Number.NaN,n}return H(t,e),t}(Y),Z=function(e){function t(t,r,n){var o=e.call(this,t,r,n)||this;return o.type="string",o.value="",o}return H(t,e),t}(Y),ee=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type="property",n.colonOffset=-1,n}return H(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]},enumerable:!0,configurable:!0}),t}(Y),te=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type="object",n.properties=[],n}return H(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.properties},enumerable:!0,configurable:!0}),t}(Y);function re(e){return C(e)?e?{}:{not:{}}:e}!function(e){e[e.Key=0]="Key",e[e.Enum=1]="Enum"}(q||(q={}));var ne=function(){function e(e,t){void 0===e&&(e=-1),void 0===t&&(t=null),this.focusOffset=e,this.exclude=t,this.schemas=[]}return e.prototype.add=function(e){this.schemas.push(e)},e.prototype.merge=function(e){var t;(t=this.schemas).push.apply(t,e.schemas)},e.prototype.include=function(e){return(-1===this.focusOffset||le(e,this.focusOffset))&&e!==this.exclude},e.prototype.newSub=function(){return new e(-1,this.exclude)},e}(),oe=function(){function e(){}return Object.defineProperty(e.prototype,"schemas",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.add=function(e){},e.prototype.merge=function(e){},e.prototype.include=function(e){return!0},e.prototype.newSub=function(){return this},e.instance=new e,e}(),ie=function(){function e(){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=null}return e.prototype.hasProblems=function(){return!!this.problems.length},e.prototype.mergeAll=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.merge(n)}},e.prototype.merge=function(e){this.problems=this.problems.concat(e.problems)},e.prototype.mergeEnumValues=function(e){if(!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues){this.enumValues=this.enumValues.concat(e.enumValues);for(var t=0,r=this.problems;t<r.length;t++){var n=r[t];n.code===h.EnumValueMismatch&&(n.message=$("enumWarning","Value is not accepted. Valid values: {0}.",this.enumValues.map(function(e){return JSON.stringify(e)}).join(", ")))}}},e.prototype.mergePropertyMatch=function(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&1===e.enumValues.length&&this.primaryValueMatches++},e.prototype.compare=function(e){var t=this.hasProblems();return t!==e.hasProblems()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches},e}();function se(e){return v(e)}function ae(e){return y(e)}function le(e,t,r){return void 0===r&&(r=!1),t>=e.offset&&t<e.offset+e.length||r&&t===e.offset+e.length}var ce=function(){function e(e,t,r){void 0===t&&(t=[]),void 0===r&&(r=[]),this.root=e,this.syntaxErrors=t,this.comments=r}return e.prototype.getNodeFromOffset=function(e,t){if(void 0===t&&(t=!1),this.root)return g(this.root,e,t)},e.prototype.visit=function(e){if(this.root){var t=function(r){var n=e(r),o=r.children;if(Array.isArray(o))for(var i=0;i<o.length&&n;i++)n=t(o[i]);return n};t(this.root)}},e.prototype.validate=function(e,t){if(this.root&&t){var r=new ie;return ue(this.root,t,r,oe.instance),r.problems.map(function(t){var r=n.Range.create(e.positionAt(t.location.offset),e.positionAt(t.location.offset+t.location.length));return n.Diagnostic.create(r,t.message,t.severity,t.code)})}return null},e.prototype.getMatchingSchemas=function(e,t,r){void 0===t&&(t=-1),void 0===r&&(r=null);var n=new ne(t,r);return this.root&&e&&ue(this.root,e,new ie,n),n.schemas},e}();function ue(e,t,r,o){if(e&&o.include(e)){switch(e.type){case"object":!function(e,t,r,o){for(var i=Object.create(null),s=[],a=0,l=e.properties;a<l.length;a++){var c=l[a],u=c.keyNode.value;i[u]=c.valueNode,s.push(u)}if(Array.isArray(t.required))for(var p=0,h=t.required;p<h.length;p++){var d=h[p];if(!i[d]){var f=e.parent&&"property"===e.parent.type&&e.parent.keyNode,m=f?{offset:f.offset,length:f.length}:{offset:e.offset,length:1};r.problems.push({location:m,severity:n.DiagnosticSeverity.Warning,message:$("MissingRequiredPropWarning",'Missing property "{0}".',d)})}}var g=function(e){for(var t=s.indexOf(e);t>=0;)s.splice(t,1),t=s.indexOf(e)};if(t.properties)for(var y=0,v=Object.keys(t.properties);y<v.length;y++){var d=v[y];g(d);var b=t.properties[d],S=i[d];if(S)if(C(b))if(b)r.propertiesMatches++,r.propertiesValueMatches++;else{var c=S.parent;r.problems.push({location:{offset:c.keyNode.offset,length:c.keyNode.length},severity:n.DiagnosticSeverity.Warning,message:t.errorMessage||$("DisallowedExtraPropWarning","Property {0} is not allowed.",d)})}else{var _=new ie;ue(S,b,_,o),r.mergePropertyMatch(_)}}if(t.patternProperties)for(var O=0,T=Object.keys(t.patternProperties);O<T.length;O++)for(var N=T[O],A=new RegExp(N),E=0,w=s.slice(0);E<w.length;E++){var d=w[E];if(A.test(d)){g(d);var S=i[d];if(S){var b=t.patternProperties[N];if(C(b))if(b)r.propertiesMatches++,r.propertiesValueMatches++;else{var c=S.parent;r.problems.push({location:{offset:c.keyNode.offset,length:c.keyNode.length},severity:n.DiagnosticSeverity.Warning,message:t.errorMessage||$("DisallowedExtraPropWarning","Property {0} is not allowed.",d)})}else{var _=new ie;ue(S,b,_,o),r.mergePropertyMatch(_)}}}}if("object"==typeof t.additionalProperties)for(var P=0,k=s;P<k.length;P++){var d=k[P],S=i[d];if(S){var _=new ie;ue(S,t.additionalProperties,_,o),r.mergePropertyMatch(_)}}else if(!1===t.additionalProperties&&s.length>0)for(var I=0,R=s;I<R.length;I++){var d=R[I],S=i[d];if(S){var c=S.parent;r.problems.push({location:{offset:c.keyNode.offset,length:c.keyNode.length},severity:n.DiagnosticSeverity.Warning,message:t.errorMessage||$("DisallowedExtraPropWarning","Property {0} is not allowed.",d)})}}x(t.maxProperties)&&e.properties.length>t.maxProperties&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("MaxPropWarning","Object has more properties than limit of {0}.",t.maxProperties)});x(t.minProperties)&&e.properties.length<t.minProperties&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("MinPropWarning","Object has fewer properties than the required number of {0}",t.minProperties)});if(t.dependencies)for(var L=0,D=Object.keys(t.dependencies);L<D.length;L++){var u=D[L],M=i[u];if(M){var j=t.dependencies[u];if(Array.isArray(j))for(var F=0,z=j;F<z.length;F++){var U=z[F];i[U]?r.propertiesValueMatches++:r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",U,u)})}else{var b=re(j);if(b){var _=new ie;ue(e,b,_,o),r.mergePropertyMatch(_)}}}}var B=re(t.propertyNames);if(B)for(var V=0,q=e.properties;V<q.length;V++){var H=q[V],u=H.keyNode;u&&ue(u,B,r,oe.instance)}}(e,t,r,o);break;case"array":!function(e,t,r,o){if(Array.isArray(t.items)){for(var i=t.items,s=0;s<i.length;s++){var a=i[s],l=re(a),c=new ie,u=e.items[s];u?(ue(u,l,c,o),r.mergePropertyMatch(c)):e.items.length>=i.length&&r.propertiesValueMatches++}if(e.items.length>i.length)if("object"==typeof t.additionalItems)for(var p=i.length;p<e.items.length;p++){var c=new ie;ue(e.items[p],t.additionalItems,c,o),r.mergePropertyMatch(c)}else!1===t.additionalItems&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",i.length)})}else{var h=re(t.items);if(h)for(var d=0,f=e.items;d<f.length;d++){var u=f[d],c=new ie;ue(u,h,c,o),r.mergePropertyMatch(c)}}var m=re(t.contains);if(m){var g=e.items.some(function(e){var t=new ie;return ue(e,m,t,oe.instance),!t.hasProblems()});g||r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:t.errorMessage||$("requiredItemMissingWarning","Array does not contain required item.")})}x(t.minItems)&&e.items.length<t.minItems&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("minItemsWarning","Array has too few items. Expected {0} or more.",t.minItems)});x(t.maxItems)&&e.items.length>t.maxItems&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("maxItemsWarning","Array has too many items. Expected {0} or fewer.",t.maxItems)});if(!0===t.uniqueItems){var y=se(e),v=y.some(function(e,t){return t!==y.lastIndexOf(e)});v&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("uniqueItemsWarning","Array has duplicate items.")})}}(e,t,r,o);break;case"string":!function(e,t,r,o){x(t.minLength)&&e.value.length<t.minLength&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("minLengthWarning","String is shorter than the minimum length of {0}.",t.minLength)});x(t.maxLength)&&e.value.length>t.maxLength&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("maxLengthWarning","String is longer than the maximum length of {0}.",t.maxLength)});if(s=t.pattern,"string"==typeof s){var i=new RegExp(t.pattern);i.test(e.value)||r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:t.patternErrorMessage||t.errorMessage||$("patternWarning",'String does not match the pattern of "{0}".',t.pattern)})}var s;if(t.format)switch(t.format){case"uri":case"uri-reference":var a=void 0;if(e.value)try{var l=M.parse(e.value);l.scheme||"uri"!==t.format||(a=$("uriSchemeMissing","URI with a scheme is expected."))}catch(e){a=e.message}else a=$("uriEmpty","URI expected.");a&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:t.patternErrorMessage||t.errorMessage||$("uriFormatWarning","String is not a URI: {0}",a)});break;case"email":e.value.match(K)||r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:t.patternErrorMessage||t.errorMessage||$("emailFormatWarning","String is not an e-mail address.")});break;case"color-hex":e.value.match(W)||r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:t.patternErrorMessage||t.errorMessage||$("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA.")})}}(e,t,r);break;case"number":!function(e,t,r,o){var i=e.value;x(t.multipleOf)&&i%t.multipleOf!=0&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("multipleOfWarning","Value is not divisible by {0}.",t.multipleOf)});function s(e,t){return x(t)?t:C(t)&&t?e:void 0}function a(e,t){if(!C(t)||!t)return e}var l=s(t.minimum,t.exclusiveMinimum);x(l)&&i<=l&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",l)});var c=s(t.maximum,t.exclusiveMaximum);x(c)&&i>=c&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",c)});var u=a(t.minimum,t.exclusiveMinimum);x(u)&&i<u&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("minimumWarning","Value is below the minimum of {0}.",u)});var p=a(t.maximum,t.exclusiveMaximum);x(p)&&i>p&&r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("maximumWarning","Value is above the maximum of {0}.",p)})}(e,t,r);break;case"property":return ue(e.valueNode,t,r,o)}!function(){function i(t){return e.type===t||"integer"===t&&"number"===e.type&&e.isInteger}Array.isArray(t.type)?t.type.some(i)||r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:t.errorMessage||$("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",t.type.join(", "))}):t.type&&(i(t.type)||r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:t.errorMessage||$("typeMismatchWarning",'Incorrect type. Expected "{0}".',t.type)}));if(Array.isArray(t.allOf))for(var s=0,a=t.allOf;s<a.length;s++){var l=a[s];ue(e,re(l),r,o)}var c=re(t.not);if(c){var u=new ie,p=o.newSub();ue(e,c,u,p),u.hasProblems()||r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,message:$("notSchemaWarning","Matches a schema that is not allowed.")});for(var d=0,f=p.schemas;d<f.length;d++){var m=f[d];m.inverted=!m.inverted,o.add(m)}}var g=function(t,i){for(var s=[],a=null,l=0,c=t;l<c.length;l++){var u=c[l],p=re(u),h=new ie,d=o.newSub();if(ue(e,p,h,d),h.hasProblems()||s.push(p),a)if(i||h.hasProblems()||a.validationResult.hasProblems()){var f=h.compare(a.validationResult);f>0?a={schema:p,validationResult:h,matchingSchemas:d}:0===f&&(a.matchingSchemas.merge(d),a.validationResult.mergeEnumValues(h))}else a.matchingSchemas.merge(d),a.validationResult.propertiesMatches+=h.propertiesMatches,a.validationResult.propertiesValueMatches+=h.propertiesValueMatches;else a={schema:p,validationResult:h,matchingSchemas:d}}return s.length>1&&i&&r.problems.push({location:{offset:e.offset,length:1},severity:n.DiagnosticSeverity.Warning,message:$("oneOfWarning","Matches multiple schemas when only one must validate.")}),null!==a&&(r.merge(a.validationResult),r.propertiesMatches+=a.validationResult.propertiesMatches,r.propertiesValueMatches+=a.validationResult.propertiesValueMatches,o.merge(a.matchingSchemas)),s.length};Array.isArray(t.anyOf)&&g(t.anyOf,!1);Array.isArray(t.oneOf)&&g(t.oneOf,!0);var y=function(t){var n=new ie,i=o.newSub();ue(e,re(t),n,i),r.merge(n),r.propertiesMatches+=n.propertiesMatches,r.propertiesValueMatches+=n.propertiesValueMatches,o.merge(i)},v=re(t.if);v&&function(t,r,n){var i=re(t),s=new ie,a=o.newSub();ue(e,i,s,a),o.merge(a),s.hasProblems()?n&&y(n):r&&y(r)}(v,re(t.then),re(t.else));if(Array.isArray(t.enum)){for(var x=se(e),C=!1,_=0,O=t.enum;_<O.length;_++){var T=O[_];if(b(x,T)){C=!0;break}}r.enumValues=t.enum,r.enumValueMatch=C,C||r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,code:h.EnumValueMismatch,message:t.errorMessage||$("enumWarning","Value is not accepted. Valid values: {0}.",t.enum.map(function(e){return JSON.stringify(e)}).join(", "))})}if(S(t.const)){var x=se(e);b(x,t.const)?r.enumValueMatch=!0:(r.problems.push({location:{offset:e.offset,length:e.length},severity:n.DiagnosticSeverity.Warning,code:h.EnumValueMismatch,message:t.errorMessage||$("constWarning","Value must be {0}.",JSON.stringify(t.const))}),r.enumValueMatch=!1),r.enumValues=[t.const]}t.deprecationMessage&&e.parent&&r.problems.push({location:{offset:e.parent.offset,length:e.parent.length},severity:n.DiagnosticSeverity.Warning,message:t.deprecationMessage})}(),o.add({node:e,schema:t})}}function pe(e,t){var r=[],o=-1,i=e.getText(),s=f(i,!1),a=t&&t.collectComments?[]:void 0;function l(){for(;;){var t=s.scan();switch(p(),t){case 12:case 13:Array.isArray(a)&&a.push(n.Range.create(e.positionAt(s.getTokenOffset()),e.positionAt(s.getTokenOffset()+s.getTokenLength())));break;case 15:case 14:break;default:return t}}}function c(t,i,s,a,l){if(void 0===l&&(l=n.DiagnosticSeverity.Error),0===r.length||s!==o){var c=n.Range.create(e.positionAt(s),e.positionAt(a));r.push(n.Diagnostic.create(c,t,l,i,e.languageId)),o=s}}function u(e,t,r,n,o){void 0===r&&(r=null),void 0===n&&(n=[]),void 0===o&&(o=[]);var a=s.getTokenOffset(),u=s.getTokenOffset()+s.getTokenLength();if(a===u&&a>0){for(a--;a>0&&/\s/.test(i.charAt(a));)a--;u=a+1}if(c(e,t,a,u),r&&d(r,!1),n.length+o.length>0)for(var p=s.getToken();17!==p;){if(-1!==n.indexOf(p)){l();break}if(-1!==o.indexOf(p))break;p=l()}return r}function p(){switch(s.getTokenError()){case 4:return u($("InvalidUnicode","Invalid unicode sequence in string."),h.InvalidUnicode),!0;case 5:return u($("InvalidEscapeCharacter","Invalid escape character in string."),h.InvalidEscapeCharacter),!0;case 3:return u($("UnexpectedEndOfNumber","Unexpected end of number."),h.UnexpectedEndOfNumber),!0;case 1:return u($("UnexpectedEndOfComment","Unexpected end of comment."),h.UnexpectedEndOfComment),!0;case 2:return u($("UnexpectedEndOfString","Unexpected end of string."),h.UnexpectedEndOfString),!0;case 6:return u($("InvalidCharacter","Invalid characters in string. Control characters must be escaped."),h.InvalidCharacter),!0}return!1}function d(e,t){return e.length=s.getTokenOffset()+s.getTokenLength()-e.offset,t&&l(),e}function m(t,r){var o=new ee(t,s.getTokenOffset()),i=g(o);if(!i){if(16!==s.getToken())return null;u($("DoubleQuotesExpected","Property keys must be doublequoted"),h.Undefined);var a=new Z(o,s.getTokenOffset(),s.getTokenLength());a.value=s.getTokenValue(),i=a,l()}o.keyNode=i;var p=r[i.value];if(p?(c($("DuplicateKeyWarning","Duplicate object key"),h.DuplicateKey,o.keyNode.offset,o.keyNode.offset+o.keyNode.length,n.DiagnosticSeverity.Warning),"object"==typeof p&&c($("DuplicateKeyWarning","Duplicate object key"),h.DuplicateKey,p.keyNode.offset,p.keyNode.offset+p.keyNode.length,n.DiagnosticSeverity.Warning),r[i.value]=!0):r[i.value]=o,6===s.getToken())o.colonOffset=s.getTokenOffset(),l();else if(u($("ColonExpected","Colon expected"),h.ColonExpected),10===s.getToken()&&e.positionAt(i.offset+i.length).line<e.positionAt(s.getTokenOffset()).line)return o.length=i.length,o;var d=y(o,i.value);return d?(o.valueNode=d,o.length=d.offset+d.length-o.offset,o):u($("ValueExpected","Value expected"),h.ValueExpected,o,[],[2,5])}function g(e){if(10!==s.getToken())return null;var t=new Z(e,s.getTokenOffset());return t.value=s.getTokenValue(),d(t,!0)}function y(e,t){return function(e){if(3!==s.getToken())return null;var t=new Q(e,s.getTokenOffset());l();for(var r=0,n=!1;4!==s.getToken()&&17!==s.getToken();){if(5===s.getToken()){n||u($("ValueExpected","Value expected"),h.ValueExpected);var o=s.getTokenOffset();if(l(),4===s.getToken()){n&&c($("TrailingComma","Trailing comma"),h.TrailingComma,o,o+1);continue}}else n&&u($("ExpectedComma","Expected comma"),h.CommaExpected);var i=y(t,r++);i?t.items.push(i):u($("PropertyExpected","Value expected"),h.ValueExpected,null,[],[4,5]),n=!0}return 4!==s.getToken()?u($("ExpectedCloseBracket","Expected comma or closing bracket"),h.CommaOrCloseBacketExpected,t):d(t,!0)}(e)||function(e){if(1!==s.getToken())return null;var t=new te(e,s.getTokenOffset()),r=Object.create(null);l();for(var n=!1;2!==s.getToken()&&17!==s.getToken();){if(5===s.getToken()){n||u($("PropertyExpected","Property expected"),h.PropertyExpected);var o=s.getTokenOffset();if(l(),2===s.getToken()){n&&c($("TrailingComma","Trailing comma"),h.TrailingComma,o,o+1);continue}}else n&&u($("ExpectedComma","Expected comma"),h.CommaExpected);var i=m(t,r);i?t.properties.push(i):u($("PropertyExpected","Property expected"),h.PropertyExpected,null,[],[2,5]),n=!0}return 2!==s.getToken()?u($("ExpectedCloseBrace","Expected comma or closing brace"),h.CommaOrCloseBraceExpected,t):d(t,!0)}(e)||g(e)||function(e){if(11!==s.getToken())return null;var t=new X(e,s.getTokenOffset());if(0===s.getTokenError()){var r=s.getTokenValue();try{var n=JSON.parse(r);if(!x(n))return u($("InvalidNumberFormat","Invalid number format."),h.Undefined,t);t.value=n}catch(e){return u($("InvalidNumberFormat","Invalid number format."),h.Undefined,t)}t.isInteger=-1===r.indexOf(".")}return d(t,!0)}(e)||function(e){switch(s.getToken()){case 7:return d(new G(e,s.getTokenOffset()),!0);case 8:return d(new J(e,!0,s.getTokenOffset()),!0);case 9:return d(new J(e,!1,s.getTokenOffset()),!0);default:return null}}(e)}var v=null;return 17!==l()&&((v=y(null))?17!==s.getToken()&&u($("End of file expected","End of file expected."),h.Undefined):u($("Invalid symbol","Expected a JSON object, array or literal."),h.Undefined)),new ce(v,r,a)}function he(e,t){var r=e.length-t.length;return r>0?e.lastIndexOf(t)===r:0===r&&e===t}var de=T.loadMessageBundle(),fe=function(){function e(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=Promise),void 0===n&&(n={}),this.schemaService=e,this.contributions=t,this.promiseConstructor=r,this.clientCapabilities=n,this.templateVarIdCounter=0}return e.prototype.doResolve=function(e){for(var t=this.contributions.length-1;t>=0;t--)if(this.contributions[t].resolveCompletion){var r=this.contributions[t].resolveCompletion(e);if(r)return r}return this.promiseConstructor.resolve(e)},e.prototype.doComplete=function(e,t,r){var o=this,i={items:[],isIncomplete:!1},s=e.offsetAt(t),a=r.getNodeFromOffset(s,!0);if(this.isInComment(e,a?a.offset:0,s))return Promise.resolve(i);var l=this.getCurrentWord(e,s),c=null;if(!a||"string"!==a.type&&"number"!==a.type&&"boolean"!==a.type&&"null"!==a.type){var u=s-l.length;u>0&&'"'===e.getText()[u-1]&&u--,c=n.Range.create(e.positionAt(u),t)}else c=n.Range.create(e.positionAt(a.offset),e.positionAt(a.offset+a.length));var p={},h={add:function(e){var t=p[e.label];t?t.documentation||(t.documentation=e.documentation):(p[e.label]=e,c&&(e.textEdit=n.TextEdit.replace(c,e.insertText)),i.items.push(e))},setAsIncomplete:function(){i.isIncomplete=!0},error:function(e){console.error(e)},log:function(e){console.log(e)},getNumberOfProposals:function(){return i.items.length}};return this.schemaService.getSchemaForResource(e.uri,r).then(function(t){var u=[],d=!0,f="",m=null;if(a&&"string"===a.type){var g=a.parent;g&&"property"===g.type&&g.keyNode===a&&(d=!g.valueNode,m=g,f=e.getText().substr(a.offset+1,a.length-2),g&&(a=g.parent))}if(a&&"object"===a.type){if(a.offset===s)return i;a.properties.forEach(function(e){m&&m===e||(p[e.keyNode.value]=n.CompletionItem.create("__"))});var y="";d&&(y=o.evaluateSeparatorAfter(e,e.offsetAt(c.end))),t?o.getPropertyCompletions(t,r,a,d,y,h):o.getSchemaLessPropertyCompletions(r,a,f,h);var v=ae(a);o.contributions.forEach(function(t){var r=t.collectPropertyCompletions(e.uri,v,l,d,""===y,h);r&&u.push(r)}),!t&&l.length>0&&'"'!==e.getText().charAt(s-l.length-1)&&h.add({kind:n.CompletionItemKind.Property,label:o.getLabelForValue(l),insertText:o.getInsertTextForProperty(l,null,!1,y),insertTextFormat:n.InsertTextFormat.Snippet,documentation:""})}var b={};return t?o.getValueCompletions(t,r,a,s,e,h,b):o.getSchemaLessValueCompletions(r,a,s,e,h),o.contributions.length>0&&o.getContributedValueCompletions(r,a,s,e,h,u),o.promiseConstructor.all(u).then(function(){if(0===h.getNumberOfProposals()){var t=s;!a||"string"!==a.type&&"number"!==a.type&&"boolean"!==a.type&&"null"!==a.type||(t=a.offset+a.length);var r=o.evaluateSeparatorAfter(e,t);o.addFillerValueCompletions(b,r,h)}return i})})},e.prototype.getPropertyCompletions=function(e,t,r,o,i,s){var a=this;t.getMatchingSchemas(e.schema,r.offset).forEach(function(e){if(e.node===r&&!e.inverted){var t=e.schema.properties;t&&Object.keys(t).forEach(function(e){var r=t[e];if("object"==typeof r&&!r.deprecationMessage&&!r.doNotSuggest){var l={kind:n.CompletionItemKind.Property,label:e,insertText:a.getInsertTextForProperty(e,r,o,i),insertTextFormat:n.InsertTextFormat.Snippet,filterText:a.getFilterTextForValue(e),documentation:a.fromMarkup(r.markdownDescription)||r.description||""};he(l.insertText,"$1"+i)&&(l.command={title:"Suggest",command:"editor.action.triggerSuggest"}),s.add(l)}})}})},e.prototype.getSchemaLessPropertyCompletions=function(e,t,r,o){var i=this,s=function(e){e.properties.forEach(function(e){var t=e.keyNode.value;o.add({kind:n.CompletionItemKind.Property,label:t,insertText:i.getInsertTextForValue(t,""),insertTextFormat:n.InsertTextFormat.Snippet,filterText:i.getFilterTextForValue(t),documentation:""})})};if(t.parent)if("property"===t.parent.type){var a=t.parent.keyNode.value;e.visit(function(e){return"property"===e.type&&e!==t.parent&&e.keyNode.value===a&&e.valueNode&&"object"===e.valueNode.type&&s(e.valueNode),!0})}else"array"===t.parent.type&&t.parent.items.forEach(function(e){"object"===e.type&&e!==t&&s(e)});else"object"===t.type&&o.add({kind:n.CompletionItemKind.Property,label:"$schema",insertText:this.getInsertTextForProperty("$schema",null,!0,""),insertTextFormat:n.InsertTextFormat.Snippet,documentation:"",filterText:this.getFilterTextForValue("$schema")})},e.prototype.getSchemaLessValueCompletions=function(e,t,r,o,i){var s=this,a=r;if(!t||"string"!==t.type&&"number"!==t.type&&"boolean"!==t.type&&"null"!==t.type||(a=t.offset+t.length,t=t.parent),!t)return i.add({kind:this.getSuggestionKind("object"),label:"Empty object",insertText:this.getInsertTextForValue({},""),insertTextFormat:n.InsertTextFormat.Snippet,documentation:""}),void i.add({kind:this.getSuggestionKind("array"),label:"Empty array",insertText:this.getInsertTextForValue([],""),insertTextFormat:n.InsertTextFormat.Snippet,documentation:""});var l=this.evaluateSeparatorAfter(o,a),c=function(e){le(e.parent,r,!0)||i.add({kind:s.getSuggestionKind(e.type),label:s.getLabelTextForMatchingNode(e,o),insertText:s.getInsertTextForMatchingNode(e,o,l),insertTextFormat:n.InsertTextFormat.Snippet,documentation:""}),"boolean"===e.type&&s.addBooleanValueCompletion(!e.value,l,i)};if("property"===t.type&&r>t.colonOffset){var u=t.valueNode;if(u&&(r>u.offset+u.length||"object"===u.type||"array"===u.type))return;var p=t.keyNode.value;e.visit(function(e){return"property"===e.type&&e.keyNode.value===p&&e.valueNode&&c(e.valueNode),!0}),"$schema"===p&&t.parent&&!t.parent.parent&&this.addDollarSchemaCompletions(l,i)}if("array"===t.type)if(t.parent&&"property"===t.parent.type){var h=t.parent.keyNode.value;e.visit(function(e){return"property"===e.type&&e.keyNode.value===h&&e.valueNode&&"array"===e.valueNode.type&&e.valueNode.items.forEach(c),!0})}else t.items.forEach(c)},e.prototype.getValueCompletions=function(e,t,r,n,o,i,s){var a=this,l=n,c=null,u=null;if(!r||"string"!==r.type&&"number"!==r.type&&"boolean"!==r.type&&"null"!==r.type||(l=r.offset+r.length,u=r,r=r.parent),r){if("property"===r.type&&n>r.colonOffset){var p=r.valueNode;if(p&&n>p.offset+p.length)return;c=r.keyNode.value,r=r.parent}if(r&&(null!==c||"array"===r.type)){var h=this.evaluateSeparatorAfter(o,l);t.getMatchingSchemas(e.schema,r.offset,u).forEach(function(e){if(e.node===r&&!e.inverted&&e.schema){if("array"===r.type&&e.schema.items)if(Array.isArray(e.schema.items)){var t=a.findItemAtOffset(r,o,n);t<e.schema.items.length&&a.addSchemaValueCompletions(e.schema.items[t],h,i,s)}else a.addSchemaValueCompletions(e.schema.items,h,i,s);if(e.schema.properties){var l=e.schema.properties[c];l&&a.addSchemaValueCompletions(l,h,i,s)}}}),"$schema"!==c||r.parent||this.addDollarSchemaCompletions(h,i),s.boolean&&(this.addBooleanValueCompletion(!0,h,i),this.addBooleanValueCompletion(!1,h,i)),s.null&&this.addNullValueCompletion(h,i)}}else this.addSchemaValueCompletions(e.schema,"",i,s)},e.prototype.getContributedValueCompletions=function(e,t,r,n,o,i){if(t){if("string"!==t.type&&"number"!==t.type&&"boolean"!==t.type&&"null"!==t.type||(t=t.parent),"property"===t.type&&r>t.colonOffset){var s=t.keyNode.value,a=t.valueNode;if(!a||r<=a.offset+a.length){var l=ae(t.parent);this.contributions.forEach(function(e){var t=e.collectValueCompletions(n.uri,l,s,o);t&&i.push(t)})}}}else this.contributions.forEach(function(e){var t=e.collectDefaultCompletions(n.uri,o);t&&i.push(t)})},e.prototype.addSchemaValueCompletions=function(e,t,r,n){var o=this;"object"==typeof e&&(this.addEnumValueCompletions(e,t,r),this.addDefaultValueCompletions(e,t,r),this.collectTypes(e,n),Array.isArray(e.allOf)&&e.allOf.forEach(function(e){return o.addSchemaValueCompletions(e,t,r,n)}),Array.isArray(e.anyOf)&&e.anyOf.forEach(function(e){return o.addSchemaValueCompletions(e,t,r,n)}),Array.isArray(e.oneOf)&&e.oneOf.forEach(function(e){return o.addSchemaValueCompletions(e,t,r,n)}))},e.prototype.addDefaultValueCompletions=function(e,t,r,o){var i=this;void 0===o&&(o=0);var s=!1;if(S(e.default)){for(var a=e.type,l=e.default,c=o;c>0;c--)l=[l],a="array";r.add({kind:this.getSuggestionKind(a),label:this.getLabelForValue(l),insertText:this.getInsertTextForValue(l,t),insertTextFormat:n.InsertTextFormat.Snippet,detail:de("json.suggest.default","Default value")}),s=!0}Array.isArray(e.examples)&&e.examples.forEach(function(a){for(var l=e.type,c=a,u=o;u>0;u--)c=[c],l="array";r.add({kind:i.getSuggestionKind(l),label:i.getLabelForValue(c),insertText:i.getInsertTextForValue(c,t),insertTextFormat:n.InsertTextFormat.Snippet}),s=!0}),Array.isArray(e.defaultSnippets)&&e.defaultSnippets.forEach(function(a){var l,c,u=e.type,p=a.body,h=a.label;if(S(p)){e.type;for(var d=o;d>0;d--)p=[p],"array";l=i.getInsertTextForSnippetValue(p,t),c=i.getFilterTextForSnippetValue(p),h=h||i.getLabelForSnippetValue(p)}else if("string"==typeof a.bodyText){var f="",m="",g="";for(d=o;d>0;d--)f=f+g+"[\n",m=m+"\n"+g+"]",g+="\t",u="array";l=f+g+a.bodyText.split("\n").join("\n"+g)+m+t,h=h||l,c=l.replace(/[\n]/g,"")}r.add({kind:i.getSuggestionKind(u),label:h,documentation:i.fromMarkup(a.markdownDescription)||a.description,insertText:l,insertTextFormat:n.InsertTextFormat.Snippet,filterText:c}),s=!0}),s||"object"!=typeof e.items||Array.isArray(e.items)||this.addDefaultValueCompletions(e.items,t,r,o+1)},e.prototype.addEnumValueCompletions=function(e,t,r){if(S(e.const)&&r.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(e.const),insertText:this.getInsertTextForValue(e.const,t),insertTextFormat:n.InsertTextFormat.Snippet,documentation:this.fromMarkup(e.markdownDescription)||e.description}),Array.isArray(e.enum))for(var o=0,i=e.enum.length;o<i;o++){var s=e.enum[o],a=this.fromMarkup(e.markdownDescription)||e.description;e.markdownEnumDescriptions&&o<e.markdownEnumDescriptions.length&&this.doesSupportMarkdown()?a=this.fromMarkup(e.markdownEnumDescriptions[o]):e.enumDescriptions&&o<e.enumDescriptions.length&&(a=e.enumDescriptions[o]),r.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(s),insertText:this.getInsertTextForValue(s,t),insertTextFormat:n.InsertTextFormat.Snippet,documentation:a})}},e.prototype.collectTypes=function(e,t){if(!Array.isArray(e.enum)&&!S(e.const)){var r=e.type;Array.isArray(r)?r.forEach(function(e){return t[e]=!0}):t[r]=!0}},e.prototype.addFillerValueCompletions=function(e,t,r){e.object&&r.add({kind:this.getSuggestionKind("object"),label:"{}",insertText:this.getInsertTextForGuessedValue({},t),insertTextFormat:n.InsertTextFormat.Snippet,detail:de("defaults.object","New object"),documentation:""}),e.array&&r.add({kind:this.getSuggestionKind("array"),label:"[]",insertText:this.getInsertTextForGuessedValue([],t),insertTextFormat:n.InsertTextFormat.Snippet,detail:de("defaults.array","New array"),documentation:""})},e.prototype.addBooleanValueCompletion=function(e,t,r){r.add({kind:this.getSuggestionKind("boolean"),label:e?"true":"false",insertText:this.getInsertTextForValue(e,t),insertTextFormat:n.InsertTextFormat.Snippet,documentation:""})},e.prototype.addNullValueCompletion=function(e,t){t.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+e,insertTextFormat:n.InsertTextFormat.Snippet,documentation:""})},e.prototype.addDollarSchemaCompletions=function(e,t){var r=this;this.schemaService.getRegisteredSchemaIds(function(e){return"http"===e||"https"===e}).forEach(function(o){return t.add({kind:n.CompletionItemKind.Module,label:r.getLabelForValue(o),filterText:r.getFilterTextForValue(o),insertText:r.getInsertTextForValue(o,e),insertTextFormat:n.InsertTextFormat.Snippet,documentation:""})})},e.prototype.getLabelForValue=function(e){var t=JSON.stringify(e);return t.length>57?t.substr(0,57).trim()+"...":t},e.prototype.getFilterTextForValue=function(e){return JSON.stringify(e)},e.prototype.getFilterTextForSnippetValue=function(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")},e.prototype.getLabelForSnippetValue=function(e){var t=JSON.stringify(e);return(t=t.replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")).length>57?t.substr(0,57).trim()+"...":t},e.prototype.getInsertTextForPlainText=function(e){return e.replace(/[\\\$\}]/g,"\\$&")},e.prototype.getInsertTextForValue=function(e,t){var r=JSON.stringify(e,null,"\t");return"{}"===r?"{$1}"+t:"[]"===r?"[$1]"+t:this.getInsertTextForPlainText(r+t)},e.prototype.getInsertTextForSnippetValue=function(e,t){return function e(t,r,n){if(null!==t&&"object"==typeof t){var o=r+"\t";if(Array.isArray(t)){if(0===t.length)return"[]";for(var i="[\n",s=0;s<t.length;s++)i+=o+e(t[s],o,n),s<t.length-1&&(i+=","),i+="\n";return i+=r+"]"}var a=Object.keys(t);if(0===a.length)return"{}";for(i="{\n",s=0;s<a.length;s++){var l=a[s];i+=o+JSON.stringify(l)+": "+e(t[l],o,n),s<a.length-1&&(i+=","),i+="\n"}return i+=r+"}"}return n(t)}(e,"",function(e){return"string"==typeof e&&"^"===e[0]?e.substr(1):JSON.stringify(e)})+t},e.prototype.getInsertTextForGuessedValue=function(e,t){switch(typeof e){case"object":return null===e?"${1:null}"+t:this.getInsertTextForValue(e,t);case"string":var r=JSON.stringify(e);return r=r.substr(1,r.length-2),'"${1:'+(r=this.getInsertTextForPlainText(r))+'}"'+t;case"number":case"boolean":return"${1:"+JSON.stringify(e)+"}"+t}return this.getInsertTextForValue(e,t)},e.prototype.getSuggestionKind=function(e){if(Array.isArray(e)){var t=e;e=t.length>0?t[0]:null}if(!e)return n.CompletionItemKind.Value;switch(e){case"string":return n.CompletionItemKind.Value;case"object":return n.CompletionItemKind.Module;case"property":return n.CompletionItemKind.Property;default:return n.CompletionItemKind.Value}},e.prototype.getLabelTextForMatchingNode=function(e,t){switch(e.type){case"array":return"[]";case"object":return"{}";default:return t.getText().substr(e.offset,e.length)}},e.prototype.getInsertTextForMatchingNode=function(e,t,r){switch(e.type){case"array":return this.getInsertTextForValue([],r);case"object":return this.getInsertTextForValue({},r);default:var n=t.getText().substr(e.offset,e.length)+r;return this.getInsertTextForPlainText(n)}},e.prototype.getInsertTextForProperty=function(e,t,r,n){var o=this.getInsertTextForValue(e,"");if(!r)return o;var i,s=o+": ",a=0;if(t){if(Array.isArray(t.defaultSnippets)){if(1===t.defaultSnippets.length){var l=t.defaultSnippets[0].body;S(l)&&(i=this.getInsertTextForSnippetValue(l,""))}a+=t.defaultSnippets.length}if(t.enum&&(i||1!==t.enum.length||(i=this.getInsertTextForGuessedValue(t.enum[0],"")),a+=t.enum.length),S(t.default)&&(i||(i=this.getInsertTextForGuessedValue(t.default,"")),a++),0===a){var c=Array.isArray(t.type)?t.type[0]:t.type;switch(c||(t.properties?c="object":t.items&&(c="array")),c){case"boolean":i="$1";break;case"string":i='"$1"';break;case"object":i="{$1}";break;case"array":i="[$1]";break;case"number":case"integer":i="${1:0}";break;case"null":i="${1:null}";break;default:return o}}}return(!i||a>1)&&(i="$1"),s+i+n},e.prototype.getCurrentWord=function(e,t){for(var r=t-1,n=e.getText();r>=0&&-1===' \t\n\r\v":{[,]}'.indexOf(n.charAt(r));)r--;return n.substring(r+1,t)},e.prototype.evaluateSeparatorAfter=function(e,t){var r=f(e.getText(),!0);switch(r.setPosition(t),r.scan()){case 5:case 2:case 4:case 17:return"";default:return","}},e.prototype.findItemAtOffset=function(e,t,r){for(var n=f(t.getText(),!0),o=e.items,i=o.length-1;i>=0;i--){var s=o[i];if(r>s.offset+s.length)return n.setPosition(s.offset+s.length),5===n.scan()&&r>=n.getTokenOffset()+n.getTokenLength()?i+1:i;if(r>=s.offset)return i}return 0},e.prototype.isInComment=function(e,t,r){var n=f(e.getText(),!1);n.setPosition(t);for(var o=n.scan();17!==o&&n.getTokenOffset()+n.getTokenLength()<r;)o=n.scan();return(12===o||13===o)&&n.getTokenOffset()<=r},e.prototype.fromMarkup=function(e){if(e&&this.doesSupportMarkdown())return{kind:n.MarkupKind.Markdown,value:e}},e.prototype.doesSupportMarkdown=function(){if(!S(this.supportsMarkdown)){var e=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsMarkdown=e&&e.completionItem&&Array.isArray(e.completionItem.documentationFormat)&&-1!==e.completionItem.documentationFormat.indexOf(n.MarkupKind.Markdown)}return this.supportsMarkdown},e}(),me=function(){function e(e,t,r){void 0===t&&(t=[]),this.schemaService=e,this.contributions=t,this.promise=r||Promise}return e.prototype.doHover=function(e,t,r){var o=e.offsetAt(t),i=r.getNodeFromOffset(o);if(!i||("object"===i.type||"array"===i.type)&&o>i.offset+1&&o<i.offset+i.length-1)return this.promise.resolve(null);var s=i;if("string"===i.type){var a=i.parent;if(a&&"property"===a.type&&a.keyNode===i&&!(i=a.valueNode))return this.promise.resolve(null)}for(var l=n.Range.create(e.positionAt(s.offset),e.positionAt(s.offset+s.length)),c=function(e){return{contents:e,range:l}},u=ae(i),p=this.contributions.length-1;p>=0;p--){var h=this.contributions[p].getInfoContribution(e.uri,u);if(h)return h.then(function(e){return c(e)})}return this.schemaService.getSchemaForResource(e.uri,r).then(function(e){if(e){var t=r.getMatchingSchemas(e.schema,i.offset),n=null,o=null,s=null,a=null;t.every(function(e){if(e.node===i&&!e.inverted&&e.schema&&(n=n||e.schema.title,o=o||e.schema.markdownDescription||ge(e.schema.description),e.schema.enum)){var t=e.schema.enum.indexOf(se(i));e.schema.markdownEnumDescriptions?s=e.schema.markdownEnumDescriptions[t]:e.schema.enumDescriptions&&(s=ge(e.schema.enumDescriptions[t])),s&&"string"!=typeof(a=e.schema.enum[t])&&(a=JSON.stringify(a))}return!0});var l="";return n&&(l=ge(n)),o&&(l.length>0&&(l+="\n\n"),l+=o),s&&(l.length>0&&(l+="\n\n"),l+="`"+ge(a)+"`: "+s),c([l])}return null})},e}();function ge(e){if(e)return e.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,"$1\n\n$3").replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}var ye=T.loadMessageBundle(),ve=function(){function e(e,t){this.jsonSchemaService=e,this.promise=t,this.validationEnabled=!0}return e.prototype.configure=function(e){e&&(this.validationEnabled=e.validate,this.commentSeverity=e.allowComments?void 0:n.DiagnosticSeverity.Error)},e.prototype.doValidation=function(e,t,r,o){var i=this;if(!this.validationEnabled)return this.promise.resolve([]);var s=[],a={},l=function(e){var t=e.range.start.line+" "+e.range.start.character+" "+e.message;a[t]||(a[t]=!0,s.push(e))},c=function(o){var a=r?xe(r.trailingCommas):n.DiagnosticSeverity.Error,c=r?xe(r.comments):i.commentSeverity;if(o){if(o.errors.length&&t.root){var u=t.root,p="object"===u.type?u.properties[0]:null;if(p&&"$schema"===p.keyNode.value){var d=p.valueNode||p,f=n.Range.create(e.positionAt(d.offset),e.positionAt(d.offset+d.length));l(n.Diagnostic.create(f,o.errors[0],n.DiagnosticSeverity.Warning,h.SchemaResolveError))}else{f=n.Range.create(e.positionAt(u.offset),e.positionAt(u.offset+1));l(n.Diagnostic.create(f,o.errors[0],n.DiagnosticSeverity.Warning,h.SchemaResolveError))}}else{var m=t.validate(e,o.schema);m&&m.forEach(l)}be(o.schema)&&(a=c=void 0)}if(t.syntaxErrors.forEach(function(e){if(e.code===h.TrailingComma){if("number"!=typeof c)return;e.severity=a}l(e)}),"number"==typeof c){var g=ye("InvalidCommentToken","Comments are not permitted in JSON.");t.comments.forEach(function(e){l(n.Diagnostic.create(e,g,c,h.CommentNotPermitted))})}return s};return o?this.promise.resolve(c(o)):this.jsonSchemaService.getSchemaForResource(e.uri,t).then(function(e){return c(e)})},e}();function be(e){if(e&&"object"==typeof e){if(e.allowComments)return!0;if(e.allOf)return e.allOf.some(be)}return!1}function xe(e){switch(e){case"error":return n.DiagnosticSeverity.Error;case"warning":return n.DiagnosticSeverity.Warning;case"ignore":return}}var Se=48,Ce=57,_e=65,Oe=97,Te=102;function Ne(e){return e<Se?0:e<=Ce?e-Se:(e<Oe&&(e+=Oe-_e),e>=Oe&&e<=Te?e-Oe+10:0)}function Ae(e){if("#"!==e[0])return null;switch(e.length){case 4:return{red:17*Ne(e.charCodeAt(1))/255,green:17*Ne(e.charCodeAt(2))/255,blue:17*Ne(e.charCodeAt(3))/255,alpha:1};case 5:return{red:17*Ne(e.charCodeAt(1))/255,green:17*Ne(e.charCodeAt(2))/255,blue:17*Ne(e.charCodeAt(3))/255,alpha:17*Ne(e.charCodeAt(4))/255};case 7:return{red:(16*Ne(e.charCodeAt(1))+Ne(e.charCodeAt(2)))/255,green:(16*Ne(e.charCodeAt(3))+Ne(e.charCodeAt(4)))/255,blue:(16*Ne(e.charCodeAt(5))+Ne(e.charCodeAt(6)))/255,alpha:1};case 9:return{red:(16*Ne(e.charCodeAt(1))+Ne(e.charCodeAt(2)))/255,green:(16*Ne(e.charCodeAt(3))+Ne(e.charCodeAt(4)))/255,blue:(16*Ne(e.charCodeAt(5))+Ne(e.charCodeAt(6)))/255,alpha:(16*Ne(e.charCodeAt(7))+Ne(e.charCodeAt(8)))/255}}return null}var Ee=T.loadMessageBundle(),we=function(){function e(e){this.schemaService=e}return e.prototype.findDocumentSymbols=function(e,t){var r=this,o=t.root;if(!o)return null;var i=e.uri;if(("vscode://defaultsettings/keybindings.json"===i||he(i.toLowerCase(),"/user/keybindings.json"))&&"array"===o.type){var s=[];return o.items.forEach(function(t){if("object"===t.type)for(var r=0,o=t.properties;r<o.length;r++){var i=o[r];if("key"===i.keyNode.value&&i.valueNode){if(i.valueNode){var a=n.Location.create(e.uri,Pe(e,t));s.push({name:se(i.valueNode),kind:n.SymbolKind.Function,location:a})}return}}}),s}var a=function(t,o,i){return"array"===o.type?o.items.forEach(function(e){return a(t,e,i)}):"object"===o.type&&o.properties.forEach(function(o){var s=n.Location.create(e.uri,Pe(e,o)),l=o.valueNode;if(l){var c=i?i+"."+o.keyNode.value:o.keyNode.value;t.push({name:o.keyNode.value,kind:r.getSymbolKind(l.type),location:s,containerName:i}),a(t,l,c)}}),t};return a([],o,void 0)},e.prototype.findDocumentSymbols2=function(e,t){var r=this,o=t.root;if(!o)return null;var i=e.uri;if(("vscode://defaultsettings/keybindings.json"===i||he(i.toLowerCase(),"/user/keybindings.json"))&&"array"===o.type){var s=[];return o.items.forEach(function(t){if("object"===t.type)for(var r=0,o=t.properties;r<o.length;r++){var i=o[r];if("key"===i.keyNode.value){if(i.valueNode){var a=Pe(e,t),l=Pe(e,i.keyNode);s.push({name:se(i.valueNode),kind:n.SymbolKind.Function,range:a,selectionRange:l})}return}}}),s}var a=function(t,n){return"array"===n.type?n.items.forEach(function(n,o){if(n){var i=Pe(e,n),s=i,l=String(o),c=a([],n);t.push({name:l,kind:r.getSymbolKind(n.type),range:i,selectionRange:s,children:c})}}):"object"===n.type&&n.properties.forEach(function(n){var o=n.valueNode;if(o){var i=Pe(e,n),s=Pe(e,n.keyNode),l=n.keyNode.value,c=a([],o);t.push({name:l,kind:r.getSymbolKind(o.type),range:i,selectionRange:s,children:c})}}),t};return a([],o)},e.prototype.getSymbolKind=function(e){switch(e){case"object":return n.SymbolKind.Module;case"string":return n.SymbolKind.String;case"number":return n.SymbolKind.Number;case"array":return n.SymbolKind.Array;case"boolean":return n.SymbolKind.Boolean;default:return n.SymbolKind.Variable}},e.prototype.getSymbolDetail=function(e){switch(e){case"object":return Ee("kind.object","object");case"string":return Ee("kind.string","string");case"number":return Ee("kind.number","number");case"array":return Ee("kind.array","array");case"boolean":return Ee("kind.boolean","boolean");default:return Ee("kind.null","null")}},e.prototype.findDocumentColors=function(e,t){return this.schemaService.getSchemaForResource(e.uri,t).then(function(r){var n=[];if(r)for(var o={},i=0,s=t.getMatchingSchemas(r.schema);i<s.length;i++){var a=s[i];if(!a.inverted&&a.schema&&("color"===a.schema.format||"color-hex"===a.schema.format)&&a.node&&"string"===a.node.type){var l=String(a.node.offset);if(!o[l]){var c=Ae(se(a.node));if(c){var u=Pe(e,a.node);n.push({color:c,range:u})}o[l]=!0}}}return n})},e.prototype.getColorPresentations=function(e,t,r,o){var i,s=[],a=Math.round(255*r.red),l=Math.round(255*r.green),c=Math.round(255*r.blue);function u(e){var t=e.toString(16);return 2!==t.length?"0"+t:t}return i=1===r.alpha?"#"+u(a)+u(l)+u(c):"#"+u(a)+u(l)+u(c)+u(Math.round(255*r.alpha)),s.push({label:i,textEdit:n.TextEdit.replace(o,JSON.stringify(i))}),s},e}();function Pe(e,t){return n.Range.create(e.positionAt(t.offset),e.positionAt(t.offset+t.length))}var ke=T.loadMessageBundle(),Ie={schemaAssociations:{},schemas:{"http://json-schema.org/draft-04/schema#":{title:ke("schema.json","Describes a JSON file using a schema. See json-schema.org for more info."),$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{type:"string",enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},uniqueItems:{type:"boolean",default:!1},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},required:{allOf:[{$ref:"#/definitions/stringArray"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{anyOf:[{type:"string",enum:["date-time","uri","email","hostname","ipv4","ipv6","regex"]},{type:"string"}]},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},not:{allOf:[{$ref:"#"}]}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}},"http://json-schema.org/draft-07/schema#":{title:ke("schema.json","Describes a JSON file using a schema. See json-schema.org for more info."),definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}},Re={id:ke("schema.json.id","A unique identifier for the schema."),$schema:ke("schema.json.$schema","The schema to verify this document against."),title:ke("schema.json.title","A descriptive title of the element."),description:ke("schema.json.description","A long description of the element. Used in hover menus and suggestions."),default:ke("schema.json.default","A default value. Used by suggestions."),multipleOf:ke("schema.json.multipleOf","A number that should cleanly divide the current value (i.e. have no remainder)."),maximum:ke("schema.json.maximum","The maximum numerical value, inclusive by default."),exclusiveMaximum:ke("schema.json.exclusiveMaximum","Makes the maximum property exclusive."),minimum:ke("schema.json.minimum","The minimum numerical value, inclusive by default."),exclusiveMinimum:ke("schema.json.exclusiveMininum","Makes the minimum property exclusive."),maxLength:ke("schema.json.maxLength","The maximum length of a string."),minLength:ke("schema.json.minLength","The minimum length of a string."),pattern:ke("schema.json.pattern","A regular expression to match the string against. It is not implicitly anchored."),additionalItems:ke("schema.json.additionalItems","For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail."),items:ke("schema.json.items","For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on."),maxItems:ke("schema.json.maxItems","The maximum number of items that can be inside an array. Inclusive."),minItems:ke("schema.json.minItems","The minimum number of items that can be inside an array. Inclusive."),uniqueItems:ke("schema.json.uniqueItems","If all of the items in the array must be unique. Defaults to false."),maxProperties:ke("schema.json.maxProperties","The maximum number of properties an object can have. Inclusive."),minProperties:ke("schema.json.minProperties","The minimum number of properties an object can have. Inclusive."),required:ke("schema.json.required","An array of strings that lists the names of all properties required on this object."),additionalProperties:ke("schema.json.additionalProperties","Either a schema or a boolean. If a schema, then used to validate all properties not matched by 'properties' or 'patternProperties'. If false, then any properties not matched by either will cause this schema to fail."),definitions:ke("schema.json.definitions","Not used for validation. Place subschemas here that you wish to reference inline with $ref."),properties:ke("schema.json.properties","A map of property names to schemas for each property."),patternProperties:ke("schema.json.patternProperties","A map of regular expressions on property names to schemas for matching properties."),dependencies:ke("schema.json.dependencies","A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object."),enum:ke("schema.json.enum","The set of literal values that are valid."),type:ke("schema.json.type","Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types."),format:ke("schema.json.format","Describes the format expected for the value."),allOf:ke("schema.json.allOf","An array of schemas, all of which must match."),anyOf:ke("schema.json.anyOf","An array of schemas, where at least one must match."),oneOf:ke("schema.json.oneOf","An array of schemas, exactly one of which must match."),not:ke("schema.json.not","A schema which must not match."),$id:ke("schema.json.$id","A unique identifier for the schema."),$ref:ke("schema.json.$ref","Reference a definition hosted on any location."),$comment:ke("schema.json.$comment","Comments from schema authors to readers or maintainers of the schema."),readOnly:ke("schema.json.readOnly","Indicates that the value of the instance is managed exclusively by the owning authority."),examples:ke("schema.json.examples","Sample JSON values associated with a particular schema, for the purpose of illustrating usage."),contains:ke("schema.json.contains",'An array instance is valid against "contains" if at least one of its elements is valid against the given schema.'),propertyNames:ke("schema.json.propertyNames","If the instance is an object, this keyword validates if every property name in the instance validates against the provided schema."),const:ke("schema.json.const","An instance validates successfully against this keyword if its value is equal to the value of the keyword."),contentMediaType:ke("schema.json.contentMediaType","Describes the media type of a string property."),contentEncoding:ke("schema.json.contentEncoding","Describes the content encoding of a string property."),if:ke("schema.json.if",'The validation outcome of the "if" subschema controls which of the "then" or "else" keywords are evaluated.'),then:ke("schema.json.then",'The "if" subschema is used for validation when the "if" subschema succeeds.'),else:ke("schema.json.else",'The "else" subschema is used for validation when the "if" subschema fails.')};for(var Le in Ie.schemas){var De=Ie.schemas[Le];for(var Me in De.properties){var je=De.properties[Me];!0===je&&(je=De.properties[Me]={});var Fe=Re[Me];Fe?je.description=Fe:console.log(Me+": localize('schema.json."+Me+'\', "")')}}var ze=T.loadMessageBundle(),Ue=function(){function e(e){try{this.patternRegExp=new RegExp(function(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}(e)+"$")}catch(e){this.patternRegExp=null}this.schemas=[]}return e.prototype.addSchema=function(e){this.schemas.push(e)},e.prototype.matchesPattern=function(e){return this.patternRegExp&&this.patternRegExp.test(e)},e.prototype.getSchemas=function(){return this.schemas},e}(),Be=function(){function e(e,t,r){this.service=e,this.url=t,r&&(this.unresolvedSchema=this.service.promise.resolve(new Ve(r)))}return e.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.url)),this.unresolvedSchema},e.prototype.getResolvedSchema=function(){var e=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then(function(t){return e.service.resolveSchemaContent(t,e.url)})),this.resolvedSchema},e.prototype.clearSchema=function(){this.resolvedSchema=null,this.unresolvedSchema=null},e}(),Ve=function(){return function(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}}(),qe=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e.prototype.getSection=function(e){return re(this.getSectionRecursive(e,this.schema))},e.prototype.getSectionRecursive=function(e,t){if(!t||"boolean"==typeof t||0===e.length)return t;var r=e.shift();if(t.properties&&(t.properties[r],1))return this.getSectionRecursive(e,t.properties[r]);if(t.patternProperties)for(var n=0,o=Object.keys(t.patternProperties);n<o.length;n++){var i=o[n];if(new RegExp(i).test(r))return this.getSectionRecursive(e,t.patternProperties[i])}else{if("object"==typeof t.additionalProperties)return this.getSectionRecursive(e,t.additionalProperties);if(r.match("[0-9]+"))if(Array.isArray(t.items)){var s=parseInt(r,10);if(!isNaN(s)&&t.items[s])return this.getSectionRecursive(e,t.items[s])}else if(t.items)return this.getSectionRecursive(e,t.items)}return null},e}(),He=function(){function e(e,t,r){this.contextService=t,this.requestService=e,this.promiseConstructor=r||Promise,this.callOnDispose=[],this.contributionSchemas={},this.contributionAssociations={},this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={},this.registeredSchemasIds={}}return e.prototype.getRegisteredSchemaIds=function(e){return Object.keys(this.registeredSchemasIds).filter(function(t){var r=M.parse(t).scheme;return"schemaservice"!==r&&(!e||e(r))})},Object.defineProperty(e.prototype,"promise",{get:function(){return this.promiseConstructor},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},e.prototype.onResourceChange=function(e){e=this.normalizeId(e);var t=this.schemasById[e];return!!t&&(t.clearSchema(),!0)},e.prototype.normalizeId=function(e){return M.parse(e).toString()},e.prototype.setSchemaContributions=function(e){if(e.schemas){var t=e.schemas;for(var r in t){var n=this.normalizeId(r);this.contributionSchemas[n]=this.addSchemaHandle(n,t[r])}}if(e.schemaAssociations){var o=e.schemaAssociations;for(var i in o){var s=o[i];this.contributionAssociations[i]=s;for(var a=this.getOrAddFilePatternAssociation(i),l=0,c=s;l<c.length;l++){var u=c[l];r=this.normalizeId(u);a.addSchema(r)}}}},e.prototype.addSchemaHandle=function(e,t){var r=new Be(this,e,t);return this.schemasById[e]=r,r},e.prototype.getOrAddSchemaHandle=function(e,t){return this.schemasById[e]||this.addSchemaHandle(e,t)},e.prototype.getOrAddFilePatternAssociation=function(e){var t=this.filePatternAssociationById[e];return t||(t=new Ue(e),this.filePatternAssociationById[e]=t,this.filePatternAssociations.push(t)),t},e.prototype.registerExternalSchema=function(e,t,r){void 0===t&&(t=null);var n=this.normalizeId(e);if(this.registeredSchemasIds[n]=!0,t)for(var o=0,i=t;o<i.length;o++){var s=i[o];this.getOrAddFilePatternAssociation(s).addSchema(n)}return r?this.addSchemaHandle(n,r):this.getOrAddSchemaHandle(n)},e.prototype.clearExternalSchemas=function(){for(var e in this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={},this.registeredSchemasIds={},this.contributionSchemas)this.schemasById[e]=this.contributionSchemas[e],this.registeredSchemasIds[e]=!0;for(var t in this.contributionAssociations)for(var r=this.getOrAddFilePatternAssociation(t),n=0,o=this.contributionAssociations[t];n<o.length;n++){var i=o[n];e=this.normalizeId(i);r.addSchema(e)}},e.prototype.getResolvedSchema=function(e){var t=this.normalizeId(e),r=this.schemasById[t];return r?r.getResolvedSchema():this.promise.resolve(null)},e.prototype.loadSchema=function(e){if(!this.requestService){var t=ze("json.schema.norequestservice","Unable to load schema from '{0}'. No schema request service available",$e(e));return this.promise.resolve(new Ve({},[t]))}return this.requestService(e).then(function(t){if(!t){var r=ze("json.schema.nocontent","Unable to load schema from '{0}': No content.",$e(e));return new Ve({},[r])}var n,o=[];n=m(t,o);var i=o.length?[ze("json.schema.invalidFormat","Unable to parse content from '{0}': Parse error at offset {1}.",$e(e),o[0].offset)]:[];return new Ve(n,i)},function(e){var t=e.toString(),r=e.toString().split("Error: ");return r.length>1&&(t=r[1]),new Ve({},[t])})},e.prototype.resolveSchemaContent=function(e,t){var r=this,n=e.errors.slice(0),o=e.schema,i=this.contextService,s=function(e,t,r,o){var i=function(e,t){if(!t)return e;var r=e;return"/"===t[0]&&(t=t.substr(1)),t.split("/").some(function(e){return!(r=r[e])}),r}(t,o);if(i)for(var s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(e[s]=i[s]);else n.push(ze("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",o,r))},a=function(e,t,o,a){return i&&!/^\w+:\/\/.*/.test(t)&&(t=i.resolveRelativePath(t,a)),t=r.normalizeId(t),r.getOrAddSchemaHandle(t).getUnresolvedSchema().then(function(r){if(r.errors.length){var i=o?t+"#"+o:t;n.push(ze("json.schema.problemloadingref","Problems loading reference '{0}': {1}",i,r.errors[0]))}return s(e,r.schema,t,o),l(e,r.schema,t)})},l=function(e,t,n){if(!e||"object"!=typeof e)return Promise.resolve(null);for(var o=[e],i=[],l=[],c=function(e){for(;e.$ref;){var r=e.$ref.split("#",2);if(delete e.$ref,r[0].length>0)return void l.push(a(e,r[0],r[1],n));s(e,t,n,r[1])}!function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e;r<n.length;r++){var i=n[r];"object"==typeof i&&o.push(i)}}(e.items,e.additionalProperties,e.not,e.contains,e.propertyNames,e.if,e.then,e.else),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e;r<n.length;r++){var i=n[r];if("object"==typeof i)for(var s in i){var a=i[s];"object"==typeof a&&o.push(a)}}}(e.definitions,e.properties,e.patternProperties,e.dependencies),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e;r<n.length;r++){var i=n[r];if(Array.isArray(i))for(var s=0,a=i;s<a.length;s++){var l=a[s];"object"==typeof l&&o.push(l)}}}(e.anyOf,e.allOf,e.oneOf,e.items)};o.length;){var u=o.pop();i.indexOf(u)>=0||(i.push(u),c(u))}return r.promise.all(l)};return l(o,o,t).then(function(e){return new qe(o,n)})},e.prototype.getSchemaForResource=function(e,t){if(t&&t.root&&"object"===t.root.type){var r=t.root.properties.filter(function(e){return"$schema"===e.keyNode.value&&e.valueNode&&"string"===e.valueNode.type});if(r.length>0){var n=se(r[0].valueNode);if(n&&function(e,t){if(e.length<t.length)return!1;for(var r=0;r<t.length;r++)if(e[r]!==t[r])return!1;return!0}(n,".")&&this.contextService&&(n=this.contextService.resolveRelativePath(n,e)),n){var o=this.normalizeId(n);return this.getOrAddSchemaHandle(o).getResolvedSchema()}}}for(var i=Object.create(null),s=[],a=0,l=this.filePatternAssociations;a<l.length;a++){var c=l[a];if(c.matchesPattern(e))for(var u=0,p=c.getSchemas();u<p.length;u++){var h=p[u];i[h]||(s.push(h),i[h]=!0)}}return s.length>0?this.createCombinedSchema(e,s).getResolvedSchema():this.promise.resolve(null)},e.prototype.createCombinedSchema=function(e,t){if(1===t.length)return this.getOrAddSchemaHandle(t[0]);var r="schemaservice://combinedSchema/"+encodeURIComponent(e),n={allOf:t.map(function(e){return{$ref:e}})};return this.addSchemaHandle(r,n)},e}();function $e(e){try{var t=M.parse(e);if("file"===t.scheme)return t.fsPath}catch(e){}return e}function We(e,t){var r=[],o=[],i=[],s=-1,a=f(e.getText(),!1),l=a.scan();function c(e){r.push(e),o.push(i.length)}for(;17!==l;){switch(l){case 1:case 3:var u={startLine:d=e.positionAt(a.getTokenOffset()).line,endLine:d,kind:1===l?"object":"array"};i.push(u);break;case 2:case 4:var p=2===l?"object":"array";if(i.length>0&&i[i.length-1].kind===p){u=i.pop();var h=e.positionAt(a.getTokenOffset()).line;u&&h>u.startLine+1&&s!==u.startLine&&(u.endLine=h-1,c(u),s=u.startLine)}break;case 13:var d=e.positionAt(a.getTokenOffset()).line,m=e.positionAt(a.getTokenOffset()+a.getTokenLength()).line;1===a.getTokenError()&&d+1<e.lineCount?a.setPosition(e.offsetAt(n.Position.create(d+1,0))):d<m&&(c({startLine:d,endLine:m,kind:n.FoldingRangeKind.Comment}),s=d);break;case 12:var g=e.getText().substr(a.getTokenOffset(),a.getTokenLength()).match(/^\/\/\s*#(region\b)|(endregion\b)/);if(g){h=e.positionAt(a.getTokenOffset()).line;if(g[1]){u={startLine:h,endLine:h,kind:n.FoldingRangeKind.Region};i.push(u)}else{for(var y=i.length-1;y>=0&&i[y].kind!==n.FoldingRangeKind.Region;)y--;if(y>=0){u=i[y];i.length=y,h>u.startLine&&s!==u.startLine&&(u.endLine=h,c(u),s=u.startLine)}}}}l=a.scan()}var v=t&&t.rangeLimit;if("number"!=typeof v||r.length<=v)return r;for(var b=[],x=0,S=o;x<S.length;x++){(N=S[x])<30&&(b[N]=(b[N]||0)+1)}var C=0,_=0;for(y=0;y<b.length;y++){var O=b[y];if(O){if(O+C>v){_=y;break}C+=O}}var T=[];for(y=0;y<r.length;y++){var N;"number"==typeof(N=o[y])&&(N<_||N===_&&C++<v)&&T.push(r[y])}return T}function Ke(e){var t=e.promiseConstructor||Promise,r=new He(e.schemaRequestService,e.workspaceContext,t);r.setSchemaContributions(Ie);var o=new fe(r,e.contributions,t,e.clientCapabilities),i=new me(r,e.contributions,t),s=new we(r),a=new ve(r,t);return{configure:function(e){r.clearExternalSchemas(),e.schemas&&e.schemas.forEach(function(e){r.registerExternalSchema(e.uri,e.fileMatch,e.schema)}),a.configure(e)},resetSchema:function(e){return r.onResourceChange(e)},doValidation:a.doValidation.bind(a),parseJSONDocument:function(e){return pe(e,{collectComments:!0})},newJSONDocument:function(e,t){return function(e,t){return void 0===t&&(t=[]),new ce(e,t,[])}(e,t)},doResolve:o.doResolve.bind(o),doComplete:o.doComplete.bind(o),findDocumentSymbols:s.findDocumentSymbols.bind(s),findDocumentSymbols2:s.findDocumentSymbols2.bind(s),findColorSymbols:function(e,t){return s.findDocumentColors(e,t).then(function(e){return e.map(function(e){return e.range})})},findDocumentColors:s.findDocumentColors.bind(s),getColorPresentations:s.getColorPresentations.bind(s),doHover:i.doHover.bind(i),getFoldingRanges:We,format:function(e,t,r){var o=void 0;if(t){var i=e.offsetAt(t.start);o={offset:i,length:e.offsetAt(t.end)-i}}var s={tabSize:r?r.tabSize:4,insertSpaces:!r||r.insertSpaces,eol:"\n"};return function(e,t,r){return l(e,t,r)}(e.getText(),o,s).map(function(t){return n.TextEdit.replace(n.Range.create(e.positionAt(t.offset),e.positionAt(t.offset+t.length)),t.content)})}}}r.d(t,"getLanguageService",function(){return Ke}),r.d(t,"Color",function(){return n.Color}),r.d(t,"ColorInformation",function(){return n.ColorInformation}),r.d(t,"ColorPresentation",function(){return n.ColorPresentation}),r.d(t,"FoldingRange",function(){return n.FoldingRange}),r.d(t,"FoldingRangeKind",function(){return n.FoldingRangeKind}),r.d(t,"ErrorCode",function(){return h}),r.d(t,"ClientCapabilities",function(){return d}),r.d(t,"TextDocument",function(){return n.TextDocument}),r.d(t,"Position",function(){return n.Position}),r.d(t,"CompletionItem",function(){return n.CompletionItem}),r.d(t,"CompletionList",function(){return n.CompletionList}),r.d(t,"Hover",function(){return n.Hover}),r.d(t,"Range",function(){return n.Range}),r.d(t,"SymbolInformation",function(){return n.SymbolInformation}),r.d(t,"Diagnostic",function(){return n.Diagnostic}),r.d(t,"TextEdit",function(){return n.TextEdit}),r.d(t,"FormattingOptions",function(){return n.FormattingOptions}),r.d(t,"MarkedString",function(){return n.MarkedString})},123:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(52),s=r(0),a=r(13),l=r(43);let c=class SetTransition extends l.Transition{constructor(e,t){super(e),null==t&&(t=i.IntervalSet.of(a.Token.INVALID_TYPE)),this.set=t}get serializationType(){return 7}get label(){return this.set}matches(e,t,r){return this.set.contains(e)}toString(){return this.set.toString()}};n([s.NotNull],c.prototype,"set",void 0),n([s.Override],c.prototype,"serializationType",null),n([s.Override,s.NotNull],c.prototype,"label",null),n([s.Override],c.prototype,"matches",null),n([s.Override,s.NotNull],c.prototype,"toString",null),c=n([o(0,s.NotNull),o(1,s.Nullable)],c),t.SetTransition=c},124:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),s=r(43);let a=class RuleTransition extends s.Transition{constructor(e,t,r,n){super(e),this.tailCall=!1,this.optimizedTailCall=!1,this.ruleIndex=t,this.precedence=r,this.followState=n}get serializationType(){return 3}get isEpsilon(){return!0}matches(e,t,r){return!1}};n([i.NotNull],a.prototype,"followState",void 0),n([i.Override],a.prototype,"serializationType",null),n([i.Override],a.prototype,"isEpsilon",null),n([i.Override],a.prototype,"matches",null),a=n([o(0,i.NotNull),o(3,i.NotNull)],a),t.RuleTransition=a},125:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(0),i=r(83);class ErrorNode extends i.TerminalNode{constructor(e){super(e)}accept(e){return e.visitErrorNode(this)}}n([o.Override],ErrorNode.prototype,"accept",null),t.ErrorNode=ErrorNode},126:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(181),s=r(42),a=r(41),l=r(182),c=r(183),u=r(309),p=r(178),h=r(61),d=r(310),f=r(95),m=r(50),g=r(173),y=r(311),v=r(52),b=r(177),x=r(312),S=r(313),C=r(314),_=r(315),O=r(316),T=r(317),N=r(318),A=r(319),E=r(320),w=r(0),P=r(122),k=r(184),I=r(330),R=r(331),L=r(332),D=r(185),M=r(333),j=r(334),F=r(74),z=r(124),U=r(123),B=r(335),V=r(336),q=r(176),H=r(13),$=r(337),W=r(338),K=r(179);class ATNDeserializer{constructor(e){null==e&&(e=l.ATNDeserializationOptions.defaultOptions),this.deserializationOptions=e}static get SERIALIZED_VERSION(){return 3}isFeatureSupported(e,t){let r=ATNDeserializer.SUPPORTED_UUIDS.findIndex(t=>t.equals(e));return!(r<0)&&ATNDeserializer.SUPPORTED_UUIDS.findIndex(e=>e.equals(t))>=r}deserialize(e){e=e.slice(0);for(let t=1;t<e.length;t++)e[t]=e[t]-2&65535;let t=0,r=ATNDeserializer.toInt(e[t++]);if(r!=ATNDeserializer.SERIALIZED_VERSION){let e=`Could not deserialize ATN with version ${r} (expected ${ATNDeserializer.SERIALIZED_VERSION}).`;throw new Error(e)}let n=ATNDeserializer.toUUID(e,t);if(t+=8,ATNDeserializer.SUPPORTED_UUIDS.findIndex(e=>e.equals(n))<0){let e=`Could not deserialize ATN with UUID ${n} (expected ${ATNDeserializer.SERIALIZED_UUID} or a legacy UUID).`;throw new Error(e)}let o=this.isFeatureSupported(ATNDeserializer.ADDED_LEXER_ACTIONS,n),l=ATNDeserializer.toInt(e[t++]),h=ATNDeserializer.toInt(e[t++]),m=new a.ATN(l,h),v=[],x=[],C=ATNDeserializer.toInt(e[t++]);for(let r=0;r<C;r++){let r=ATNDeserializer.toInt(e[t++]);if(0===r){m.addState(new b.InvalidState);continue}let n=ATNDeserializer.toInt(e[t++]);65535===n&&(n=-1);let o=this.stateFactory(r,n);if(12===r){let r=ATNDeserializer.toInt(e[t++]);v.push([o,r])}else if(o instanceof f.BlockStartState){let r=ATNDeserializer.toInt(e[t++]);x.push([o,r])}m.addState(o)}for(let e of v)e[0].loopBackState=m.states[e[1]];for(let e of x)e[0].endState=m.states[e[1]];let _=ATNDeserializer.toInt(e[t++]);for(let r=0;r<_;r++){let r=ATNDeserializer.toInt(e[t++]);m.states[r].nonGreedy=!0}let O=ATNDeserializer.toInt(e[t++]);for(let r=0;r<O;r++){let r=ATNDeserializer.toInt(e[t++]);m.states[r].sll=!0}let T=ATNDeserializer.toInt(e[t++]);for(let r=0;r<T;r++){let r=ATNDeserializer.toInt(e[t++]);m.states[r].isPrecedenceRule=!0}let N=ATNDeserializer.toInt(e[t++]);0===m.grammarType&&(m.ruleToTokenType=new Int32Array(N)),m.ruleToStartState=new Array(N);for(let r=0;r<N;r++){let o=ATNDeserializer.toInt(e[t++]),i=m.states[o];if(i.leftFactored=0!=ATNDeserializer.toInt(e[t++]),m.ruleToStartState[r]=i,0===m.grammarType){let o=ATNDeserializer.toInt(e[t++]);if(65535===o&&(o=H.Token.EOF),m.ruleToTokenType[r]=o,!this.isFeatureSupported(ATNDeserializer.ADDED_LEXER_ACTIONS,n)){let r=ATNDeserializer.toInt(e[t++]);65535===r&&(r=-1)}}}m.ruleToStopState=new Array(N);for(let e of m.states)e instanceof F.RuleStopState&&(m.ruleToStopState[e.ruleIndex]=e,m.ruleToStartState[e.ruleIndex].stopState=e);let A=ATNDeserializer.toInt(e[t++]);for(let r=0;r<A;r++){let r=ATNDeserializer.toInt(e[t++]);m.modeToStartState.push(m.states[r])}m.modeToDFA=new Array(A);for(let e=0;e<A;e++)m.modeToDFA[e]=new g.DFA(m.modeToStartState[e]);let w=[];t=this.readSets(e,t,w,!1),this.isFeatureSupported(ATNDeserializer.ADDED_UNICODE_SMP,n)&&(t=this.readSets(e,t,w,!0));let P=ATNDeserializer.toInt(e[t++]);for(let r=0;r<P;r++){let r=ATNDeserializer.toInt(e[t]),n=ATNDeserializer.toInt(e[t+1]),o=ATNDeserializer.toInt(e[t+2]),i=ATNDeserializer.toInt(e[t+3]),s=ATNDeserializer.toInt(e[t+4]),a=ATNDeserializer.toInt(e[t+5]),l=this.edgeFactory(m,o,r,n,i,s,a,w);m.states[r].addTransition(l),t+=6}let k=new s.Array2DHashSet({hashCode:e=>e.stopState^e.returnState^e.outermostPrecedenceReturn,equals:function(e,t){return e.stopState===t.stopState&&e.returnState===t.returnState&&e.outermostPrecedenceReturn===t.outermostPrecedenceReturn}}),L=[];for(let e of m.states){let t=e.ruleIndex>=0&&m.ruleToStartState[e.ruleIndex].leftFactored;for(let r=0;r<e.numberOfTransitions;r++){let n=e.transition(r);if(!(n instanceof z.RuleTransition))continue;let o=n;if(!m.ruleToStartState[o.target.ruleIndex].leftFactored&&t)continue;let i=-1;m.ruleToStartState[o.target.ruleIndex].isPrecedenceRule&&0===o.precedence&&(i=o.target.ruleIndex);let s={stopState:o.target.ruleIndex,returnState:o.followState.stateNumber,outermostPrecedenceReturn:i};k.add(s)&&L.push(s)}}for(let e of L){let t=new y.EpsilonTransition(m.states[e.returnState],e.outermostPrecedenceReturn);m.ruleToStopState[e.stopState].addTransition(t)}for(let e of m.states){if(e instanceof f.BlockStartState){if(null==e.endState)throw new Error("IllegalStateException");if(null!=e.endState.startState)throw new Error("IllegalStateException");e.endState.startState=e}if(e instanceof R.PlusLoopbackState){let t=e;for(let e=0;e<t.numberOfTransitions;e++){let r=t.transition(e).target;r instanceof I.PlusBlockStartState&&(r.loopBackState=t)}}else if(e instanceof V.StarLoopbackState){let t=e;for(let e=0;e<t.numberOfTransitions;e++){let r=t.transition(e).target;r instanceof q.StarLoopEntryState&&(r.loopBackState=t)}}}let D=ATNDeserializer.toInt(e[t++]);for(let r=1;r<=D;r++){let n=ATNDeserializer.toInt(e[t++]),o=m.states[n];m.decisionToState.push(o),o.decision=r-1}if(0===m.grammarType)if(o){m.lexerActions=new Array(ATNDeserializer.toInt(e[t++]));for(let r=0;r<m.lexerActions.length;r++){let n=ATNDeserializer.toInt(e[t++]),o=ATNDeserializer.toInt(e[t++]);65535==o&&(o=-1);let i=ATNDeserializer.toInt(e[t++]);65535==i&&(i=-1);let s=this.lexerActionFactory(n,o,i);m.lexerActions[r]=s}}else{let e=[];for(let t of m.states)for(let r=0;r<t.numberOfTransitions;r++){let n=t.transition(r);if(!(n instanceof i.ActionTransition))continue;let o=n.ruleIndex,s=n.actionIndex,a=new S.LexerCustomAction(o,s);t.setTransition(r,new i.ActionTransition(n.target,o,e.length,!1)),e.push(a)}m.lexerActions=e}this.markPrecedenceDecisions(m),m.decisionToDFA=new Array(D);for(let e=0;e<D;e++)m.decisionToDFA[e]=new g.DFA(m.decisionToState[e],e);if(this.deserializationOptions.isVerifyATN&&this.verifyATN(m),this.deserializationOptions.isGenerateRuleBypassTransitions&&1===m.grammarType){m.ruleToTokenType=new Int32Array(m.ruleToStartState.length);for(let e=0;e<m.ruleToStartState.length;e++)m.ruleToTokenType[e]=m.maxTokenType+e+1;for(let e=0;e<m.ruleToStartState.length;e++){let t=new u.BasicBlockStartState;t.ruleIndex=e,m.addState(t);let r,n,o=new d.BlockEndState;if(o.ruleIndex=e,m.addState(o),t.endState=o,m.defineDecisionState(t),o.startState=t,m.ruleToStartState[e].isPrecedenceRule){r=void 0;for(let t of m.states){if(t.ruleIndex!==e)continue;if(!(t instanceof q.StarLoopEntryState))continue;let n=t.transition(t.numberOfTransitions-1).target;if(n instanceof E.LoopEndState&&(n.epsilonOnlyTransitions&&n.transition(0).target instanceof F.RuleStopState)){r=t;break}}if(!r)throw new Error("Couldn't identify final state of the precedence rule prefix section.");n=r.loopBackState.transition(0)}else r=m.ruleToStopState[e];for(let e of m.states)for(let t=0;t<e.numberOfTransitions;t++){let i=e.transition(t);i!==n&&(i.target===r&&(i.target=o))}for(;m.ruleToStartState[e].numberOfTransitions>0;){let r=m.ruleToStartState[e].removeTransition(m.ruleToStartState[e].numberOfTransitions-1);t.addTransition(r)}m.ruleToStartState[e].addTransition(new y.EpsilonTransition(t)),o.addTransition(new y.EpsilonTransition(r));let i=new p.BasicState;m.addState(i),i.addTransition(new c.AtomTransition(o,m.ruleToTokenType[e])),t.addTransition(new y.EpsilonTransition(i))}this.deserializationOptions.isVerifyATN&&this.verifyATN(m)}if(this.deserializationOptions.isOptimize){for(;;){let e=0;e+=ATNDeserializer.inlineSetRules(m),e+=ATNDeserializer.combineChainedEpsilons(m);let t=0===m.grammarType;if(0===(e+=ATNDeserializer.optimizeSets(m,t)))break}this.deserializationOptions.isVerifyATN&&this.verifyATN(m)}return ATNDeserializer.identifyTailCalls(m),m}readSets(e,t,r,n){let o=ATNDeserializer.toInt(e[t++]);for(let i=0;i<o;i++){let o=ATNDeserializer.toInt(e[t]);t++;let i=new v.IntervalSet;if(r.push(i),0!=ATNDeserializer.toInt(e[t++])&&i.add(-1),n)for(let r=0;r<o;r++)i.add(ATNDeserializer.toInt32(e,t),ATNDeserializer.toInt32(e,t+2)),t+=4;else for(let r=0;r<o;r++)i.add(ATNDeserializer.toInt(e[t]),ATNDeserializer.toInt(e[t+1])),t+=2}return t}markPrecedenceDecisions(e){let t=new Map;for(let r of e.states)if(r instanceof q.StarLoopEntryState&&e.ruleToStartState[r.ruleIndex].isPrecedenceRule){let n=r.transition(r.numberOfTransitions-1).target;n instanceof E.LoopEndState&&n.epsilonOnlyTransitions&&n.transition(0).target instanceof F.RuleStopState&&(t.set(r.ruleIndex,r),r.precedenceRuleDecision=!0,r.precedenceLoopbackStates=new h.BitSet(e.states.length))}for(let r of t)for(let t of e.ruleToStopState[r[0]].getTransitions()){if(1!==t.serializationType)continue;-1===t.outermostPrecedenceReturn&&r[1].precedenceLoopbackStates.set(t.target.stateNumber)}}verifyATN(e){for(let t of e.states)if(this.checkCondition(null!=t,"ATN states should not be null."),0!==t.stateType){if(this.checkCondition(t.onlyHasEpsilonTransitions||t.numberOfTransitions<=1),t instanceof I.PlusBlockStartState&&this.checkCondition(null!=t.loopBackState),t instanceof q.StarLoopEntryState){let e=t;if(this.checkCondition(null!=e.loopBackState),this.checkCondition(2===e.numberOfTransitions),e.transition(0).target instanceof B.StarBlockStartState)this.checkCondition(e.transition(1).target instanceof E.LoopEndState),this.checkCondition(!e.nonGreedy);else{if(!(e.transition(0).target instanceof E.LoopEndState))throw new Error("IllegalStateException");this.checkCondition(e.transition(1).target instanceof B.StarBlockStartState),this.checkCondition(e.nonGreedy)}}if(t instanceof V.StarLoopbackState&&(this.checkCondition(1===t.numberOfTransitions),this.checkCondition(t.transition(0).target instanceof q.StarLoopEntryState)),t instanceof E.LoopEndState&&this.checkCondition(null!=t.loopBackState),t instanceof j.RuleStartState&&this.checkCondition(null!=t.stopState),t instanceof f.BlockStartState&&this.checkCondition(null!=t.endState),t instanceof d.BlockEndState&&this.checkCondition(null!=t.startState),t instanceof m.DecisionState){let e=t;this.checkCondition(e.numberOfTransitions<=1||e.decision>=0)}else this.checkCondition(t.numberOfTransitions<=1||t instanceof F.RuleStopState)}}checkCondition(e,t){if(!e)throw new Error("IllegalStateException: "+t)}static inlineSetRules(e){let t=0,r=new Array(e.ruleToStartState.length);for(let t=0;t<e.ruleToStartState.length;t++){let n=e.ruleToStartState[t];for(;n.onlyHasEpsilonTransitions&&1===n.numberOfOptimizedTransitions&&1===n.getOptimizedTransition(0).serializationType;)n=n.getOptimizedTransition(0).target;if(1!==n.numberOfOptimizedTransitions)continue;let o=n.getOptimizedTransition(0),i=o.target;if(!o.isEpsilon&&i.onlyHasEpsilonTransitions&&1===i.numberOfOptimizedTransitions&&i.getOptimizedTransition(0).target instanceof F.RuleStopState)switch(o.serializationType){case 5:case 2:case 7:r[t]=o;break;case 8:case 9:default:continue}}for(let n=0;n<e.states.length;n++){let o,i=e.states[n];if(!(i.ruleIndex<0)){for(let n=0;n<i.numberOfOptimizedTransitions;n++){let s=i.getOptimizedTransition(n);if(!(s instanceof z.RuleTransition)){null!=o&&o.push(s);continue}let a=s,l=r[a.target.ruleIndex];if(null==l){null!=o&&o.push(s);continue}if(null==o){o=[];for(let e=0;e<n;e++)o.push(i.getOptimizedTransition(n))}t++;let u=a.followState,h=new p.BasicState;switch(h.setRuleIndex(u.ruleIndex),e.addState(h),o.push(new y.EpsilonTransition(h)),l.serializationType){case 5:h.addTransition(new c.AtomTransition(u,l._label));break;case 2:h.addTransition(new M.RangeTransition(u,l.from,l.to));break;case 7:h.addTransition(new U.SetTransition(u,l.label));break;default:throw new Error("UnsupportedOperationException")}}if(null!=o){if(i.isOptimized)for(;i.numberOfOptimizedTransitions>0;)i.removeOptimizedTransition(i.numberOfOptimizedTransitions-1);for(let e of o)i.addOptimizedTransition(e)}}}return k.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+t+" rule invocations by inlining sets."),t}static combineChainedEpsilons(e){let t=0;for(let r of e.states){if(!r.onlyHasEpsilonTransitions||r instanceof F.RuleStopState)continue;let e;e:for(let n=0;n<r.numberOfOptimizedTransitions;n++){let o=r.getOptimizedTransition(n),i=o.target;if(1===o.serializationType&&-1===o.outermostPrecedenceReturn&&1===i.stateType&&i.onlyHasEpsilonTransitions){for(let t=0;t<i.numberOfOptimizedTransitions;t++)if(1!==i.getOptimizedTransition(t).serializationType||-1!==i.getOptimizedTransition(t).outermostPrecedenceReturn){null!=e&&e.push(o);continue e}if(t++,null==e){e=[];for(let t=0;t<n;t++)e.push(r.getOptimizedTransition(t))}for(let t=0;t<i.numberOfOptimizedTransitions;t++){let r=i.getOptimizedTransition(t).target;e.push(new y.EpsilonTransition(r))}}else null!=e&&e.push(o)}if(null!=e){if(r.isOptimized)for(;r.numberOfOptimizedTransitions>0;)r.removeOptimizedTransition(r.numberOfOptimizedTransitions-1);for(let t of e)r.addOptimizedTransition(t)}}return k.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+t+" transitions by combining chained epsilon transitions."),t}static optimizeSets(e,t){if(t)return 0;let r=0,n=e.decisionToState;for(let t of n){let n=new v.IntervalSet;for(let e=0;e<t.numberOfOptimizedTransitions;e++){let r=t.getOptimizedTransition(e);if(!(r instanceof y.EpsilonTransition))continue;if(1!==r.target.numberOfOptimizedTransitions)continue;let o=r.target.getOptimizedTransition(0);o.target instanceof d.BlockEndState&&(o instanceof P.NotSetTransition||(o instanceof c.AtomTransition||o instanceof M.RangeTransition||o instanceof U.SetTransition)&&n.add(e))}if(n.size<=1)continue;let o=[];for(let e=0;e<t.numberOfOptimizedTransitions;e++)n.contains(e)||o.push(t.getOptimizedTransition(e));let i,s=t.getOptimizedTransition(n.minElement).target.getOptimizedTransition(0).target,a=new v.IntervalSet;for(let e=0;e<n.intervals.length;e++){let r=n.intervals[e];for(let e=r.a;e<=r.b;e++){let r=t.getOptimizedTransition(e).target.getOptimizedTransition(0);if(r instanceof P.NotSetTransition)throw new Error("Not yet implemented.");a.addAll(r.label)}}if(1===a.intervals.length)if(1===a.size)i=new c.AtomTransition(s,a.minElement);else{let e=a.intervals[0];i=new M.RangeTransition(s,e.a,e.b)}else i=new U.SetTransition(s,a);let l=new p.BasicState;if(l.setRuleIndex(t.ruleIndex),e.addState(l),l.addTransition(i),o.push(new y.EpsilonTransition(l)),r+=t.numberOfOptimizedTransitions-o.length,t.isOptimized)for(;t.numberOfOptimizedTransitions>0;)t.removeOptimizedTransition(t.numberOfOptimizedTransitions-1);for(let e of o)t.addOptimizedTransition(e)}return k.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+r+" paths by collapsing sets."),r}static identifyTailCalls(e){for(let t of e.states){for(let r=0;r<t.numberOfTransitions;r++){let n=t.transition(r);n instanceof z.RuleTransition&&(n.tailCall=this.testTailCall(e,n,!1),n.optimizedTailCall=this.testTailCall(e,n,!0))}if(t.isOptimized)for(let r=0;r<t.numberOfOptimizedTransitions;r++){let n=t.getOptimizedTransition(r);n instanceof z.RuleTransition&&(n.tailCall=this.testTailCall(e,n,!1),n.optimizedTailCall=this.testTailCall(e,n,!0))}}}static testTailCall(e,t,r){if(!r&&t.tailCall)return!0;if(r&&t.optimizedTailCall)return!0;let n=new h.BitSet(e.states.length),o=[];for(o.push(t.followState);;){let e=o.pop();if(!e)break;if(n.get(e.stateNumber))continue;if(e instanceof F.RuleStopState)continue;if(!e.onlyHasEpsilonTransitions)return!1;let t=r?e.numberOfOptimizedTransitions:e.numberOfTransitions;for(let n=0;n<t;n++){let t=r?e.getOptimizedTransition(n):e.transition(n);if(1!==t.serializationType)return!1;o.push(t.target)}}return!0}static toInt(e){return e}static toInt32(e,t){return(e[t]|e[t+1]<<16)>>>0}static toUUID(e,t){let r=ATNDeserializer.toInt32(e,t),n=ATNDeserializer.toInt32(e,t+2),o=ATNDeserializer.toInt32(e,t+4),i=ATNDeserializer.toInt32(e,t+6);return new W.UUID(i,o,n,r)}edgeFactory(e,t,r,n,o,s,a,l){let u=e.states[n];switch(t){case 1:return new y.EpsilonTransition(u);case 2:return 0!==a?new M.RangeTransition(u,H.Token.EOF,s):new M.RangeTransition(u,o,s);case 3:return new z.RuleTransition(e.states[o],s,a,u);case 4:return new D.PredicateTransition(u,o,s,0!==a);case 10:return new L.PrecedencePredicateTransition(u,o);case 5:return 0!==a?new c.AtomTransition(u,H.Token.EOF):new c.AtomTransition(u,o);case 6:return new i.ActionTransition(u,o,s,0!==a);case 7:return new U.SetTransition(u,l[o]);case 8:return new P.NotSetTransition(u,l[o]);case 9:return new K.WildcardTransition(u)}throw new Error("The specified transition type is not valid.")}stateFactory(e,t){let r;switch(e){case 0:return new b.InvalidState;case 1:r=new p.BasicState;break;case 2:r=new j.RuleStartState;break;case 3:r=new u.BasicBlockStartState;break;case 4:r=new I.PlusBlockStartState;break;case 5:r=new B.StarBlockStartState;break;case 6:r=new $.TokensStartState;break;case 7:r=new F.RuleStopState;break;case 8:r=new d.BlockEndState;break;case 9:r=new V.StarLoopbackState;break;case 10:r=new q.StarLoopEntryState;break;case 11:r=new R.PlusLoopbackState;break;case 12:r=new E.LoopEndState;break;default:throw new Error(`The specified state type ${e} is not valid.`)}return r.ruleIndex=t,r}lexerActionFactory(e,t,r){switch(e){case 0:return new x.LexerChannelAction(t);case 1:return new S.LexerCustomAction(t,r);case 2:return new C.LexerModeAction(t);case 3:return _.LexerMoreAction.INSTANCE;case 4:return O.LexerPopModeAction.INSTANCE;case 5:return new T.LexerPushModeAction(t);case 6:return N.LexerSkipAction.INSTANCE;case 7:return new A.LexerTypeAction(t);default:throw new Error(`The specified lexer action type ${e} is not valid.`)}}}ATNDeserializer.BASE_SERIALIZED_UUID=W.UUID.fromString("E4178468-DF95-44D0-AD87-F22A5D5FB6D3"),ATNDeserializer.ADDED_LEXER_ACTIONS=W.UUID.fromString("AB35191A-1603-487E-B75A-479B831EAF6D"),ATNDeserializer.ADDED_UNICODE_SMP=W.UUID.fromString("59627784-3BE5-417A-B9EB-8131A7286089"),ATNDeserializer.SUPPORTED_UUIDS=[ATNDeserializer.BASE_SERIALIZED_UUID,ATNDeserializer.ADDED_LEXER_ACTIONS,ATNDeserializer.ADDED_UNICODE_SMP],ATNDeserializer.SERIALIZED_UUID=ATNDeserializer.ADDED_UNICODE_SMP,n([w.NotNull],ATNDeserializer.prototype,"deserializationOptions",void 0),n([o(0,w.NotNull)],ATNDeserializer.prototype,"deserialize",null),n([o(0,w.NotNull)],ATNDeserializer.prototype,"markPrecedenceDecisions",null),n([w.NotNull,o(0,w.NotNull)],ATNDeserializer.prototype,"edgeFactory",null),t.ATNDeserializer=ATNDeserializer},127:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(128),i=r(75);class NoViableAltException extends i.RecognitionException{constructor(e,t,r,n,i,s){e instanceof o.Parser&&(void 0===t&&(t=e.inputStream),void 0===r&&(r=e.currentToken),void 0===n&&(n=e.currentToken),void 0===s&&(s=e.context)),super(e,t,s),this._deadEndConfigs=i,this._startToken=r,this.setOffendingToken(e,n)}get startToken(){return this._startToken}get deadEndConfigs(){return this._deadEndConfigs}}n([r(0).NotNull],NoViableAltException.prototype,"_startToken",void 0),t.NoViableAltException=NoViableAltException},128:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(33),s=r(182),a=r(126),l=r(322),c=r(169),u=r(71),p=r(0),h=r(325),d=r(94),f=r(13);class TraceListener{constructor(e,t){this.ruleNames=e,this.tokenStream=t}enterEveryRule(e){console.log("enter   "+this.ruleNames[e.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}exitEveryRule(e){console.log("exit    "+this.ruleNames[e.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}visitErrorNode(e){}visitTerminal(e){let t=e.parent.ruleContext,r=e.symbol;console.log("consume "+r+" rule "+this.ruleNames[t.ruleIndex])}}n([p.Override],TraceListener.prototype,"enterEveryRule",null),n([p.Override],TraceListener.prototype,"exitEveryRule",null),n([p.Override],TraceListener.prototype,"visitErrorNode",null),n([p.Override],TraceListener.prototype,"visitTerminal",null);class Parser extends d.Recognizer{constructor(e){super(),this._errHandler=new l.DefaultErrorStrategy,this._precedenceStack=new c.IntegerStack,this._buildParseTrees=!0,this._parseListeners=[],this._syntaxErrors=0,this.matchedEOF=!1,this._precedenceStack.push(0),this.inputStream=e}reset(e){void 0!==e&&!0!==e||this.inputStream.seek(0),this._errHandler.reset(this),this._ctx=void 0,this._syntaxErrors=0,this.matchedEOF=!1,this.isTrace=!1,this._precedenceStack.clear(),this._precedenceStack.push(0);let t=this.interpreter;null!=t&&t.reset()}match(e){let t=this.currentToken;return t.type===e?(e===f.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):(t=this._errHandler.recoverInline(this),this._buildParseTrees&&-1===t.tokenIndex&&this._ctx.addErrorNode(t)),t}matchWildcard(){let e=this.currentToken;return e.type>0?(this._errHandler.reportMatch(this),this.consume()):(e=this._errHandler.recoverInline(this),this._buildParseTrees&&-1==e.tokenIndex&&this._ctx.addErrorNode(e)),e}set buildParseTree(e){this._buildParseTrees=e}get buildParseTree(){return this._buildParseTrees}getParseListeners(){return this._parseListeners}addParseListener(e){if(null==e)throw new TypeError("listener cannot be null");this._parseListeners.push(e)}removeParseListener(e){let t=this._parseListeners.findIndex(t=>t===e);-1!=t&&this._parseListeners.splice(t,1)}removeParseListeners(){this._parseListeners.length=0}triggerEnterRuleEvent(){for(let e of this._parseListeners)e.enterEveryRule&&e.enterEveryRule(this._ctx),this._ctx.enterRule(e)}triggerExitRuleEvent(){for(let e=this._parseListeners.length-1;e>=0;e--){let t=this._parseListeners[e];this._ctx.exitRule(t),t.exitEveryRule&&t.exitEveryRule(this._ctx)}}get numberOfSyntaxErrors(){return this._syntaxErrors}get tokenFactory(){return this._input.tokenSource.tokenFactory}getATNWithBypassAlts(){let e=this.serializedATN;if(null==e)throw new Error("The current parser does not support an ATN with bypass alternatives.");let t=Parser.bypassAltsAtnCache.get(e);if(null==t){let r=new s.ATNDeserializationOptions;r.isGenerateRuleBypassTransitions=!0,t=new a.ATNDeserializer(r).deserialize(i.toCharArray(e)),Parser.bypassAltsAtnCache.set(e,t)}return t}compileParseTreePattern(e,t,r){if(!r){if(this.inputStream){let e=this.inputStream.tokenSource;e instanceof u.Lexer&&(r=e)}if(!r)throw new Error("Parser can't discover a lexer to use")}throw new Error("Not implemented")}get errorHandler(){return this._errHandler}set errorHandler(e){this._errHandler=e}get inputStream(){return this._input}set inputStream(e){this.reset(!1),this._input=e}get currentToken(){return this._input.LT(1)}notifyErrorListeners(e,t,r){void 0===t?t=this.currentToken:null===t&&(t=void 0),this._syntaxErrors++;let n=-1,o=-1;null!=t&&(n=t.line,o=t.charPositionInLine);let i=this.getErrorListenerDispatch();i.syntaxError&&i.syntaxError(this,t,n,o,e,r)}consume(){let e=this.currentToken;e.type!=Parser.EOF&&this.inputStream.consume();let t=0!==this._parseListeners.length;if(this._buildParseTrees||t)if(this._errHandler.inErrorRecoveryMode(this)){let r=this._ctx.addErrorNode(e);if(t)for(let e of this._parseListeners)e.visitErrorNode&&e.visitErrorNode(r)}else{let r=this._ctx.addChild(e);if(t)for(let e of this._parseListeners)e.visitTerminal&&e.visitTerminal(r)}return e}addContextToParseTree(){let e=this._ctx._parent;null!=e&&e.addChild(this._ctx)}enterRule(e,t,r){this.state=t,this._ctx=e,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}enterLeftFactoredRule(e,t,r){if(this.state=t,this._buildParseTrees){let t=this._ctx.getChild(this._ctx.childCount-1);this._ctx.removeLastChild(),t._parent=e,e.addChild(t)}this._ctx=e,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this.matchedEOF?this._ctx._stop=this._input.LT(1):this._ctx._stop=this._input.tryLT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx._parent}enterOuterAlt(e,t){if(e.altNumber=t,this._buildParseTrees&&this._ctx!==e){let t=this._ctx._parent;null!=t&&(t.removeLastChild(),t.addChild(e))}this._ctx=e}get precedence(){return this._precedenceStack.isEmpty?-1:this._precedenceStack.peek()}enterRecursionRule(e,t,r,n){this.state=t,this._precedenceStack.push(n),this._ctx=e,this._ctx._start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(e,t,r){let n=this._ctx;n._parent=e,n.invokingState=t,n._stop=this._input.tryLT(-1),this._ctx=e,this._ctx._start=n._start,this._buildParseTrees&&this._ctx.addChild(n),this.triggerEnterRuleEvent()}unrollRecursionContexts(e){this._precedenceStack.pop(),this._ctx._stop=this._input.tryLT(-1);let t=this._ctx;if(this._parseListeners.length>0)for(;this._ctx!==e;)this.triggerExitRuleEvent(),this._ctx=this._ctx._parent;else this._ctx=e;t._parent=e,this._buildParseTrees&&null!=e&&e.addChild(t)}getInvokingContext(e){let t=this._ctx;for(;t&&t.ruleIndex!==e;)t=t._parent;return t}get context(){return this._ctx}set context(e){this._ctx=e}precpred(e,t){return t>=this._precedenceStack.peek()}getErrorListenerDispatch(){return new h.ProxyParserErrorListener(this.getErrorListeners())}inContext(e){return!1}isExpectedToken(e){let t=this.interpreter.atn,r=this._ctx,n=t.states[this.state],o=t.nextTokens(n);if(o.contains(e))return!0;if(!o.contains(f.Token.EPSILON))return!1;for(;null!=r&&r.invokingState>=0&&o.contains(f.Token.EPSILON);){let n=t.states[r.invokingState].transition(0);if((o=t.nextTokens(n.followState)).contains(e))return!0;r=r._parent}return!(!o.contains(f.Token.EPSILON)||e!=f.Token.EOF)}get isMatchedEOF(){return this.matchedEOF}getExpectedTokens(){return this.atn.getExpectedTokens(this.state,this.context)}getExpectedTokensWithinCurrentRule(){let e=this.interpreter.atn,t=e.states[this.state];return e.nextTokens(t)}getRuleIndex(e){let t=this.getRuleIndexMap().get(e);return null!=t?t:-1}get ruleContext(){return this._ctx}getRuleInvocationStack(e=this._ctx){let t=e,r=this.ruleNames,n=[];for(;null!=t;){let e=t.ruleIndex;e<0?n.push("n/a"):n.push(r[e]),t=t._parent}return n}getDFAStrings(){let e=[];for(let t=0;t<this._interp.atn.decisionToDFA.length;t++){let r=this._interp.atn.decisionToDFA[t];e.push(r.toString(this.vocabulary,this.ruleNames))}return e}dumpDFA(){let e=!1;for(let t=0;t<this._interp.atn.decisionToDFA.length;t++){let r=this._interp.atn.decisionToDFA[t];r.isEmpty||(e&&console.log(),console.log("Decision "+r.decision+":"),process.stdout.write(r.toString(this.vocabulary,this.ruleNames)),e=!0)}}get sourceName(){return this._input.sourceName}get parseInfo(){throw new Error("Not implemented")}setProfile(e){throw new Error("Not implemented")}set isTrace(e){e?(this._tracer?this.removeParseListener(this._tracer):this._tracer=new TraceListener(this.ruleNames,this._input),this.addParseListener(this._tracer)):this._tracer&&(this.removeParseListener(this._tracer),this._tracer=void 0)}get isTrace(){return null!=this._tracer}}Parser.bypassAltsAtnCache=new Map,n([p.NotNull],Parser.prototype,"_errHandler",void 0),n([p.NotNull],Parser.prototype,"match",null),n([p.NotNull],Parser.prototype,"matchWildcard",null),n([p.NotNull],Parser.prototype,"getParseListeners",null),n([o(0,p.NotNull)],Parser.prototype,"addParseListener",null),n([p.NotNull],Parser.prototype,"getATNWithBypassAlts",null),n([p.NotNull,o(0,p.NotNull)],Parser.prototype,"errorHandler",null),n([p.Override],Parser.prototype,"inputStream",null),n([p.NotNull],Parser.prototype,"currentToken",null),n([o(0,p.NotNull)],Parser.prototype,"enterRule",null),n([p.Override,o(0,p.Nullable)],Parser.prototype,"precpred",null),n([p.Override],Parser.prototype,"getErrorListenerDispatch",null),n([p.NotNull],Parser.prototype,"getExpectedTokens",null),n([p.NotNull],Parser.prototype,"getExpectedTokensWithinCurrentRule",null),n([p.Override],Parser.prototype,"parseInfo",null),t.Parser=Parser},13:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(70);!function(e){e.INVALID_TYPE=0,e.EPSILON=-2,e.MIN_USER_TOKEN_TYPE=1,e.EOF=n.IntStream.EOF,e.DEFAULT_CHANNEL=0,e.HIDDEN_CHANNEL=1,e.MIN_USER_CHANNEL_VALUE=2}(t.Token||(t.Token={}))},135:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(s,a)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r(215);t.connectToMongoClient=function(e,t){return n(this,void 0,void 0,function*(){let r={appname:t};return yield o.MongoClient.connect(e,r)})}},146:function(e,t){e.exports=require("child_process")},15:function(e,t){e.exports=require("crypto")},158:function(e,t,r){"use strict";var n=r(5).BSON.Long,o=(r(5).BSON.Timestamp,function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:function(){return r}})}),i=function(e){if(!(this instanceof i))return new i(e);o(this,"code",e.code),o(this,"errmsg",e.errmsg),this.toJSON=function(){return{code:e.code,errmsg:e.errmsg}},this.toString=function(){return"WriteConcernError("+e.errmsg+")"}},s=function(e){if(!(this instanceof s))return new s(e);o(this,"code",e.code),o(this,"index",e.index),o(this,"errmsg",e.errmsg),this.getOperation=function(){return e.op},this.toJSON=function(){return{code:e.code,index:e.index,errmsg:e.errmsg,op:e.op}},this.toString=function(){return"WriteError("+JSON.stringify(this.toJSON())+")"}};t.BulkWriteResult=function(e){o(this,"ok",e.ok),o(this,"nInserted",e.nInserted),o(this,"nUpserted",e.nUpserted),o(this,"nMatched",e.nMatched),o(this,"nModified",e.nModified),o(this,"nRemoved",e.nRemoved),this.getInsertedIds=function(){return e.insertedIds},this.getUpsertedIds=function(){return e.upserted},this.getUpsertedIdAt=function(t){return e.upserted[t]},this.getRawResponse=function(){return e},this.hasWriteErrors=function(){return e.writeErrors.length>0},this.getWriteErrorCount=function(){return e.writeErrors.length},this.getWriteErrorAt=function(t){return t<e.writeErrors.length?e.writeErrors[t]:null},this.getWriteErrors=function(){return e.writeErrors},this.getLastOp=function(){return e.lastOp},this.getWriteConcernError=function(){if(0==e.writeConcernErrors.length)return null;if(1==e.writeConcernErrors.length)return e.writeConcernErrors[0];for(var t="",r=0;r<e.writeConcernErrors.length;r++)t+=e.writeConcernErrors[r].errmsg,0==r&&(t+=" and ");return new i({errmsg:t,code:64})},this.toJSON=function(){return e},this.toString=function(){return"BulkWriteResult("+this.toJSON(e)+")"},this.isOk=function(){return 1==e.ok}},t.WriteError=s,t.Batch=function(e,t){this.originalZeroIndex=t,this.currentIndex=0,this.originalIndexes=[],this.batchType=e,this.operations=[],this.size=0,this.sizeBytes=0},t.LegacyOp=function(e,t,r){this.batchType=e,this.index=r,this.operation=t},t.mergeBatchResults=function(e,t,r,o,a){if(o)a=o;else if(a&&a.result)a=a.result;else if(null==a)return;if(0!=a.ok||1!=r.ok){if(0!=a.ok||0!=r.ok){if(a.opTime||a.lastOp){var l=a.lastOp||a.opTime,c=null,u=null;if(l&&"Timestamp"==l._bsontype)null==r.lastOp?r.lastOp=l:l.greaterThan(r.lastOp)&&(r.lastOp=l);else{r.lastOp&&(c="number"==typeof r.lastOp.ts?n.fromNumber(r.lastOp.ts):r.lastOp.ts,u="number"==typeof r.lastOp.t?n.fromNumber(r.lastOp.t):r.lastOp.t);var p="number"==typeof l.ts?n.fromNumber(l.ts):l.ts,h="number"==typeof l.t?n.fromNumber(l.t):l.t;null==r.lastOp?r.lastOp=l:p.greaterThan(c)?r.lastOp=l:p.equals(c)&&h.greaterThan(u)&&(r.lastOp=l)}}1==t.batchType&&a.n&&(r.nInserted=r.nInserted+a.n),3==t.batchType&&a.n&&(r.nRemoved=r.nRemoved+a.n);var d=0;if(Array.isArray(a.upserted)){d=a.upserted.length;for(var f=0;f<a.upserted.length;f++)r.upserted.push({index:a.upserted[f].index+t.originalZeroIndex,_id:a.upserted[f]._id})}else a.upserted&&(d=1,r.upserted.push({index:t.originalZeroIndex,_id:a.upserted}));if(2==t.batchType&&a.n){var m=a.nModified;r.nUpserted=r.nUpserted+d,r.nMatched=r.nMatched+(a.n-d),r.nModified="number"==typeof m?r.nModified+m:null}if(Array.isArray(a.writeErrors))for(f=0;f<a.writeErrors.length;f++)g={index:t.originalZeroIndex+a.writeErrors[f].index,code:a.writeErrors[f].code,errmsg:a.writeErrors[f].errmsg,op:t.operations[a.writeErrors[f].index]},r.writeErrors.push(new s(g));a.writeConcernError&&r.writeConcernErrors.push(new i(a.writeConcernError))}}else{r.ok=0;var g={index:0,code:a.code||0,errmsg:a.message,op:t.operations[0]};r.writeErrors.push(new s(g))}},t.cloneOptions=function(e){for(var t={},r=Object.keys(e),n=0;n<r.length;n++)t[r[n]]=e[r[n]];return t},t.writeConcern=function(e,t,r){var n={};return t.writeConcern&&null!=t.writeConcern.w&&(n.w=t.writeConcern.w),t.writeConcern&&null!=t.writeConcern.j&&(n.j=t.writeConcern.j),t.writeConcern&&null!=t.writeConcern.fsync&&(n.fsync=t.writeConcern.fsync),t.writeConcern&&null!=t.writeConcern.wtimeout&&(n.wtimeout=t.writeConcern.wtimeout),r&&null!=r.w&&(n.w=r.w),r&&null!=r.wtimeout&&(n.wtimeout=r.wtimeout),r&&null!=r.j&&(n.j=r.j),r&&null!=r.fsync&&(n.fsync=r.fsync),n},t.INVALID_BSON_ERROR=22,t.WRITE_CONCERN_ERROR=64,t.MULTIPLE_ERROR=65,t.UNKNOWN_ERROR=8,t.INSERT=1,t.UPDATE=2,t.REMOVE=3},159:function(e,t,r){"use strict";var n=r(160),o=r(5).BSON.ObjectID,i=r(28),s=r(84).Buffer,a=r(89),l=r(34),c=r(4).format,u=r(4),p=r(20),h=r(5).MongoError,d=u.inherits,f=r(18).Duplex||r(76).Duplex,m=r(3).shallowClone,g=function e(t,s,a,l,c){if(!(this instanceof e))return new e(t,s,a,l,c);this.db=t,void 0===c&&(c={}),void 0===l?(l=a,a=void 0):"object"==typeof l&&(c=l,l=a,a=void 0),s&&"ObjectID"==s._bsontype?(this.referenceBy=1,this.fileId=s,this.filename=a):void 0===a?(this.referenceBy=0,this.filename=s,null!=l.indexOf("w")&&(this.fileId=new o)):(this.referenceBy=1,this.fileId=s,this.filename=a),this.mode=null==l?"r":l,this.options=c||{},this.isOpen=!1,this.root=null==this.options.root?e.DEFAULT_ROOT_COLLECTION:this.options.root,this.position=0,this.readPreference=this.options.readPreference||t.options.readPreference||i.PRIMARY,this.writeConcern=U(t,this.options),this.internalChunkSize=null==this.options.chunkSize?n.DEFAULT_CHUNK_SIZE:this.options.chunkSize;var u=this.options.promiseLibrary;u||(u="function"==typeof global.Promise?global.Promise:r(16).Promise),this.promiseLibrary=u,Object.defineProperty(this,"chunkSize",{enumerable:!0,get:function(){return this.internalChunkSize},set:function(e){"w"!=this.mode[0]||0!=this.position||null!=this.uploadDate?this.internalChunkSize=this.internalChunkSize:this.internalChunkSize=e}}),Object.defineProperty(this,"md5",{enumerable:!0,get:function(){return this.internalMd5}}),Object.defineProperty(this,"chunkNumber",{enumerable:!0,get:function(){return this.currentChunk&&this.currentChunk.chunkNumber?this.currentChunk.chunkNumber:null}})},y=g.define=new p("Gridstore",g,!0);g.prototype.open=function(e){var t=this;if("w"!=this.mode&&"w+"!=this.mode&&"r"!=this.mode)throw h.create({message:"Illegal mode "+this.mode,driver:!0});return"function"==typeof e?v(t,e):new t.promiseLibrary(function(e,r){v(t,function(t,n){if(t)return r(t);e(n)})})};var v=function(e,t){var r=U(e.db,e.options);"w"==e.mode||"w+"==e.mode?e.collection().ensureIndex([["filename",1]],r,function(){var n=e.chunkCollection(),o=m(r);o.unique=!0,n.ensureIndex([["files_id",1],["n",1]],o,function(){A(e,r,function(r,n){if(r)return t(r);e.isOpen=!0,t(r,n)})})}):A(e,r,function(r,n){if(r)return t(r);e.isOpen=!0,t(r,n)})};y.classMethod("open",{callback:!0,promise:!0}),g.prototype.eof=function(){return this.position==this.length},y.classMethod("eof",{callback:!1,promise:!1,returns:[Boolean]}),g.prototype.getc=function(e){var t=this;return"function"==typeof e?b(t,e):new t.promiseLibrary(function(e,r){b(t,function(t,n){if(t)return r(t);e(n)})})};var b=function(e,t){e.eof()?t(null,null):e.currentChunk.eof()?P(e,e.currentChunk.chunkNumber+1,function(r,n){e.currentChunk=n,e.position=e.position+1,t(r,e.currentChunk.getc())}):(e.position=e.position+1,t(null,e.currentChunk.getc()))};y.classMethod("getc",{callback:!0,promise:!0}),g.prototype.puts=function(e,t){var r=this,n=null==e.match(/\n$/)?e+"\n":e;return"function"==typeof t?this.write(n,t):new r.promiseLibrary(function(e,t){r.write(n,function(r,n){if(r)return t(r);e(n)})})},y.classMethod("puts",{callback:!0,promise:!0}),g.prototype.stream=function(){return new B(this)},y.classMethod("stream",{callback:!1,promise:!1,returns:[B]}),g.prototype.write=function(e,t,r){var n=this;return"function"==typeof r?F(this,e,t,r):new n.promiseLibrary(function(r,o){F(n,e,t,function(e,t){if(e)return o(e);r(t)})})},y.classMethod("write",{callback:!0,promise:!0}),g.prototype.destroy=function(){this.writable&&(this.readable=!1,this.writable&&(this.writable=!1,this._q.length=0,this.emit("close")))},y.classMethod("destroy",{callback:!1,promise:!1}),g.prototype.writeFile=function(e,t){var r=this;return"function"==typeof t?x(r,e,t):new r.promiseLibrary(function(t,n){x(r,e,function(e,r){if(e)return n(e);t(r)})})};var x=function(e,t,r){"string"!=typeof t?e.open(function(e,o){if(e)return r(e,o);l.fstat(t,function(e,i){if(e)return r(e,o);var a=0,c=0,u=function(){var e=new s(o.chunkSize);l.read(t,e,0,e.length,a,function(e,s,p){if(e)return r(e,o);a+=s,new n(o,{n:c++},o.writeConcern).write(p.slice(0,s),function(e,n){if(e)return r(e,o);n.save({},function(e){return e?r(e,o):(o.position=o.position+s,o.currentChunk=n,a>=i.size?(l.close(t),void o.close(function(e){return r(e||null,o)})):process.nextTick(u))})})})};process.nextTick(u)})}):l.open(t,"r",function(t,n){if(t)return r(t);e.writeFile(n,r)})};y.classMethod("writeFile",{callback:!0,promise:!0}),g.prototype.close=function(e){var t=this;return"function"==typeof e?S(t,e):new t.promiseLibrary(function(e,r){S(t,function(t,n){if(t)return r(t);e(n)})})};var S=function(e,t){if("w"==e.mode[0]){var r=e.writeConcern;null!=e.currentChunk&&e.currentChunk.position>0?e.currentChunk.save({},function(n){if(n&&"function"==typeof t)return t(n);e.collection(function(n,o){if(n&&"function"==typeof t)return t(n);null!=e.uploadDate?w(e,function(e,n){if(e){if("function"==typeof t)return t(e);throw e}o.save(n,r,function(e){"function"==typeof t&&t(e,n)})}):(e.uploadDate=new Date,w(e,function(e,n){if(e){if("function"==typeof t)return t(e);throw e}o.save(n,r,function(e){"function"==typeof t&&t(e,n)})}))})}):e.collection(function(n,o){if(n&&"function"==typeof t)return t(n);e.uploadDate=new Date,w(e,function(e,n){if(e){if("function"==typeof t)return t(e);throw e}o.save(n,r,function(e){"function"==typeof t&&t(e,n)})})})}else"r"==e.mode[0]?"function"==typeof t&&t(null,null):"function"==typeof t&&t(h.create({message:c("Illegal mode %s",e.mode),driver:!0}))};y.classMethod("close",{callback:!0,promise:!0}),g.prototype.chunkCollection=function(e){return"function"==typeof e?this.db.collection(this.root+".chunks",e):this.db.collection(this.root+".chunks")},y.classMethod("chunkCollection",{callback:!0,promise:!1,returns:[a]}),g.prototype.unlink=function(e){var t=this;return"function"==typeof e?C(t,e):new t.promiseLibrary(function(e,r){C(t,function(t,n){if(t)return r(t);e(n)})})};var C=function(e,t){I(e,function(r){if(null!==r)return r.message="at deleteChunks: "+r.message,t(r);e.collection(function(r,n){if(null!==r)return r.message="at collection: "+r.message,t(r);n.remove({_id:e.fileId},e.writeConcern,function(r){t(r,e)})})})};y.classMethod("unlink",{callback:!0,promise:!0}),g.prototype.collection=function(e){return"function"==typeof e&&this.db.collection(this.root+".files",e),this.db.collection(this.root+".files")},y.classMethod("collection",{callback:!0,promise:!1,returns:[a]}),g.prototype.readlines=function(e,t){var r=this,n=Array.prototype.slice.call(arguments,0);return"function"!=typeof(t=n.pop())&&n.push(t),e=(e=n.length?n.shift():"\n")||"\n","function"==typeof t?_(r,e,t):new r.promiseLibrary(function(t,n){_(r,e,function(e,r){if(e)return n(e);t(r)})})};var _=function(e,t,r){e.read(function(e,n){if(e)return r(e);var o=n.toString().split(t);o=o.length>0?o.splice(0,o.length-1):[];for(var i=0;i<o.length;i++)o[i]=o[i]+t;r(null,o)})};y.classMethod("readlines",{callback:!0,promise:!0}),g.prototype.rewind=function(e){var t=this;return"function"==typeof e?O(t,e):new t.promiseLibrary(function(e,r){O(t,function(t,n){if(t)return r(t);e(n)})})};var O=function(e,t){0!=e.currentChunk.chunkNumber?"w"==e.mode[0]?I(e,function(r){if(r)return t(r);e.currentChunk=new n(e,{n:0},e.writeConcern),e.position=0,t(null,e)}):e.currentChunk(0,function(r,n){if(r)return t(r);e.currentChunk=n,e.currentChunk.rewind(),e.position=0,t(null,e)}):(e.currentChunk.rewind(),e.position=0,t(null,e))};y.classMethod("rewind",{callback:!0,promise:!0}),g.prototype.read=function(e,t,r){var n=this,o=Array.prototype.slice.call(arguments,0);return"function"!=typeof(r=o.pop())&&o.push(r),e=o.length?o.shift():null,t=o.length?o.shift():null,"function"==typeof r?T(n,e,t,r):new n.promiseLibrary(function(r,o){T(n,e,t,function(e,t){if(e)return o(e);r(t)})})};var T=function(e,t,r,n){var o=null==t?e.length-e.position:t,i=null==r?new s(o):r;if(i._index=null!=r&&null!=r._index?r._index:0,e.currentChunk.length()-e.currentChunk.position+i._index>=o){var a=e.currentChunk.readSlice(o-i._index);return a.copy(i,i._index),e.position=e.position+i.length,0==o&&0==i.length?n(h.create({message:"File does not exist",driver:!0}),null):n(null,i)}(a=e.currentChunk.readSlice(e.currentChunk.length()-e.currentChunk.position)).copy(i,i._index),i._index+=a.length,P(e,e.currentChunk.chunkNumber+1,function(r,o){if(r)return n(r);o.length()>0?(e.currentChunk=o,e.read(t,i,n)):i._index>0?n(null,i):n(h.create({message:"no chunks found for file, possibly corrupt",driver:!0}),null)})};y.classMethod("read",{callback:!0,promise:!0}),g.prototype.tell=function(e){var t=this;return"function"==typeof e?e(null,this.position):new t.promiseLibrary(function(e){e(t.position)})},y.classMethod("tell",{callback:!0,promise:!0}),g.prototype.seek=function(e,t,r){var n=this,o=Array.prototype.slice.call(arguments,1);return"function"!=typeof(r=o.pop())&&o.push(r),t=o.length?o.shift():null,"function"==typeof r?N(n,e,t,r):new n.promiseLibrary(function(r,o){N(n,e,t,function(e,t){if(e)return o(e);r(t)})})};var N=function(e,t,r,n){if("r"!=e.mode)return n(h.create({message:"seek is only supported for mode r",driver:!0}));var o=null==r?g.IO_SEEK_SET:r,i=t,s=0;s=o==g.IO_SEEK_CUR?e.position+i:o==g.IO_SEEK_END?e.length+i:i;var a=Math.floor(s/e.chunkSize);P(e,a,function(t,r){return t?n(t,null):null==r?n(new Error("no chunk found")):(e.currentChunk=r,e.position=s,e.currentChunk.position=e.position%e.chunkSize,void n(t,e))})};y.classMethod("seek",{callback:!0,promise:!0});var A=function(e,t,r){var i=e.collection(),s=1==e.referenceBy?{_id:e.fileId}:{filename:e.filename};function a(e){a.err||r(a.err=e)}s=null==e.fileId&&null==e.filename?null:s,t.readPreference=e.readPreference,null!=s?i.findOne(s,t,function(i,s){if(i)return a(i);if(null!=s)e.fileId=s._id,e.filename="r"==e.mode||null==e.filename?s.filename:e.filename,e.contentType=s.contentType,e.internalChunkSize=s.chunkSize,e.uploadDate=s.uploadDate,e.aliases=s.aliases,e.length=s.length,e.metadata=s.metadata,e.internalMd5=s.md5;else{if("r"==e.mode){e.length=0;var l="ObjectID"==e.fileId._bsontype?e.fileId.toHexString():e.fileId;return a(h.create({message:c("file with id %s not opened for writing",1==e.referenceBy?l:e.filename),driver:!0}))}e.fileId=null==e.fileId?new o:e.fileId,e.contentType=g.DEFAULT_CONTENT_TYPE,e.internalChunkSize=null==e.internalChunkSize?n.DEFAULT_CHUNK_SIZE:e.internalChunkSize,e.length=0}"r"==e.mode?P(e,0,t,function(t,n){if(t)return a(t);e.currentChunk=n,e.position=0,r(null,e)}):"w"==e.mode&&s?I(e,t,function(t){if(t)return a(t);e.currentChunk=new n(e,{n:0},e.writeConcern),e.contentType=null==e.options.content_type?e.contentType:e.options.content_type,e.internalChunkSize=null==e.options.chunk_size?e.internalChunkSize:e.options.chunk_size,e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=0,r(null,e)}):"w"==e.mode?(e.currentChunk=new n(e,{n:0},e.writeConcern),e.contentType=null==e.options.content_type?e.contentType:e.options.content_type,e.internalChunkSize=null==e.options.chunk_size?e.internalChunkSize:e.options.chunk_size,e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=0,r(null,e)):"w+"==e.mode&&P(e,k(e),t,function(t,o){if(t)return a(t);e.currentChunk=null==o?new n(e,{n:0},e.writeConcern):o,e.currentChunk.position=e.currentChunk.data.length(),e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=e.length,r(null,e)})}):(e.fileId=null==e.fileId?new o:e.fileId,e.contentType=g.DEFAULT_CONTENT_TYPE,e.internalChunkSize=null==e.internalChunkSize?n.DEFAULT_CHUNK_SIZE:e.internalChunkSize,e.length=0,"w"==e.mode?I(e,t,function(t){if(t)return a(t);e.currentChunk=new n(e,{n:0},e.writeConcern),e.contentType=null==e.options.content_type?e.contentType:e.options.content_type,e.internalChunkSize=null==e.options.chunk_size?e.internalChunkSize:e.options.chunk_size,e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=0,r(null,e)}):"w+"==e.mode&&P(e,k(e),t,function(t,o){if(t)return a(t);e.currentChunk=null==o?new n(e,{n:0},e.writeConcern):o,e.currentChunk.position=e.currentChunk.data.length(),e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=e.length,r(null,e)}))},E=function(e,t,r,o){"function"==typeof r&&(o=r,r=null);var i="boolean"==typeof r&&r;if("w"!=e.mode)o(h.create({message:c("file with id %s not opened for writing",1==e.referenceBy?e.referenceBy:e.filename),driver:!0}),null);else{if(!(e.currentChunk.position+t.length>=e.chunkSize))return e.position=e.position+t.length,e.currentChunk.write(t),i?e.close(function(t){o(t,e)}):o(null,e);for(var s=e.currentChunk.chunkNumber,a=e.chunkSize-e.currentChunk.position,l=t.slice(0,a),u=t.slice(a),p=[e.currentChunk.write(l)];u.length>=e.chunkSize;){var d=new n(e,{n:s+1},e.writeConcern);l=u.slice(0,e.chunkSize),u=u.slice(e.chunkSize),s+=1,d.write(l),p.push(d)}e.currentChunk=new n(e,{n:s+1},e.writeConcern),u.length>0&&e.currentChunk.write(u),e.position=e.position+t.length;for(var f=p.length,m=0;m<p.length;m++)p[m].save({},function(t){return t?o(t):(f-=1)<=0?i?e.close(function(t){o(t,e)}):o(null,e):void 0})}},w=function(e,t){var r={_id:e.fileId,filename:e.filename,contentType:e.contentType,length:e.position?e.position:0,chunkSize:e.chunkSize,uploadDate:e.uploadDate,aliases:e.aliases,metadata:e.metadata},n={filemd5:e.fileId,root:e.root};e.db.command(n,function(e,n){if(e)return t(e);r.md5=n.md5,t(null,r)})},P=function(e,t,r,o){"function"==typeof r&&(o=r,r={}),(r=r||e.writeConcern).readPreference=e.readPreference,e.chunkCollection().findOne({files_id:e.fileId,n:t},r,function(t,r){if(t)return o(t);o(null,new n(e,null==r?{}:r,e.writeConcern))})},k=function(e){return Math.floor((e.length?e.length-1:0)/e.chunkSize)},I=function(e,t,r){"function"==typeof t&&(r=t,t={}),t=t||e.writeConcern,null!=e.fileId?e.chunkCollection().remove({files_id:e.fileId},t,function(e){if(e)return r(e,!1);r(null,!0)}):r(null,!0)};g.DEFAULT_ROOT_COLLECTION="fs",g.DEFAULT_CONTENT_TYPE="binary/octet-stream",g.IO_SEEK_SET=0,g.IO_SEEK_CUR=1,g.IO_SEEK_END=2,g.exist=function(e,t,n,o,i){var s=Array.prototype.slice.call(arguments,2);"function"!=typeof(i=s.pop())&&s.push(i),n=s.length?s.shift():null;var a=(o=(o=s.length?s.shift():{})||{}).promiseLibrary;return a||(a="function"==typeof global.Promise?global.Promise:r(16).Promise),"function"==typeof i?R(e,t,n,o,i):new a(function(r,i){R(e,t,n,o,function(e,t){if(e)return i(e);r(t)})})};var R=function(e,t,r,n,o){var s=n.readPreference||i.PRIMARY,a=null!=r?r:g.DEFAULT_ROOT_COLLECTION;e.collection(a+".files",function(e,r){if(e)return o(e);var n="string"==typeof t||"[object RegExp]"==Object.prototype.toString.call(t)?{filename:t}:{_id:t};null!=t&&"object"==typeof t&&"[object RegExp]"!=Object.prototype.toString.call(t)&&(n=t),r.findOne(n,{readPreference:s},function(e,t){if(e)return o(e);o(null,null!=t)})})};y.staticMethod("exist",{callback:!0,promise:!0}),g.list=function(e,t,n,o){var i=Array.prototype.slice.call(arguments,1);"function"!=typeof(o=i.pop())&&i.push(o),t=i.length?i.shift():null;var s=(n=(n=i.length?i.shift():{})||{}).promiseLibrary;return s||(s="function"==typeof global.Promise?global.Promise:r(16).Promise),"function"==typeof o?L(e,t,n,o):new s(function(r,o){L(e,t,n,function(e,t){if(e)return o(e);r(t)})})};var L=function(e,t,r,n){null!=t&&"object"==typeof t&&(r=t,t=null);var o=r.readPreference||i.PRIMARY,s=null!=r.id&&r.id,a=null!=t?t:g.DEFAULT_ROOT_COLLECTION,l=[];e.collection(a+".files",function(e,t){if(e)return n(e);t.find({},{readPreference:o},function(e,t){if(e)return n(e);t.each(function(e,t){null!=t?l.push(s?t._id:t.filename):n(e,l)})})})};y.staticMethod("list",{callback:!0,promise:!0}),g.read=function(e,t,n,o,i,s){var a=Array.prototype.slice.call(arguments,2);"function"!=typeof(s=a.pop())&&a.push(s),n=a.length?a.shift():null,o=a.length?a.shift():null;var l=(i=(i=a.length?a.shift():null)||{})?i.promiseLibrary:null;return l||(l="function"==typeof global.Promise?global.Promise:r(16).Promise),"function"==typeof s?D(e,t,n,o,i,s):new l(function(r,s){D(e,t,n,o,i,function(e,t){if(e)return s(e);r(t)})})};var D=function(e,t,r,n,o,i){new g(e,t,"r",o).open(function(e,t){return e?i(e):n&&n>=t.length?i("offset larger than size of file",null):r&&r>t.length?i("length is larger than the size of the file",null):n&&r&&n+r>t.length?i("offset and length is larger than the size of the file",null):void(null!=n?t.seek(n,function(e,t){if(e)return i(e);t.read(r,i)}):t.read(r,i))})};y.staticMethod("read",{callback:!0,promise:!0}),g.readlines=function(e,t,n,o,i){var s=Array.prototype.slice.call(arguments,2);"function"!=typeof(i=s.pop())&&s.push(i),n=s.length?s.shift():null;var a=(o=(o=s.length?s.shift():null)||{})?o.promiseLibrary:null;return a||(a="function"==typeof global.Promise?global.Promise:r(16).Promise),"function"==typeof i?M(e,t,n,o,i):new a(function(r,i){M(e,t,n,o,function(e,t){if(e)return i(e);r(t)})})};var M=function(e,t,r,n,o){var i=null==r?"\n":r;new g(e,t,"r",n).open(function(e,t){if(e)return o(e);t.readlines(i,o)})};y.staticMethod("readlines",{callback:!0,promise:!0}),g.unlink=function(e,t,n,o){var i=this,s=Array.prototype.slice.call(arguments,2);"function"!=typeof(o=s.pop())&&s.push(o);var a=(n=(n=s.length?s.shift():{})||{}).promiseLibrary;return a||(a="function"==typeof global.Promise?global.Promise:r(16).Promise),"function"==typeof o?j(i,e,t,n,o):new a(function(r,o){j(i,e,t,n,function(e,t){if(e)return o(e);r(t)})})};var j=function(e,t,r,n,o){var i=U(t,n);if(r.constructor==Array)for(var s=0,a=0;a<r.length;a++)++s,g.unlink(t,r[a],n,function(){0==--s&&o(null,e)});else new g(t,r,"w",n).open(function(t,r){if(t)return o(t);I(r,function(t){if(t)return o(t);r.collection(function(t,n){if(t)return o(t);n.remove({_id:r.fileId},i,function(t){o(t,e)})})})})};y.staticMethod("unlink",{callback:!0,promise:!0});var F=function(e,t,r,n){return s.isBuffer(t)?E(e,t,r,n):E(e,new s(t,"binary"),r,n)},z=function(e){var t={};return null!=e.w&&(t.w=e.w),1==e.journal&&(t.j=e.journal),1==e.j&&(t.j=e.j),1==e.fsync&&(t.fsync=e.fsync),null!=e.wtimeout&&(t.wtimeout=e.wtimeout),t},U=function(e,t){var r={w:1};if(null!=(t=t||{}).w||"boolean"==typeof t.j||"boolean"==typeof t.journal||"boolean"==typeof t.fsync?r=z(t):null!=t.safe&&"object"==typeof t.safe?r=z(t.safe):"boolean"==typeof t.safe?r={w:t.safe?1:0}:null!=e.options.w||"boolean"==typeof e.options.j||"boolean"==typeof e.options.journal||"boolean"==typeof e.options.fsync?r=z(e.options):!e.safe||null==e.safe.w&&"boolean"!=typeof e.safe.j&&"boolean"!=typeof e.safe.journal&&"boolean"!=typeof e.safe.fsync?"boolean"==typeof e.safe&&(r={w:e.safe?1:0}):r=z(e.safe),r.w<1&&(1==r.journal||1==r.j||1==r.fsync))throw h.create({message:"No acknowledgement using w < 1 cannot be combined with journal:true or fsync:true",driver:!0});return r},B=function(e){f.call(this),this.gs=e,this.endCalled=!1,this.totalBytesToRead=this.gs.length-this.gs.position,this.seekPosition=this.gs.position};d(B,f),B.prototype._pipe=B.prototype.pipe,B.prototype.pipe=function(e){var t=this;return t.gs.isOpen?(t.totalBytesToRead=t.gs.length-t.gs.position,t._pipe.apply(t,[e])):t.gs.open(function(r){if(r)return t.emit("error",r);t.totalBytesToRead=t.gs.length-t.gs.position,t._pipe.apply(t,[e])}),e},B.prototype._read=function(){var e=this,t=function(){e.gs.read(r,function(t,r){return t&&!e.endCalled?e.emit("error",t):e.endCalled||null==r?e.push(null):(r.length<=e.totalBytesToRead?(e.totalBytesToRead=e.totalBytesToRead-r.length,e.push(r)):r.length>e.totalBytesToRead&&(e.totalBytesToRead=e.totalBytesToRead-r._index,e.push(r.slice(0,r._index))),void(e.totalBytesToRead<=0&&(e.endCalled=!0)))})},r=e.gs.length<e.gs.chunkSize?e.gs.length-e.seekPosition:e.gs.chunkSize;e.gs.isOpen?t():e.gs.open(function(r){if(e.totalBytesToRead=e.gs.length-e.gs.position,r)return e.emit("error",r);t()})},B.prototype.destroy=function(){this.pause(),this.endCalled=!0,this.gs.close(),this.emit("end")},B.prototype.write=function(e){var t=this;return t.endCalled?t.emit("error",h.create({message:"attempting to write to stream after end called",driver:!0})):t.gs.isOpen?(t.gs.write(e,function(){t.emit("drain")}),!0):(t.gs.open(function(){t.gs.isOpen=!0,t.gs.write(e,function(){process.nextTick(function(){t.emit("drain")})})}),!1)},B.prototype.end=function(e,t,r){var n=this,o=Array.prototype.slice.call(arguments,0);"function"!=typeof(r=o.pop())&&o.push(r),e=o.length?o.shift():null,t=o.length?o.shift():null,n.endCalled=!0,e&&n.gs.write(e,function(){n.gs.close(function(){"function"==typeof r&&r(),n.emit("end")})}),n.gs.close(function(){"function"==typeof r&&r(),n.emit("end")})},e.exports=g},16:function(e,t,r){var n;
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.2.1
 */
(function(){"use strict";function o(e){return"function"==typeof e}var i,s,a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=0,c=function(e,t){S[l]=e,S[l+1]=t,2===(l+=2)&&(s?s(C):g())};var u="undefined"!=typeof window?window:void 0,p=u||{},h=p.MutationObserver||p.WebKitMutationObserver,d="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){return function(){setTimeout(C,1)}}var g,y,v,b,x,S=new Array(1e3);function C(){for(var e=0;e<l;e+=2){(0,S[e])(S[e+1]),S[e]=void 0,S[e+1]=void 0}l=0}d?g=function(){process.nextTick(C)}:h?(v=0,b=new h(C),x=document.createTextNode(""),b.observe(x,{characterData:!0}),g=function(){x.data=v=++v%2}):f?((y=new MessageChannel).port1.onmessage=C,g=function(){y.port2.postMessage(0)}):g=void 0===u?function(){try{var e=r(279);return i=e.runOnLoop||e.runOnContext,function(){i(C)}}catch(e){return m()}}():m();var _=function(e,t){var r=this,n=new this.constructor(N);void 0===n[T]&&q(n);var o=r._state;if(o){var i=arguments[o-1];c(function(){B(o,n,i,r._result)})}else j(r,n,e,t);return n};var O=function(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(N);return R(t,e),t},T=Math.random().toString(36).substring(16);function N(){}var A=void 0,E=1,w=2,P=new z;function k(e){try{return e.then}catch(e){return P.error=e,P}}function I(e,t,r){t.constructor===e.constructor&&r===_&&constructor.resolve===O?function(e,t){t._state===E?D(e,t._result):t._state===w?M(e,t._result):j(t,void 0,function(t){R(e,t)},function(t){M(e,t)})}(e,t):r===P?M(e,P.error):void 0===r?D(e,t):o(r)?function(e,t,r){c(function(e){var n=!1,o=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,function(r){n||(n=!0,t!==r?R(e,r):D(e,r))},function(t){n||(n=!0,M(e,t))},e._label);!n&&o&&(n=!0,M(e,o))},e)}(e,t,r):D(e,t)}function R(e,t){var r;e===t?M(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(r=t)||"object"==typeof r&&null!==r?I(e,t,k(t)):D(e,t)}function L(e){e._onerror&&e._onerror(e._result),F(e)}function D(e,t){e._state===A&&(e._result=t,e._state=E,0!==e._subscribers.length&&c(F,e))}function M(e,t){e._state===A&&(e._state=w,e._result=t,c(L,e))}function j(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+E]=r,o[i+w]=n,0===i&&e._state&&c(F,e)}function F(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,o,i=e._result,s=0;s<t.length;s+=3)n=t[s],o=t[s+r],n?B(r,n,o,i):o(i);e._subscribers.length=0}}function z(){this.error=null}var U=new z;function B(e,t,r,n){var i,s,a,l,c=o(r);if(c){if((i=function(e,t){try{return e(t)}catch(e){return U.error=e,U}}(r,n))===U?(l=!0,s=i.error,i=null):a=!0,t===i)return void M(t,new TypeError("A promises callback cannot return that same promise."))}else i=n,a=!0;t._state!==A||(c&&a?R(t,i):l?M(t,s):e===E?D(t,i):e===w&&M(t,i))}var V=0;function q(e){e[T]=V++,e._state=void 0,e._result=void 0,e._subscribers=[]}var H=function(e){return new G(this,e).promise};var $=function(e){var t=this;return a(e)?new t(function(r,n){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(r,n)}):new t(function(e,t){t(new TypeError("You must pass an array to race."))})};var W=function(e){var t=new this(N);return M(t,e),t};var K=Y;function Y(e){this[T]=V++,this._result=this._state=void 0,this._subscribers=[],N!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Y?function(e,t){try{t(function(t){R(e,t)},function(t){M(e,t)})}catch(t){M(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}Y.all=H,Y.race=$,Y.resolve=O,Y.reject=W,Y._setScheduler=function(e){s=e},Y._setAsap=function(e){c=e},Y._asap=c,Y.prototype={constructor:Y,then:_,catch:function(e){return this.then(null,e)}};var G=J;function J(e,t){this._instanceConstructor=e,this.promise=new e(N),this.promise[T]||q(this.promise),a(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&D(this.promise,this._result))):M(this.promise,new Error("Array Methods must be provided an Array"))}J.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===A&&r<e;r++)this._eachEntry(t[r],r)},J.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===O){var o=k(e);if(o===_&&e._state!==A)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===K){var i=new r(N);I(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new r(function(t){t(e)}),t)}else this._willSettleAt(n(e),t)},J.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===A&&(this._remaining--,e===w?M(n,r):this._result[t]=r),0===this._remaining&&D(n,this._result)},J.prototype._willSettleAt=function(e,t){var r=this;j(e,void 0,function(e){r._settledAt(E,t,e)},function(e){r._settledAt(w,t,e)})};var Q=function(){var e;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=K)},X={Promise:K,polyfill:Q};void 0===(n=function(){return X}.call(t,r,t,e))||(e.exports=n),Q()}).call(this)},160:function(e,t,r){"use strict";var n=r(5).BSON.Binary,o=r(5).BSON.ObjectID,i=function(e,t,r){if(!(this instanceof i))return new i(e,t);this.file=e;var s=null==t?{}:t;if(this.writeConcern=r||{w:1},this.objectId=null==s._id?new o:s._id,this.chunkNumber=null==s.n?0:s.n,this.data=new n,"string"==typeof s.data){var a=new Buffer(s.data.length);a.write(s.data,0,s.data.length,"binary"),this.data=new n(a)}else if(Array.isArray(s.data)){a=new Buffer(s.data.length);var l=s.data.join("");a.write(l,0,l.length,"binary"),this.data=new n(a)}else if(s.data&&"Binary"===s.data._bsontype)this.data=s.data;else if(!Buffer.isBuffer(s.data)&&null!=s.data)throw Error("Illegal chunk format");this.internalPosition=0};i.prototype.write=function(e,t){return this.data.write(e,this.internalPosition,e.length,"binary"),this.internalPosition=this.data.length(),null!=t?t(null,this):this},i.prototype.read=function(e){if(e=null==e||0==e?this.length():e,this.length()-this.internalPosition+1>=e){var t=this.data.read(this.internalPosition,e);return this.internalPosition=this.internalPosition+e,t}return""},i.prototype.readSlice=function(e){if(this.length()-this.internalPosition>=e){var t=null;return null!=this.data.buffer?t=this.data.buffer.slice(this.internalPosition,this.internalPosition+e):(t=new Buffer(e),e=this.data.readInto(t,this.internalPosition)),this.internalPosition=this.internalPosition+e,t}return null},i.prototype.eof=function(){return this.internalPosition==this.length()},i.prototype.getc=function(){return this.read(1)},i.prototype.rewind=function(){this.internalPosition=0,this.data=new n},i.prototype.save=function(e,t){var r=this;"function"==typeof e&&(t=e,e={}),r.file.chunkCollection(function(n,o){if(n)return t(n);var i={upsert:!0};for(var s in e)i[s]=e[s];for(s in r.writeConcern)i[s]=r.writeConcern[s];r.data.length()>0?r.buildMongoObject(function(e){var n={forceServerObjectId:!0};for(var s in r.writeConcern)n[s]=r.writeConcern[s];o.replaceOne({_id:r.objectId},e,i,function(e){t(e,r)})}):t(null,r)})},i.prototype.buildMongoObject=function(e){var t={files_id:this.file.fileId,n:this.chunkNumber,data:this.data};null!=this.objectId&&(t._id=this.objectId),e(t)},i.prototype.length=function(){return this.data.length()},Object.defineProperty(i.prototype,"position",{enumerable:!0,get:function(){return this.internalPosition},set:function(e){this.internalPosition=e}}),i.DEFAULT_CHUNK_SIZE=261120,e.exports=i},161:function(e,t,r){"use strict";var n=r(3).toError,o=r(20),i=r(3).shallowClone,s=r(3).assign,a=r(112),l=function(e,t,r){if(!(this instanceof l))return new l(e,t);this.s={db:e,topology:t,promiseLibrary:r}},c=l.define=new o("Admin",l,!1);l.prototype.command=function(e,t,r){var n=this,o=Array.prototype.slice.call(arguments,1);return"function"!=typeof(r=o.pop())&&o.push(r),t=o.length?o.shift():{},"function"==typeof r?this.s.db.executeDbAdminCommand(e,t,function(e,t){return null!=r?r(e,t):null}):new this.s.promiseLibrary(function(r,o){n.s.db.executeDbAdminCommand(e,t,function(e,t){if(e)return o(e);r(t)})})},c.classMethod("command",{callback:!0,promise:!0}),l.prototype.buildInfo=function(e){var t=this;return"function"==typeof e?this.serverInfo(e):new this.s.promiseLibrary(function(e,r){t.serverInfo(function(t,n){if(t)return r(t);e(n)})})},c.classMethod("buildInfo",{callback:!0,promise:!0}),l.prototype.serverInfo=function(e){var t=this;return"function"==typeof e?this.s.db.executeDbAdminCommand({buildinfo:1},function(t,r){if(null!=t)return e(t,null);e(null,r)}):new this.s.promiseLibrary(function(e,r){t.s.db.executeDbAdminCommand({buildinfo:1},function(t,n){if(t)return r(t);e(n)})})},c.classMethod("serverInfo",{callback:!0,promise:!0}),l.prototype.serverStatus=function(e){var t=this;return"function"==typeof e?u(t,e):new this.s.promiseLibrary(function(e,r){u(t,function(t,n){if(t)return r(t);e(n)})})};var u=function(e,t){e.s.db.executeDbAdminCommand({serverStatus:1},function(e,r){if(null!=e||1!==r.ok)return t(e||n(r),!1);t(null,r)})};c.classMethod("serverStatus",{callback:!0,promise:!0}),l.prototype.profilingLevel=function(e){var t=this;return"function"==typeof e?p(t,e):new this.s.promiseLibrary(function(e,r){p(t,function(t,n){if(t)return r(t);e(n)})})};var p=function(e,t){e.s.db.executeDbAdminCommand({profile:-1},function(e,r){if(null==e&&1===r.ok){var n=r.was;return 0==n?t(null,"off"):1==n?t(null,"slow_only"):2==n?t(null,"all"):t(new Error("Error: illegal profiling level value "+n),null)}t(null!=e?e:new Error("Error with profile command"),null)})};c.classMethod("profilingLevel",{callback:!0,promise:!0}),l.prototype.ping=function(e,t){var r=this,n=Array.prototype.slice.call(arguments,0);return"function"!=typeof(t=n.pop())&&n.push(t),"function"==typeof t?this.s.db.executeDbAdminCommand({ping:1},t):new this.s.promiseLibrary(function(e,t){r.s.db.executeDbAdminCommand({ping:1},function(r,n){if(r)return t(r);e(n)})})},c.classMethod("ping",{callback:!0,promise:!0}),l.prototype.authenticate=function(e,t,r,n){console.warn("Admin.prototype.authenticate method will no longer be available in the next major release 3.x as MongoDB 3.6 will only allow auth against users in the admin db and will no longer allow multiple credentials on a socket. Please authenticate using MongoClient.connect with auth credentials.");var o=[this.s.db];return"string"==typeof e&&o.push(e),"string"==typeof t&&o.push(t),"function"==typeof r?(o.push({authdb:"admin"}),o.push(r)):o.push(s({},r,{authdb:"admin"})),"function"==typeof n&&o.push(n),a.apply(this.s.db,o)},c.classMethod("authenticate",{callback:!0,promise:!0}),l.prototype.logout=function(e){var t=this;return"function"==typeof e?this.s.db.logout({dbName:"admin"},e):new this.s.promiseLibrary(function(e,r){t.s.db.logout({dbName:"admin"},function(t){if(t)return r(t);e(!0)})})},c.classMethod("logout",{callback:!0,promise:!0});var h=function(e,t){return(e=i(e)).w||e.wtimeout||e.j||e.fsync?e:(t.writeConcern&&(e.w&&(e.w=t.writeConcern.w),e.wtimeout&&(e.wtimeout=t.writeConcern.wtimeout),e.j&&(e.j=t.writeConcern.j),e.fsync&&(e.fsync=t.writeConcern.fsync)),e)};l.prototype.addUser=function(e,t,r,n){var o=this,i=Array.prototype.slice.call(arguments,2);return"function"!=typeof(n=i.pop())&&i.push(n),r=i.length?i.shift():{},(r=h(r=r||{},o.s.db)).dbName="admin","function"==typeof n?o.s.db.addUser(e,t,r,n):new this.s.promiseLibrary(function(n,i){o.s.db.addUser(e,t,r,function(e,t){if(e)return i(e);n(t)})})},c.classMethod("addUser",{callback:!0,promise:!0}),l.prototype.removeUser=function(e,t,r){var n=this,o=Array.prototype.slice.call(arguments,1);return"function"!=typeof(r=o.pop())&&o.push(r),t=o.length?o.shift():{},(t=h(t=t||{},n.s.db)).dbName="admin","function"==typeof r?n.s.db.removeUser(e,t,r):new this.s.promiseLibrary(function(r,o){n.s.db.removeUser(e,t,function(e,t){if(e)return o(e);r(t)})})},c.classMethod("removeUser",{callback:!0,promise:!0}),l.prototype.setProfilingLevel=function(e,t){var r=this;return"function"==typeof t?d(r,e,t):new this.s.promiseLibrary(function(t,n){d(r,e,function(e,r){if(e)return n(e);t(r)})})};var d=function(e,t,r){var n={},o=0;if("off"==t)o=0;else if("slow_only"==t)o=1;else{if("all"!=t)return r(new Error("Error: illegal profiling level value "+t));o=2}n.profile=o,e.s.db.executeDbAdminCommand(n,function(e,n){return null==e&&1===n.ok?r(null,t):r(null!=e?e:new Error("Error with profile command"),null)})};c.classMethod("setProfilingLevel",{callback:!0,promise:!0}),l.prototype.profilingInfo=function(e){var t=this;return"function"==typeof e?f(t,e):new this.s.promiseLibrary(function(e,r){f(t,function(t,n){if(t)return r(t);e(n)})})};var f=function(e,t){try{e.s.topology.cursor("admin.system.profile",{find:"system.profile",query:{}},{}).toArray(t)}catch(e){return t(e,null)}};c.classMethod("profilingLevel",{callback:!0,promise:!0}),l.prototype.validateCollection=function(e,t,r){var n=this,o=Array.prototype.slice.call(arguments,1);return"function"!=typeof(r=o.pop())&&o.push(r),t=(t=o.length?o.shift():{})||{},"function"==typeof r?m(n,e,t,r):new this.s.promiseLibrary(function(r,o){m(n,e,t,function(e,t){if(e)return o(e);r(t)})})};var m=function(e,t,r,n){for(var o={validate:t},i=Object.keys(r),s=0;s<i.length;s++)r.hasOwnProperty(i[s])&&(o[i[s]]=r[i[s]]);e.s.db.command(o,function(e,r){return null!=e?n(e,null):0===r.ok?n(new Error("Error with validate command"),null):null!=r.result&&r.result.constructor!=String?n(new Error("Error with validation data"),null):null!=r.result&&null!=r.result.match(/exception|corrupt/)?n(new Error("Error: invalid collection "+t),null):null==r.valid||r.valid?n(null,r):n(new Error("Error: invalid collection "+t),null)})};c.classMethod("validateCollection",{callback:!0,promise:!0}),l.prototype.listDatabases=function(e){var t=this;return"function"==typeof e?t.s.db.executeDbAdminCommand({listDatabases:1},{},e):new this.s.promiseLibrary(function(e,r){t.s.db.executeDbAdminCommand({listDatabases:1},{},function(t,n){if(t)return r(t);e(n)})})},c.classMethod("listDatabases",{callback:!0,promise:!0}),l.prototype.replSetGetStatus=function(e){var t=this;return"function"==typeof e?g(t,e):new this.s.promiseLibrary(function(e,r){g(t,function(t,n){if(t)return r(t);e(n)})})};var g=function(e,t){e.s.db.executeDbAdminCommand({replSetGetStatus:1},function(e,r){return null==e&&1===r.ok?t(null,r):e?t(e,!1):void t(n(r),!1)})};c.classMethod("replSetGetStatus",{callback:!0,promise:!0}),e.exports=l},162:function(e,t,r){"use strict";var n=r(280),o=r(90),i=r(163),s=r(164),a=r(26).EventEmitter,l=r(4).inherits,c=r(20),u=r(28),p=r(5).Logger,h=r(5).MongoError,d=r(111),f=r(4).format,m=(r(3).assign,r(3).shallowClone),g=r(112),y=["poolSize","ssl","sslValidate","sslCA","sslCert","ciphers","ecdhCurve","sslKey","sslPass","sslCRL","autoReconnect","noDelay","keepAlive","connectTimeoutMS","family","socketTimeoutMS","reconnectTries","reconnectInterval","ha","haInterval","replicaSet","secondaryAcceptableLatencyMS","acceptableLatencyMS","connectWithNoPrimary","authSource","w","wtimeout","j","forceServerObjectId","serializeFunctions","ignoreUndefined","raw","bufferMaxEntries","readPreference","pkFactory","promiseLibrary","readConcern","maxStalenessSeconds","loggerLevel","logger","promoteValues","promoteBuffers","promoteLongs","domainsEnabled","keepAliveInitialDelay","checkServerIdentity","validateOptions","appname","auth"],v=["native_parser"],b=["server","replset","replSet","mongos","db"];function x(){if(!(this instanceof x))return new x;a.call(this),this.connect=x.connect}l(x,a);var S=x.define=new c("MongoClient",x,!1);x.connect=function(e,t,n){var o=Array.prototype.slice.call(arguments,1);n="function"==typeof o[o.length-1]?o.pop():null,t=o.length?o.shift():null;var i=this,s=function(e){var t=y.concat(b);for(var r in e)if(-1==v.indexOf(r)){if(-1==t.indexOf(r)&&e.validateOptions)return new h(f("option %s is not supported",r));-1==t.indexOf(r)&&console.warn(f("the options [%s] is not supported",r)),-1!=b.indexOf(r)&&console.warn(f("the server/replset/mongos options are deprecated, all their options are supported at the top level of the options object [%s]",y))}}(t=t||{}),a=t.promiseLibrary;return a||(a="function"==typeof global.Promise?global.Promise:r(16).Promise),"function"!=typeof n?new a(function(r,n){if(s)return n(s);w(i,e,t,function(e,t){if(e)return n(e);r(t)})}):s?n(s):void w(i,e,t,n)},S.staticMethod("connect",{callback:!0,promise:!0});var C=function(e,t,r){for(var n in t)t[n]&&"object"==typeof t[n]&&r?e=C(e,t[n],r):e[n]=t[n];return e},_=function(e,t){var r=["mongos","server","db","replset","db_options","server_options","rs_options","mongos_options"],n=["readconcern"];for(var o in t)-1!=n.indexOf(o.toLowerCase())?e[o]=t[o]:-1!=r.indexOf(o.toLowerCase())?e=C(e,t[o],!1):!t[o]||"object"!=typeof t[o]||Buffer.isBuffer(t[o])||Array.isArray(t[o])?e[o]=t[o]:e=C(e,t[o],!0);return e};function O(e){return"string"!=typeof e.readPreference&&"string"!=typeof e.read_preference||(e.readPreference=new u(e.readPreference||e.read_preference)),e.readPreference&&(e.readPreferenceTags||e.read_preference_tags)&&(e.readPreference.tags=e.readPreferenceTags||e.read_preference_tags),e.maxStalenessSeconds&&(e.readPreference.maxStalenessSeconds=e.maxStalenessSeconds),null==e.socketTimeoutMS&&(e.socketTimeoutMS=36e4),null==e.connectTimeoutMS&&(e.connectTimeoutMS=3e4),e.servers.map(function(t){return t.domain_socket?new o(t.domain_socket,27017,e):new o(t.host,t.port,e)})}function T(e,t){if(e instanceof x){["timeout","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged","joined","left","ping","ha","all","fullsetup"].forEach(function(r){t.serverConfig.on(r,function(t,n){e.emit(r,t,n)})})}}function N(e,t,r){var n=O(t),o=new d(t.dbName,new i(n,t),t);T(e,o),o.open(r)}function A(e,t,r){var n=O(t),o=new d(t.dbName,n[0],t),i=function(e,t){var r=[];e instanceof x&&["timeout","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged","joined","left","ping","ha","all","fullsetup"].forEach(function(e){t.serverConfig.on(e,function(t,n){r.push({event:e,object1:t,object2:n})})});return r}(e,o);o.open(function(n,o){if(n)return r(n);var s=o.serverConfig.lastIsMaster();if(s&&"isdbgrid"==s.msg)return o.close(),N(e,t,r);!function(e,t){for(var r=0;r<t.length;r++)e.emit(t[r].event,t[r].object1,t[r].object2)}(e,i),T(e,o),r(n,o)})}function E(e,t){return function(r,n){if(r)return process.nextTick(function(){try{t(r,null)}catch(e){throw n&&n.close(),e}});if(!e.auth)return process.nextTick(function(){try{t(r,n)}catch(e){throw n&&n.close(),e}});var o=n;e.authSource&&(o=n.db(e.authSource)),g(o,e.user,e.password,e,function(r,o){o?process.nextTick(function(){try{t(null,n)}catch(e){throw n&&n.close(),e}}):(n&&n.close(),process.nextTick(function(){try{t(r||new Error("Could not authenticate user "+e.auth[0]),null)}catch(e){throw n&&n.close(),e}}))})}}var w=function(e,t,r,o){if(r=m(r=r||{}),null==o)throw new Error("no callback function provided");var i=p("MongoClient",r);function a(e,t){if(e&&"no mongos proxies found in seed list"==e.message)return i.isWarn()&&i.warn(f("seed list contains no mongos proxies, replicaset connections requires the parameter replicaSet to be supplied in the URI or options object, mongodb://server:port/db?replicaSet=name")),o(new h("seed list contains no mongos proxies, replicaset connections requires the parameter replicaSet to be supplied in the URI or options object, mongodb://server:port/db?replicaSet=name"));o(e,t)}n(t,r,function(t,n){if(t)return o(t);var i=_({},n);if(i=C(i,n,!1),null==(i=_(i,r)).socketTimeoutMS&&(i.socketTimeoutMS=36e4),null==i.connectTimeoutMS&&(i.connectTimeoutMS=3e4),i.db_options&&i.db_options.auth&&delete i.db_options.auth,0==n.servers.length)throw new Error("connection string must contain at least one seed host");return i.replicaSet||i.rs_name?function(e,t,r){var n=O(t),o=new d(t.dbName,new s(n,t),t);T(e,o),o.open(r)}(e,i,E(i,a)):n.servers.length>1?N(e,i,E(i,a)):A(e,i,E(i,a))})};e.exports=x},163:function(e,t,r){"use strict";var n=r(26).EventEmitter,o=r(4).inherits,i=r(4).format,s=r(59).ServerCapabilities,a=r(5).MongoError,l=r(5).Mongos,c=r(32),u=r(58),p=r(48),h=r(20),d=r(90),f=r(59).Store,m=r(3).MAX_JS_INT,g=r(3).translateOptions,y=r(3).filterOptions,v=r(3).mergeOptions,b=r(3).getReadPreference,x=r(35),S=r(113).version,C=i("Node.js %s, %s",process.version,x.endianness()),_=x.type(),O=process.platform,T=process.arch,N=x.release(),A=["ha","haInterval","acceptableLatencyMS","poolSize","ssl","checkServerIdentity","sslValidate","ciphers","ecdhCurve","sslCA","sslCRL","sslCert","sslKey","sslPass","socketOptions","bufferMaxEntries","store","auto_reconnect","autoReconnect","emitError","keepAlive","noDelay","connectTimeoutMS","socketTimeoutMS","loggerLevel","logger","reconnectTries","appname","domainsEnabled","servername","promoteLongs","promoteValues","promoteBuffers"],E=function(e,t){if(!(this instanceof E))return new E(e,t);t=y(t=t||{},A);for(var r=0;r<e.length;r++)if(!(e[r]instanceof d))throw a.create({message:"all seed list instances must be of the Server type",driver:!0});var o={force:!1,bufferMaxEntries:"number"==typeof t.bufferMaxEntries?t.bufferMaxEntries:m},i=t.store||new f(this,o);n.call(this);var s=e.map(function(e){return{host:e.host,port:e.port}}),u="boolean"!=typeof t.auto_reconnect||t.auto_reconnect;u="boolean"==typeof t.autoReconnect?t.autoReconnect:u;var p=v({},{disconnectHandler:i,cursorFactory:c,reconnect:u,emitError:"boolean"!=typeof t.emitError||t.emitError,size:"number"==typeof t.poolSize?t.poolSize:5});p=g(p,t);var h=t.socketOptions&&Object.keys(t.socketOptions).length>0?t.socketOptions:t;"number"==typeof(p=g(p,h)).keepAlive&&(p.keepAliveInitialDelay=p.keepAlive,p.keepAlive=p.keepAlive>0),this.clientInfo={driver:{name:"nodejs",version:S},os:{type:_,name:O,architecture:T,version:N},platform:C},p.clientInfo=this.clientInfo,t.appname&&(p.clientInfo.application={name:t.appname});var b=new l(s,p);this.s={mongos:b,sCapabilities:null,debug:p.debug,storeOptions:o,clonedOptions:p,store:i,options:t}},w=E.define=new h("Mongos",E,!1);o(E,n),Object.defineProperty(E.prototype,"isMasterDoc",{enumerable:!0,get:function(){return this.s.mongos.lastIsMaster()}}),Object.defineProperty(E.prototype,"parserType",{enumerable:!0,get:function(){return this.s.mongos.parserType}}),Object.defineProperty(E.prototype,"bson",{enumerable:!0,get:function(){return this.s.mongos.s.bson}}),Object.defineProperty(E.prototype,"haInterval",{enumerable:!0,get:function(){return this.s.mongos.s.haInterval}}),E.prototype.connect=function(e,t,r){var n=this;"function"==typeof t&&(r=t,t={}),null==t&&(t={}),"function"!=typeof r&&(r=null),n.s.options=t,n.s.storeOptions.bufferMaxEntries=e.bufferMaxEntries;var o=function(){return function(e){["timeout","error","close"].forEach(function(e){n.removeListener(e,o)}),n.s.mongos.removeListener("connect",o);try{r(e)}catch(e){process.nextTick(function(){throw e})}}},i=function(e){return function(t){"error"!=e&&n.emit(e,t)}},s=function(e){return function(t,r){n.emit(e,t,r)}};["timeout","error","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged"].forEach(function(e){n.s.mongos.removeAllListeners(e)}),n.s.mongos.on("serverDescriptionChanged",s("serverDescriptionChanged")),n.s.mongos.on("serverHeartbeatStarted",s("serverHeartbeatStarted")),n.s.mongos.on("serverHeartbeatSucceeded",s("serverHeartbeatSucceeded")),n.s.mongos.on("serverHeartbeatFailed",s("serverHeartbeatFailed")),n.s.mongos.on("serverOpening",s("serverOpening")),n.s.mongos.on("serverClosed",s("serverClosed")),n.s.mongos.on("topologyOpening",s("topologyOpening")),n.s.mongos.on("topologyClosed",s("topologyClosed")),n.s.mongos.on("topologyDescriptionChanged",s("topologyDescriptionChanged")),n.s.mongos.once("timeout",o("timeout")),n.s.mongos.once("error",o("error")),n.s.mongos.once("close",o("close")),n.s.mongos.once("connect",function(){["timeout","error","close","fullsetup"].forEach(function(e){n.s.mongos.removeAllListeners(e)}),n.s.mongos.once("timeout",i("timeout")),n.s.mongos.once("error",i("error")),n.s.mongos.once("close",i("close")),n.s.mongos.on("fullsetup",function(){n.emit("fullsetup",n)}),n.emit("open",null,n);try{r(null,n)}catch(e){process.nextTick(function(){throw e})}}),n.s.mongos.on("joined",s("joined")),n.s.mongos.on("left",s("left")),n.s.mongos.on("reconnect",function(){n.emit("reconnect"),n.s.store.execute()}),n.s.mongos.connect(t)},E.prototype.capabilities=function(){return this.s.sCapabilities?this.s.sCapabilities:null==this.s.mongos.lastIsMaster()?null:(this.s.sCapabilities=new s(this.s.mongos.lastIsMaster()),this.s.sCapabilities)},w.classMethod("capabilities",{callback:!1,promise:!1,returns:[s]}),E.prototype.command=function(e,t,r,n){this.s.mongos.command(e,t,b(r),n)},w.classMethod("command",{callback:!0,promise:!1}),E.prototype.insert=function(e,t,r,n){this.s.mongos.insert(e,t,r,function(e,t){n(e,t)})},w.classMethod("insert",{callback:!0,promise:!1}),E.prototype.update=function(e,t,r,n){this.s.mongos.update(e,t,r,n)},w.classMethod("update",{callback:!0,promise:!1}),E.prototype.remove=function(e,t,r,n){this.s.mongos.remove(e,t,r,n)},w.classMethod("remove",{callback:!0,promise:!1}),E.prototype.isDestroyed=function(){return this.s.mongos.isDestroyed()},E.prototype.isConnected=function(){return this.s.mongos.isConnected()},w.classMethod("isConnected",{callback:!1,promise:!1,returns:[Boolean]}),E.prototype.cursor=function(e,t,r){return r.disconnectHandler=this.s.store,this.s.mongos.cursor(e,t,r)},w.classMethod("cursor",{callback:!1,promise:!1,returns:[c,u,p]}),E.prototype.lastIsMaster=function(){return this.s.mongos.lastIsMaster()},E.prototype.unref=function(){return this.s.mongos.unref()},E.prototype.close=function(e){this.s.mongos.destroy({force:"boolean"==typeof e&&e}),1==e&&(this.s.storeOptions.force=e,this.s.store.flush())},w.classMethod("close",{callback:!1,promise:!1}),E.prototype.auth=function(){var e=Array.prototype.slice.call(arguments,0);this.s.mongos.auth.apply(this.s.mongos,e)},w.classMethod("auth",{callback:!0,promise:!1}),E.prototype.logout=function(){var e=Array.prototype.slice.call(arguments,0);this.s.mongos.logout.apply(this.s.mongos,e)},w.classMethod("logout",{callback:!0,promise:!1}),E.prototype.connections=function(){return this.s.mongos.connections()},w.classMethod("connections",{callback:!1,promise:!1,returns:[Array]}),e.exports=E},164:function(e,t,r){"use strict";var n=r(26).EventEmitter,o=r(4).inherits,i=r(4).format,s=r(90),a=r(32),l=r(58),c=r(48),u=r(28),p=r(5).MongoError,h=r(59).ServerCapabilities,d=r(59).Store,f=r(20),m=r(5).ReplSet,g=r(5).ReadPreference,y=r(3).MAX_JS_INT,v=r(3).translateOptions,b=r(3).filterOptions,x=r(3).getReadPreference,S=r(3).mergeOptions,C=r(35),_=["ha","haInterval","replicaSet","rs_name","secondaryAcceptableLatencyMS","connectWithNoPrimary","poolSize","ssl","checkServerIdentity","sslValidate","sslCA","sslCert","sslCRL","sslKey","sslPass","socketOptions","bufferMaxEntries","store","auto_reconnect","autoReconnect","emitError","keepAlive","noDelay","connectTimeoutMS","socketTimeoutMS","strategy","debug","family","loggerLevel","logger","reconnectTries","appname","domainsEnabled","servername","promoteLongs","promoteValues","promoteBuffers","maxStalenessSeconds"],O=r(113).version,T=i("Node.js %s, %s",process.version,C.endianness()),N=C.type(),A=process.platform,E=process.arch,w=C.release(),P=function(e,t){if(!(this instanceof P))return new P(e,t);t=t||{};var r=this;n.call(this),t=b(t,_);for(var o=0;o<e.length;o++)if(!(e[o]instanceof s))throw p.create({message:"all seed list instances must be of the Server type",driver:!0});var i={force:!1,bufferMaxEntries:"number"==typeof t.bufferMaxEntries?t.bufferMaxEntries:y},l=t.store||new d(r,i),c=e.map(function(e){return{host:e.host,port:e.port}}),u=S({},{disconnectHandler:l,cursorFactory:a,reconnect:!1,emitError:"boolean"!=typeof t.emitError||t.emitError,size:"number"==typeof t.poolSize?t.poolSize:5});u=v(u,t);var h=t.socketOptions&&Object.keys(t.socketOptions).length>0?t.socketOptions:t;"number"==typeof(u=v(u,h)).keepAlive&&(u.keepAliveInitialDelay=u.keepAlive,u.keepAlive=u.keepAlive>0),this.clientInfo={driver:{name:"nodejs",version:O},os:{type:N,name:A,architecture:E,version:w},platform:T},u.clientInfo=this.clientInfo,t.appname&&(u.clientInfo.application={name:t.appname});var f=new m(c,u);f.on("reconnect",function(){r.emit("reconnect"),l.execute()}),this.s={replset:f,sCapabilities:null,tag:t.tag,storeOptions:i,clonedOptions:u,store:l,options:t},u.debug&&Object.defineProperty(this,"replset",{enumerable:!0,get:function(){return f}})};o(P,n),Object.defineProperty(P.prototype,"isMasterDoc",{enumerable:!0,get:function(){return this.s.replset.lastIsMaster()}}),Object.defineProperty(P.prototype,"parserType",{enumerable:!0,get:function(){return this.s.replset.parserType}}),Object.defineProperty(P.prototype,"bson",{enumerable:!0,get:function(){return this.s.replset.s.bson}}),Object.defineProperty(P.prototype,"haInterval",{enumerable:!0,get:function(){return this.s.replset.s.haInterval}});var k=P.define=new f("ReplSet",P,!1),I=function(e){return"string"==typeof e.readPreference?e.readPreference=new g(e.readPreference):e.readPreference instanceof u&&(e.readPreference=new g(e.readPreference.mode,e.readPreference.tags,{maxStalenessSeconds:e.readPreference.maxStalenessSeconds})),e};P.prototype.connect=function(e,t,r){var n=this;"function"==typeof t&&(r=t,t={}),null==t&&(t={}),"function"!=typeof r&&(r=null),n.s.options=t,n.s.storeOptions.bufferMaxEntries=e.bufferMaxEntries;var o=function(e){return function(t){"error"!=e&&n.emit(e,t)}};["timeout","error","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged","joined","left","ping","ha"].forEach(function(e){n.s.replset.removeAllListeners(e)});var i,s=function(e){return function(t,r){n.emit(e,t,r)}};n.s.replset.on("joined",(i="joined",function(e,t){n.emit(i,e,t.lastIsMaster(),t)})),n.s.replset.on("left",s("left")),n.s.replset.on("ping",s("ping")),n.s.replset.on("ha",function(e,t){n.emit("ha",e,t),"start"==e?n.emit("ha_connect",e,t):"end"==e&&n.emit("ha_ismaster",e,t)}),n.s.replset.on("serverDescriptionChanged",s("serverDescriptionChanged")),n.s.replset.on("serverHeartbeatStarted",s("serverHeartbeatStarted")),n.s.replset.on("serverHeartbeatSucceeded",s("serverHeartbeatSucceeded")),n.s.replset.on("serverHeartbeatFailed",s("serverHeartbeatFailed")),n.s.replset.on("serverOpening",s("serverOpening")),n.s.replset.on("serverClosed",s("serverClosed")),n.s.replset.on("topologyOpening",s("topologyOpening")),n.s.replset.on("topologyClosed",s("topologyClosed")),n.s.replset.on("topologyDescriptionChanged",s("topologyDescriptionChanged")),n.s.replset.on("fullsetup",function(){n.emit("fullsetup",n,n)}),n.s.replset.on("all",function(){n.emit("all",null,n)});var a=function(){return function(e){["timeout","error","close"].forEach(function(e){n.s.replset.removeListener(e,a)}),n.s.replset.removeListener("connect",a),n.s.replset.destroy();try{r(e)}catch(e){n.s.replset.isConnected()||process.nextTick(function(){throw e})}}};n.s.replset.once("timeout",a("timeout")),n.s.replset.once("error",a("error")),n.s.replset.once("close",a("close")),n.s.replset.once("connect",function(){n.s.replset.once("timeout",o("timeout")),n.s.replset.once("error",o("error")),n.s.replset.once("close",o("close")),n.emit("open",null,n);try{r(null,n)}catch(e){process.nextTick(function(){throw e})}}),n.s.replset.connect(t)},P.prototype.capabilities=function(){return this.s.sCapabilities?this.s.sCapabilities:null==this.s.replset.lastIsMaster()?null:(this.s.sCapabilities=new h(this.s.replset.lastIsMaster()),this.s.sCapabilities)},k.classMethod("capabilities",{callback:!1,promise:!1,returns:[h]}),P.prototype.command=function(e,t,r,n){this.s.replset.command(e,t,x(r),n)},k.classMethod("command",{callback:!0,promise:!1}),P.prototype.insert=function(e,t,r,n){this.s.replset.insert(e,t,r,n)},k.classMethod("insert",{callback:!0,promise:!1}),P.prototype.update=function(e,t,r,n){this.s.replset.update(e,t,r,n)},k.classMethod("update",{callback:!0,promise:!1}),P.prototype.remove=function(e,t,r,n){this.s.replset.remove(e,t,r,n)},k.classMethod("remove",{callback:!0,promise:!1}),P.prototype.isDestroyed=function(){return this.s.replset.isDestroyed()},P.prototype.isConnected=function(e){return(e=e||{}).readPreference&&(e.readPreference=I(e.readPreference)),this.s.replset.isConnected(e)},k.classMethod("isConnected",{callback:!1,promise:!1,returns:[Boolean]}),P.prototype.cursor=function(e,t,r){return(r=I(r)).disconnectHandler=this.s.store,this.s.replset.cursor(e,t,r)},k.classMethod("cursor",{callback:!1,promise:!1,returns:[a,l,c]}),P.prototype.lastIsMaster=function(){return this.s.replset.lastIsMaster()},P.prototype.unref=function(){return this.s.replset.unref()},P.prototype.close=function(e){var t=this;this.s.replset.destroy({force:"boolean"==typeof e&&e}),1==e&&(this.s.storeOptions.force=e,this.s.store.flush());["timeout","error","close","joined","left"].forEach(function(e){t.removeAllListeners(e)})},k.classMethod("close",{callback:!1,promise:!1}),P.prototype.auth=function(){var e=Array.prototype.slice.call(arguments,0);this.s.replset.auth.apply(this.s.replset,e)},k.classMethod("auth",{callback:!0,promise:!1}),P.prototype.logout=function(){var e=Array.prototype.slice.call(arguments,0);this.s.replset.logout.apply(this.s.replset,e)},k.classMethod("logout",{callback:!0,promise:!1}),P.prototype.connections=function(){return this.s.replset.connections()},k.classMethod("connections",{callback:!1,promise:!1,returns:[Array]}),e.exports=P},169:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(117);t.IntegerStack=class IntegerStack extends n.IntegerList{constructor(e){super(e)}push(e){this.add(e)}pop(){return this.removeAt(this.size-1)}peek(){return this.get(this.size-1)}}},17:function(e,t){e.exports=require("url")},170:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(171),s=r(49),a=r(41),l=r(92),c=r(72),u=r(120),p=r(93),h=r(23),d=r(70),f=r(71),m=r(306),g=r(180),y=r(0),v=r(308),b=r(24),x=r(74),S=r(13),C=r(9);let _=class LexerATNSimulator extends u.ATNSimulator{constructor(e,t){super(e),this.optimize_tail_calls=!0,this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=f.Lexer.DEFAULT_MODE,this.prevAccept=new LexerATNSimulator.SimState,this.recog=t}copyState(e){this._charPositionInLine=e.charPositionInLine,this._line=e._line,this.mode=e.mode,this.startIndex=e.startIndex}match(e,t){LexerATNSimulator.match_calls++,this.mode=t;let r=e.mark();try{this.startIndex=e.index,this.prevAccept.reset();let n=this.atn.modeToDFA[t].s0;return null==n?this.matchATN(e):this.execATN(e,n)}finally{e.release(r)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=f.Lexer.DEFAULT_MODE}matchATN(e){let t=this.atn.modeToStartState[this.mode];LexerATNSimulator.debug&&console.log(`matchATN mode ${this.mode} start: ${t}`);let r=this.mode,n=this.computeStartState(e,t),o=n.hasSemanticContext;o&&(n.hasSemanticContext=!1);let i=this.addDFAState(n);if(!o){let e=this.atn.modeToDFA[this.mode];e.s0?i=e.s0:e.s0=i}let s=this.execATN(e,i);return LexerATNSimulator.debug&&console.log(`DFA after matchATN: ${this.atn.modeToDFA[r].toLexerString()}`),s}execATN(e,t){LexerATNSimulator.debug&&console.log(`start state closure=${t.configs}`),t.isAcceptState&&this.captureSimState(this.prevAccept,e,t);let r=e.LA(1),n=t;for(;;){LexerATNSimulator.debug&&console.log(`execATN loop starting closure: ${n.configs}`);let t=this.getExistingTargetState(n,r);if(null==t&&(t=this.computeTargetState(e,n,r)),t===u.ATNSimulator.ERROR)break;if(r!==d.IntStream.EOF&&this.consume(e),t.isAcceptState&&(this.captureSimState(this.prevAccept,e,t),r===d.IntStream.EOF))break;r=e.LA(1),n=t}return this.failOrAccept(this.prevAccept,e,n.configs,r)}getExistingTargetState(e,t){let r=e.getTarget(t);return LexerATNSimulator.debug&&null!=r&&console.log("reuse state "+e.stateNumber+" edge to "+r.stateNumber),r}computeTargetState(e,t,r){let n=new v.OrderedATNConfigSet;return this.getReachableConfigSet(e,t.configs,n,r),n.isEmpty?(n.hasSemanticContext||this.addDFAEdge(t,r,u.ATNSimulator.ERROR),u.ATNSimulator.ERROR):this.addDFAEdge(t,r,n)}failOrAccept(e,t,r,n){if(null!=e.dfaState){let r=e.dfaState.lexerActionExecutor;return this.accept(t,r,this.startIndex,e.index,e.line,e.charPos),e.dfaState.prediction}if(n===d.IntStream.EOF&&t.index===this.startIndex)return S.Token.EOF;throw new g.LexerNoViableAltException(this.recog,t,this.startIndex,r)}getReachableConfigSet(e,t,r,n){let o=a.ATN.INVALID_ALT_NUMBER;for(let i of s.asIterable(t)){let t=i.alt===o;if(t&&i.hasPassedThroughNonGreedyDecision)continue;LexerATNSimulator.debug&&console.log(`testing ${this.getTokenName(n)} at ${i.toString(this.recog,!0)}`);let s=i.state.numberOfOptimizedTransitions;for(let a=0;a<s;a++){let s=i.state.getOptimizedTransition(a),l=this.getReachableTarget(s,n);if(null!=l){let s,a=i.lexerActionExecutor;null!=a?(a=a.fixOffsetBeforeMatch(e.index-this.startIndex),s=i.transform(l,!0,a)):(C(null==i.lexerActionExecutor),s=i.transform(l,!0));let c=n===d.IntStream.EOF;if(this.closure(e,s,r,t,!0,c)){o=i.alt;break}}}}}accept(e,t,r,n,o,i){LexerATNSimulator.debug&&console.log(`ACTION ${t}`),e.seek(n),this._line=o,this._charPositionInLine=i,null!=t&&null!=this.recog&&t.execute(this.recog,e,r)}getReachableTarget(e,t){if(e.matches(t,f.Lexer.MIN_CHAR_VALUE,f.Lexer.MAX_CHAR_VALUE))return e.target}computeStartState(e,t){let r=b.PredictionContext.EMPTY_FULL,n=new v.OrderedATNConfigSet;for(let o=0;o<t.numberOfTransitions;o++){let i=t.transition(o).target,s=l.ATNConfig.create(i,o+1,r);this.closure(e,s,n,!1,!1,!1)}return n}closure(e,t,r,n,o,i){if(LexerATNSimulator.debug&&console.log("closure("+t.toString(this.recog,!0)+")"),t.state instanceof x.RuleStopState){LexerATNSimulator.debug&&(null!=this.recog?console.log(`closure at ${this.recog.ruleNames[t.state.ruleIndex]} rule stop ${t}`):console.log(`closure at rule stop ${t}`));let s=t.context;if(s.isEmpty)return r.add(t),!0;s.hasEmpty&&(r.add(t.transform(t.state,!0,b.PredictionContext.EMPTY_FULL)),n=!0);for(let a=0;a<s.size;a++){let l=s.getReturnState(a);if(l==b.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let c=s.getParent(a),u=this.atn.states[l],p=t.transform(u,!1,c);n=this.closure(e,p,r,n,o,i)}return n}t.state.onlyHasEpsilonTransitions||n&&t.hasPassedThroughNonGreedyDecision||r.add(t);let s=t.state;for(let a=0;a<s.numberOfOptimizedTransitions;a++){let l=s.getOptimizedTransition(a),c=this.getEpsilonTarget(e,t,l,r,o,i);null!=c&&(n=this.closure(e,c,r,n,o,i))}return n}getEpsilonTarget(e,t,r,n,o,i){let s;switch(r.serializationType){case 3:let a=r;if(this.optimize_tail_calls&&a.optimizedTailCall&&!t.context.hasEmpty)s=t.transform(r.target,!0);else{let e=t.context.getChild(a.followState.stateNumber);s=t.transform(r.target,!0,e)}break;case 10:throw new Error("Precedence predicates are not supported in lexers.");case 4:let l=r;LexerATNSimulator.debug&&console.log("EVAL rule "+l.ruleIndex+":"+l.predIndex),n.hasSemanticContext=!0,s=this.evaluatePredicate(e,l.ruleIndex,l.predIndex,o)?t.transform(r.target,!0):void 0;break;case 6:if(t.context.hasEmpty){let e=m.LexerActionExecutor.append(t.lexerActionExecutor,this.atn.lexerActions[r.actionIndex]);s=t.transform(r.target,!0,e);break}s=t.transform(r.target,!0);break;case 1:s=t.transform(r.target,!0);break;case 5:case 2:case 7:if(i&&r.matches(d.IntStream.EOF,f.Lexer.MIN_CHAR_VALUE,f.Lexer.MAX_CHAR_VALUE)){s=t.transform(r.target,!1);break}s=void 0;break;default:s=void 0}return s}evaluatePredicate(e,t,r,n){if(null==this.recog)return!0;if(!n)return this.recog.sempred(void 0,t,r);let o=this._charPositionInLine,i=this._line,s=e.index,a=e.mark();try{return this.consume(e),this.recog.sempred(void 0,t,r)}finally{this._charPositionInLine=o,this._line=i,e.seek(s),e.release(a)}}captureSimState(e,t,r){e.index=t.index,e.line=this._line,e.charPos=this._charPositionInLine,e.dfaState=r}addDFAEdge(e,t,r){if(r instanceof c.ATNConfigSet){let n=r.hasSemanticContext;n&&(r.hasSemanticContext=!1);let o=this.addDFAState(r);return n?o:(this.addDFAEdge(e,t,o),o)}LexerATNSimulator.debug&&console.log("EDGE "+e+" -> "+r+" upon "+String.fromCharCode(t)),null!=e&&e.setTarget(t,r)}addDFAState(e){C(!e.hasSemanticContext);let t=new p.DFAState(e),r=this.atn.modeToDFA[this.mode].states.get(t);if(null!=r)return r;e.optimizeConfigs(this);let n=new p.DFAState(e.clone(!0)),o=void 0;for(let t of s.asIterable(e))if(t.state instanceof x.RuleStopState){o=t;break}if(null!=o){let e=this.atn.ruleToTokenType[o.state.ruleIndex],t=o.lexerActionExecutor;n.acceptStateInfo=new i.AcceptStateInfo(e,t)}return this.atn.modeToDFA[this.mode].addState(n)}getDFA(e){return this.atn.modeToDFA[e]}getText(e){return e.getText(h.Interval.of(this.startIndex,e.index-1))}get line(){return this._line}set line(e){this._line=e}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(e){this._charPositionInLine=e}consume(e){e.LA(1)=="\n".charCodeAt(0)?(this._line++,this._charPositionInLine=0):this._charPositionInLine++,e.consume()}getTokenName(e){return-1===e?"EOF":"'"+String.fromCharCode(e)+"'"}};_.match_calls=0,n([y.NotNull],_.prototype,"prevAccept",void 0),n([o(0,y.NotNull)],_.prototype,"copyState",null),n([o(0,y.NotNull)],_.prototype,"match",null),n([y.Override],_.prototype,"reset",null),n([o(0,y.NotNull)],_.prototype,"matchATN",null),n([o(0,y.NotNull),o(1,y.NotNull)],_.prototype,"execATN",null),n([o(0,y.NotNull)],_.prototype,"getExistingTargetState",null),n([y.NotNull,o(0,y.NotNull),o(1,y.NotNull)],_.prototype,"computeTargetState",null),n([o(0,y.NotNull),o(1,y.NotNull),o(2,y.NotNull)],_.prototype,"getReachableConfigSet",null),n([o(0,y.NotNull)],_.prototype,"accept",null),n([y.NotNull,o(0,y.NotNull),o(1,y.NotNull)],_.prototype,"computeStartState",null),n([o(0,y.NotNull),o(1,y.NotNull),o(2,y.NotNull)],_.prototype,"closure",null),n([o(0,y.NotNull),o(1,y.NotNull),o(2,y.NotNull),o(3,y.NotNull)],_.prototype,"getEpsilonTarget",null),n([o(0,y.NotNull)],_.prototype,"evaluatePredicate",null),n([o(0,y.NotNull),o(1,y.NotNull),o(2,y.NotNull)],_.prototype,"captureSimState",null),n([y.NotNull,o(0,y.NotNull)],_.prototype,"addDFAState",null),n([y.NotNull],_.prototype,"getDFA",null),n([y.NotNull,o(0,y.NotNull)],_.prototype,"getText",null),n([o(0,y.NotNull)],_.prototype,"consume",null),n([y.NotNull],_.prototype,"getTokenName",null),_=n([o(0,y.NotNull)],_),t.LexerATNSimulator=_,function(e){e.debug=!1,e.dfa_debug=!1;e.SimState=class SimState{constructor(){this.index=-1,this.line=0,this.charPos=-1}reset(){this.index=-1,this.line=0,this.charPos=-1,this.dfaState=void 0}}}(_=t.LexerATNSimulator||(t.LexerATNSimulator={})),t.LexerATNSimulator=_},171:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0});t.AcceptStateInfo=class AcceptStateInfo{constructor(e,t){this._prediction=e,this._lexerActionExecutor=t}get prediction(){return this._prediction}get lexerActionExecutor(){return this._lexerActionExecutor}}},172:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(0),i=r(11),s=r(29);class DefaultEqualityComparator{hashCode(e){return null==e?0:"string"==typeof e||"number"==typeof e?i.MurmurHash.hashCode([e]):s.ObjectEqualityComparator.INSTANCE.hashCode(e)}equals(e,t){return null==e?null==t:"string"==typeof e||"number"==typeof e?e===t:s.ObjectEqualityComparator.INSTANCE.equals(e,t)}}DefaultEqualityComparator.INSTANCE=new DefaultEqualityComparator,n([o.Override],DefaultEqualityComparator.prototype,"hashCode",null),n([o.Override],DefaultEqualityComparator.prototype,"equals",null),t.DefaultEqualityComparator=DefaultEqualityComparator},173:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(42),s=r(72),a=r(174),l=r(93),c=r(304),u=r(0),p=r(29),h=r(176),d=r(62);let f=class DFA{constructor(e,t=0){if(this.states=new i.Array2DHashSet(p.ObjectEqualityComparator.INSTANCE),this.nextStateNumber=0,!e.atn)throw new Error("The ATNState must be associated with an ATN");this.atnStartState=e,this.atn=e.atn,this.decision=t;let r=!1;e instanceof h.StarLoopEntryState&&e.precedenceRuleDecision&&(r=!0,this.s0=new l.DFAState(new s.ATNConfigSet),this.s0full=new l.DFAState(new s.ATNConfigSet)),this.precedenceDfa=r}get isPrecedenceDfa(){return this.precedenceDfa}getPrecedenceStartState(e,t){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");return t?this.s0full.getTarget(e):this.s0.getTarget(e)}setPrecedenceStartState(e,t,r){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");e<0||(t?this.s0full.setTarget(e,r):this.s0.setTarget(e,r))}get isEmpty(){return this.isPrecedenceDfa?0===this.s0.getEdgeMap().size&&0===this.s0full.getEdgeMap().size:null==this.s0&&null==this.s0full}get isContextSensitive(){return this.isPrecedenceDfa?this.s0full.getEdgeMap().size>0:null!=this.s0full}addState(e){return e.stateNumber=this.nextStateNumber++,this.states.getOrAdd(e)}toString(e,t){if(e||(e=d.VocabularyImpl.EMPTY_VOCABULARY),!this.s0)return"";let r;return(r=t?new a.DFASerializer(this,e,t,this.atnStartState.atn):new a.DFASerializer(this,e)).toString()}toLexerString(){if(!this.s0)return"";return new c.LexerDFASerializer(this).toString()}};n([u.NotNull],f.prototype,"states",void 0),n([u.NotNull],f.prototype,"atnStartState",void 0),n([u.NotNull],f.prototype,"atn",void 0),f=n([o(0,u.NotNull)],f),t.DFA=f},174:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(49),i=r(120),s=r(0),a=r(24),l=r(94),c=r(62);class DFASerializer{constructor(e,t,r,n){t instanceof l.Recognizer?(r=t.ruleNames,n=t.atn,t=t.vocabulary):t||(t=c.VocabularyImpl.EMPTY_VOCABULARY),this.dfa=e,this.vocabulary=t,this.ruleNames=r,this.atn=n}toString(){if(!this.dfa.s0)return"";let e="";if(this.dfa.states){let t=new Array(...this.dfa.states.toArray());t.sort((e,t)=>e.stateNumber-t.stateNumber);for(let r of t){let t=r.getEdgeMap(),n=[...t.keys()].sort((e,t)=>e-t),o=r.getContextEdgeMap(),s=[...o.keys()].sort((e,t)=>e-t);for(let o of n){let n=t.get(o);if((null==n||n===i.ATNSimulator.ERROR)&&!r.isContextSymbol(o))continue;let s=!1;e+=this.getStateString(r)+"-"+this.getEdgeLabel(o)+"->",r.isContextSymbol(o)&&(e+="!",s=!0);let a=n;a&&a.stateNumber!==i.ATNSimulator.ERROR.stateNumber?e+=this.getStateString(a)+"\n":s&&(e+="ctx\n")}if(r.isContextSensitive)for(let t of s)e+=this.getStateString(r)+"-"+this.getContextLabel(t)+"->"+this.getStateString(o.get(t))+"\n"}}let t=e;return 0===t.length?"":t}getContextLabel(e){if(e===a.PredictionContext.EMPTY_FULL_STATE_KEY)return"ctx:EMPTY_FULL";if(e===a.PredictionContext.EMPTY_LOCAL_STATE_KEY)return"ctx:EMPTY_LOCAL";if(this.atn&&e>0&&e<=this.atn.states.length){let t=this.atn.states[e].ruleIndex;if(this.ruleNames&&t>=0&&t<this.ruleNames.length)return"ctx:"+String(e)+"("+this.ruleNames[t]+")"}return"ctx:"+String(e)}getEdgeLabel(e){return this.vocabulary.getDisplayName(e)}getStateString(e){if(e===i.ATNSimulator.ERROR)return"ERROR";let t=e.stateNumber,r="s"+t;if(e.isAcceptState&&(r=e.predicates?":s"+t+"=>"+e.predicates:":s"+t+"=>"+e.prediction),e.isContextSensitive){r+="*";for(let t of o.asIterable(e.configs))if(t.reachesIntoOuterContext){r+="*";break}}return r}}n([s.NotNull],DFASerializer.prototype,"dfa",void 0),n([s.NotNull],DFASerializer.prototype,"vocabulary",void 0),n([s.Override],DFASerializer.prototype,"toString",null),t.DFASerializer=DFASerializer},175:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0);class ProxyErrorListener{constructor(e){if(this.delegates=e,!e)throw new Error("Invalid delegates")}getDelegates(){return this.delegates}syntaxError(e,t,r,n,o,i){this.delegates.forEach(s=>{s.syntaxError&&s.syntaxError(e,t,r,n,o,i)})}}n([i.Override,o(0,i.NotNull),o(4,i.NotNull)],ProxyErrorListener.prototype,"syntaxError",null),t.ProxyErrorListener=ProxyErrorListener},176:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(61),i=r(50);class StarLoopEntryState extends i.DecisionState{constructor(){super(...arguments),this.precedenceRuleDecision=!1,this.precedenceLoopbackStates=new o.BitSet}get stateType(){return 10}}n([r(0).Override],StarLoopEntryState.prototype,"stateType",null),t.StarLoopEntryState=StarLoopEntryState},177:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(178);class InvalidState extends o.BasicState{get stateType(){return 0}}n([r(0).Override],InvalidState.prototype,"stateType",null),t.InvalidState=InvalidState},178:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(51);class BasicState extends o.ATNState{get stateType(){return 1}}n([r(0).Override],BasicState.prototype,"stateType",null),t.BasicState=BasicState},179:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),s=r(43);let a=class WildcardTransition extends s.Transition{constructor(e){super(e)}get serializationType(){return 9}matches(e,t,r){return e>=t&&e<=r}toString(){return"."}};n([i.Override],a.prototype,"serializationType",null),n([i.Override],a.prototype,"matches",null),n([i.Override,i.NotNull],a.prototype,"toString",null),a=n([o(0,i.NotNull)],a),t.WildcardTransition=a},18:function(e,t){e.exports=require("stream")},180:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(75),s=r(0),a=r(23),l=r(33);let c=class LexerNoViableAltException extends i.RecognitionException{constructor(e,t,r,n){super(e,t),this._startIndex=r,this._deadEndConfigs=n}get startIndex(){return this._startIndex}get deadEndConfigs(){return this._deadEndConfigs}get inputStream(){return super.inputStream}toString(){let e="";return this._startIndex>=0&&this._startIndex<this.inputStream.size&&(e=this.inputStream.getText(a.Interval.of(this._startIndex,this._startIndex)),e=l.escapeWhitespace(e,!1)),`LexerNoViableAltException('${e}')`}};n([s.Override],c.prototype,"inputStream",null),n([s.Override],c.prototype,"toString",null),c=n([o(1,s.NotNull)],c),t.LexerNoViableAltException=c},181:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),s=r(43);let a=class ActionTransition extends s.Transition{constructor(e,t,r=-1,n=!1){super(e),this.ruleIndex=t,this.actionIndex=r,this.isCtxDependent=n}get serializationType(){return 6}get isEpsilon(){return!0}matches(e,t,r){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}};n([i.Override],a.prototype,"serializationType",null),n([i.Override],a.prototype,"isEpsilon",null),n([i.Override],a.prototype,"matches",null),n([i.Override],a.prototype,"toString",null),a=n([o(0,i.NotNull)],a),t.ActionTransition=a},182:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});class ATNDeserializationOptions{constructor(e){this.readOnly=!1,e?(this.verifyATN=e.verifyATN,this.generateRuleBypassTransitions=e.generateRuleBypassTransitions,this.optimize=e.optimize):(this.verifyATN=!0,this.generateRuleBypassTransitions=!1,this.optimize=!0)}static get defaultOptions(){return null==ATNDeserializationOptions._defaultOptions&&(ATNDeserializationOptions._defaultOptions=new ATNDeserializationOptions,ATNDeserializationOptions._defaultOptions.makeReadOnly()),ATNDeserializationOptions._defaultOptions}get isReadOnly(){return this.readOnly}makeReadOnly(){this.readOnly=!0}get isVerifyATN(){return this.verifyATN}set isVerifyATN(e){this.throwIfReadOnly(),this.verifyATN=e}get isGenerateRuleBypassTransitions(){return this.generateRuleBypassTransitions}set isGenerateRuleBypassTransitions(e){this.throwIfReadOnly(),this.generateRuleBypassTransitions=e}get isOptimize(){return this.optimize}set isOptimize(e){this.throwIfReadOnly(),this.optimize=e}throwIfReadOnly(){if(this.isReadOnly)throw new Error("The object is read only.")}}n([r(0).NotNull],ATNDeserializationOptions,"defaultOptions",null),t.ATNDeserializationOptions=ATNDeserializationOptions},183:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(52),s=r(0),a=r(43);let l=class AtomTransition extends a.Transition{constructor(e,t){super(e),this._label=t}get serializationType(){return 5}get label(){return i.IntervalSet.of(this._label)}matches(e,t,r){return this._label===e}toString(){return String(this.label)}};n([s.Override],l.prototype,"serializationType",null),n([s.Override,s.NotNull],l.prototype,"label",null),n([s.Override],l.prototype,"matches",null),n([s.Override,s.NotNull],l.prototype,"toString",null),l=n([o(0,s.NotNull)],l),t.AtomTransition=l},184:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(171),s=r(181),a=r(42),l=r(118),c=r(49),u=r(41),p=r(92),h=r(72),d=r(120),f=r(183),m=r(61),g=r(321),y=r(50),v=r(93),b=r(117),x=r(23),S=r(70),C=r(0),_=r(122),O=r(127),T=r(29),N=r(63),A=r(24),E=r(119),w=r(328),P=r(74),k=r(124),I=r(73),R=r(123),L=r(329),D=r(13),M=r(62),j=r(9);let F=class ParserATNSimulator extends d.ATNSimulator{constructor(e,t){super(e),this.predictionMode=w.PredictionMode.LL,this.force_global_context=!1,this.always_try_local_context=!0,this.enable_global_context_dfa=!1,this.optimize_unique_closure=!0,this.optimize_ll1=!0,this.optimize_tail_calls=!0,this.tail_call_preserves_sll=!0,this.treat_sllk1_conflict_as_ambiguity=!1,this.reportAmbiguities=!1,this.userWantsCtxSensitive=!0,this._parser=t}getPredictionMode(){return this.predictionMode}setPredictionMode(e){this.predictionMode=e}reset(){}adaptivePredict(e,t,r,n){void 0===n&&(n=!1);let o,i=this.atn.decisionToDFA[t];if(j(null!=i),this.optimize_ll1&&!i.isPrecedenceDfa&&!i.isEmpty){let r=e.LA(1);if(r>=0&&r<=65535){let e=(t<<16>>>0)+r,n=this.atn.LL1Table.get(e);if(null!=n)return n}}this.dfa=i,this.force_global_context?n=!0:this.always_try_local_context||(n=n||i.isContextSensitive),this.userWantsCtxSensitive=n||this.predictionMode!==w.PredictionMode.SLL&&null!=r&&!this.atn.decisionToState[t].sll,null==r&&(r=N.ParserRuleContext.emptyContext()),i.isEmpty||(o=this.getStartState(i,e,r,n)),null==o&&(null==r&&(r=N.ParserRuleContext.emptyContext()),ParserATNSimulator.debug&&console.log("ATN decision "+i.decision+" exec LA(1)=="+this.getLookaheadName(e)+", outerContext="+r.toString(this._parser)),o=this.computeStartState(i,r,n));let s=e.mark(),a=e.index;try{let t=this.execDFA(i,e,a,o);return ParserATNSimulator.debug&&console.log("DFA after predictATN: "+i.toString(this._parser.vocabulary,this._parser.ruleNames)),t}finally{this.dfa=void 0,e.seek(a),e.release(s)}}getStartState(e,t,r,n){if(!n){if(e.isPrecedenceDfa){let t=e.getPrecedenceStartState(this._parser.precedence,!1);if(null==t)return;return new L.SimulatorState(r,t,!1,r)}if(null==e.s0)return;return new L.SimulatorState(r,e.s0,!1,r)}if(!this.enable_global_context_dfa)return;let o,i=r;for(j(null!=r),o=e.isPrecedenceDfa?e.getPrecedenceStartState(this._parser.precedence,!0):e.s0full;null!=i&&null!=o&&o.isContextSensitive;)i=this.skipTailCalls(i),o=o.getContextTarget(this.getReturnState(i)),i.isEmpty?j(null==o||!o.isContextSensitive):i=i.parent;return null!=o?new L.SimulatorState(r,o,n,i):void 0}execDFA(e,t,r,n){let o=n.outerContext;ParserATNSimulator.dfa_debug&&console.log("DFA decision "+e.decision+" exec LA(1)=="+this.getLookaheadName(t)+", outerContext="+o.toString(this._parser)),ParserATNSimulator.dfa_debug&&console.log(e.toString(this._parser.vocabulary,this._parser.ruleNames));let i=n.s0,s=t.LA(1),a=n.remainingOuterContext;for(;;){if(ParserATNSimulator.dfa_debug&&console.log("DFA state "+i.stateNumber+" LA(1)=="+this.getLookaheadName(t)),n.useContext)for(;i.isContextSymbol(s);){let o;if(null!=a&&(a=this.skipTailCalls(a),o=i.getContextTarget(this.getReturnState(a))),null==o){let o=new L.SimulatorState(n.outerContext,i,n.useContext,a);return this.execATN(e,t,r,o)}j(null!=a),a=a.parent,i=o}if(this.isAcceptState(i,n.useContext)){null!=i.predicates?ParserATNSimulator.dfa_debug&&console.log("accept "+i):ParserATNSimulator.dfa_debug&&console.log("accept; predict "+i.prediction+" in state "+i.stateNumber);break}j(!this.isAcceptState(i,n.useContext));let l=this.getExistingTargetState(i,s);if(null==l){let l;if(ParserATNSimulator.dfa_debug&&s>=0&&console.log("no edge for "+this._parser.vocabulary.getDisplayName(s)),ParserATNSimulator.dfa_debug){let e=x.Interval.of(r,this._parser.inputStream.index);console.log("ATN exec upon "+this._parser.inputStream.getText(e)+" at DFA state "+i.stateNumber)}let c=new L.SimulatorState(o,i,n.useContext,a);return l=this.execATN(e,t,r,c),ParserATNSimulator.dfa_debug&&console.log("back from DFA update, alt="+l+", dfa=\n"+e.toString(this._parser.vocabulary,this._parser.ruleNames)),ParserATNSimulator.dfa_debug&&console.log("DFA decision "+e.decision+" predicts "+l),l}if(l===d.ATNSimulator.ERROR){let e=new L.SimulatorState(o,i,n.useContext,a);return this.handleNoViableAlt(t,r,e)}i=l,this.isAcceptState(i,n.useContext)||s===S.IntStream.EOF||(t.consume(),s=t.LA(1))}if(!n.useContext&&null!=i.configs.conflictInfo&&e.atnStartState instanceof y.DecisionState&&!(!this.userWantsCtxSensitive||!i.configs.dipsIntoOuterContext&&i.configs.isExactConflict||this.treat_sllk1_conflict_as_ambiguity&&t.index===r)){let s;j(!n.useContext);let l=i.predicates;if(null!=l){let e=t.index;if(e!==r&&t.seek(r),1===(s=this.evalSemanticContext(l,o,!0)).cardinality())return s.nextSetBit(0);e!==r&&t.seek(e)}if(this.reportAmbiguities){let l=new L.SimulatorState(o,i,n.useContext,a);this.reportAttemptingFullContext(e,s,l,r,t.index)}return t.seek(r),this.adaptivePredict(t,e.decision,o,!0)}let l=i.predicates;if(null!=l){let n=t.index;r!==n&&t.seek(r);let s=this.evalSemanticContext(l,o,this.reportAmbiguities&&this.predictionMode===w.PredictionMode.LL_EXACT_AMBIG_DETECTION);switch(s.cardinality()){case 0:throw this.noViableAlt(t,o,i.configs,r);case 1:return s.nextSetBit(0);default:return r!==n&&t.seek(n),this.reportAmbiguity(e,i,r,n,i.configs.isExactConflict,s,i.configs),s.nextSetBit(0)}}return ParserATNSimulator.dfa_debug&&console.log("DFA decision "+e.decision+" predicts "+i.prediction),i.prediction}isAcceptState(e,t){return!!e.isAcceptState&&(null==e.configs.conflictingAlts||(!t||this.predictionMode!==w.PredictionMode.LL_EXACT_AMBIG_DETECTION||e.configs.isExactConflict))}execATN(e,t,r,n){ParserATNSimulator.debug&&console.log("execATN decision "+e.decision+" exec LA(1)=="+this.getLookaheadName(t));let o=n.outerContext,i=n.useContext,s=t.LA(1),a=n,l=new E.PredictionContextCache;for(;;){let n=this.computeReachSet(e,a,s,l);if(null==n)return this.setDFAEdge(a.s0,t.LA(1),d.ATNSimulator.ERROR),this.handleNoViableAlt(t,r,a);let c=n.s0;if(j(c.isAcceptState||c.prediction===u.ATN.INVALID_ALT_NUMBER),j(c.isAcceptState||null==c.configs.conflictInfo),this.isAcceptState(c,i)){let a=c.configs.conflictingAlts,l=null==a?c.prediction:u.ATN.INVALID_ALT_NUMBER;if(l!==u.ATN.INVALID_ALT_NUMBER){if(this.optimize_ll1&&t.index===r&&!e.isPrecedenceDfa&&n.outerContext===n.remainingOuterContext&&e.decision>=0&&!c.configs.hasSemanticContext&&s>=0&&s<=65535){let t=(e.decision<<16>>>0)+s;this.atn.LL1Table.set(t,l)}i&&this.always_try_local_context&&this.reportContextSensitivity(e,l,n,r,t.index)}l=c.prediction;let p=null!=a&&this.userWantsCtxSensitive;if(p&&(p=!i&&(c.configs.dipsIntoOuterContext||!c.configs.isExactConflict)&&(!this.treat_sllk1_conflict_as_ambiguity||t.index!==r)),c.configs.hasSemanticContext){let e=c.predicates;if(null!=e){let n=t.index;switch(n!==r&&t.seek(r),(a=this.evalSemanticContext(e,o,p||this.reportAmbiguities)).cardinality()){case 0:throw this.noViableAlt(t,o,c.configs,r);case 1:return a.nextSetBit(0)}n!==r&&t.seek(n)}}if(p){j(!i),j(this.isAcceptState(c,!1)),ParserATNSimulator.debug&&console.log("RETRY with outerContext="+o);let s=this.computeStartState(e,o,!0);return this.reportAmbiguities&&this.reportAttemptingFullContext(e,a,n,r,t.index),t.seek(r),this.execATN(e,t,r,s)}return null!=a&&(this.reportAmbiguities&&a.cardinality()>1&&this.reportAmbiguity(e,c,r,t.index,c.configs.isExactConflict,a,c.configs),l=a.nextSetBit(0)),l}a=n,s!==S.IntStream.EOF&&(t.consume(),s=t.LA(1))}}handleNoViableAlt(e,t,r){if(null!=r.s0){let n=new m.BitSet,o=0;for(let e of c.asIterable(r.s0.configs))(e.reachesIntoOuterContext||e.state instanceof P.RuleStopState)&&(n.set(e.alt),o=Math.max(o,e.alt));switch(n.cardinality()){case 0:break;case 1:return n.nextSetBit(0);default:if(!r.s0.configs.hasSemanticContext)return n.nextSetBit(0);let i=new h.ATNConfigSet;for(let e of c.asIterable(r.s0.configs))(e.reachesIntoOuterContext||e.state instanceof P.RuleStopState)&&i.add(e);let s=this.getPredsForAmbigAlts(n,i,o);if(null!=s){let o=this.getPredicatePredictions(n,s);if(null!=o){let n=e.index;try{e.seek(t);let i=this.evalSemanticContext(o,r.outerContext,!1);if(!i.isEmpty)return i.nextSetBit(0)}finally{e.seek(n)}}}return n.nextSetBit(0)}}throw this.noViableAlt(e,r.outerContext,r.s0.configs,t)}computeReachSet(e,t,r,n){let o=t.useContext,i=t.remainingOuterContext,s=t.s0;if(o)for(;s.isContextSymbol(r);){let e;if(null!=i&&(i=this.skipTailCalls(i),e=s.getContextTarget(this.getReturnState(i))),null==e)break;j(null!=i),i=i.parent,s=e}if(j(!this.isAcceptState(s,o)),this.isAcceptState(s,o))return new L.SimulatorState(t.outerContext,s,o,i);let a=s,l=this.getExistingTargetState(a,r);if(null==l){let t=this.computeTargetState(e,a,i,r,o,n);l=t[0],i=t[1]}return l!==d.ATNSimulator.ERROR?(j(!o||!l.configs.dipsIntoOuterContext),new L.SimulatorState(t.outerContext,l,o,i)):void 0}getExistingTargetState(e,t){return e.getTarget(t)}computeTargetState(e,t,r,n,o,i){let s,a,l=t.configs.toArray(),c=new h.ATNConfigSet;do{let e=!o||null!=r;e||(c.isOutermostConfigSet=!0);let t,p=new h.ATNConfigSet;for(let e of l){if(ParserATNSimulator.debug&&console.log("testing "+this.getTokenName(n)+" at "+e.toString()),e.state instanceof P.RuleStopState){j(e.context.isEmpty),(o&&!e.reachesIntoOuterContext||n===S.IntStream.EOF)&&(null==t&&(t=[]),t.push(e));continue}let r=e.state.numberOfOptimizedTransitions;for(let t=0;t<r;t++){let r=e.state.getOptimizedTransition(t),o=this.getReachableTarget(e,r,n);null!=o&&p.add(e.transform(o,!1),i)}}if(this.optimize_unique_closure&&null==t&&n!==D.Token.EOF&&p.uniqueAlt!==u.ATN.INVALID_ALT_NUMBER){p.isOutermostConfigSet=c.isOutermostConfigSet,c=p;break}let d=!1,f=n===D.Token.EOF;if(this.closure(p,c,d,e,i,f),a=c.dipsIntoOuterContext,n===S.IntStream.EOF&&(c=this.removeAllConfigsNotInRuleStopState(c,i)),!(null==t||o&&w.PredictionMode.hasConfigInRuleStopState(c))){j(t.length>0);for(let e of t)c.add(e,i)}if(o&&a){c.clear(),r=r,r=this.skipTailCalls(r);let e=this.getReturnState(r);if(null==s&&(s=new b.IntegerList),r=r.isEmpty?void 0:r.parent,s.add(e),e!==A.PredictionContext.EMPTY_FULL_STATE_KEY)for(let t=0;t<l.length;t++)l[t]=l[t].appendContext(e,i)}}while(o&&a);return c.isEmpty?(this.setDFAEdge(t,n,d.ATNSimulator.ERROR),[d.ATNSimulator.ERROR,r]):[this.addDFAEdge(e,t,n,s,c,i),r]}removeAllConfigsNotInRuleStopState(e,t){if(w.PredictionMode.allConfigsInRuleStopStates(e))return e;let r=new h.ATNConfigSet;for(let n of c.asIterable(e))n.state instanceof P.RuleStopState&&r.add(n,t);return r}computeStartState(e,t,r){let n=e.isPrecedenceDfa?e.getPrecedenceStartState(this._parser.precedence,r):r?e.s0full:e.s0;if(null!=n){if(!r)return new L.SimulatorState(t,n,r,t);n.setContextSensitive(this.atn)}e.decision;let o=e.atnStartState,i=0,s=t,a=r?A.PredictionContext.EMPTY_FULL:A.PredictionContext.EMPTY_LOCAL,l=new E.PredictionContextCache;if(r){if(!this.enable_global_context_dfa)for(;null!=s;)s.isEmpty?(i=A.PredictionContext.EMPTY_FULL_STATE_KEY,s=void 0):(i=this.getReturnState(s),a=a.appendSingleContext(i,l),s=s.parent);for(;null!=n&&n.isContextSensitive&&null!=s;){let e;if((s=this.skipTailCalls(s)).isEmpty?(e=n.getContextTarget(A.PredictionContext.EMPTY_FULL_STATE_KEY),i=A.PredictionContext.EMPTY_FULL_STATE_KEY,s=void 0):(i=this.getReturnState(s),e=n.getContextTarget(i),a=a.appendSingleContext(i,l),s=s.parent),null==e)break;n=e}}if(null!=n&&!n.isContextSensitive)return new L.SimulatorState(t,n,r,s);let c=new h.ATNConfigSet;for(;;){let u=new h.ATNConfigSet,d=o.numberOfTransitions;for(let e=0;e<d;e++){let t=o.transition(e).target;u.add(p.ATNConfig.create(t,e+1,a))}let f=null!=s;f||(c.isOutermostConfigSet=!0);let m=!0;this.closure(u,c,m,f,l,!1);let g,y=c.dipsIntoOuterContext;if(r&&!this.enable_global_context_dfa){n=this.addDFAState(e,c,l);break}if(null==n?e.isPrecedenceDfa?(c=this.applyPrecedenceFilter(c,t,l),g=this.addDFAState(e,c,l),e.setPrecedenceStartState(this._parser.precedence,r,g)):(g=this.addDFAState(e,c,l),r?e.s0full?g=e.s0full:e.s0full=g:e.s0?g=e.s0:e.s0=g):(e.isPrecedenceDfa&&(c=this.applyPrecedenceFilter(c,t,l)),g=this.addDFAState(e,c,l),n.setContextTarget(i,g)),n=g,!r||!y)break;g.setContextSensitive(this.atn),s=s,c.clear(),s=this.skipTailCalls(s);let v=this.getReturnState(s);s=s.isEmpty?void 0:s.parent,v!==A.PredictionContext.EMPTY_FULL_STATE_KEY&&(a=a.appendSingleContext(v,l)),i=v}return new L.SimulatorState(t,n,r,s)}applyPrecedenceFilter(e,t,r){let n=new Map,o=new h.ATNConfigSet;for(let i of c.asIterable(e)){if(1!==i.alt)continue;let e=i.semanticContext.evalPrecedence(this._parser,t);null!=e&&(n.set(i.state.stateNumber,i.context),e!==i.semanticContext?o.add(i.transform(i.state,!1,e),r):o.add(i,r))}for(let t of c.asIterable(e))if(1!==t.alt){if(!t.isPrecedenceFilterSuppressed){let e=n.get(t.state.stateNumber);if(null!=e&&e.equals(t.context))continue}o.add(t,r)}return o}getReachableTarget(e,t,r){if(t.matches(r,0,this.atn.maxTokenType))return t.target}predicateDFAState(e,t,r){let n=this.getConflictingAltsFromConfigSet(t);if(!n)throw new Error("This unhandled scenario is intended to be unreachable, but I'm currently not sure of why we know that's the case.");ParserATNSimulator.debug&&console.log("predicateDFAState "+e);let o,i=this.getPredsForAmbigAlts(n,t,r);return null!=i&&(o=this.getPredicatePredictions(n,i),e.predicates=o),o}getPredsForAmbigAlts(e,t,r){let n=new Array(r+1),o=n.length;for(let r of c.asIterable(t))e.get(r.alt)&&(n[r.alt]=I.SemanticContext.or(n[r.alt],r.semanticContext));let i=0;for(let e=0;e<o;e++)null==n[e]?n[e]=I.SemanticContext.NONE:n[e]!==I.SemanticContext.NONE&&i++;let s=n;return 0===i&&(s=void 0),ParserATNSimulator.debug&&console.log("getPredsForAmbigAlts result "+(s?l.Arrays.toString(s):"undefined")),s}getPredicatePredictions(e,t){let r=[],n=!1;for(let o=1;o<t.length;o++){let i=t[o];j(null!=i),null!=e&&e.get(o)&&i===I.SemanticContext.NONE?r.push(new v.DFAState.PredPrediction(i,o)):i!==I.SemanticContext.NONE&&(n=!0,r.push(new v.DFAState.PredPrediction(i,o)))}if(n)return r}evalSemanticContext(e,t,r){let n=new m.BitSet;for(let o of e){if(o.pred===I.SemanticContext.NONE){if(n.set(o.alt),!r)break;continue}let e=this.evalSemanticContextImpl(o.pred,t,o.alt);if((ParserATNSimulator.debug||ParserATNSimulator.dfa_debug)&&console.log("eval pred "+o+"="+e),e&&((ParserATNSimulator.debug||ParserATNSimulator.dfa_debug)&&console.log("PREDICT "+o.alt),n.set(o.alt),!r))break}return n}evalSemanticContextImpl(e,t,r){return e.eval(this._parser,t)}closure(e,t,r,n,o,i){null==o&&(o=E.PredictionContextCache.UNCACHED);let s=e,l=new a.Array2DHashSet(T.ObjectEqualityComparator.INSTANCE);for(;s.size>0;){let e=new h.ATNConfigSet;for(let a of c.asIterable(s))this.closureImpl(a,t,e,l,r,n,o,0,i);s=e}}closureImpl(e,t,r,n,o,i,a,l,c){if(ParserATNSimulator.debug&&console.log("closure("+e.toString(this._parser,!0)+")"),e.state instanceof P.RuleStopState)if(e.context.isEmpty){if(!i)return void t.add(e,a);ParserATNSimulator.debug&&console.log("FALLING off rule "+this.getRuleName(e.state.ruleIndex)),e.context===A.PredictionContext.EMPTY_FULL?e=e.transform(e.state,!1,A.PredictionContext.EMPTY_LOCAL):!e.reachesIntoOuterContext&&A.PredictionContext.isEmptyLocal(e.context)&&t.add(e,a)}else{let s=e.context.hasEmpty,u=e.context.size-(s?1:0);for(let s=0;s<u;s++){let u=e.context.getParent(s),h=this.atn.states[e.context.getReturnState(s)],d=p.ATNConfig.create(h,e.alt,u,e.semanticContext);d.outerContextDepth=e.outerContextDepth,d.isPrecedenceFilterSuppressed=e.isPrecedenceFilterSuppressed,j(l>-2147483648),this.closureImpl(d,t,r,n,o,i,a,l-1,c)}if(!s||!i)return;e=e.transform(e.state,!1,A.PredictionContext.EMPTY_LOCAL)}let u=e.state;u.onlyHasEpsilonTransitions||(t.add(e,a),ParserATNSimulator.debug&&console.log("added config "+t));for(let p=0;p<u.numberOfOptimizedTransitions;p++){if(0===p&&10===u.stateType&&u.precedenceRuleDecision&&!e.context.hasEmpty){let t=u,r=!0;for(let n=0;n<e.context.size;n++)if(!t.precedenceLoopbackStates.get(e.context.getReturnState(n))){r=!1;break}if(r)continue}let h=u.getOptimizedTransition(p),d=!(h instanceof s.ActionTransition)&&o,f=this.getEpsilonTarget(e,h,d,0===l,a,c);if(null!=f){if(h instanceof k.RuleTransition&&null!=r&&!o){r.add(f,a);continue}if(!h.isEpsilon&&!n.add(f))continue;let s=l;if(e.state instanceof P.RuleStopState){if(!n.add(f))continue;if(null!=this.dfa&&this.dfa.isPrecedenceDfa){h.outermostPrecedenceReturn==this.dfa.atnStartState.ruleIndex&&(f.isPrecedenceFilterSuppressed=!0)}f.outerContextDepth=f.outerContextDepth+1,j(s>-2147483648),s--,ParserATNSimulator.debug&&console.log("dips into outer ctx: "+f)}else h instanceof k.RuleTransition&&(!this.optimize_tail_calls||!h.optimizedTailCall||this.tail_call_preserves_sll&&A.PredictionContext.isEmptyLocal(e.context)?s>=0&&s++:(j(f.context===e.context),0===s&&(s--,!this.tail_call_preserves_sll&&A.PredictionContext.isEmptyLocal(e.context)&&(f.outerContextDepth=f.outerContextDepth+1))));this.closureImpl(f,t,r,n,d,i,a,s,c)}}}getRuleName(e){return null!=this._parser&&e>=0?this._parser.ruleNames[e]:"<rule "+e+">"}getEpsilonTarget(e,t,r,n,o,i){switch(t.serializationType){case 3:return this.ruleTransition(e,t,o);case 10:return this.precedenceTransition(e,t,r,n);case 4:return this.predTransition(e,t,r,n);case 6:return this.actionTransition(e,t);case 1:return e.transform(t.target,!1);case 5:case 2:case 7:return i&&t.matches(D.Token.EOF,0,1)?e.transform(t.target,!1):void 0;default:return}}actionTransition(e,t){return ParserATNSimulator.debug&&console.log("ACTION edge "+t.ruleIndex+":"+t.actionIndex),e.transform(t.target,!1)}precedenceTransition(e,t,r,n){let o;if(ParserATNSimulator.debug&&(console.log("PRED (collectPredicates="+r+") "+t.precedence+">=_p, ctx dependent=true"),null!=this._parser&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack())),r&&n){let r=I.SemanticContext.and(e.semanticContext,t.predicate);o=e.transform(t.target,!1,r)}else o=e.transform(t.target,!1);return ParserATNSimulator.debug&&console.log("config from pred transition="+o),o}predTransition(e,t,r,n){let o;if(ParserATNSimulator.debug&&(console.log("PRED (collectPredicates="+r+") "+t.ruleIndex+":"+t.predIndex+", ctx dependent="+t.isCtxDependent),null!=this._parser&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack())),r&&(!t.isCtxDependent||t.isCtxDependent&&n)){let r=I.SemanticContext.and(e.semanticContext,t.predicate);o=e.transform(t.target,!1,r)}else o=e.transform(t.target,!1);return ParserATNSimulator.debug&&console.log("config from pred transition="+o),o}ruleTransition(e,t,r){ParserATNSimulator.debug&&console.log("CALL rule "+this.getRuleName(t.target.ruleIndex)+", ctx="+e.context);let n,o=t.followState;return n=!this.optimize_tail_calls||!t.optimizedTailCall||this.tail_call_preserves_sll&&A.PredictionContext.isEmptyLocal(e.context)?null!=r?r.getChild(e.context,o.stateNumber):e.context.getChild(o.stateNumber):e.context,e.transform(t.target,!1,n)}isConflicted(e,t){if(e.uniqueAlt!==u.ATN.INVALID_ALT_NUMBER||e.size<=1)return;let r=e.toArray();r.sort(ParserATNSimulator.STATE_ALT_SORT_COMPARATOR);let n=!e.dipsIntoOuterContext,o=new m.BitSet,i=r[0].alt;o.set(i);let s,a=r[0].state.nonStopStateNumber;for(let e of r){let t=e.state.nonStopStateNumber;if(t!==a){if(e.alt!==i)return;a=t}}if(n){a=r[0].state.nonStopStateNumber,s=new m.BitSet;let e=i;for(let t of r){if(t.state.nonStopStateNumber!=a)break;let r=t.alt;s.set(r),e=r}a=r[0].state.nonStopStateNumber;let t=i;for(let o of r){let r=o.state.nonStopStateNumber,l=o.alt;if(r!==a){if(t!==e){n=!1;break}a=r,t=i}else if(l!==t){if(l!==s.nextSetBit(t+1)){n=!1;break}t=l}}}a=r[0].state.nonStopStateNumber;let l=0,c=0,p=r[0].context;for(let e=1;e<r.length;e++){let n=r[e];if(n.alt!==i)break;if(n.state.nonStopStateNumber!==a)break;c=e,p=t.join(p,r[e].context)}for(let e=c+1;e<r.length;e++){let s=r[e],u=s.state;if(o.set(s.alt),u.nonStopStateNumber!==a){a=u.nonStopStateNumber,l=e,c=e,p=s.context;for(let e=l+1;e<r.length;e++){let n=r[e];if(n.alt!==i)break;if(n.state.nonStopStateNumber!==a)break;c=e,p=t.join(p,n.context)}e=c;continue}let h=s.context,d=s.alt,f=e;for(let e=f+1;e<r.length;e++){let n=r[e];if(n.alt!==d)break;if(n.state.nonStopStateNumber!==a)break;f=e,h=t.join(h,n.context)}e=f;let m=t.join(p,h);if(!p.equals(m))return;n=n&&p.equals(h)}return new g.ConflictInfo(o,n)}getConflictingAltsFromConfigSet(e){let t=e.conflictingAlts;return null==t&&e.uniqueAlt!==u.ATN.INVALID_ALT_NUMBER&&(t=new m.BitSet).set(e.uniqueAlt),t}getTokenName(e){if(e===D.Token.EOF)return"EOF";let t=(null!=this._parser?this._parser.vocabulary:M.VocabularyImpl.EMPTY_VOCABULARY).getDisplayName(e);return t===String(e)?t:t+"<"+e+">"}getLookaheadName(e){return this.getTokenName(e.LA(1))}dumpDeadEndConfigs(e){console.log("dead end configs: ");let t=e.deadEndConfigs;if(t)for(let e of c.asIterable(t)){let t="no edges";if(e.state.numberOfOptimizedTransitions>0){let r=e.state.getOptimizedTransition(0);if(r instanceof f.AtomTransition)t="Atom "+this.getTokenName(r._label);else if(r instanceof R.SetTransition){t=(r instanceof _.NotSetTransition?"~":"")+"Set "+r.set.toString()}}console.log(e.toString(this._parser,!0)+":"+t)}}noViableAlt(e,t,r,n){return new O.NoViableAltException(this._parser,e,e.get(n),e.LT(1),r,t)}getUniqueAlt(e){let t=u.ATN.INVALID_ALT_NUMBER;for(let r of c.asIterable(e))if(t===u.ATN.INVALID_ALT_NUMBER)t=r.alt;else if(r.alt!==t)return u.ATN.INVALID_ALT_NUMBER;return t}configWithAltAtStopState(e,t){for(let r of c.asIterable(e))if(r.alt===t&&r.state instanceof P.RuleStopState)return!0;return!1}addDFAEdge(e,t,r,n,o,i){j(null==n||n.isEmpty||e.isContextSensitive);let s=t,a=this.addDFAState(e,o,i);if(null!=n)for(let t of n.toArray()){if(t===A.PredictionContext.EMPTY_FULL_STATE_KEY&&s.configs.isOutermostConfigSet)continue;s.setContextSensitive(this.atn),s.setContextSymbol(r);let n=s.getContextTarget(t);null==n?(n=this.addDFAContextState(e,s.configs,t,i),j(t!==A.PredictionContext.EMPTY_FULL_STATE_KEY||n.configs.isOutermostConfigSet),s.setContextTarget(t,n),s=n):s=n}return ParserATNSimulator.debug&&console.log("EDGE "+s+" -> "+a+" upon "+this.getTokenName(r)),this.setDFAEdge(s,r,a),ParserATNSimulator.debug&&console.log("DFA=\n"+e.toString(null!=this._parser?this._parser.vocabulary:M.VocabularyImpl.EMPTY_VOCABULARY,null!=this._parser?this._parser.ruleNames:void 0)),a}setDFAEdge(e,t,r){null!=e&&e.setTarget(t,r)}addDFAContextState(e,t,r,n){if(r!==A.PredictionContext.EMPTY_FULL_STATE_KEY){let o=new h.ATNConfigSet;for(let e of c.asIterable(t))o.add(e.appendContext(r,n));return this.addDFAState(e,o,n)}return j(!t.isOutermostConfigSet,"Shouldn't be adding a duplicate edge."),(t=t.clone(!0)).isOutermostConfigSet=!0,this.addDFAState(e,t,n)}addDFAState(e,t,r){let n=this.enable_global_context_dfa||!t.isOutermostConfigSet;if(n){t.isReadOnly||t.optimizeConfigs(this);let r=this.createDFAState(e,t),n=e.states.get(r);if(null!=n)return n}t.isReadOnly||null==t.conflictInfo&&(t.conflictInfo=this.isConflicted(t,r));let o=this.createDFAState(e,t.clone(!0)),s=this.atn.getDecisionState(e.decision),a=this.getUniqueAlt(t);if(a!==u.ATN.INVALID_ALT_NUMBER)o.acceptStateInfo=new i.AcceptStateInfo(a);else if(null!=t.conflictingAlts){let e=t.conflictingAlts;e&&(o.acceptStateInfo=new i.AcceptStateInfo(e.nextSetBit(0)))}if(o.isAcceptState&&t.hasSemanticContext&&this.predicateDFAState(o,t,s.numberOfTransitions),!n)return o;let l=e.addState(o);return ParserATNSimulator.debug&&l===o&&console.log("adding new DFA state: "+o),l}createDFAState(e,t){return new v.DFAState(t)}reportAttemptingFullContext(e,t,r,n,o){if(ParserATNSimulator.debug||ParserATNSimulator.retry_debug){let t=x.Interval.of(n,o);console.log("reportAttemptingFullContext decision="+e.decision+":"+r.s0.configs+", input="+this._parser.inputStream.getText(t))}if(null!=this._parser){let i=this._parser.getErrorListenerDispatch();i.reportAttemptingFullContext&&i.reportAttemptingFullContext(this._parser,e,n,o,t,r)}}reportContextSensitivity(e,t,r,n,o){if(ParserATNSimulator.debug||ParserATNSimulator.retry_debug){let t=x.Interval.of(n,o);console.log("reportContextSensitivity decision="+e.decision+":"+r.s0.configs+", input="+this._parser.inputStream.getText(t))}if(null!=this._parser){let i=this._parser.getErrorListenerDispatch();i.reportContextSensitivity&&i.reportContextSensitivity(this._parser,e,n,o,t,r)}}reportAmbiguity(e,t,r,n,o,i,s){if(ParserATNSimulator.debug||ParserATNSimulator.retry_debug){let e=x.Interval.of(r,n);console.log("reportAmbiguity "+i+":"+s+", input="+this._parser.inputStream.getText(e))}if(null!=this._parser){let t=this._parser.getErrorListenerDispatch();t.reportAmbiguity&&t.reportAmbiguity(this._parser,e,r,n,o,i,s)}}getReturnState(e){if(e.isEmpty)return A.PredictionContext.EMPTY_FULL_STATE_KEY;return this.atn.states[e.invokingState].transition(0).followState.stateNumber}skipTailCalls(e){if(!this.optimize_tail_calls)return e;for(;!e.isEmpty;){let t=this.atn.states[e.invokingState];if(j(1===t.numberOfTransitions&&3===t.transition(0).serializationType),!t.transition(0).tailCall)break;e=e.parent}return e}get parser(){return this._parser}};F.debug=!1,F.dfa_debug=!1,F.retry_debug=!1,F.STATE_ALT_SORT_COMPARATOR=((e,t)=>{let r=e.state.nonStopStateNumber-t.state.nonStopStateNumber;return 0!==r?r:0!==(r=e.alt-t.alt)?r:0}),n([C.NotNull],F.prototype,"predictionMode",void 0),n([C.NotNull],F.prototype,"getPredictionMode",null),n([o(0,C.NotNull)],F.prototype,"setPredictionMode",null),n([C.Override],F.prototype,"reset",null),n([o(0,C.NotNull)],F.prototype,"adaptivePredict",null),n([o(0,C.NotNull),o(1,C.NotNull),o(2,C.NotNull)],F.prototype,"getStartState",null),n([o(0,C.NotNull),o(1,C.NotNull),o(3,C.NotNull)],F.prototype,"execDFA",null),n([o(0,C.NotNull),o(1,C.NotNull),o(3,C.NotNull)],F.prototype,"execATN",null),n([o(0,C.NotNull),o(2,C.NotNull)],F.prototype,"handleNoViableAlt",null),n([o(0,C.NotNull)],F.prototype,"getExistingTargetState",null),n([C.NotNull,o(0,C.NotNull),o(1,C.NotNull)],F.prototype,"computeTargetState",null),n([C.NotNull,o(0,C.NotNull)],F.prototype,"removeAllConfigsNotInRuleStopState",null),n([C.NotNull],F.prototype,"computeStartState",null),n([C.NotNull,o(0,C.NotNull)],F.prototype,"applyPrecedenceFilter",null),n([o(0,C.NotNull),o(1,C.NotNull)],F.prototype,"getReachableTarget",null),n([o(0,C.NotNull),o(1,C.NotNull)],F.prototype,"getPredsForAmbigAlts",null),n([o(0,C.NotNull)],F.prototype,"evalSemanticContext",null),n([o(0,C.NotNull)],F.prototype,"evalSemanticContextImpl",null),n([o(1,C.NotNull),o(4,C.Nullable)],F.prototype,"closure",null),n([o(0,C.NotNull),o(1,C.NotNull),o(2,C.Nullable),o(3,C.NotNull),o(6,C.NotNull)],F.prototype,"closureImpl",null),n([C.NotNull],F.prototype,"getRuleName",null),n([o(0,C.NotNull),o(1,C.NotNull)],F.prototype,"getEpsilonTarget",null),n([C.NotNull,o(0,C.NotNull),o(1,C.NotNull)],F.prototype,"actionTransition",null),n([C.Nullable,o(0,C.NotNull),o(1,C.NotNull)],F.prototype,"precedenceTransition",null),n([C.Nullable,o(0,C.NotNull),o(1,C.NotNull)],F.prototype,"predTransition",null),n([C.NotNull,o(0,C.NotNull),o(1,C.NotNull),o(2,C.Nullable)],F.prototype,"ruleTransition",null),n([o(0,C.NotNull)],F.prototype,"isConflicted",null),n([C.NotNull],F.prototype,"getTokenName",null),n([o(0,C.NotNull)],F.prototype,"dumpDeadEndConfigs",null),n([C.NotNull,o(0,C.NotNull),o(1,C.NotNull),o(2,C.NotNull)],F.prototype,"noViableAlt",null),n([o(0,C.NotNull)],F.prototype,"getUniqueAlt",null),n([o(0,C.NotNull)],F.prototype,"configWithAltAtStopState",null),n([C.NotNull,o(0,C.NotNull),o(1,C.NotNull),o(4,C.NotNull)],F.prototype,"addDFAEdge",null),n([o(0,C.Nullable),o(2,C.Nullable)],F.prototype,"setDFAEdge",null),n([C.NotNull,o(0,C.NotNull),o(1,C.NotNull)],F.prototype,"addDFAContextState",null),n([C.NotNull,o(0,C.NotNull),o(1,C.NotNull)],F.prototype,"addDFAState",null),n([C.NotNull,o(0,C.NotNull),o(1,C.NotNull)],F.prototype,"createDFAState",null),n([o(0,C.NotNull),o(2,C.NotNull)],F.prototype,"reportAttemptingFullContext",null),n([o(0,C.NotNull),o(2,C.NotNull)],F.prototype,"reportContextSensitivity",null),n([o(0,C.NotNull),o(5,C.NotNull),o(6,C.NotNull)],F.prototype,"reportAmbiguity",null),F=n([o(0,C.NotNull)],F),t.ParserATNSimulator=F},185:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(121),s=r(0),a=r(73);let l=class PredicateTransition extends i.AbstractPredicateTransition{constructor(e,t,r,n){super(e),this.ruleIndex=t,this.predIndex=r,this.isCtxDependent=n}get serializationType(){return 4}get isEpsilon(){return!0}matches(e,t,r){return!1}get predicate(){return new a.SemanticContext.Predicate(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}};n([s.Override],l.prototype,"serializationType",null),n([s.Override],l.prototype,"isEpsilon",null),n([s.Override],l.prototype,"matches",null),n([s.Override,s.NotNull],l.prototype,"toString",null),l=n([o(0,s.NotNull)],l),t.PredicateTransition=l},186:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0});t.RuleNode=class RuleNode{}},2:function(e,t){e.exports=require("vscode-languageserver-types")},20:function(e,t,r){var n=r(4).format,o=function(e,t,r){this.name=e,this.object=t,this.stream="boolean"==typeof r&&r,this.instrumentations={}};o.prototype.classMethod=function(e,t){var r=Object.keys(t).sort(),n=i(r,t);null==this.instrumentations[n]&&(this.instrumentations[n]={methods:[],options:t}),this.instrumentations[n].methods.push(e)};var i=function(e,t){for(var r=[],o=0;o<e.length;o++)r.push(n("%s=%s",e[o],t[e[o]]));return r.join()};o.prototype.staticMethod=function(e,t){t.static=!0;var r=Object.keys(t).sort(),n=i(r,t);null==this.instrumentations[n]&&(this.instrumentations[n]={methods:[],options:t}),this.instrumentations[n].methods.push(e)},o.prototype.generate=function(){var e={name:this.name,obj:this.object,stream:this.stream,instrumentations:[]};for(var t in this.instrumentations)e.instrumentations.push(this.instrumentations[t]);return e},e.exports=o},215:function(e,t,r){var n=r(5),o=r(278),i=r(162).connect;i.MongoError=n.MongoError,i.Admin=r(161),i.MongoClient=r(162),i.Db=r(111),i.Collection=r(89),i.Server=r(90),i.ReplSet=r(164),i.Mongos=r(163),i.ReadPreference=r(28),i.GridStore=r(159),i.Chunk=r(160),i.Logger=n.Logger,i.Cursor=r(32),i.GridFSBucket=r(282),i.CoreServer=r(5).Server,i.CoreConnection=r(5).Connection,i.Binary=n.BSON.Binary,i.Code=n.BSON.Code,i.Map=n.BSON.Map,i.DBRef=n.BSON.DBRef,i.Double=n.BSON.Double,i.Int32=n.BSON.Int32,i.Long=n.BSON.Long,i.MinKey=n.BSON.MinKey,i.MaxKey=n.BSON.MaxKey,i.ObjectID=n.BSON.ObjectID,i.ObjectId=n.BSON.ObjectID,i.Symbol=n.BSON.Symbol,i.Timestamp=n.BSON.Timestamp,i.BSONRegExp=n.BSON.BSONRegExp,i.Decimal128=n.BSON.Decimal128,i.connect=i,i.instrument=function(e,t){return"function"==typeof e&&(t=e,e={}),new o(n,e,t)},e.exports=i},219:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(126),i=r(71),s=r(170),a=r(0),l=r(0),c=r(62),u=r(33);class mongoLexer extends i.Lexer{constructor(e){super(e),this._interp=new s.LexerATNSimulator(mongoLexer._ATN,this)}get vocabulary(){return mongoLexer.VOCABULARY}isExternalIdentifierText(e){return"db"===e}get grammarFileName(){return"mongo.g4"}get ruleNames(){return mongoLexer.ruleNames}get serializedATN(){return mongoLexer._serializedATN}get modeNames(){return mongoLexer.modeNames}sempred(e,t,r){switch(t){case 21:return this.IDENTIFIER_sempred(e,r)}return!0}IDENTIFIER_sempred(e,t){switch(t){case 0:return!this.isExternalIdentifierText(this.text)}return!0}static get _ATN(){return mongoLexer.__ATN||(mongoLexer.__ATN=(new o.ATNDeserializer).deserialize(u.toCharArray(mongoLexer._serializedATN))),mongoLexer.__ATN}}mongoLexer.T__0=1,mongoLexer.T__1=2,mongoLexer.T__2=3,mongoLexer.T__3=4,mongoLexer.T__4=5,mongoLexer.T__5=6,mongoLexer.T__6=7,mongoLexer.T__7=8,mongoLexer.RegexLiteral=9,mongoLexer.SingleLineComment=10,mongoLexer.MultiLineComment=11,mongoLexer.StringLiteral=12,mongoLexer.NullLiteral=13,mongoLexer.BooleanLiteral=14,mongoLexer.NumericLiteral=15,mongoLexer.DecimalLiteral=16,mongoLexer.LineTerminator=17,mongoLexer.SEMICOLON=18,mongoLexer.DOT=19,mongoLexer.DB=20,mongoLexer.IDENTIFIER=21,mongoLexer.DOUBLE_QUOTED_STRING_LITERAL=22,mongoLexer.SINGLE_QUOTED_STRING_LITERAL=23,mongoLexer.WHITESPACE=24,mongoLexer.modeNames=["DEFAULT_MODE"],mongoLexer.ruleNames=["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","RegexLiteral","RegexFlag","SingleLineComment","MultiLineComment","StringLiteral","NullLiteral","BooleanLiteral","NumericLiteral","DecimalLiteral","LineTerminator","SEMICOLON","DOT","DB","IDENTIFIER","DOUBLE_QUOTED_STRING_LITERAL","SINGLE_QUOTED_STRING_LITERAL","STRING_ESCAPE","DecimalIntegerLiteral","ExponentPart","DecimalDigit","WHITESPACE"],mongoLexer._LITERAL_NAMES=[void 0,"'('","','","')'","'{'","'}'","'['","']'","':'",void 0,void 0,void 0,void 0,"'null'",void 0,void 0,void 0,void 0,"';'","'.'","'db'"],mongoLexer._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"RegexLiteral","SingleLineComment","MultiLineComment","StringLiteral","NullLiteral","BooleanLiteral","NumericLiteral","DecimalLiteral","LineTerminator","SEMICOLON","DOT","DB","IDENTIFIER","DOUBLE_QUOTED_STRING_LITERAL","SINGLE_QUOTED_STRING_LITERAL","WHITESPACE"],mongoLexer.VOCABULARY=new c.VocabularyImpl(mongoLexer._LITERAL_NAMES,mongoLexer._SYMBOLIC_NAMES,[]),mongoLexer._serializedATN='\b\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\b\b\t\t\n\n\n\n\nR\n\n\n\n\n\nW\n\n\f\n\nZ\v\n\n\n\n^\n\n\f\n\na\v\n\v\v\f\f\f\f\fi\n\f\f\f\fl\v\f\f\f\r\r\r\r\rt\n\r\f\r\rw\v\r\r\r\r\r\r\n\n\n\n\r\n\n\r\n\n\n\n\r\n\f\v\n\f\v\n\f\v\n\n\n\ru\t\v\r\b\t\n\v\f\r!#%\')+-/13579;\f\f,,11\f\f11iikkooww{{\f\f\f\v\f""$$)+.0<=]_}}$$^^))^^$$))^^3;GGgg--//2;\v\v""\t\v\r!#%\')+-/1;=?A\tC\vE\rGIKMbdo!#%\')+-/13579;=>*>?@.@AB+B\bCD}D\nEFF\fGH]HIJ_JKL<LMQ1NR\nOP^PR1QNQORXSW\nTU^UW1VSVTWZXVXYY[ZX[_1\\^\v]\\^a_]_``a_bc\tcde1ef1fjgi\nhgiljhjkkmljmn\b\fnop1pq,qurt\vsrtwuvusvxwuxy,yz1z{{|\b\r|}1~/}~pwnnvtwghcnug /#"509709757$\t\b&=(0*fd,\n3.$\n3$0)\n\b3)2^\t\t42\t\n96\t\v\t\f98\t\r:\t\b<QVX_ju\b',n([l.Override,a.NotNull],mongoLexer.prototype,"vocabulary",null),n([l.Override],mongoLexer.prototype,"grammarFileName",null),n([l.Override],mongoLexer.prototype,"ruleNames",null),n([l.Override],mongoLexer.prototype,"serializedATN",null),n([l.Override],mongoLexer.prototype,"modeNames",null),n([l.Override],mongoLexer.prototype,"sempred",null),t.mongoLexer=mongoLexer},220:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(41),i=r(126),s=r(184),a=r(0),l=r(33),c=r(127),u=r(128),p=r(63),h=r(75),d=r(339),f=r(13),m=r(62);class mongoParser extends u.Parser{constructor(e){super(e),this._interp=new s.ParserATNSimulator(mongoParser._ATN,this)}get vocabulary(){return mongoParser.VOCABULARY}get grammarFileName(){return"mongo.g4"}get ruleNames(){return mongoParser.ruleNames}get serializedATN(){return mongoParser._serializedATN}mongoCommands(){let e=new MongoCommandsContext(this._ctx,this.state);this.enterRule(e,0,mongoParser.RULE_mongoCommands);try{this.enterOuterAlt(e,1),this.state=34,this.commands(),this.state=35,this.match(mongoParser.EOF)}catch(t){if(!(t instanceof h.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}commands(){let e,t=new CommandsContext(this._ctx,this.state);this.enterRule(t,2,mongoParser.RULE_commands);try{for(this.enterOuterAlt(t,1),this.state=42,this._errHandler.sync(this),e=this._input.LA(1);0==(-32&e)&&0!=(1<<e&(1<<mongoParser.SingleLineComment|1<<mongoParser.MultiLineComment|1<<mongoParser.SEMICOLON|1<<mongoParser.DB));){switch(this.state=40,this._errHandler.sync(this),this._input.LA(1)){case mongoParser.DB:this.state=37,this.command();break;case mongoParser.SEMICOLON:this.state=38,this.emptyCommand();break;case mongoParser.SingleLineComment:case mongoParser.MultiLineComment:this.state=39,this.comment();break;default:throw new c.NoViableAltException(this)}this.state=44,this._errHandler.sync(this),e=this._input.LA(1)}}catch(e){if(!(e instanceof h.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}command(){let e,t=new CommandContext(this._ctx,this.state);this.enterRule(t,4,mongoParser.RULE_command);try{switch(this.enterOuterAlt(t,1),this.state=45,this.match(mongoParser.DB),this.state=48,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,2,this._ctx)){case 1:this.state=46,this.match(mongoParser.DOT),this.state=47,this.collection()}this.state=52,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=50,this.match(mongoParser.DOT),this.state=51,this.functionCall(),this.state=54,this._errHandler.sync(this),e=this._input.LA(1)}while(e===mongoParser.DOT);switch(this.state=57,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,4,this._ctx)){case 1:this.state=56,this.match(mongoParser.SEMICOLON)}}catch(e){if(!(e instanceof h.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}emptyCommand(){let e=new EmptyCommandContext(this._ctx,this.state);this.enterRule(e,6,mongoParser.RULE_emptyCommand);try{this.enterOuterAlt(e,1),this.state=59,this.match(mongoParser.SEMICOLON)}catch(t){if(!(t instanceof h.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}collection(){let e=new CollectionContext(this._ctx,this.state);this.enterRule(e,8,mongoParser.RULE_collection);try{let t;for(this.enterOuterAlt(e,1),this.state=61,this.match(mongoParser.IDENTIFIER),this.state=66,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,5,this._ctx);2!==t&&t!==o.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=62,this.match(mongoParser.DOT),this.state=63,this.match(mongoParser.IDENTIFIER)),this.state=68,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,5,this._ctx)}catch(t){if(!(t instanceof h.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}functionCall(){let e=new FunctionCallContext(this._ctx,this.state);this.enterRule(e,10,mongoParser.RULE_functionCall);try{this.enterOuterAlt(e,1),this.state=69,e._FUNCTION_NAME=this.match(mongoParser.IDENTIFIER),this.state=70,this.arguments()}catch(t){if(!(t instanceof h.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}arguments(){let e,t=new ArgumentsContext(this._ctx,this.state);this.enterRule(t,12,mongoParser.RULE_arguments);try{if(this.enterOuterAlt(t,1),this.state=72,t._OPEN_PARENTHESIS=this.match(mongoParser.T__0),this.state=81,this._errHandler.sync(this),0==(-32&(e=this._input.LA(1)))&&0!=(1<<e&(1<<mongoParser.T__3|1<<mongoParser.T__5|1<<mongoParser.RegexLiteral|1<<mongoParser.StringLiteral|1<<mongoParser.NullLiteral|1<<mongoParser.BooleanLiteral|1<<mongoParser.NumericLiteral)))for(this.state=73,this.argument(),this.state=78,this._errHandler.sync(this),e=this._input.LA(1);e===mongoParser.T__1;)this.state=74,this.match(mongoParser.T__1),this.state=75,this.argument(),this.state=80,this._errHandler.sync(this),e=this._input.LA(1);this.state=83,t._CLOSED_PARENTHESIS=this.match(mongoParser.T__2)}catch(e){if(!(e instanceof h.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}argument(){let e=new ArgumentContext(this._ctx,this.state);this.enterRule(e,14,mongoParser.RULE_argument);try{switch(this.state=88,this._errHandler.sync(this),this._input.LA(1)){case mongoParser.RegexLiteral:case mongoParser.StringLiteral:case mongoParser.NullLiteral:case mongoParser.BooleanLiteral:case mongoParser.NumericLiteral:this.enterOuterAlt(e,1),this.state=85,this.literal();break;case mongoParser.T__3:this.enterOuterAlt(e,2),this.state=86,this.objectLiteral();break;case mongoParser.T__5:this.enterOuterAlt(e,3),this.state=87,this.arrayLiteral();break;default:throw new c.NoViableAltException(this)}}catch(t){if(!(t instanceof h.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}objectLiteral(){let e,t=new ObjectLiteralContext(this._ctx,this.state);this.enterRule(t,16,mongoParser.RULE_objectLiteral);try{this.enterOuterAlt(t,1),this.state=90,this.match(mongoParser.T__3),this.state=92,this._errHandler.sync(this),(e=this._input.LA(1))!==mongoParser.StringLiteral&&e!==mongoParser.IDENTIFIER||(this.state=91,this.propertyNameAndValueList()),this.state=95,this._errHandler.sync(this),(e=this._input.LA(1))===mongoParser.T__1&&(this.state=94,this.match(mongoParser.T__1)),this.state=97,this.match(mongoParser.T__4)}catch(e){if(!(e instanceof h.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}arrayLiteral(){let e,t=new ArrayLiteralContext(this._ctx,this.state);this.enterRule(t,18,mongoParser.RULE_arrayLiteral);try{this.enterOuterAlt(t,1),this.state=99,this.match(mongoParser.T__5),this.state=101,this._errHandler.sync(this),0==(-32&(e=this._input.LA(1)))&&0!=(1<<e&(1<<mongoParser.T__3|1<<mongoParser.T__5|1<<mongoParser.RegexLiteral|1<<mongoParser.StringLiteral|1<<mongoParser.NullLiteral|1<<mongoParser.BooleanLiteral|1<<mongoParser.NumericLiteral|1<<mongoParser.IDENTIFIER))&&(this.state=100,this.elementList()),this.state=103,this.match(mongoParser.T__6)}catch(e){if(!(e instanceof h.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}elementList(){let e,t=new ElementListContext(this._ctx,this.state);this.enterRule(t,20,mongoParser.RULE_elementList);try{for(this.enterOuterAlt(t,1),this.state=105,this.propertyValue(),this.state=110,this._errHandler.sync(this),e=this._input.LA(1);e===mongoParser.T__1;)this.state=106,this.match(mongoParser.T__1),this.state=107,this.propertyValue(),this.state=112,this._errHandler.sync(this),e=this._input.LA(1)}catch(e){if(!(e instanceof h.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}propertyNameAndValueList(){let e=new PropertyNameAndValueListContext(this._ctx,this.state);this.enterRule(e,22,mongoParser.RULE_propertyNameAndValueList);try{let t;for(this.enterOuterAlt(e,1),this.state=113,this.propertyAssignment(),this.state=118,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,13,this._ctx);2!==t&&t!==o.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=114,this.match(mongoParser.T__1),this.state=115,this.propertyAssignment()),this.state=120,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,13,this._ctx)}catch(t){if(!(t instanceof h.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}propertyAssignment(){let e=new PropertyAssignmentContext(this._ctx,this.state);this.enterRule(e,24,mongoParser.RULE_propertyAssignment);try{this.enterOuterAlt(e,1),this.state=121,this.propertyName(),this.state=122,this.match(mongoParser.T__7),this.state=123,this.propertyValue()}catch(t){if(!(t instanceof h.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}propertyValue(){let e=new PropertyValueContext(this._ctx,this.state);this.enterRule(e,26,mongoParser.RULE_propertyValue);try{switch(this.state=129,this._errHandler.sync(this),this._input.LA(1)){case mongoParser.RegexLiteral:case mongoParser.StringLiteral:case mongoParser.NullLiteral:case mongoParser.BooleanLiteral:case mongoParser.NumericLiteral:this.enterOuterAlt(e,1),this.state=125,this.literal();break;case mongoParser.T__3:this.enterOuterAlt(e,2),this.state=126,this.objectLiteral();break;case mongoParser.T__5:this.enterOuterAlt(e,3),this.state=127,this.arrayLiteral();break;case mongoParser.IDENTIFIER:this.enterOuterAlt(e,4),this.state=128,this.functionCall();break;default:throw new c.NoViableAltException(this)}}catch(t){if(!(t instanceof h.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}literal(){let e,t=new LiteralContext(this._ctx,this.state);this.enterRule(t,28,mongoParser.RULE_literal);try{switch(this.state=134,this._errHandler.sync(this),this._input.LA(1)){case mongoParser.StringLiteral:case mongoParser.NullLiteral:case mongoParser.BooleanLiteral:this.enterOuterAlt(t,1),this.state=131,0!=(-32&(e=this._input.LA(1)))||0==(1<<e&(1<<mongoParser.StringLiteral|1<<mongoParser.NullLiteral|1<<mongoParser.BooleanLiteral))?this._errHandler.recoverInline(this):(this._input.LA(1)===f.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume());break;case mongoParser.RegexLiteral:this.enterOuterAlt(t,2),this.state=132,this.match(mongoParser.RegexLiteral);break;case mongoParser.NumericLiteral:this.enterOuterAlt(t,3),this.state=133,this.match(mongoParser.NumericLiteral);break;default:throw new c.NoViableAltException(this)}}catch(e){if(!(e instanceof h.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}propertyName(){let e,t=new PropertyNameContext(this._ctx,this.state);this.enterRule(t,30,mongoParser.RULE_propertyName);try{this.enterOuterAlt(t,1),this.state=136,(e=this._input.LA(1))!==mongoParser.StringLiteral&&e!==mongoParser.IDENTIFIER?this._errHandler.recoverInline(this):(this._input.LA(1)===f.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof h.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}comment(){let e,t=new CommentContext(this._ctx,this.state);this.enterRule(t,32,mongoParser.RULE_comment);try{this.enterOuterAlt(t,1),this.state=138,(e=this._input.LA(1))!==mongoParser.SingleLineComment&&e!==mongoParser.MultiLineComment?this._errHandler.recoverInline(this):(this._input.LA(1)===f.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(e){if(!(e instanceof h.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}static get _ATN(){return mongoParser.__ATN||(mongoParser.__ATN=(new i.ATNDeserializer).deserialize(l.toCharArray(mongoParser._serializedATN))),mongoParser.__ATN}}mongoParser.T__0=1,mongoParser.T__1=2,mongoParser.T__2=3,mongoParser.T__3=4,mongoParser.T__4=5,mongoParser.T__5=6,mongoParser.T__6=7,mongoParser.T__7=8,mongoParser.RegexLiteral=9,mongoParser.SingleLineComment=10,mongoParser.MultiLineComment=11,mongoParser.StringLiteral=12,mongoParser.NullLiteral=13,mongoParser.BooleanLiteral=14,mongoParser.NumericLiteral=15,mongoParser.DecimalLiteral=16,mongoParser.LineTerminator=17,mongoParser.SEMICOLON=18,mongoParser.DOT=19,mongoParser.DB=20,mongoParser.IDENTIFIER=21,mongoParser.DOUBLE_QUOTED_STRING_LITERAL=22,mongoParser.SINGLE_QUOTED_STRING_LITERAL=23,mongoParser.WHITESPACE=24,mongoParser.RULE_mongoCommands=0,mongoParser.RULE_commands=1,mongoParser.RULE_command=2,mongoParser.RULE_emptyCommand=3,mongoParser.RULE_collection=4,mongoParser.RULE_functionCall=5,mongoParser.RULE_arguments=6,mongoParser.RULE_argument=7,mongoParser.RULE_objectLiteral=8,mongoParser.RULE_arrayLiteral=9,mongoParser.RULE_elementList=10,mongoParser.RULE_propertyNameAndValueList=11,mongoParser.RULE_propertyAssignment=12,mongoParser.RULE_propertyValue=13,mongoParser.RULE_literal=14,mongoParser.RULE_propertyName=15,mongoParser.RULE_comment=16,mongoParser.ruleNames=["mongoCommands","commands","command","emptyCommand","collection","functionCall","arguments","argument","objectLiteral","arrayLiteral","elementList","propertyNameAndValueList","propertyAssignment","propertyValue","literal","propertyName","comment"],mongoParser._LITERAL_NAMES=[void 0,"'('","','","')'","'{'","'}'","'['","']'","':'",void 0,void 0,void 0,void 0,"'null'",void 0,void 0,void 0,void 0,"';'","'.'","'db'"],mongoParser._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"RegexLiteral","SingleLineComment","MultiLineComment","StringLiteral","NullLiteral","BooleanLiteral","NumericLiteral","DecimalLiteral","LineTerminator","SEMICOLON","DOT","DB","IDENTIFIER","DOUBLE_QUOTED_STRING_LITERAL","SINGLE_QUOTED_STRING_LITERAL","WHITESPACE"],mongoParser.VOCABULARY=new m.VocabularyImpl(mongoParser._LITERAL_NAMES,mongoParser._SYMBOLIC_NAMES,[]),mongoParser._serializedATN='\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t\t\t\t\t+\n\f.\v3\n7\n\r8<\nC\n\fF\v\b\b\b\b\bO\n\b\f\b\bR\v\b\bT\n\b\b\b\t\t\t\t[\n\t\n\n\n_\n\n\n\nb\n\n\n\n\v\v\vh\n\v\v\v\f\f\f\fo\n\f\f\f\fr\v\f\r\r\r\rw\n\r\f\r\rz\v\r\n\n\b\n\f "\f\r$,/\b=\n?\fGJZ\\eks{ "$%%&&\'+(+\b)+"*\'*(*)+.,*,--.,/20113\n2023364557\f647886899;:<;:;<<=>>\t?D@AACB@CFDBDEE\vFDGHHI\bI\rJSKP\tLMMO\tNLORPNPQQTRPSKSTTUUVVW[X[\nY[\vZWZXZY[\\^]_\r^]^__a`ba`abbccddeg\bfh\fgfghhiij\tjkplmmonlorpnpqqrpsxtuuwvtwzxvxyyzx{| |}\n}~~\n\v\f\t\v\t!\t#*,28;DPSZ^agpx',n([a.Override,a.NotNull],mongoParser.prototype,"vocabulary",null),n([a.Override],mongoParser.prototype,"grammarFileName",null),n([a.Override],mongoParser.prototype,"ruleNames",null),n([a.Override],mongoParser.prototype,"serializedATN",null),n([d.RuleVersion(0)],mongoParser.prototype,"mongoCommands",null),n([d.RuleVersion(0)],mongoParser.prototype,"commands",null),n([d.RuleVersion(0)],mongoParser.prototype,"command",null),n([d.RuleVersion(0)],mongoParser.prototype,"emptyCommand",null),n([d.RuleVersion(0)],mongoParser.prototype,"collection",null),n([d.RuleVersion(0)],mongoParser.prototype,"functionCall",null),n([d.RuleVersion(0)],mongoParser.prototype,"arguments",null),n([d.RuleVersion(0)],mongoParser.prototype,"argument",null),n([d.RuleVersion(0)],mongoParser.prototype,"objectLiteral",null),n([d.RuleVersion(0)],mongoParser.prototype,"arrayLiteral",null),n([d.RuleVersion(0)],mongoParser.prototype,"elementList",null),n([d.RuleVersion(0)],mongoParser.prototype,"propertyNameAndValueList",null),n([d.RuleVersion(0)],mongoParser.prototype,"propertyAssignment",null),n([d.RuleVersion(0)],mongoParser.prototype,"propertyValue",null),n([d.RuleVersion(0)],mongoParser.prototype,"literal",null),n([d.RuleVersion(0)],mongoParser.prototype,"propertyName",null),n([d.RuleVersion(0)],mongoParser.prototype,"comment",null),t.mongoParser=mongoParser;class MongoCommandsContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}commands(){return this.getRuleContext(0,CommandsContext)}EOF(){return this.getToken(mongoParser.EOF,0)}get ruleIndex(){return mongoParser.RULE_mongoCommands}enterRule(e){e.enterMongoCommands&&e.enterMongoCommands(this)}exitRule(e){e.exitMongoCommands&&e.exitMongoCommands(this)}accept(e){return e.visitMongoCommands?e.visitMongoCommands(this):e.visitChildren(this)}}n([a.Override],MongoCommandsContext.prototype,"ruleIndex",null),n([a.Override],MongoCommandsContext.prototype,"enterRule",null),n([a.Override],MongoCommandsContext.prototype,"exitRule",null),n([a.Override],MongoCommandsContext.prototype,"accept",null),t.MongoCommandsContext=MongoCommandsContext;class CommandsContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}command(e){return void 0===e?this.getRuleContexts(CommandContext):this.getRuleContext(e,CommandContext)}emptyCommand(e){return void 0===e?this.getRuleContexts(EmptyCommandContext):this.getRuleContext(e,EmptyCommandContext)}comment(e){return void 0===e?this.getRuleContexts(CommentContext):this.getRuleContext(e,CommentContext)}get ruleIndex(){return mongoParser.RULE_commands}enterRule(e){e.enterCommands&&e.enterCommands(this)}exitRule(e){e.exitCommands&&e.exitCommands(this)}accept(e){return e.visitCommands?e.visitCommands(this):e.visitChildren(this)}}n([a.Override],CommandsContext.prototype,"ruleIndex",null),n([a.Override],CommandsContext.prototype,"enterRule",null),n([a.Override],CommandsContext.prototype,"exitRule",null),n([a.Override],CommandsContext.prototype,"accept",null),t.CommandsContext=CommandsContext;class CommandContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}DB(){return this.getToken(mongoParser.DB,0)}DOT(e){return void 0===e?this.getTokens(mongoParser.DOT):this.getToken(mongoParser.DOT,e)}collection(){return this.tryGetRuleContext(0,CollectionContext)}functionCall(e){return void 0===e?this.getRuleContexts(FunctionCallContext):this.getRuleContext(e,FunctionCallContext)}SEMICOLON(){return this.tryGetToken(mongoParser.SEMICOLON,0)}get ruleIndex(){return mongoParser.RULE_command}enterRule(e){e.enterCommand&&e.enterCommand(this)}exitRule(e){e.exitCommand&&e.exitCommand(this)}accept(e){return e.visitCommand?e.visitCommand(this):e.visitChildren(this)}}n([a.Override],CommandContext.prototype,"ruleIndex",null),n([a.Override],CommandContext.prototype,"enterRule",null),n([a.Override],CommandContext.prototype,"exitRule",null),n([a.Override],CommandContext.prototype,"accept",null),t.CommandContext=CommandContext;class EmptyCommandContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}SEMICOLON(){return this.getToken(mongoParser.SEMICOLON,0)}get ruleIndex(){return mongoParser.RULE_emptyCommand}enterRule(e){e.enterEmptyCommand&&e.enterEmptyCommand(this)}exitRule(e){e.exitEmptyCommand&&e.exitEmptyCommand(this)}accept(e){return e.visitEmptyCommand?e.visitEmptyCommand(this):e.visitChildren(this)}}n([a.Override],EmptyCommandContext.prototype,"ruleIndex",null),n([a.Override],EmptyCommandContext.prototype,"enterRule",null),n([a.Override],EmptyCommandContext.prototype,"exitRule",null),n([a.Override],EmptyCommandContext.prototype,"accept",null),t.EmptyCommandContext=EmptyCommandContext;class CollectionContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}IDENTIFIER(e){return void 0===e?this.getTokens(mongoParser.IDENTIFIER):this.getToken(mongoParser.IDENTIFIER,e)}DOT(e){return void 0===e?this.getTokens(mongoParser.DOT):this.getToken(mongoParser.DOT,e)}get ruleIndex(){return mongoParser.RULE_collection}enterRule(e){e.enterCollection&&e.enterCollection(this)}exitRule(e){e.exitCollection&&e.exitCollection(this)}accept(e){return e.visitCollection?e.visitCollection(this):e.visitChildren(this)}}n([a.Override],CollectionContext.prototype,"ruleIndex",null),n([a.Override],CollectionContext.prototype,"enterRule",null),n([a.Override],CollectionContext.prototype,"exitRule",null),n([a.Override],CollectionContext.prototype,"accept",null),t.CollectionContext=CollectionContext;class FunctionCallContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}arguments(){return this.getRuleContext(0,ArgumentsContext)}IDENTIFIER(){return this.getToken(mongoParser.IDENTIFIER,0)}get ruleIndex(){return mongoParser.RULE_functionCall}enterRule(e){e.enterFunctionCall&&e.enterFunctionCall(this)}exitRule(e){e.exitFunctionCall&&e.exitFunctionCall(this)}accept(e){return e.visitFunctionCall?e.visitFunctionCall(this):e.visitChildren(this)}}n([a.Override],FunctionCallContext.prototype,"ruleIndex",null),n([a.Override],FunctionCallContext.prototype,"enterRule",null),n([a.Override],FunctionCallContext.prototype,"exitRule",null),n([a.Override],FunctionCallContext.prototype,"accept",null),t.FunctionCallContext=FunctionCallContext;class ArgumentsContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}argument(e){return void 0===e?this.getRuleContexts(ArgumentContext):this.getRuleContext(e,ArgumentContext)}get ruleIndex(){return mongoParser.RULE_arguments}enterRule(e){e.enterArguments&&e.enterArguments(this)}exitRule(e){e.exitArguments&&e.exitArguments(this)}accept(e){return e.visitArguments?e.visitArguments(this):e.visitChildren(this)}}n([a.Override],ArgumentsContext.prototype,"ruleIndex",null),n([a.Override],ArgumentsContext.prototype,"enterRule",null),n([a.Override],ArgumentsContext.prototype,"exitRule",null),n([a.Override],ArgumentsContext.prototype,"accept",null),t.ArgumentsContext=ArgumentsContext;class ArgumentContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}literal(){return this.tryGetRuleContext(0,LiteralContext)}objectLiteral(){return this.tryGetRuleContext(0,ObjectLiteralContext)}arrayLiteral(){return this.tryGetRuleContext(0,ArrayLiteralContext)}get ruleIndex(){return mongoParser.RULE_argument}enterRule(e){e.enterArgument&&e.enterArgument(this)}exitRule(e){e.exitArgument&&e.exitArgument(this)}accept(e){return e.visitArgument?e.visitArgument(this):e.visitChildren(this)}}n([a.Override],ArgumentContext.prototype,"ruleIndex",null),n([a.Override],ArgumentContext.prototype,"enterRule",null),n([a.Override],ArgumentContext.prototype,"exitRule",null),n([a.Override],ArgumentContext.prototype,"accept",null),t.ArgumentContext=ArgumentContext;class ObjectLiteralContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}propertyNameAndValueList(){return this.tryGetRuleContext(0,PropertyNameAndValueListContext)}get ruleIndex(){return mongoParser.RULE_objectLiteral}enterRule(e){e.enterObjectLiteral&&e.enterObjectLiteral(this)}exitRule(e){e.exitObjectLiteral&&e.exitObjectLiteral(this)}accept(e){return e.visitObjectLiteral?e.visitObjectLiteral(this):e.visitChildren(this)}}n([a.Override],ObjectLiteralContext.prototype,"ruleIndex",null),n([a.Override],ObjectLiteralContext.prototype,"enterRule",null),n([a.Override],ObjectLiteralContext.prototype,"exitRule",null),n([a.Override],ObjectLiteralContext.prototype,"accept",null),t.ObjectLiteralContext=ObjectLiteralContext;class ArrayLiteralContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}elementList(){return this.tryGetRuleContext(0,ElementListContext)}get ruleIndex(){return mongoParser.RULE_arrayLiteral}enterRule(e){e.enterArrayLiteral&&e.enterArrayLiteral(this)}exitRule(e){e.exitArrayLiteral&&e.exitArrayLiteral(this)}accept(e){return e.visitArrayLiteral?e.visitArrayLiteral(this):e.visitChildren(this)}}n([a.Override],ArrayLiteralContext.prototype,"ruleIndex",null),n([a.Override],ArrayLiteralContext.prototype,"enterRule",null),n([a.Override],ArrayLiteralContext.prototype,"exitRule",null),n([a.Override],ArrayLiteralContext.prototype,"accept",null),t.ArrayLiteralContext=ArrayLiteralContext;class ElementListContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}propertyValue(e){return void 0===e?this.getRuleContexts(PropertyValueContext):this.getRuleContext(e,PropertyValueContext)}get ruleIndex(){return mongoParser.RULE_elementList}enterRule(e){e.enterElementList&&e.enterElementList(this)}exitRule(e){e.exitElementList&&e.exitElementList(this)}accept(e){return e.visitElementList?e.visitElementList(this):e.visitChildren(this)}}n([a.Override],ElementListContext.prototype,"ruleIndex",null),n([a.Override],ElementListContext.prototype,"enterRule",null),n([a.Override],ElementListContext.prototype,"exitRule",null),n([a.Override],ElementListContext.prototype,"accept",null),t.ElementListContext=ElementListContext;class PropertyNameAndValueListContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}propertyAssignment(e){return void 0===e?this.getRuleContexts(PropertyAssignmentContext):this.getRuleContext(e,PropertyAssignmentContext)}get ruleIndex(){return mongoParser.RULE_propertyNameAndValueList}enterRule(e){e.enterPropertyNameAndValueList&&e.enterPropertyNameAndValueList(this)}exitRule(e){e.exitPropertyNameAndValueList&&e.exitPropertyNameAndValueList(this)}accept(e){return e.visitPropertyNameAndValueList?e.visitPropertyNameAndValueList(this):e.visitChildren(this)}}n([a.Override],PropertyNameAndValueListContext.prototype,"ruleIndex",null),n([a.Override],PropertyNameAndValueListContext.prototype,"enterRule",null),n([a.Override],PropertyNameAndValueListContext.prototype,"exitRule",null),n([a.Override],PropertyNameAndValueListContext.prototype,"accept",null),t.PropertyNameAndValueListContext=PropertyNameAndValueListContext;class PropertyAssignmentContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}propertyName(){return this.getRuleContext(0,PropertyNameContext)}propertyValue(){return this.getRuleContext(0,PropertyValueContext)}get ruleIndex(){return mongoParser.RULE_propertyAssignment}enterRule(e){e.enterPropertyAssignment&&e.enterPropertyAssignment(this)}exitRule(e){e.exitPropertyAssignment&&e.exitPropertyAssignment(this)}accept(e){return e.visitPropertyAssignment?e.visitPropertyAssignment(this):e.visitChildren(this)}}n([a.Override],PropertyAssignmentContext.prototype,"ruleIndex",null),n([a.Override],PropertyAssignmentContext.prototype,"enterRule",null),n([a.Override],PropertyAssignmentContext.prototype,"exitRule",null),n([a.Override],PropertyAssignmentContext.prototype,"accept",null),t.PropertyAssignmentContext=PropertyAssignmentContext;class PropertyValueContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}literal(){return this.tryGetRuleContext(0,LiteralContext)}objectLiteral(){return this.tryGetRuleContext(0,ObjectLiteralContext)}arrayLiteral(){return this.tryGetRuleContext(0,ArrayLiteralContext)}functionCall(){return this.tryGetRuleContext(0,FunctionCallContext)}get ruleIndex(){return mongoParser.RULE_propertyValue}enterRule(e){e.enterPropertyValue&&e.enterPropertyValue(this)}exitRule(e){e.exitPropertyValue&&e.exitPropertyValue(this)}accept(e){return e.visitPropertyValue?e.visitPropertyValue(this):e.visitChildren(this)}}n([a.Override],PropertyValueContext.prototype,"ruleIndex",null),n([a.Override],PropertyValueContext.prototype,"enterRule",null),n([a.Override],PropertyValueContext.prototype,"exitRule",null),n([a.Override],PropertyValueContext.prototype,"accept",null),t.PropertyValueContext=PropertyValueContext;class LiteralContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}NullLiteral(){return this.tryGetToken(mongoParser.NullLiteral,0)}BooleanLiteral(){return this.tryGetToken(mongoParser.BooleanLiteral,0)}StringLiteral(){return this.tryGetToken(mongoParser.StringLiteral,0)}RegexLiteral(){return this.tryGetToken(mongoParser.RegexLiteral,0)}NumericLiteral(){return this.tryGetToken(mongoParser.NumericLiteral,0)}get ruleIndex(){return mongoParser.RULE_literal}enterRule(e){e.enterLiteral&&e.enterLiteral(this)}exitRule(e){e.exitLiteral&&e.exitLiteral(this)}accept(e){return e.visitLiteral?e.visitLiteral(this):e.visitChildren(this)}}n([a.Override],LiteralContext.prototype,"ruleIndex",null),n([a.Override],LiteralContext.prototype,"enterRule",null),n([a.Override],LiteralContext.prototype,"exitRule",null),n([a.Override],LiteralContext.prototype,"accept",null),t.LiteralContext=LiteralContext;class PropertyNameContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}StringLiteral(){return this.tryGetToken(mongoParser.StringLiteral,0)}IDENTIFIER(){return this.tryGetToken(mongoParser.IDENTIFIER,0)}get ruleIndex(){return mongoParser.RULE_propertyName}enterRule(e){e.enterPropertyName&&e.enterPropertyName(this)}exitRule(e){e.exitPropertyName&&e.exitPropertyName(this)}accept(e){return e.visitPropertyName?e.visitPropertyName(this):e.visitChildren(this)}}n([a.Override],PropertyNameContext.prototype,"ruleIndex",null),n([a.Override],PropertyNameContext.prototype,"enterRule",null),n([a.Override],PropertyNameContext.prototype,"exitRule",null),n([a.Override],PropertyNameContext.prototype,"accept",null),t.PropertyNameContext=PropertyNameContext;class CommentContext extends p.ParserRuleContext{constructor(e,t){super(e,t)}SingleLineComment(){return this.tryGetToken(mongoParser.SingleLineComment,0)}MultiLineComment(){return this.tryGetToken(mongoParser.MultiLineComment,0)}get ruleIndex(){return mongoParser.RULE_comment}enterRule(e){e.enterComment&&e.enterComment(this)}exitRule(e){e.exitComment&&e.exitComment(this)}accept(e){return e.visitComment?e.visitComment(this):e.visitChildren(this)}}n([a.Override],CommentContext.prototype,"ruleIndex",null),n([a.Override],CommentContext.prototype,"enterRule",null),n([a.Override],CommentContext.prototype,"exitRule",null),n([a.Override],CommentContext.prototype,"accept",null),t.CommentContext=CommentContext},221:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MongoVisitor=class MongoVisitor{visitMongoCommands(e){return this.visitChildren(e)}visitCommands(e){return this.visitChildren(e)}visitCommand(e){return this.visitChildren(e)}visitCollection(e){return this.visitChildren(e)}visitFunctionCall(e){return this.visitChildren(e)}visitArgument(e){return this.visitChildren(e)}visitArguments(e){return this.visitChildren(e)}visit(e){return e.accept(this)}visitChildren(e){for(var t=this.defaultResult(e),r=e.childCount,n=0;n<r&&this.shouldVisitNextChild(e,t);n++){var o=e.getChild(n).accept(this);t=this.aggregateResult(t,o)}return t}visitTerminal(e){return this.defaultResult(e)}visitErrorNode(e){return this.defaultResult(e)}defaultResult(e){return null}aggregateResult(e,t){return t||e}shouldVisitNextChild(e,t){return!0}}},222:function(e,t){e.exports=require("vscode-languageserver-protocol")},23:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(0),i=1e3;class Interval{constructor(e,t){this.a=e,this.b=t}static get INVALID(){return Interval._INVALID}static of(e,t){return e!==t||e<0||e>i?new Interval(e,t):(null==Interval.cache[e]&&(Interval.cache[e]=new Interval(e,e)),Interval.cache[e])}get length(){return this.b<this.a?0:this.b-this.a+1}equals(e){if(e===this)return!0;if(!(e instanceof Interval))return!1;let t=e;return this.a===t.a&&this.b===t.b}hashCode(){let e=23;return e=31*(e=31*e+this.a)+this.b}startsBeforeDisjoint(e){return this.a<e.a&&this.b<e.a}startsBeforeNonDisjoint(e){return this.a<=e.a&&this.b>=e.a}startsAfter(e){return this.a>e.a}startsAfterDisjoint(e){return this.a>e.b}startsAfterNonDisjoint(e){return this.a>e.a&&this.a<=e.b}disjoint(e){return this.startsBeforeDisjoint(e)||this.startsAfterDisjoint(e)}adjacent(e){return this.a===e.b+1||this.b===e.a-1}properlyContains(e){return e.a>=this.a&&e.b<=this.b}union(e){return Interval.of(Math.min(this.a,e.a),Math.max(this.b,e.b))}intersection(e){return Interval.of(Math.max(this.a,e.a),Math.min(this.b,e.b))}differenceNotProperlyContained(e){let t;return e.startsBeforeNonDisjoint(this)?t=Interval.of(Math.max(this.a,e.b+1),this.b):e.startsAfterNonDisjoint(this)&&(t=Interval.of(this.a,e.a-1)),t}toString(){return this.a+".."+this.b}}Interval._INVALID=new Interval(-1,-2),Interval.cache=new Array(i+1),n([o.Override],Interval.prototype,"equals",null),n([o.Override],Interval.prototype,"hashCode",null),n([o.Override],Interval.prototype,"toString",null),t.Interval=Interval},24:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(60),s=r(42),a=r(118),l=r(11),c=r(0),u=r(119),p=r(9),h=1;class PredictionContext{constructor(e){this.cachedHashCode=e}static calculateEmptyHashCode(){let e=l.MurmurHash.initialize(h);return e=l.MurmurHash.finish(e,0)}static calculateSingleHashCode(e,t){let r=l.MurmurHash.initialize(h);return r=l.MurmurHash.update(r,e),r=l.MurmurHash.update(r,t),r=l.MurmurHash.finish(r,2)}static calculateHashCode(e,t){let r=l.MurmurHash.initialize(h);for(let t of e)r=l.MurmurHash.update(r,t);for(let e of t)r=l.MurmurHash.update(r,e);return r=l.MurmurHash.finish(r,2*e.length)}static fromRuleContext(e,t,r=!0){if(t.isEmpty)return r?PredictionContext.EMPTY_FULL:PredictionContext.EMPTY_LOCAL;let n;n=t._parent?PredictionContext.fromRuleContext(e,t._parent,r):r?PredictionContext.EMPTY_FULL:PredictionContext.EMPTY_LOCAL;let o=e.states[t.invokingState].transition(0);return n.getChild(o.followState.stateNumber)}static addEmptyContext(e){return e.addEmptyContext()}static removeEmptyContext(e){return e.removeEmptyContext()}static join(e,t,r=u.PredictionContextCache.UNCACHED){if(e==t)return e;if(e.isEmpty)return PredictionContext.isEmptyLocal(e)?e:PredictionContext.addEmptyContext(t);if(t.isEmpty)return PredictionContext.isEmptyLocal(t)?t:PredictionContext.addEmptyContext(e);let n=e.size,o=t.size;if(1===n&&1===o&&e.getReturnState(0)===t.getReturnState(0)){let n=r.join(e.getParent(0),t.getParent(0));return n===e.getParent(0)?e:n===t.getParent(0)?t:n.getChild(e.getReturnState(0))}let i=0,s=new Array(n+o),a=new Array(s.length),l=0,c=0,h=!0,m=!0;for(;l<n&&c<o;)e.getReturnState(l)===t.getReturnState(c)?(s[i]=r.join(e.getParent(l),t.getParent(c)),a[i]=e.getReturnState(l),h=h&&s[i]===e.getParent(l),m=m&&s[i]===t.getParent(c),l++,c++):e.getReturnState(l)<t.getReturnState(c)?(s[i]=e.getParent(l),a[i]=e.getReturnState(l),m=!1,l++):(p(t.getReturnState(c)<e.getReturnState(l)),s[i]=t.getParent(c),a[i]=t.getReturnState(c),h=!1,c++),i++;for(;l<n;)s[i]=e.getParent(l),a[i]=e.getReturnState(l),l++,m=!1,i++;for(;c<o;)s[i]=t.getParent(c),a[i]=t.getReturnState(c),c++,h=!1,i++;return h?e:m?t:(i<s.length&&(s=s.slice(0,i),a=a.slice(0,i)),0===s.length?PredictionContext.EMPTY_FULL:1===s.length?new f(s[0],a[0]):new d(s,a))}static isEmptyLocal(e){return e===PredictionContext.EMPTY_LOCAL}static getCachedContext(e,t,r){if(e.isEmpty)return e;let n=r.get(e);if(n)return n;if(n=t.get(e))return r.put(e,n),n;let o,i=!1,s=new Array(e.size);for(let n=0;n<s.length;n++){let o=PredictionContext.getCachedContext(e.getParent(n),t,r);if(i||o!==e.getParent(n)){if(!i){s=new Array(e.size);for(let t=0;t<e.size;t++)s[t]=e.getParent(t);i=!0}s[n]=o}}if(!i)return n=t.putIfAbsent(e,e),r.put(e,null!=n?n:e),e;if(1===s.length)o=new f(s[0],e.getReturnState(0));else{let t=new Array(e.size);for(let r=0;r<e.size;r++)t[r]=e.getReturnState(r);o=new d(s,t,e.hashCode())}return n=t.putIfAbsent(o,o),r.put(o,n||o),r.put(e,n||o),o}appendSingleContext(e,t){return this.appendContext(PredictionContext.EMPTY_FULL.getChild(e),t)}getChild(e){return new f(this,e)}hashCode(){return this.cachedHashCode}toStrings(e,t,r=PredictionContext.EMPTY_FULL){let n=[];e:for(let o=0;;o++){let i=0,s=!0,a=this,l=t,c="";for(c+="[";!a.isEmpty&&a!==r;){let t=0;if(a.size>0){let e=1;for(;1<<e>>>0<a.size;)e++;if(t=o>>i&(1<<e>>>0)-1,s=s&&t>=a.size-1,t>=a.size)continue e;i+=e}if(e){c.length>1&&(c+=" ");let t=e.atn.states[l];c+=e.ruleNames[t.ruleIndex]}else a.getReturnState(t)!==PredictionContext.EMPTY_FULL_STATE_KEY&&(a.isEmpty||(c.length>1&&(c+=" "),c+=a.getReturnState(t)));l=a.getReturnState(t),a=a.getParent(t)}if(c+="]",n.push(c),s)break}return n}}n([c.Override],PredictionContext.prototype,"hashCode",null),n([o(0,c.NotNull),o(1,c.NotNull),o(2,c.NotNull)],PredictionContext,"join",null),n([o(0,c.NotNull),o(1,c.NotNull),o(2,c.NotNull)],PredictionContext,"getCachedContext",null),t.PredictionContext=PredictionContext;class EmptyPredictionContext extends PredictionContext{constructor(e){super(PredictionContext.calculateEmptyHashCode()),this.fullContext=e}get isFullContext(){return this.fullContext}addEmptyContext(){return this}removeEmptyContext(){throw new Error("Cannot remove the empty context from itself.")}getParent(e){throw new Error("index out of bounds")}getReturnState(e){throw new Error("index out of bounds")}findReturnState(e){return-1}get size(){return 0}appendSingleContext(e,t){return t.getChild(this,e)}appendContext(e,t){return e}get isEmpty(){return!0}get hasEmpty(){return!0}equals(e){return this===e}toStrings(e,t,r){return["[]"]}}n([c.Override],EmptyPredictionContext.prototype,"addEmptyContext",null),n([c.Override],EmptyPredictionContext.prototype,"removeEmptyContext",null),n([c.Override],EmptyPredictionContext.prototype,"getParent",null),n([c.Override],EmptyPredictionContext.prototype,"getReturnState",null),n([c.Override],EmptyPredictionContext.prototype,"findReturnState",null),n([c.Override],EmptyPredictionContext.prototype,"size",null),n([c.Override],EmptyPredictionContext.prototype,"appendSingleContext",null),n([c.Override],EmptyPredictionContext.prototype,"appendContext",null),n([c.Override],EmptyPredictionContext.prototype,"isEmpty",null),n([c.Override],EmptyPredictionContext.prototype,"hasEmpty",null),n([c.Override],EmptyPredictionContext.prototype,"equals",null),n([c.Override],EmptyPredictionContext.prototype,"toStrings",null);let d=class ArrayPredictionContext extends PredictionContext{constructor(e,t,r){super(r||PredictionContext.calculateHashCode(e,t)),p(e.length===t.length),p(t.length>1||t[0]!==PredictionContext.EMPTY_FULL_STATE_KEY,"Should be using PredictionContext.EMPTY instead."),this.parents=e,this.returnStates=t}getParent(e){return this.parents[e]}getReturnState(e){return this.returnStates[e]}findReturnState(e){return a.Arrays.binarySearch(this.returnStates,e)}get size(){return this.returnStates.length}get isEmpty(){return!1}get hasEmpty(){return this.returnStates[this.returnStates.length-1]===PredictionContext.EMPTY_FULL_STATE_KEY}addEmptyContext(){if(this.hasEmpty)return this;let e=this.parents.slice(0),t=this.returnStates.slice(0);return e.push(PredictionContext.EMPTY_FULL),t.push(PredictionContext.EMPTY_FULL_STATE_KEY),new ArrayPredictionContext(e,t)}removeEmptyContext(){if(!this.hasEmpty)return this;if(2===this.returnStates.length)return new f(this.parents[0],this.returnStates[0]);{let e=this.parents.slice(0,this.parents.length-1),t=this.returnStates.slice(0,this.returnStates.length-1);return new ArrayPredictionContext(e,t)}}appendContext(e,t){return ArrayPredictionContext.appendContextImpl(this,e,new PredictionContext.IdentityHashMap)}static appendContextImpl(e,t,r){if(t.isEmpty){if(PredictionContext.isEmptyLocal(t)){if(e.hasEmpty)return PredictionContext.EMPTY_LOCAL;throw new Error("what to do here?")}return e}if(1!==t.size)throw new Error("Appending a tree suffix is not yet supported.");let n=r.get(e);if(!n){if(e.isEmpty)n=t;else{let o=e.size;e.hasEmpty&&o--;let i=new Array(o),s=new Array(o);for(let t=0;t<o;t++)s[t]=e.getReturnState(t);for(let n=0;n<o;n++)i[n]=ArrayPredictionContext.appendContextImpl(e.getParent(n),t,r);1===i.length?n=new f(i[0],s[0]):(p(i.length>1),n=new ArrayPredictionContext(i,s)),e.hasEmpty&&(n=PredictionContext.join(n,t))}r.put(e,n)}return n}equals(e){if(this===e)return!0;if(!(e instanceof ArrayPredictionContext))return!1;if(this.hashCode()!==e.hashCode())return!1;let t=e;return this.equalsImpl(t,new s.Array2DHashSet)}equalsImpl(e,t){let r=[],n=[];for(r.push(this),n.push(e);;){let e=r.pop(),o=n.pop();if(!e||!o)break;let i=new u.PredictionContextCache.IdentityCommutativePredictionContextOperands(e,o);if(!t.add(i))continue;let s=i.x.size;if(0!==s){if(s!==i.y.size)return!1;for(let e=0;e<s;e++){if(i.x.getReturnState(e)!==i.y.getReturnState(e))return!1;let t=i.x.getParent(e),o=i.y.getParent(e);if(t.hashCode()!==o.hashCode())return!1;t!==o&&(r.push(t),n.push(o))}}else if(!i.x.equals(i.y))return!1}return!0}};n([c.NotNull],d.prototype,"parents",void 0),n([c.NotNull],d.prototype,"returnStates",void 0),n([c.Override],d.prototype,"getParent",null),n([c.Override],d.prototype,"getReturnState",null),n([c.Override],d.prototype,"findReturnState",null),n([c.Override],d.prototype,"size",null),n([c.Override],d.prototype,"isEmpty",null),n([c.Override],d.prototype,"hasEmpty",null),n([c.Override],d.prototype,"addEmptyContext",null),n([c.Override],d.prototype,"removeEmptyContext",null),n([c.Override],d.prototype,"appendContext",null),n([c.Override],d.prototype,"equals",null),d=n([o(0,c.NotNull)],d);let f=class SingletonPredictionContext extends PredictionContext{constructor(e,t){super(PredictionContext.calculateSingleHashCode(e,t)),this.parent=e,this.returnState=t}getParent(e){return this.parent}getReturnState(e){return this.returnState}findReturnState(e){return this.returnState===e?0:-1}get size(){return 1}get isEmpty(){return!1}get hasEmpty(){return!1}appendContext(e,t){return t.getChild(this.parent.appendContext(e,t),this.returnState)}addEmptyContext(){let e=[this.parent,PredictionContext.EMPTY_FULL],t=[this.returnState,PredictionContext.EMPTY_FULL_STATE_KEY];return new d(e,t)}removeEmptyContext(){return this}equals(e){if(e===this)return!0;if(!(e instanceof SingletonPredictionContext))return!1;let t=e;return this.hashCode()===t.hashCode()&&(this.returnState===t.returnState&&this.parent.equals(t.parent))}};n([c.NotNull],f.prototype,"parent",void 0),n([c.Override],f.prototype,"getParent",null),n([c.Override],f.prototype,"getReturnState",null),n([c.Override],f.prototype,"findReturnState",null),n([c.Override],f.prototype,"size",null),n([c.Override],f.prototype,"isEmpty",null),n([c.Override],f.prototype,"hasEmpty",null),n([c.Override],f.prototype,"appendContext",null),n([c.Override],f.prototype,"addEmptyContext",null),n([c.Override],f.prototype,"removeEmptyContext",null),n([c.Override],f.prototype,"equals",null),f=n([o(0,c.NotNull)],f),t.SingletonPredictionContext=f,function(e){e.EMPTY_LOCAL=new EmptyPredictionContext(!1),e.EMPTY_FULL=new EmptyPredictionContext(!0),e.EMPTY_LOCAL_STATE_KEY=-2147483648,e.EMPTY_FULL_STATE_KEY=2147483647;e.IdentityHashMap=class IdentityHashMap extends i.Array2DHashMap{constructor(){super(IdentityEqualityComparator.INSTANCE)}};class IdentityEqualityComparator{IdentityEqualityComparator(){}hashCode(e){return e.hashCode()}equals(e,t){return e===t}}IdentityEqualityComparator.INSTANCE=new IdentityEqualityComparator,n([c.Override],IdentityEqualityComparator.prototype,"hashCode",null),n([c.Override],IdentityEqualityComparator.prototype,"equals",null),e.IdentityEqualityComparator=IdentityEqualityComparator}(PredictionContext=t.PredictionContext||(t.PredictionContext={}))},26:function(e,t){e.exports=require("events")},278:function(e,t,r){var n=r(26).EventEmitter,o=r(4).inherits,i=r(58),s=r(48),a=r(109).OrderedBulkOperation,l=r(110).UnorderedBulkOperation,c=r(159),u=r(32),p=r(89),h=r(111),d={operationId:1,next:function(){return this.operationId++}},f={current:function(){return(new Date).getTime()},duration:function(e,t){return t-e}},m=["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"],g=function(e,t,o){var g=(t=t||{}).operationIdGenerator||d,y=t.timestampGenerator||f;n.call(this),this.overloads=[];"function"==typeof o&&function(e){for(var t=[],r=[c,a,l,s,i,u,p,h],n=0;n<r.length;n++)r[n].define&&t.push(r[n].define.generate());e(null,t)}(o);var v=this,b=["command","insert","update","remove"],x=e.Server.prototype;b.forEach(function(t){var r=x[t];v.overloads.push({proto:x,name:t,func:r}),x[t]=function(){var n=e.Query.nextRequestId(),o=Array.prototype.slice.call(arguments,0),i=o[0],s=o[1],a=o[2]||{},l=Object.keys(s)[0],c=i.split(".")[0],u=i.split(".");u.shift(),u=u.join("."),"insert"==t?(l="insert",s={insert:u,documents:s},a.writeConcern&&Object.keys(a.writeConcern).length>0&&(s.writeConcern=a.writeConcern),s.ordered=null==a.ordered||a.ordered):"update"==t?(l="update",s={update:u,updates:s},a.writeConcern&&Object.keys(a.writeConcern).length>0&&(s.writeConcern=a.writeConcern),s.ordered=null==a.ordered||a.ordered):"remove"==t&&(l="delete",s={delete:u,deletes:s},a.writeConcern&&Object.keys(a.writeConcern).length>0&&(s.writeConcern=a.writeConcern),s.ordered=null==a.ordered||a.ordered);var p=o.pop(),h=p.operationId||g.next(),d=this.s.pool.get(),f={command:s,databaseName:c,commandName:l,requestId:n,operationId:h,connectionId:d};-1!=m.indexOf(l.toLowerCase())&&(f.commandObj={},f.commandObj[l]=!0),v.emit("started",f);var b=y.current();o.push(function(e,t){var r=y.current(),o={duration:y.duration(b,r),commandName:l,requestId:n,operationId:h,connectionId:d};e||t&&t.result&&0==t.result.ok?(o.failure=e||t.result.writeErrors||t.result,-1!=m.indexOf(l.toLowerCase())&&(o.failure={}),v.emit("failed",o)):s&&s.writeConcern&&0==s.writeConcern.w?(o.reply={ok:1},v.emit("succeeded",o)):(o.reply=t&&t.result?t.result:t,-1!=m.indexOf(l.toLowerCase())&&(o.reply={}),v.emit("succeeded",o)),p(e,t)}),r.apply(this,o)}}),b=["execute"];var S=[r(109).Bulk.prototype,r(110).Bulk.prototype];S.forEach(function(e){b.forEach(function(t){var r=e[t];v.overloads.push({proto:e,name:t,func:r}),e[t]=function(){var e=Array.prototype.slice.call(arguments,0);this.operationId=g.next();var t=e.pop();if("function"!=typeof t)return r.apply(this,e);e.push(function(e,r){t(e,r)}),r.apply(this,e)}})}),b=["_find","_getmore","_killcursor"],S=[r(32).prototype,r(48).prototype,r(58).prototype];var C={_find:"find",_getmore:"getMore",_killcursor:"killCursors",_explain:"explain"};S.forEach(function(t){b.forEach(function(r){var n=t[r];v.overloads.push({proto:t,name:r,func:n}),t[r]=function(){var t=this,o=e.Query.nextRequestId(),i=g.next(),s=this.ns.split("."),a=s[0];s.shift();var l=s.join("."),c=this.query,u=this.s.cmd;"_find"==r&&(t.operationId=i),"_getmore"==r?(c={getMore:this.cursorState.cursorId,collection:l,batchSize:u.batchSize},u.maxTimeMS&&(c.maxTimeMS=u.maxTimeMS)):"_killcursor"==r?c={killCursors:l,cursors:[this.cursorState.cursorId]}:u.find?(c={find:l,filter:u.query},u.sort&&(c.sort=u.sort),u.fields&&(c.projection=u.fields),u.limit&&u.limit<0?(c.limit=Math.abs(u.limit),c.singleBatch=!0):u.limit&&(c.limit=Math.abs(u.limit)),u.skip&&(c.skip=u.skip),u.hint&&(c.hint=u.hint),u.batchSize&&(c.batchSize=u.batchSize),"boolean"==typeof u.returnKey&&(c.returnKey=u.returnKey),u.comment&&(c.comment=u.comment),u.min&&(c.min=u.min),u.max&&(c.max=u.max),u.maxScan&&(c.maxScan=u.maxScan),u.maxTimeMS&&(c.maxTimeMS=u.maxTimeMS),"boolean"==typeof u.awaitData&&(c.awaitData=u.awaitData),"boolean"==typeof u.snapshot&&(c.snapshot=u.snapshot),"boolean"==typeof u.tailable&&(c.tailable=u.tailable),"boolean"==typeof u.oplogReplay&&(c.oplogReplay=u.oplogReplay),"boolean"==typeof u.noCursorTimeout&&(c.noCursorTimeout=u.noCursorTimeout),"boolean"==typeof u.partial&&(c.partial=u.partial),"boolean"==typeof u.showDiskLoc&&(c.showRecordId=u.showDiskLoc),u.readConcern&&(c.readConcern=u.readConcern),u.explain&&(c.explain=u.explain),u.exhaust&&(c.exhaust=u.exhaust),u.explain&&(c={explain:c,verbosity:"allPlansExecution"},u.readConcern&&(c.readConcern=u.readConcern),r="_explain")):c=u;var p=null;this.connection&&(p=this.connection),!p&&this.server&&this.server.getConnection&&(p=this.server.getConnection());var h="_find"==r?Object.keys(c)[0]:C[r];c={command:c,databaseName:a,commandName:h,requestId:o,operationId:this.operationId,connectionId:p};var d=Array.prototype.slice.call(arguments,0),f=d.pop();if("function"!=typeof f&&"killCursors"!=c.commandName){d.push(f);var m=n.apply(this,d);return new t.s.promiseLibrary(function(e,r){var n=y.current();v.emit("started",c),m.then(function(){var e={duration:y.duration(n,y.current()),commandName:h,requestId:o,operationId:t.operationId,connectionId:t.server.getConnection(),reply:t.cursorState.documents};v.emit("succeeded",e)}).catch(function(e){var s={duration:y.duration(n,y.current()),commandName:h,requestId:o,operationId:i,connectionId:t.server.getConnection(),failure:e};v.emit("failed",s),r(e)})})}var b=y.current();if(v.emit("started",c),"killCursors"==c.commandName&&this.server.lastIsMaster()&&this.server.lastIsMaster().maxWireVersion<4)return c={duration:y.duration(b,y.current()),commandName:h,requestId:o,operationId:t.operationId,connectionId:t.server.getConnection(),reply:[{ok:1}]},d.push(f),n.apply(this,d),v.emit("succeeded",c);d.push(function(e,r){if(e){var n={duration:y.duration(b,y.current()),commandName:h,requestId:o,operationId:i,connectionId:t.server.getConnection(),failure:e};v.emit("failed",n)}else"getmore"==h.toLowerCase()&&null==r?r={cursor:{id:t.cursorState.cursorId,ns:t.ns,nextBatch:t.cursorState.documents},ok:1}:"find"!=h.toLowerCase()&&"aggregate"!=h.toLowerCase()&&"listcollections"!=h.toLowerCase()||null!=r?"killcursors"==h.toLowerCase()&&null==r&&(r={cursorsUnknown:[t.cursorState.lastCursorId],ok:1}):r={cursor:{id:t.cursorState.cursorId,ns:t.ns,firstBatch:t.cursorState.documents},ok:1},n={duration:y.duration(b,y.current()),commandName:h,requestId:o,operationId:t.operationId,connectionId:t.server.getConnection(),reply:r&&r.result?r.result:r},v.emit("succeeded",n);f&&f(e,r)}),n.apply(this,d)}})})};o(g,n),g.prototype.uninstrument=function(){for(var e=0;e<this.overloads.length;e++){var t=this.overloads[e];t.proto[t.name]=t.func}this.removeAllListeners("started"),this.removeAllListeners("succeeded"),this.removeAllListeners("failed")},e.exports=g},279:function(e,t){e.exports=require("vertx")},28:function(e,t,r){"use strict";var n=function(e,t,r){if(!(this instanceof n))return new n(e,t,r);this._type="ReadPreference",this.mode=e,this.tags=t,this.options=r,t&&"object"==typeof t&&!Array.isArray(t)&&t.maxStalenessSeconds&&(this.options=t,this.tags=null),this.options&&this.options.maxStalenessSeconds&&(this.maxStalenessSeconds=this.options.maxStalenessSeconds)};n.isValid=function(e){return e==n.PRIMARY||e==n.PRIMARY_PREFERRED||e==n.SECONDARY||e==n.SECONDARY_PREFERRED||e==n.NEAREST||1==e||0==e||null==e},n.prototype.isValid=function(e){var t="string"==typeof e?e:this.mode;return n.isValid(t)},n.prototype.toObject=function(){var e={mode:this.mode};return null!=this.tags&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),e},n.prototype.toJSON=function(){return this.toObject()},n.PRIMARY="primary",n.PRIMARY_PREFERRED="primaryPreferred",n.SECONDARY="secondary",n.SECONDARY_PREFERRED="secondaryPreferred",n.NEAREST="nearest",e.exports=n},280:function(e,t,r){"use strict";var n=r(28),o=r(17),i=r(4).format,s=r(3).assign,a=r(281);function l(e,t){var r=/^.*?\./,n="."+e.replace(r,""),o="."+t.replace(r,"");return!!n.endsWith(o)}function c(e,t,r){var a,l;try{a=function(e,t){var r="",a="",l="",c="admin",u=o.parse(e,!0);if((null==u.hostname||""==u.hostname)&&-1==e.indexOf(".sock"))throw new Error("no hostname or hostnames provided in connection string");if("0"==u.port)throw new Error("invalid port (zero) with hostname");if(!isNaN(parseInt(u.port,10))&&parseInt(u.port,10)>65535)throw new Error("invalid port (larger than 65535) with hostname");if(u.path&&u.path.length>0&&"/"!=u.path[0]&&-1==e.indexOf(".sock"))throw new Error("missing delimiting slash between hosts and options");if(u.query)for(var p in u.query){if(-1!=p.indexOf("::"))throw new Error("double colon in host identifier");if(""==u.query[p])throw new Error("query parameter "+p+" is an incomplete value pair")}if(u.auth){var h=u.auth.split(":");if(-1!=e.indexOf(u.auth)&&h.length>2)throw new Error("Username with password containing an unescaped colon");if(-1!=e.indexOf(u.auth)&&-1!=u.auth.indexOf("@"))throw new Error("Username containing an unescaped at-sign")}for(var d=e.split("?").shift().split(","),f=[],m=0;m<d.length;m++){var g=d[m];-1!=g.indexOf("mongodb")?-1!=g.indexOf("@")?f.push(g.split("@").pop()):f.push(g.substr("mongodb://".length)):-1!=g.indexOf("/")?f.push(g.split("/").shift()):-1==g.indexOf("/")&&f.push(g.trim())}for(m=0;m<f.length;m++){var y=o.parse(i("mongodb://%s",f[m].trim()));if(y.path&&-1!=y.path.indexOf(":"))throw y.path.split("/").length>1?new Error("slash in host identifier"):new Error("double colon in host identifier")}-1!=e.indexOf("?")?(l=e.substr(e.indexOf("?")+1),r=e.substring("mongodb://".length,e.indexOf("?"))):r=e.substring("mongodb://".length);-1!=r.indexOf("@")&&(a=r.split("@")[0],r=r.split("@")[1]);if(-1!=r.indexOf(".sock")){if(-1!=r.indexOf(".sock/")){if(-1!=(c=r.split(".sock/")[1]).indexOf("/")){if(2==c.split("/").length&&0==c.split("/")[1].length)throw new Error("Illegal trailing backslash after database name");throw new Error("More than 1 database name in URL")}r=r.split("/",r.indexOf(".sock")+".sock".length)}}else if(-1!=r.indexOf("/")){if(r.split("/").length>2){if(0==r.split("/")[2].length)throw new Error("Illegal trailing backslash after database name");throw new Error("More than 1 database name in URL")}c=r.split("/")[1],r=r.split("/")[0]}var v,b={},x=a||"",S=x.split(":",2);S[0]=decodeURIComponent(S[0]),S[1]&&(S[1]=decodeURIComponent(S[1]));2==S.length&&(b.auth={user:S[0],password:S[1]});t&&null!=t.auth&&(b.auth=t.auth);var C={socketOptions:{}},_={read_preference_tags:[]},O={socketOptions:{}},T={socketOptions:{}};if(b.server_options=C,b.db_options=_,b.rs_options=O,b.mongos_options=T,e.match(/\.sock/)){var N=e.substring(e.indexOf("mongodb://")+"mongodb://".length,e.lastIndexOf(".sock")+".sock".length);-1!=N.indexOf("@")&&(N=N.split("@")[1]),v=[{domain_socket:N}]}else{var A={};v=r.split(",").map(function(e){var t,r,n;if(n=/\[([^\]]+)\](?:\:(.+))?/.exec(e))t=n[1],r=parseInt(n[2],10)||27017;else{var o=e.split(":",2);t=o[0]||"localhost",r=null!=o[1]?parseInt(o[1],10):27017,-1!=t.indexOf("?")&&(t=t.split(/\?/)[0])}return A[t+"_"+r]?null:(A[t+"_"+r]=1,{host:t,port:r})}).filter(function(e){return null!=e})}b.dbName=c||"admin",(l||"").split(/[&;]/).forEach(function(e){if(e){var t=e.split("="),r=t[0],o=t[1];switch(r){case"slaveOk":case"slave_ok":C.slave_ok="true"==o,_.slaveOk="true"==o;break;case"maxPoolSize":case"poolSize":C.poolSize=parseInt(o,10),O.poolSize=parseInt(o,10);break;case"appname":b.appname=decodeURIComponent(o);break;case"autoReconnect":case"auto_reconnect":C.auto_reconnect="true"==o;break;case"minPoolSize":throw new Error("minPoolSize not supported");case"maxIdleTimeMS":throw new Error("maxIdleTimeMS not supported");case"waitQueueMultiple":throw new Error("waitQueueMultiple not supported");case"waitQueueTimeoutMS":throw new Error("waitQueueTimeoutMS not supported");case"uuidRepresentation":throw new Error("uuidRepresentation not supported");case"ssl":if("prefer"==o){C.ssl=o,O.ssl=o,T.ssl=o;break}C.ssl="true"==o,O.ssl="true"==o,T.ssl="true"==o;break;case"sslValidate":C.sslValidate="true"==o,O.sslValidate="true"==o,T.sslValidate="true"==o;break;case"replicaSet":case"rs_name":O.rs_name=o;break;case"reconnectWait":O.reconnectWait=parseInt(o,10);break;case"retries":O.retries=parseInt(o,10);break;case"readSecondary":case"read_secondary":O.read_secondary="true"==o;break;case"fsync":_.fsync="true"==o;break;case"journal":_.j="true"==o;break;case"safe":_.safe="true"==o;break;case"nativeParser":case"native_parser":_.native_parser="true"==o;break;case"readConcernLevel":_.readConcern={level:o};break;case"connectTimeoutMS":C.socketOptions.connectTimeoutMS=parseInt(o,10),O.socketOptions.connectTimeoutMS=parseInt(o,10),T.socketOptions.connectTimeoutMS=parseInt(o,10);break;case"socketTimeoutMS":C.socketOptions.socketTimeoutMS=parseInt(o,10),O.socketOptions.socketTimeoutMS=parseInt(o,10),T.socketOptions.socketTimeoutMS=parseInt(o,10);break;case"w":_.w=parseInt(o,10),isNaN(_.w)&&(_.w=o);break;case"authSource":_.authSource=o;break;case"gssapiServiceName":_.gssapiServiceName=o;break;case"authMechanism":if("GSSAPI"==o)if(null==b.auth){var i=decodeURIComponent(x);if(-1==i.indexOf("@"))throw new Error("GSSAPI requires a provided principal");b.auth={user:i,password:null}}else b.auth.user=decodeURIComponent(b.auth.user);else"MONGODB-X509"==o&&(b.auth={user:decodeURIComponent(x)});if("GSSAPI"!=o&&"MONGODB-X509"!=o&&"MONGODB-CR"!=o&&"DEFAULT"!=o&&"SCRAM-SHA-1"!=o&&"PLAIN"!=o)throw new Error("only DEFAULT, GSSAPI, PLAIN, MONGODB-X509, SCRAM-SHA-1 or MONGODB-CR is supported by authMechanism");_.authMechanism=o;break;case"authMechanismProperties":var s=o.split(","),a={};s.forEach(function(e){var t=e.split(":");a[t[0]]=t[1]}),_.authMechanismProperties=a,"string"==typeof a.SERVICE_NAME&&(_.gssapiServiceName=a.SERVICE_NAME),"string"==typeof a.SERVICE_REALM&&(_.gssapiServiceRealm=a.SERVICE_REALM),"string"==typeof a.CANONICALIZE_HOST_NAME&&(_.gssapiCanonicalizeHostName="true"==a.CANONICALIZE_HOST_NAME);break;case"wtimeoutMS":_.wtimeout=parseInt(o,10);break;case"readPreference":if(!n.isValid(o))throw new Error("readPreference must be either primary/primaryPreferred/secondary/secondaryPreferred/nearest");_.readPreference=o;break;case"maxStalenessSeconds":_.maxStalenessSeconds=parseInt(o,10);break;case"readPreferenceTags":var l={};if(null==(o=decodeURIComponent(o))||""==o){_.read_preference_tags.push(l);break}for(var c=o.split(/\,/),u=0;u<c.length;u++){var p=c[u].trim().split(/\:/);l[p[0]]=p[1]}_.read_preference_tags.push(l)}}}),0===_.read_preference_tags.length&&(_.read_preference_tags=null);if(!(-1!=_.w&&0!=_.w||1!=_.journal&&1!=_.fsync&&1!=_.safe))throw new Error("w set to -1 or 0 cannot be combined with safe/w/journal/fsync");_.readPreference||(_.readPreference="primary");return _=s(_,t),b.servers=v,b}(e,t)}catch(e){l=e}return l?r(l,null):r(null,a)}e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),t=t||{};var n=o.parse(e,!0);if("mongodb:"!==n.protocol&&"mongodb+srv:"!==n.protocol)return r(new Error("invalid schema, expected mongodb or mongodb+srv"));if("mongodb+srv:"===n.protocol){if(n.hostname.split(".").length<3)return r(new Error("uri does not have hostname, domainname and tld"));if(n.domainLength=n.hostname.split(".").length,n.pathname&&n.pathname.match(","))return r(new Error("invalid uri, cannot contain multiple hostnames"));if(n.port)return r(new Error("Ports not accepted with mongodb+srv"));var i="_mongodb._tcp."+n.host;a.resolveSrv(i,function(e,o){if(e)return r(e);if(0===o.length)return r(new Error("No addresses found at host"));for(var i=0;i<o.length;i++)if(!l(o[i].name,n.hostname,n.domainLength))return r(new Error("srv record does not share hostname with parent uri"));var s=n.auth?"mongodb://"+n.auth+"@":"mongodb://",u=o.map(function(e,t){return 0===t?s+e.name+":"+e.port:e.name+":"+e.port}).join(",")+"/",p=[];(t.ssl||n.search)&&(t.ssl||!n.search||n.search.match("ssl"))||p.push("ssl=true"),n.search&&p.push(n.search.replace("?","")),a.resolveTxt(n.host,function(e,n){if(e&&"ENODATA"!==e.code)return r(e);if(e&&"ENODATA"===e.code&&(n=null),n){if(n.length>1)return r(new Error("multiple text records not allowed"));if(!(n=(n=n[0]).length>1?n.join(""):n[0]).includes("authSource")&&!n.includes("replicaSet"))return r(new Error("text record must only set `authSource` or `replicaSet`"));p.push(n)}p.length&&(u+="?"+p.join("&")),c(u,t,r)})})}else c(e,t,r)}},281:function(e,t){e.exports=require("dns")},282:function(e,t,r){var n=r(26).EventEmitter,o=r(283),i=r(284),s=r(3).shallowClone,a=r(3).toError,l=r(4),c={bucketName:"fs",chunkSizeBytes:261120};function u(e,t){if(n.apply(this),this.setMaxListeners(0),t&&"object"==typeof t){t=s(t);for(var o=Object.keys(c),i=0;i<o.length;++i)t[o[i]]||(t[o[i]]=c[o[i]])}else t=c;this.s={db:e,options:t,_chunksCollection:e.collection(t.bucketName+".chunks"),_filesCollection:e.collection(t.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1,promiseLibrary:e.s.promiseLibrary||("function"==typeof global.Promise?global.Promise:r(16).Promise)}}function p(e,t,r){e.s._filesCollection.deleteOne({_id:t},function(n,o){if(n)return r(n);e.s._chunksCollection.deleteMany({files_id:t},function(e){return e?r(e):o.result.n?void r():r(new Error("FileNotFound: no file with id "+t+" found"))})})}function h(e,t,r,n){var o={_id:t},i={$set:{filename:r}};e.s._filesCollection.updateOne(o,i,function(e,r){return e?n(e):r.result.n?void n():n(a("File with id "+t+" not found"))})}function d(e,t){e.s._filesCollection.drop(function(r){if(r)return t(r);e.s._chunksCollection.drop(function(e){return e?t(e):t()})})}e.exports=u,l.inherits(u,n),u.prototype.openUploadStream=function(e,t){return(t=t?s(t):{}).chunkSizeBytes||(t.chunkSizeBytes=this.s.options.chunkSizeBytes),new i(this,e,t)},u.prototype.openUploadStreamWithId=function(e,t,r){return(r=r?s(r):{}).chunkSizeBytes||(r.chunkSizeBytes=this.s.options.chunkSizeBytes),r.id=e,new i(this,t,r)},u.prototype.openDownloadStream=function(e,t){var r={_id:e};return t={start:t&&t.start,end:t&&t.end},new o(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,r,t)},u.prototype.delete=function(e,t){if("function"==typeof t)return p(this,e,t);var r=this;return new this.s.promiseLibrary(function(t,n){p(r,e,function(e,r){e?n(e):t(r)})})},u.prototype.find=function(e,t){e=e||{},t=t||{};var r=this.s._filesCollection.find(e);return null!=t.batchSize&&r.batchSize(t.batchSize),null!=t.limit&&r.limit(t.limit),null!=t.maxTimeMS&&r.maxTimeMS(t.maxTimeMS),null!=t.noCursorTimeout&&r.addCursorFlag("noCursorTimeout",t.noCursorTimeout),null!=t.skip&&r.skip(t.skip),null!=t.sort&&r.sort(t.sort),r},u.prototype.openDownloadStreamByName=function(e,t){var r={uploadDate:-1},n=null;t&&null!=t.revision&&(t.revision>=0?(r={uploadDate:1},n=t.revision):n=-t.revision-1);var i={filename:e};return t={sort:r,skip:n,start:t&&t.start,end:t&&t.end},new o(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,i,t)},u.prototype.rename=function(e,t,r){if("function"==typeof r)return h(this,e,t,r);var n=this;return new this.s.promiseLibrary(function(r,o){h(n,e,t,function(e,t){e?o(e):r(t)})})},u.prototype.drop=function(e){if("function"==typeof e)return d(this,e);var t=this;return new this.s.promiseLibrary(function(e,r){d(t,function(t,n){t?r(t):e(n)})})}},283:function(e,t,r){var n=r(18),o=r(4);function i(e,t,r,o,i){this.s={bytesRead:0,chunks:e,cursor:null,expected:0,files:t,filter:o,init:!1,expectedEnd:0,file:null,options:i,readPreference:r},n.Readable.call(this)}function s(e){if(e.s.init)throw new Error("You cannot change options after the stream has enteredflowing mode!")}function a(e,t){e.emit("error",t)}e.exports=i,o.inherits(i,n.Readable),i.prototype._read=function(){var e=this;this.destroyed||function(e,t){if(e.s.file)return t();e.s.init||(!function(e){var t={};e.s.readPreference&&(t.readPreference=e.s.readPreference);e.s.options&&e.s.options.sort&&(t.sort=e.s.options.sort);e.s.options&&e.s.options.skip&&(t.skip=e.s.options.skip);e.s.files.findOne(e.s.filter,t,function(t,r){if(t)return a(e,t);if(!r){var n=e.s.filter._id?e.s.filter._id.toString():e.s.filter.filename,o="FileNotFound: file "+n+" was not found",i=new Error(o);return i.code="ENOENT",a(e,i)}if(r.length<=0)e.push(null);else if(e.destroyed)e.emit("close");else{e.s.bytesToSkip=function(e,t,r){if(r&&null!=r.start){if(r.start>t.length)throw new Error("Stream start ("+r.start+") must not be more than the length of the file ("+t.length+")");if(r.start<0)throw new Error("Stream start ("+r.start+") must not be negative");if(null!=r.end&&r.end<r.start)throw new Error("Stream start ("+r.start+") must not be greater than stream end ("+r.end+")");return e.s.bytesRead=Math.floor(r.start/t.chunkSize)*t.chunkSize,e.s.expected=Math.floor(r.start/t.chunkSize),r.start-e.s.bytesRead}}(e,r,e.s.options);var s={files_id:r._id};if(e.s.options&&null!=e.s.options.start){var l=Math.floor(e.s.options.start/r.chunkSize);l>0&&(s.n={$gte:l})}e.s.cursor=e.s.chunks.find(s).sort({n:1}),e.s.readPreference&&e.s.cursor.setReadPreference(e.s.readPreference),e.s.expectedEnd=Math.ceil(r.length/r.chunkSize),e.s.file=r,e.s.bytesToTrim=function(e,t,r,n){if(n&&null!=n.end){if(n.end>t.length)throw new Error("Stream end ("+n.end+") must not be more than the length of the file ("+t.length+")");if(n.start<0)throw new Error("Stream end ("+n.end+") must not be negative");var o=null!=n.start?Math.floor(n.start/t.chunkSize):0;return r.limit(Math.ceil(n.end/t.chunkSize)-o),e.s.expectedEnd=Math.ceil(n.end/t.chunkSize),Math.ceil(n.end/t.chunkSize)*t.chunkSize-n.end}}(e,r,e.s.cursor,e.s.options),e.emit("file",r)}})}(e),e.s.init=!0);e.once("file",function(){t()})}(e,function(){!function(e){if(e.destroyed)return;e.s.cursor.next(function(t,r){if(!e.destroyed){if(t)return a(e,t);if(!r)return e.push(null),e.s.cursor.close(function(t){if(t)return a(e,t);e.emit("close")});var n=e.s.file.length-e.s.bytesRead,o=e.s.expected++,i=Math.min(e.s.file.chunkSize,n);if(r.n>o){var s="ChunkIsMissing: Got unexpected n: "+r.n+", expected: "+o;return a(e,new Error(s))}if(r.n<o)return s="ExtraChunk: Got unexpected n: "+r.n+", expected: "+o,a(e,new Error(s));var l=Buffer.isBuffer(r.data)?r.data:r.data.buffer;if(l.length!==i)return n<=0?(s="ExtraChunk: Got unexpected n: "+r.n,a(e,new Error(s))):(s="ChunkIsWrongSize: Got unexpected length: "+l.length+", expected: "+i,a(e,new Error(s)));if(e.s.bytesRead+=l.length,0===l.length)return e.push(null);var c=null,u=null;null!=e.s.bytesToSkip&&(c=e.s.bytesToSkip,e.s.bytesToSkip=0),o===e.s.expectedEnd&&null!=e.s.bytesToTrim&&(u=e.s.bytesToTrim),e.s.options.end&&e.s.options.end-e.s.bytesToSkip<l.length&&(u=e.s.options.end-e.s.bytesToSkip),null==c&&null==u||(l=l.slice(c||0,u||l.length)),e.push(l)}})}(e)})},i.prototype.start=function(e){return s(this),this.s.options.start=e,this},i.prototype.end=function(e){return s(this),this.s.options.end=e,this},i.prototype.abort=function(e){var t=this;this.push(null),this.destroyed=!0,this.s.cursor?this.s.cursor.close(function(r){t.emit("close"),e&&e(r)}):(this.s.init||t.emit("close"),e&&e())}},284:function(e,t,r){var n=r(5),o=r(15),i=r(18),s=r(4),a=26;function l(e,t,r){if(r=r||{},this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=t,this.files=e.s._filesCollection,this.options=r,this.done=!1,this.id=r.id?r.id:n.BSON.ObjectId(),this.chunkSizeBytes=this.options.chunkSizeBytes,this.bufToStore=new Buffer(this.chunkSizeBytes),this.length=0,this.md5=o.createHash("md5"),this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1,promiseLibrary:this.bucket.s.promiseLibrary},!this.bucket.s.calledOpenUploadStream){this.bucket.s.calledOpenUploadStream=!0;var i=this;!function(e,t){e.files.findOne({},{_id:1},function(r,n){return r?t(r):n?t():void e.files.listIndexes().toArray(function(r,n){if(r){if(r.code===a){var o={filename:1,uploadDate:1};return void e.files.createIndex(o,{background:!1},function(r){if(r)return t(r);p(e,t)})}return t(r)}var i=!1;if(n.forEach(function(e){var t=Object.keys(e.key);2===t.length&&1===e.key.filename&&1===e.key.uploadDate&&(i=!0)}),i)p(e,t);else{o={filename:1,uploadDate:1};var s=d(e);s.background=!1,e.files.createIndex(o,s,function(r){if(r)return t(r);p(e,t)})}})})}(this,function(){i.bucket.s.checkedIndexes=!0,i.bucket.emit("index")})}}function c(e,t,r){if(!e.state.errored){if(e.state.errored=!0,r)return r(t);e.emit("error",t)}}function u(e,t,r){return{_id:n.BSON.ObjectId(),files_id:e,n:t,data:r}}function p(e,t){e.chunks.listIndexes().toArray(function(r,n){if(r){if(r.code===a){var o={files_id:1,n:1};return void e.chunks.createIndex(o,{background:!1,unique:!0},function(e){if(e)return t(e);t()})}return t(r)}var i=!1;if(n.forEach(function(e){e.key&&(2===Object.keys(e.key).length&&1===e.key.files_id&&1===e.key.n&&(i=!0))}),i)t();else{o={files_id:1,n:1};var s=d(e);s.background=!1,s.unique=!0,e.chunks.createIndex(o,s,function(e){if(e)return t(e);t()})}})}function h(e,t){if(e.done)return!0;if(e.state.streamEnd&&0===e.state.outstandingRequests&&!e.state.errored){e.done=!0;var r=function(e,t,r,n,o,i,s,a){var l={_id:e,length:t,chunkSize:r,uploadDate:new Date,md5:n,filename:o};i&&(l.contentType=i);s&&(l.aliases=s);a&&(l.metadata=a);return l}(e.id,e.length,e.chunkSizeBytes,e.md5.digest("hex"),e.filename,e.options.contentType,e.options.aliases,e.options.metadata);return!g(e,t)&&(e.files.insert(r,d(e),function(n){if(n)return c(e,n,t);e.emit("finish",r)}),!0)}return!1}function d(e){var t={};return e.options.writeConcern&&(t.w=e.options.writeConcern.w,t.wtimeout=e.options.writeConcern.wtimeout,t.j=e.options.writeConcern.j),t}function f(e,t){return e.bucket.s.checkedIndexes?t(!1):(e.bucket.once("index",function(){t(!0)}),!0)}function m(e,t){if(0===e.pos)return h(e,t);++e.state.outstandingRequests;var r=new Buffer(e.pos);e.bufToStore.copy(r,0,0,e.pos),e.md5.update(r);var n=u(e.id,e.n,r);if(g(e,t))return!1;e.chunks.insert(n,d(e),function(t){if(t)return c(e,t);--e.state.outstandingRequests,h(e)})}function g(e,t){return!!e.state.aborted&&("function"==typeof t&&t(new Error("this stream has been aborted")),!0)}e.exports=l,s.inherits(l,i.Writable),l.prototype.write=function(e,t,r){var n=this;return f(this,function(){return function(e,t,r,n){if(g(e,n))return!1;var o=Buffer.isBuffer(t)?t:new Buffer(t,r);if(e.length+=o.length,e.pos+o.length<e.chunkSizeBytes)return o.copy(e.bufToStore,e.pos),e.pos+=o.length,n&&n(),!0;var i=o.length,s=e.chunkSizeBytes-e.pos,a=Math.min(s,o.length),l=0;for(;i>0;){var p=o.length-i;if(o.copy(e.bufToStore,e.pos,p,p+a),e.pos+=a,0===(s-=a)){e.md5.update(e.bufToStore);var f=u(e.id,e.n,e.bufToStore);if(++e.state.outstandingRequests,++l,g(e,n))return!1;e.chunks.insert(f,d(e),function(t){if(t)return c(e,t);--e.state.outstandingRequests,--l||(e.emit("drain",f),n&&n(),h(e))}),s=e.chunkSizeBytes,e.pos=0,++e.n}i-=a,a=Math.min(s,i)}return!1}(n,e,t,r)})},l.prototype.abort=function(e){if(this.state.streamEnd){var t=new Error("Cannot abort a stream that has already completed");return"function"==typeof e?e(t):this.state.promiseLibrary.reject(t)}if(this.state.aborted)return t=new Error("Cannot call abort() on a stream twice"),"function"==typeof e?e(t):this.state.promiseLibrary.reject(t);this.state.aborted=!0,this.chunks.deleteMany({files_id:this.id},function(t){"function"==typeof e&&e(t)})},l.prototype.end=function(e,t,r){var n=this;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),g(this,r)||(this.state.streamEnd=!0,r&&this.once("finish",function(e){r(null,e)}),e?this.write(e,t,function(){m(n)}):f(this,function(){m(n)}))}},29:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(0);class ObjectEqualityComparator{hashCode(e){return null==e?0:e.hashCode()}equals(e,t){return null==e?null==t:e.equals(t)}}ObjectEqualityComparator.INSTANCE=new ObjectEqualityComparator,n([o.Override],ObjectEqualityComparator.prototype,"hashCode",null),n([o.Override],ObjectEqualityComparator.prototype,"equals",null),t.ObjectEqualityComparator=ObjectEqualityComparator},299:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(9),i=r(0),s=r(70);class ANTLRInputStream{constructor(e){this.p=0,this.data=e,this.n=e.length}reset(){this.p=0}consume(){if(this.p>=this.n)throw o(this.LA(1)===s.IntStream.EOF),new Error("cannot consume EOF");this.p<this.n&&this.p++}LA(e){return 0===e?0:e<0&&(e++,this.p+e-1<0)?s.IntStream.EOF:this.p+e-1>=this.n?s.IntStream.EOF:this.data.charCodeAt(this.p+e-1)}LT(e){return this.LA(e)}get index(){return this.p}get size(){return this.n}mark(){return-1}release(e){}seek(e){if(e<=this.p)this.p=e;else for(e=Math.min(e,this.n);this.p<e;)this.consume()}getText(e){let t=e.a,r=e.b;r>=this.n&&(r=this.n-1);let n=r-t+1;return t>=this.n?"":this.data.substr(t,n)}get sourceName(){return this.name?this.name:s.IntStream.UNKNOWN_SOURCE_NAME}toString(){return this.data}}n([i.Override],ANTLRInputStream.prototype,"consume",null),n([i.Override],ANTLRInputStream.prototype,"LA",null),n([i.Override],ANTLRInputStream.prototype,"index",null),n([i.Override],ANTLRInputStream.prototype,"size",null),n([i.Override],ANTLRInputStream.prototype,"mark",null),n([i.Override],ANTLRInputStream.prototype,"release",null),n([i.Override],ANTLRInputStream.prototype,"seek",null),n([i.Override],ANTLRInputStream.prototype,"getText",null),n([i.Override],ANTLRInputStream.prototype,"sourceName",null),n([i.Override],ANTLRInputStream.prototype,"toString",null),t.ANTLRInputStream=ANTLRInputStream},3:function(e,t,r){"use strict";var n=r(5).MongoError,o=r(28),i=r(5).ReadPreference,s=t.formatSortValue=function(e){switch((""+e).toLowerCase()){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new Error("Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]")}},a=t.formattedOrderClause=function(e){var t={};if(null==e)return null;if(Array.isArray(e)){if(0===e.length)return null;for(var r=0;r<e.length;r++)e[r].constructor==String?t[e[r]]=1:t[e[r][0]]=s(e[r][1])}else if(null!=e&&"object"==typeof e)t=e;else{if("string"!=typeof e)throw new Error("Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]");t[e]=1}return t},l=t.isObject=function(e){return"[object Object]"==Object.prototype.toString.call(e)},c=Object.assign?Object.assign:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var o=Object.keys(Object(n)),i=0,s=o.length;i<s;i++){var a=o[i],l=Object.getOwnPropertyDescriptor(n,a);void 0!==l&&l.enumerable&&(t[a]=n[a])}}return t},u=["w","j","wtimeout","fsync"];t.filterOptions=function(e,t){var r={};for(var n in e)-1!=t.indexOf(n)&&(r[n]=e[n]);return r},t.mergeOptions=function(e,t){for(var r in t)e[r]=t[r];return e},t.translateOptions=function(e,t){var r={sslCA:"ca",sslCRL:"crl",sslValidate:"rejectUnauthorized",sslKey:"key",sslCert:"cert",sslPass:"passphrase",socketTimeoutMS:"socketTimeout",connectTimeoutMS:"connectionTimeout",replicaSet:"setName",rs_name:"setName",secondaryAcceptableLatencyMS:"acceptableLatency",connectWithNoPrimary:"secondaryOnlyConnectionAllowed",acceptableLatencyMS:"localThresholdMS"};for(var n in t)r[n]?e[r[n]]=t[n]:e[n]=t[n];return e},t.shallowClone=function(e){var t={};for(var r in e)t[r]=e[r];return t},t.getSingleProperty=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:function(){return r}})},t.checkCollectionName=function(e){if("string"!=typeof e)throw new n("collection name must be a String");if(!e||-1!=e.indexOf(".."))throw new n("collection names cannot be empty");if(-1!=e.indexOf("$")&&null==e.match(/((^\$cmd)|(oplog\.\$main))/))throw new n("collection names must not contain '$'");if(null!=e.match(/^\.|\.$/))throw new n("collection names must not start or end with '.'");if(~e.indexOf("\0"))throw new n("collection names cannot contain a null character")},t.toError=function(e){if(e instanceof Error)return e;for(var t=e.err||e.errmsg||e.errMessage||e,r=n.create({message:t,driver:!0}),o="object"==typeof e?Object.keys(e):[],i=0;i<o.length;i++)try{r[o[i]]=e[o[i]]}catch(e){}return r},t.formattedOrderClause=a,t.parseIndexOptions=function(e){var t,r={},n=[];return"string"==typeof e?(n.push(e+"_1"),r[e]=1):Array.isArray(e)?e.forEach(function(e){"string"==typeof e?(n.push(e+"_1"),r[e]=1):Array.isArray(e)?(n.push(e[0]+"_"+(e[1]||1)),r[e[0]]=e[1]||1):l(e)&&(t=Object.keys(e)).forEach(function(t){n.push(t+"_"+e[t]),r[t]=e[t]})}):l(e)&&(t=Object.keys(e)).forEach(function(t){n.push(t+"_"+e[t]),r[t]=e[t]}),{name:n.join("_"),keys:t,fieldHash:r}},t.normalizeHintField=function(e){var t=null;if("string"==typeof e)t=e;else if(Array.isArray(e))t={},e.forEach(function(e){t[e]=1});else if(null!=e&&"object"==typeof e)for(var r in t={},e)t[r]=e[r];return t},t.handleCallback=function(e,t,r,n){try{if(null==e)return;if(e)return n?e(t,r,n):e(t,r)}catch(t){return process.nextTick(function(){throw t}),!1}return!0},t.decorateCommand=function(e,t,r){for(var n in t)null==r[n]&&(e[n]=t[n]);return e},t.isObject=l,t.debugOptions=function(e,t){var r={};return e.forEach(function(e){r[e]=t[e]}),r},t.MAX_JS_INT=9007199254740992,t.assign=c,t.mergeOptionsAndWriteConcern=function(e,t,r,n){for(var o=0;o<r.length;o++)e[r[o]]||null==t[r[o]]||(e[r[o]]=t[r[o]]);if(!n)return e;var i=!1;for(o=0;o<u.length;o++)if(e[u[o]]){i=!0;break}if(!i)for(o=0;o<u.length;o++)t[u[o]]&&(e[u[o]]=t[u[o]]);return e},t.getReadPreference=function(e){var t=null;if(!e.readPreference)return e;if((t=e.readPreference)instanceof o)e.readPreference=new i(t.mode,t.tags,{maxStalenessSeconds:t.maxStalenessSeconds});else if("string"==typeof t)e.readPreference=new i(t);else if(t&&!(t instanceof o)&&"object"==typeof t){var r=t.mode||t.preference;r&&"string"==typeof r&&(e.readPreference=new i(r,t.tags,{maxStalenessSeconds:t.maxStalenessSeconds}))}return e}},300:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(301),s=r(0),a=r(13);let l=class CommonTokenStream extends i.BufferedTokenStream{constructor(e,t=a.Token.DEFAULT_CHANNEL){super(e),this.channel=t}adjustSeekIndex(e){return this.nextTokenOnChannel(e,this.channel)}tryLB(e){if(this.p-e<0)return;let t=this.p,r=1;for(;r<=e&&t>0;)t=this.previousTokenOnChannel(t-1,this.channel),r++;return t<0?void 0:this.tokens[t]}tryLT(e){if(this.lazyInit(),0===e)throw new RangeError("0 is not a valid lookahead index");if(e<0)return this.tryLB(-e);let t=this.p,r=1;for(;r<e;)this.sync(t+1)&&(t=this.nextTokenOnChannel(t+1,this.channel)),r++;return this.tokens[t]}getNumberOfOnChannelTokens(){let e=0;this.fill();for(let t=0;t<this.tokens.length;t++){let r=this.tokens[t];if(r.channel===this.channel&&e++,r.type===a.Token.EOF)break}return e}};n([s.Override],l.prototype,"adjustSeekIndex",null),n([s.Override],l.prototype,"tryLB",null),n([s.Override],l.prototype,"tryLT",null),l=n([o(0,s.NotNull)],l),t.CommonTokenStream=l},301:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(9),s=r(116),a=r(23),l=r(71),c=r(0),u=r(13);let p=class BufferedTokenStream{constructor(e){if(this.tokens=[],this.p=-1,this.fetchedEOF=!1,null==e)throw new Error("tokenSource cannot be null");this._tokenSource=e}get tokenSource(){return this._tokenSource}get index(){return this.p}mark(){return 0}release(e){}seek(e){this.lazyInit(),this.p=this.adjustSeekIndex(e)}get size(){return this.tokens.length}consume(){let e;if(!(e=this.p>=0&&(this.fetchedEOF?this.p<this.tokens.length-1:this.p<this.tokens.length))&&this.LA(1)===u.Token.EOF)throw new Error("cannot consume EOF");this.sync(this.p+1)&&(this.p=this.adjustSeekIndex(this.p+1))}sync(e){i(e>=0);let t=e-this.tokens.length+1;if(t>0){return this.fetch(t)>=t}return!0}fetch(e){if(this.fetchedEOF)return 0;for(let t=0;t<e;t++){let e=this.tokenSource.nextToken();if(this.isWritableToken(e)&&(e.tokenIndex=this.tokens.length),this.tokens.push(e),e.type===u.Token.EOF)return this.fetchedEOF=!0,t+1}return e}get(e){if(e<0||e>=this.tokens.length)throw new RangeError("token index "+e+" out of range 0.."+(this.tokens.length-1));return this.tokens[e]}getRange(e,t){if(e<0||t<0)return[];this.lazyInit();let r=new Array;t>=this.tokens.length&&(t=this.tokens.length-1);for(let n=e;n<=t;n++){let e=this.tokens[n];if(e.type===u.Token.EOF)break;r.push(e)}return r}LA(e){let t=this.LT(e);return t?t.type:u.Token.INVALID_TYPE}tryLB(e){if(!(this.p-e<0))return this.tokens[this.p-e]}LT(e){let t=this.tryLT(e);if(void 0===t)throw new RangeError("requested lookback index out of range");return t}tryLT(e){if(this.lazyInit(),0===e)throw new RangeError("0 is not a valid lookahead index");if(e<0)return this.tryLB(-e);let t=this.p+e-1;return this.sync(t),t>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[t]}adjustSeekIndex(e){return e}lazyInit(){-1===this.p&&this.setup()}setup(){this.sync(0),this.p=this.adjustSeekIndex(0)}set tokenSource(e){this._tokenSource=e,this.tokens.length=0,this.p=-1,this.fetchedEOF=!1}getTokens(e,t,r){if(this.lazyInit(),e=e||0,t=t||this.tokens.length-1,e<0||t>=this.tokens.length||t<0||e>=this.tokens.length)throw new RangeError("start "+e+" or stop "+t+" not in 0.."+(this.tokens.length-1));if(0===e&&t===this.tokens.length-1)return this.tokens;if(e>t)return[];if(null==r)return this.tokens.slice(e,t+1);"number"==typeof r&&(r=(new Set).add(r));let n=r,o=this.tokens.slice(e,t+1);return o=o.filter(e=>n.has(e.type))}nextTokenOnChannel(e,t){if(this.sync(e),e>=this.size)return this.size-1;let r=this.tokens[e];for(;r.channel!==t;){if(r.type===u.Token.EOF)return e;e++,this.sync(e),r=this.tokens[e]}return e}previousTokenOnChannel(e,t){if(this.sync(e),e>=this.size)return this.size-1;for(;e>=0;){let r=this.tokens[e];if(r.type===u.Token.EOF||r.channel===t)return e;e--}return e}getHiddenTokensToRight(e,t=-1){if(this.lazyInit(),e<0||e>=this.tokens.length)throw new RangeError(e+" not in 0.."+(this.tokens.length-1));let r,n=this.nextTokenOnChannel(e+1,l.Lexer.DEFAULT_TOKEN_CHANNEL),o=e+1;return r=-1===n?this.size-1:n,this.filterForChannel(o,r,t)}getHiddenTokensToLeft(e,t=-1){if(this.lazyInit(),e<0||e>=this.tokens.length)throw new RangeError(e+" not in 0.."+(this.tokens.length-1));if(0===e)return[];let r=this.previousTokenOnChannel(e-1,l.Lexer.DEFAULT_TOKEN_CHANNEL);if(r===e-1)return[];let n=r+1,o=e-1;return this.filterForChannel(n,o,t)}filterForChannel(e,t,r){let n=new Array;for(let o=e;o<=t;o++){let e=this.tokens[o];-1===r?e.channel!==l.Lexer.DEFAULT_TOKEN_CHANNEL&&n.push(e):e.channel===r&&n.push(e)}return n}get sourceName(){return this.tokenSource.sourceName}getText(e){void 0===e?e=a.Interval.of(0,this.size-1):e instanceof a.Interval||(e=e.sourceInterval);let t=e.a,r=e.b;if(t<0||r<0)return"";this.fill(),r>=this.tokens.length&&(r=this.tokens.length-1);let n="";for(let e=t;e<=r;e++){let t=this.tokens[e];if(t.type===u.Token.EOF)break;n+=t.text}return n.toString()}getTextFromRange(e,t){return this.isToken(e)&&this.isToken(t)?this.getText(a.Interval.of(e.tokenIndex,t.tokenIndex)):""}fill(){this.lazyInit();for(;;){if(this.fetch(1e3)<1e3)return}}isWritableToken(e){return e instanceof s.CommonToken}isToken(e){return e instanceof s.CommonToken}};n([c.NotNull],p.prototype,"_tokenSource",void 0),n([c.Override],p.prototype,"tokenSource",null),n([c.Override],p.prototype,"index",null),n([c.Override],p.prototype,"mark",null),n([c.Override],p.prototype,"release",null),n([c.Override],p.prototype,"seek",null),n([c.Override],p.prototype,"size",null),n([c.Override],p.prototype,"consume",null),n([c.Override],p.prototype,"get",null),n([c.Override],p.prototype,"LA",null),n([c.NotNull,c.Override],p.prototype,"LT",null),n([c.Override],p.prototype,"sourceName",null),n([c.NotNull,c.Override],p.prototype,"getText",null),n([c.NotNull,c.Override],p.prototype,"getTextFromRange",null),p=n([o(0,c.NotNull)],p),t.BufferedTokenStream=p},302:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(116),i=r(23),s=r(0);class CommonTokenFactory{constructor(e=!1){this.copyText=e}create(e,t,r,n,s,a,l,c){let u=new o.CommonToken(t,r,e,n,s,a);return u.line=l,u.charPositionInLine=c,null==r&&this.copyText&&null!=e.stream&&(u.text=e.stream.getText(i.Interval.of(s,a))),u}createSimple(e,t){return new o.CommonToken(e,t)}}n([s.Override],CommonTokenFactory.prototype,"create",null),n([s.Override],CommonTokenFactory.prototype,"createSimple",null),t.CommonTokenFactory=CommonTokenFactory,function(e){e.DEFAULT=new e}(CommonTokenFactory=t.CommonTokenFactory||(t.CommonTokenFactory={}))},303:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0});class ConsoleErrorListener{syntaxError(e,t,r,n,o,i){console.error(`line ${r}:${n} ${o}`)}}ConsoleErrorListener.INSTANCE=new ConsoleErrorListener,t.ConsoleErrorListener=ConsoleErrorListener},304:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(174),s=r(0),a=r(62);let l=class LexerDFASerializer extends i.DFASerializer{constructor(e){super(e,a.VocabularyImpl.EMPTY_VOCABULARY)}getEdgeLabel(e){return"'"+String.fromCharCode(e)+"'"}};n([s.Override,s.NotNull],l.prototype,"getEdgeLabel",null),l=n([o(0,s.NotNull)],l),t.LexerDFASerializer=l},305:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(121),s=r(42),a=r(92),l=r(61),c=r(52),u=r(0),p=r(122),h=r(29),d=r(24),f=r(74),m=r(124),g=r(13),y=r(179);let v=class LL1Analyzer{constructor(e){this.atn=e}getDecisionLookahead(e){if(null==e)return;let t=new Array(e.numberOfTransitions);for(let r=0;r<e.numberOfTransitions;r++){let n=new c.IntervalSet;t[r]=n;let o=new s.Array2DHashSet(h.ObjectEqualityComparator.INSTANCE),i=!1;this._LOOK(e.transition(r).target,void 0,d.PredictionContext.EMPTY_LOCAL,n,o,new l.BitSet,i,!1),(0===n.size||n.contains(LL1Analyzer.HIT_PRED))&&(n=void 0,t[r]=n)}return t}LOOK(e,t,r){if(void 0===r){if(null==e.atn)throw new Error("Illegal state");r=e.atn.ruleToStopState[e.ruleIndex]}else null===r&&(r=void 0);let n=new c.IntervalSet;return this._LOOK(e,r,t,n,new s.Array2DHashSet,new l.BitSet,!0,!0),n}_LOOK(e,t,r,n,o,s,l,u){let h=a.ATNConfig.create(e,0,r);if(!o.add(h))return;if(e===t){if(d.PredictionContext.isEmptyLocal(r))return void n.add(g.Token.EPSILON);if(r.isEmpty)return void(u&&n.add(g.Token.EOF))}if(e instanceof f.RuleStopState){if(r.isEmpty&&!d.PredictionContext.isEmptyLocal(r))return void(u&&n.add(g.Token.EOF));let i=s.get(e.ruleIndex);try{s.clear(e.ruleIndex);for(let e=0;e<r.size;e++){if(r.getReturnState(e)===d.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let i=this.atn.states[r.getReturnState(e)];this._LOOK(i,t,r.getParent(e),n,o,s,l,u)}}finally{i&&s.set(e.ruleIndex)}}let v=e.numberOfTransitions;for(let a=0;a<v;a++){let h=e.transition(a);if(h instanceof m.RuleTransition){if(s.get(h.ruleIndex))continue;let e=r.getChild(h.followState.stateNumber);try{s.set(h.ruleIndex),this._LOOK(h.target,t,e,n,o,s,l,u)}finally{s.clear(h.ruleIndex)}}else if(h instanceof i.AbstractPredicateTransition)l?this._LOOK(h.target,t,r,n,o,s,l,u):n.add(LL1Analyzer.HIT_PRED);else if(h.isEpsilon)this._LOOK(h.target,t,r,n,o,s,l,u);else if(h instanceof y.WildcardTransition)n.addAll(c.IntervalSet.of(g.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType));else{let e=h.label;null!=e&&(h instanceof p.NotSetTransition&&(e=e.complement(c.IntervalSet.of(g.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType))),n.addAll(e))}}}};v.HIT_PRED=g.Token.INVALID_TYPE,n([u.NotNull],v.prototype,"atn",void 0),n([u.NotNull,o(0,u.NotNull),o(1,u.NotNull)],v.prototype,"LOOK",null),n([o(0,u.NotNull),o(2,u.NotNull),o(3,u.NotNull),o(4,u.NotNull),o(5,u.NotNull)],v.prototype,"_LOOK",null),v=n([o(0,u.NotNull)],v),t.LL1Analyzer=v},306:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(91),s=r(307),a=r(11),l=r(0);let c=class LexerActionExecutor{constructor(e){this._lexerActions=e;let t=a.MurmurHash.initialize();for(let r of e)t=a.MurmurHash.update(t,r);this.cachedHashCode=a.MurmurHash.finish(t,e.length)}static append(e,t){if(!e)return new LexerActionExecutor([t]);let r=e._lexerActions.slice(0);return r.push(t),new LexerActionExecutor(r)}fixOffsetBeforeMatch(e){let t;for(let r=0;r<this._lexerActions.length;r++)!this._lexerActions[r].isPositionDependent||this._lexerActions[r]instanceof s.LexerIndexedCustomAction||(t||(t=this._lexerActions.slice(0)),t[r]=new s.LexerIndexedCustomAction(e,this._lexerActions[r]));return t?new LexerActionExecutor(t):this}get lexerActions(){return this._lexerActions}execute(e,t,r){let n=!1,o=t.index;try{for(let i of this._lexerActions){if(i instanceof s.LexerIndexedCustomAction){let e=i.offset;t.seek(r+e),i=i.action,n=r+e!==o}else i.isPositionDependent&&(t.seek(o),n=!1);i.execute(e)}}finally{n&&t.seek(o)}}hashCode(){return this.cachedHashCode}equals(e){return e===this||e instanceof LexerActionExecutor&&(this.cachedHashCode===e.cachedHashCode&&i.ArrayEqualityComparator.INSTANCE.equals(this._lexerActions,e._lexerActions))}};n([l.NotNull],c.prototype,"_lexerActions",void 0),n([l.NotNull],c.prototype,"lexerActions",null),n([o(0,l.NotNull)],c.prototype,"execute",null),n([l.Override],c.prototype,"hashCode",null),n([l.Override],c.prototype,"equals",null),n([l.NotNull,o(1,l.NotNull)],c,"append",null),c=n([o(0,l.NotNull)],c),t.LexerActionExecutor=c},307:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(11),s=r(0);let a=class LexerIndexedCustomAction{constructor(e,t){this._offset=e,this._action=t}get offset(){return this._offset}get action(){return this._action}get actionType(){return this._action.actionType}get isPositionDependent(){return!0}execute(e){this._action.execute(e)}hashCode(){let e=i.MurmurHash.initialize();return e=i.MurmurHash.update(e,this._offset),e=i.MurmurHash.update(e,this._action),i.MurmurHash.finish(e,2)}equals(e){return e===this||e instanceof LexerIndexedCustomAction&&(this._offset===e._offset&&this._action.equals(e._action))}};n([s.NotNull],a.prototype,"action",null),n([s.Override],a.prototype,"actionType",null),n([s.Override],a.prototype,"isPositionDependent",null),n([s.Override],a.prototype,"execute",null),n([s.Override],a.prototype,"hashCode",null),n([s.Override],a.prototype,"equals",null),a=n([o(1,s.NotNull)],a),t.LexerIndexedCustomAction=a},308:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(72),i=r(0);class OrderedATNConfigSet extends o.ATNConfigSet{constructor(e,t){null!=e&&null!=t?super(e,t):super()}clone(e){let t=new OrderedATNConfigSet(this,e);return!e&&this.isReadOnly&&t.addAll(this),t}getKey(e){return{state:0,alt:e.hashCode()}}canMerge(e,t,r){return e.equals(r)}}n([i.Override],OrderedATNConfigSet.prototype,"clone",null),n([i.Override],OrderedATNConfigSet.prototype,"getKey",null),n([i.Override],OrderedATNConfigSet.prototype,"canMerge",null),t.OrderedATNConfigSet=OrderedATNConfigSet},309:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(95);class BasicBlockStartState extends o.BlockStartState{get stateType(){return 3}}n([r(0).Override],BasicBlockStartState.prototype,"stateType",null),t.BasicBlockStartState=BasicBlockStartState},310:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(51);class BlockEndState extends o.ATNState{get stateType(){return 8}}n([r(0).Override],BlockEndState.prototype,"stateType",null),t.BlockEndState=BlockEndState},311:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),s=r(43);let a=class EpsilonTransition extends s.Transition{constructor(e,t=-1){super(e),this._outermostPrecedenceReturn=t}get outermostPrecedenceReturn(){return this._outermostPrecedenceReturn}get serializationType(){return 1}get isEpsilon(){return!0}matches(e,t,r){return!1}toString(){return"epsilon"}};n([i.Override],a.prototype,"serializationType",null),n([i.Override],a.prototype,"isEpsilon",null),n([i.Override],a.prototype,"matches",null),n([i.Override,i.NotNull],a.prototype,"toString",null),a=n([o(0,i.NotNull)],a),t.EpsilonTransition=a},312:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(11),s=r(0);class LexerChannelAction{constructor(e){this._channel=e}get channel(){return this._channel}get actionType(){return 0}get isPositionDependent(){return!1}execute(e){e.channel=this._channel}hashCode(){let e=i.MurmurHash.initialize();return e=i.MurmurHash.update(e,this.actionType),e=i.MurmurHash.update(e,this._channel),i.MurmurHash.finish(e,2)}equals(e){return e===this||e instanceof LexerChannelAction&&this._channel===e._channel}toString(){return`channel(${this._channel})`}}n([s.Override],LexerChannelAction.prototype,"actionType",null),n([s.Override],LexerChannelAction.prototype,"isPositionDependent",null),n([s.Override,o(0,s.NotNull)],LexerChannelAction.prototype,"execute",null),n([s.Override],LexerChannelAction.prototype,"hashCode",null),n([s.Override],LexerChannelAction.prototype,"equals",null),n([s.Override],LexerChannelAction.prototype,"toString",null),t.LexerChannelAction=LexerChannelAction},313:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(11),s=r(0);class LexerCustomAction{constructor(e,t){this._ruleIndex=e,this._actionIndex=t}get ruleIndex(){return this._ruleIndex}get actionIndex(){return this._actionIndex}get actionType(){return 1}get isPositionDependent(){return!0}execute(e){e.action(void 0,this._ruleIndex,this._actionIndex)}hashCode(){let e=i.MurmurHash.initialize();return e=i.MurmurHash.update(e,this.actionType),e=i.MurmurHash.update(e,this._ruleIndex),e=i.MurmurHash.update(e,this._actionIndex),i.MurmurHash.finish(e,3)}equals(e){return e===this||e instanceof LexerCustomAction&&(this._ruleIndex===e._ruleIndex&&this._actionIndex===e._actionIndex)}}n([s.Override],LexerCustomAction.prototype,"actionType",null),n([s.Override],LexerCustomAction.prototype,"isPositionDependent",null),n([s.Override,o(0,s.NotNull)],LexerCustomAction.prototype,"execute",null),n([s.Override],LexerCustomAction.prototype,"hashCode",null),n([s.Override],LexerCustomAction.prototype,"equals",null),t.LexerCustomAction=LexerCustomAction},314:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(11),s=r(0);class LexerModeAction{constructor(e){this._mode=e}get mode(){return this._mode}get actionType(){return 2}get isPositionDependent(){return!1}execute(e){e.mode(this._mode)}hashCode(){let e=i.MurmurHash.initialize();return e=i.MurmurHash.update(e,this.actionType),e=i.MurmurHash.update(e,this._mode),i.MurmurHash.finish(e,2)}equals(e){return e===this||e instanceof LexerModeAction&&this._mode===e._mode}toString(){return`mode(${this._mode})`}}n([s.Override],LexerModeAction.prototype,"actionType",null),n([s.Override],LexerModeAction.prototype,"isPositionDependent",null),n([s.Override,o(0,s.NotNull)],LexerModeAction.prototype,"execute",null),n([s.Override],LexerModeAction.prototype,"hashCode",null),n([s.Override],LexerModeAction.prototype,"equals",null),n([s.Override],LexerModeAction.prototype,"toString",null),t.LexerModeAction=LexerModeAction},315:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(11),s=r(0);class LexerMoreAction{constructor(){}get actionType(){return 3}get isPositionDependent(){return!1}execute(e){e.more()}hashCode(){let e=i.MurmurHash.initialize();return e=i.MurmurHash.update(e,this.actionType),i.MurmurHash.finish(e,1)}equals(e){return e===this}toString(){return"more"}}n([s.Override],LexerMoreAction.prototype,"actionType",null),n([s.Override],LexerMoreAction.prototype,"isPositionDependent",null),n([s.Override,o(0,s.NotNull)],LexerMoreAction.prototype,"execute",null),n([s.Override],LexerMoreAction.prototype,"hashCode",null),n([s.Override],LexerMoreAction.prototype,"equals",null),n([s.Override],LexerMoreAction.prototype,"toString",null),t.LexerMoreAction=LexerMoreAction,function(e){e.INSTANCE=new e}(LexerMoreAction=t.LexerMoreAction||(t.LexerMoreAction={}))},316:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(11),s=r(0);class LexerPopModeAction{constructor(){}get actionType(){return 4}get isPositionDependent(){return!1}execute(e){e.popMode()}hashCode(){let e=i.MurmurHash.initialize();return e=i.MurmurHash.update(e,this.actionType),i.MurmurHash.finish(e,1)}equals(e){return e===this}toString(){return"popMode"}}n([s.Override],LexerPopModeAction.prototype,"actionType",null),n([s.Override],LexerPopModeAction.prototype,"isPositionDependent",null),n([s.Override,o(0,s.NotNull)],LexerPopModeAction.prototype,"execute",null),n([s.Override],LexerPopModeAction.prototype,"hashCode",null),n([s.Override],LexerPopModeAction.prototype,"equals",null),n([s.Override],LexerPopModeAction.prototype,"toString",null),t.LexerPopModeAction=LexerPopModeAction,function(e){e.INSTANCE=new e}(LexerPopModeAction=t.LexerPopModeAction||(t.LexerPopModeAction={}))},317:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(11),s=r(0);class LexerPushModeAction{constructor(e){this._mode=e}get mode(){return this._mode}get actionType(){return 5}get isPositionDependent(){return!1}execute(e){e.pushMode(this._mode)}hashCode(){let e=i.MurmurHash.initialize();return e=i.MurmurHash.update(e,this.actionType),e=i.MurmurHash.update(e,this._mode),i.MurmurHash.finish(e,2)}equals(e){return e===this||e instanceof LexerPushModeAction&&this._mode===e._mode}toString(){return`pushMode(${this._mode})`}}n([s.Override],LexerPushModeAction.prototype,"actionType",null),n([s.Override],LexerPushModeAction.prototype,"isPositionDependent",null),n([s.Override,o(0,s.NotNull)],LexerPushModeAction.prototype,"execute",null),n([s.Override],LexerPushModeAction.prototype,"hashCode",null),n([s.Override],LexerPushModeAction.prototype,"equals",null),n([s.Override],LexerPushModeAction.prototype,"toString",null),t.LexerPushModeAction=LexerPushModeAction},318:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(11),s=r(0);class LexerSkipAction{constructor(){}get actionType(){return 6}get isPositionDependent(){return!1}execute(e){e.skip()}hashCode(){let e=i.MurmurHash.initialize();return e=i.MurmurHash.update(e,this.actionType),i.MurmurHash.finish(e,1)}equals(e){return e===this}toString(){return"skip"}}n([s.Override],LexerSkipAction.prototype,"actionType",null),n([s.Override],LexerSkipAction.prototype,"isPositionDependent",null),n([s.Override,o(0,s.NotNull)],LexerSkipAction.prototype,"execute",null),n([s.Override],LexerSkipAction.prototype,"hashCode",null),n([s.Override],LexerSkipAction.prototype,"equals",null),n([s.Override],LexerSkipAction.prototype,"toString",null),t.LexerSkipAction=LexerSkipAction,function(e){e.INSTANCE=new e}(LexerSkipAction=t.LexerSkipAction||(t.LexerSkipAction={}))},319:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(11),s=r(0);class LexerTypeAction{constructor(e){this._type=e}get type(){return this._type}get actionType(){return 7}get isPositionDependent(){return!1}execute(e){e.type=this._type}hashCode(){let e=i.MurmurHash.initialize();return e=i.MurmurHash.update(e,this.actionType),e=i.MurmurHash.update(e,this._type),i.MurmurHash.finish(e,2)}equals(e){return e===this||e instanceof LexerTypeAction&&this._type===e._type}toString(){return`type(${this._type})`}}n([s.Override],LexerTypeAction.prototype,"actionType",null),n([s.Override],LexerTypeAction.prototype,"isPositionDependent",null),n([s.Override,o(0,s.NotNull)],LexerTypeAction.prototype,"execute",null),n([s.Override],LexerTypeAction.prototype,"hashCode",null),n([s.Override],LexerTypeAction.prototype,"equals",null),n([s.Override],LexerTypeAction.prototype,"toString",null),t.LexerTypeAction=LexerTypeAction},32:function(e,t,r){"use strict";var n=r(4).inherits,o=r(4).format,i=r(3).formattedOrderClause,s=r(3).handleCallback,a=r(28),l=r(5).MongoError,c=r(18).Readable||r(76).Readable,u=r(20),p=r(5).Cursor,h=r(5).BSON.Map,d=r(5).ReadPreference,f=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"],m=["numberOfRetries","tailableRetryInterval"],g=Array.prototype.push,y=function(e,t,n,o,i,s){p.apply(this,Array.prototype.slice.call(arguments,0));var a=y.INIT,l=o.numberOfRetries||5,u=o.tailableRetryInterval||500,h=l,d=o.promiseLibrary;d||(d="function"==typeof global.Promise?global.Promise:r(16).Promise),c.call(this,{objectMode:!0}),this.s={numberOfRetries:l,tailableRetryInterval:u,currentNumberOfRetries:h,state:a,streamOptions:{},bson:e,ns:t,cmd:n,options:o,topology:i,topologyOptions:s,promiseLibrary:d,currentDoc:null},1==this.s.options.noCursorTimeout&&this.addCursorFlag("noCursorTimeout",!0),this.sortValue=this.s.cmd.sort;var f=n.cursor&&n.cursor.batchSize?n.cursor&&n.cursor.batchSize:o.cursor&&o.cursor.batchSize?o.cursor.batchSize:1e3;this.setCursorBatchSize(f)};for(var v in n(y,c),p.prototype._next=p.prototype.next,p.prototype)y.prototype[v]=p.prototype[v];var b=y.define=new u("Cursor",y,!0);y.prototype.hasNext=function(e){var t=this;return"function"==typeof e?t.s.currentDoc?e(null,!0):x(t,function(r,n){return r?e(r,null):n?(t.s.currentDoc=n,void e(null,!0)):e(null,!1)}):new this.s.promiseLibrary(function(e,r){t.s.currentDoc?e(!0):x(t,function(n,o){return t.s.state==y.CLOSED||t.isDead()?e(!1):n?r(n):o?(t.s.currentDoc=o,void e(!0)):e(!1)})})},b.classMethod("hasNext",{callback:!0,promise:!0}),y.prototype.next=function(e){var t=this;if("function"==typeof e){if(t.s.currentDoc){var r=t.s.currentDoc;return t.s.currentDoc=null,e(null,r)}return x(t,e)}return new this.s.promiseLibrary(function(e,r){if(t.s.currentDoc){var n=t.s.currentDoc;return t.s.currentDoc=null,e(n)}x(t,function(t,n){if(t)return r(t);e(n)})})},b.classMethod("next",{callback:!0,promise:!0}),y.prototype.filter=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});return this.s.cmd.query=e,this},b.classMethod("filter",{callback:!1,promise:!1,returns:[y]}),y.prototype.maxScan=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});return this.s.cmd.maxScan=e,this},b.classMethod("maxScan",{callback:!1,promise:!1,returns:[y]}),y.prototype.hint=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});return this.s.cmd.hint=e,this},b.classMethod("hint",{callback:!1,promise:!1,returns:[y]}),y.prototype.min=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});return this.s.cmd.min=e,this},b.classMethod("min",{callback:!1,promise:!1,returns:[y]}),y.prototype.max=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});return this.s.cmd.max=e,this},b.classMethod("max",{callback:!1,promise:!1,returns:[y]}),y.prototype.returnKey=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});return this.s.cmd.returnKey=e,this},b.classMethod("returnKey",{callback:!1,promise:!1,returns:[y]}),y.prototype.showRecordId=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});return this.s.cmd.showDiskLoc=e,this},b.classMethod("showRecordId",{callback:!1,promise:!1,returns:[y]}),y.prototype.snapshot=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});return this.s.cmd.snapshot=e,this},b.classMethod("snapshot",{callback:!1,promise:!1,returns:[y]}),y.prototype.setCursorOption=function(e,t){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});if(-1==m.indexOf(e))throw l.create({message:o("option %s not a supported option %s",e,m),driver:!0});return this.s[e]=t,"numberOfRetries"==e&&(this.s.currentNumberOfRetries=t),this},b.classMethod("setCursorOption",{callback:!1,promise:!1,returns:[y]}),y.prototype.addCursorFlag=function(e,t){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});if(-1==f.indexOf(e))throw l.create({message:o("flag %s not a supported flag %s",e,f),driver:!0});if("boolean"!=typeof t)throw l.create({message:o("flag %s must be a boolean value",e),driver:!0});return this.s.cmd[e]=t,this},b.classMethod("addCursorFlag",{callback:!1,promise:!1,returns:[y]}),y.prototype.addQueryModifier=function(e,t){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});if("$"!=e[0])throw l.create({message:o("%s is not a valid query modifier"),driver:!0});var r=e.substr(1);return this.s.cmd[r]=t,"orderby"==r&&(this.s.cmd.sort=this.s.cmd[r]),this},b.classMethod("addQueryModifier",{callback:!1,promise:!1,returns:[y]}),y.prototype.comment=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});return this.s.cmd.comment=e,this},b.classMethod("comment",{callback:!1,promise:!1,returns:[y]}),y.prototype.maxAwaitTimeMS=function(e){if("number"!=typeof e)throw l.create({message:"maxAwaitTimeMS must be a number",driver:!0});if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});return this.s.cmd.maxAwaitTimeMS=e,this},b.classMethod("maxAwaitTimeMS",{callback:!1,promise:!1,returns:[y]}),y.prototype.maxTimeMS=function(e){if("number"!=typeof e)throw l.create({message:"maxTimeMS must be a number",driver:!0});if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});return this.s.cmd.maxTimeMS=e,this},b.classMethod("maxTimeMS",{callback:!1,promise:!1,returns:[y]}),y.prototype.maxTimeMs=y.prototype.maxTimeMS,b.classMethod("maxTimeMs",{callback:!1,promise:!1,returns:[y]}),y.prototype.project=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});return this.s.cmd.fields=e,this},b.classMethod("project",{callback:!1,promise:!1,returns:[y]}),y.prototype.sort=function(e,t){if(this.s.options.tailable)throw l.create({message:"Tailable cursor doesn't support sorting",driver:!0});if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});var r=e;return Array.isArray(r)&&Array.isArray(r[0])&&(r=new h(r.map(function(e){var t=[e[0],null];if("asc"==e[1])t[1]=1;else if("desc"==e[1])t[1]=-1;else{if(1!=e[1]&&-1!=e[1])throw new l("Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]");t[1]=e[1]}return t}))),null!=t&&(r=[[e,t]]),this.s.cmd.sort=r,this.sortValue=r,this},b.classMethod("sort",{callback:!1,promise:!1,returns:[y]}),y.prototype.batchSize=function(e){if(this.s.options.tailable)throw l.create({message:"Tailable cursor doesn't support batchSize",driver:!0});if(this.s.state==y.CLOSED||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});if("number"!=typeof e)throw l.create({message:"batchSize requires an integer",driver:!0});return this.s.cmd.batchSize=e,this.setCursorBatchSize(e),this},b.classMethod("batchSize",{callback:!1,promise:!1,returns:[y]}),y.prototype.collation=function(e){return this.s.cmd.collation=e,this},b.classMethod("collation",{callback:!1,promise:!1,returns:[y]}),y.prototype.limit=function(e){if(this.s.options.tailable)throw l.create({message:"Tailable cursor doesn't support limit",driver:!0});if(this.s.state==y.OPEN||this.s.state==y.CLOSED||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});if("number"!=typeof e)throw l.create({message:"limit requires an integer",driver:!0});return this.s.cmd.limit=e,this.setCursorLimit(e),this},b.classMethod("limit",{callback:!1,promise:!1,returns:[y]}),y.prototype.skip=function(e){if(this.s.options.tailable)throw l.create({message:"Tailable cursor doesn't support skip",driver:!0});if(this.s.state==y.OPEN||this.s.state==y.CLOSED||this.isDead())throw l.create({message:"Cursor is closed",driver:!0});if("number"!=typeof e)throw l.create({message:"skip requires an integer",driver:!0});return this.s.cmd.skip=e,this.setCursorSkip(e),this},b.classMethod("skip",{callback:!1,promise:!1,returns:[y]}),y.prototype.nextObject=y.prototype.next;var x=function(e,t){if(e.s.state==y.CLOSED||e.isDead&&e.isDead())return s(t,l.create({message:"Cursor is closed",driver:!0}));if(e.s.state==y.INIT&&e.s.cmd.sort)try{e.s.cmd.sort=i(e.s.cmd.sort)}catch(e){return s(t,e)}e._next(function(r,n){if(e.s.state=y.OPEN,r)return s(t,r);s(t,null,n)})};b.classMethod("nextObject",{callback:!0,promise:!0});var S=function(e,t){if(0!=e.bufferedCount())return e._next(t),S};y.prototype.next=y.prototype.nextObject,b.classMethod("next",{callback:!0,promise:!0}),y.prototype.each=function(e){this.rewind(),this.s.state=y.INIT,C(this,e)},b.classMethod("each",{callback:!0,promise:!1});var C=function(e,t){if(!t)throw l.create({message:"callback is mandatory",driver:!0});if(!e.isNotified()){if(e.s.state==y.CLOSED||e.isDead())return s(t,l.create({message:"Cursor is closed",driver:!0}));e.s.state==y.INIT&&(e.s.state=y.OPEN);var r=null;if(e.bufferedCount()>0){for(;r=S(e,t);)r(e,t);C(e,t)}else e.next(function(r,n){return r?s(t,r):null==n?(e.s.state=y.CLOSED,s(t,null,null)):void(0!=s(t,null,n)&&C(e,t))})}};y.prototype.forEach=function(e,t){this.each(function(r,n){if(r)return t(r),!1;if(null!=n)return e(n),!0;if(null==n&&t){var o=t;return t=null,o(null),!1}})},b.classMethod("forEach",{callback:!0,promise:!1}),y.prototype.setReadPreference=function(e){if(this.s.state!=y.INIT)throw l.create({message:"cannot change cursor readPreference after cursor has been accessed",driver:!0});return e instanceof a?this.s.options.readPreference=new d(e.mode,e.tags,{maxStalenessSeconds:e.maxStalenessSeconds}):"string"==typeof e?this.s.options.readPreference=new d(e):e instanceof d&&(this.s.options.readPreference=e),this},b.classMethod("setReadPreference",{callback:!1,promise:!1,returns:[y]}),y.prototype.toArray=function(e){var t=this;if(t.s.options.tailable)throw l.create({message:"Tailable cursor cannot be converted to array",driver:!0});return"function"==typeof e?_(t,e):new this.s.promiseLibrary(function(e,r){_(t,function(t,n){if(t)return r(t);e(n)})})};var _=function(e,t){var r=[];e.rewind(),e.s.state=y.INIT;var n=function(){e._next(function(o,i){if(o)return s(t,o);if(null==i)return e.s.state=y.CLOSED,s(t,null,r);if(r.push(i),e.bufferedCount()>0){var a=e.readBufferedDocuments(e.bufferedCount());e.s.transforms&&"function"==typeof e.s.transforms.doc&&(a=a.map(e.s.transforms.doc)),g.apply(r,a)}n()})};n()};b.classMethod("toArray",{callback:!0,promise:!0}),y.prototype.count=function(e,t,r){var n=this;if(null==n.s.cmd.query)throw l.create({message:"count can only be used with find command",driver:!0});return"function"==typeof t&&(r=t,t={}),t=t||{},"function"==typeof r?O(n,e,t,r):new this.s.promiseLibrary(function(r,o){O(n,e,t,function(e,t){if(e)return o(e);r(t)})})};var O=function(e,t,r,n){"function"==typeof t&&(n=t,t=!0),t&&("number"==typeof e.cursorSkip()&&(r.skip=e.cursorSkip()),"number"==typeof e.cursorLimit()&&(r.limit=e.cursorLimit()));var i=e.s.ns.indexOf("."),s={count:e.s.ns.substr(i+1),query:e.s.cmd.query};e.s.cmd.readConcern&&(s.readConcern=e.s.cmd.readConcern),e.s.cmd.hint&&(s.hint=e.s.cmd.hint),"number"==typeof r.maxTimeMS?s.maxTimeMS=r.maxTimeMS:e.s.cmd&&"number"==typeof e.s.cmd.maxTimeMS&&(s.maxTimeMS=e.s.cmd.maxTimeMS),r.skip&&(s.skip=r.skip),r.limit&&(s.limit=r.limit),e.s.options.hint&&(s.hint=e.s.options.hint),e.server=e.topology,e.topology.command(o("%s.$cmd",e.s.ns.substr(0,i)),s,function(e,t){n(e,t?t.result.n:null)},e.options)};b.classMethod("count",{callback:!0,promise:!0}),y.prototype.close=function(e){return this.s.state=y.CLOSED,this.kill(),this.emit("close"),"function"==typeof e?s(e,null,this):new this.s.promiseLibrary(function(e){e()})},b.classMethod("close",{callback:!0,promise:!0}),y.prototype.map=function(e){if(this.cursorState.transforms&&this.cursorState.transforms.doc){var t=this.cursorState.transforms.doc;this.cursorState.transforms.doc=function(r){return e(t(r))}}else this.cursorState.transforms={doc:e};return this},b.classMethod("map",{callback:!1,promise:!1,returns:[y]}),y.prototype.isClosed=function(){return this.isDead()},b.classMethod("isClosed",{callback:!1,promise:!1,returns:[Boolean]}),y.prototype.destroy=function(e){e&&this.emit("error",e),this.pause(),this.close()},b.classMethod("destroy",{callback:!1,promise:!1}),y.prototype.stream=function(e){return this.s.streamOptions=e||{},this},b.classMethod("stream",{callback:!1,promise:!1,returns:[y]}),y.prototype.explain=function(e){var t=this;return this.s.cmd.explain=!0,this.s.cmd.readConcern&&delete this.s.cmd.readConcern,"function"==typeof e?this._next(e):new this.s.promiseLibrary(function(e,r){t._next(function(t,n){if(t)return r(t);e(n)})})},b.classMethod("explain",{callback:!0,promise:!0}),y.prototype._read=function(){var e=this;if(e.s.state==y.CLOSED||e.isDead())return e.push(null);e.nextObject(function(t,r){return t?(e.listeners("error")&&e.listeners("error").length>0&&e.emit("error",t),e.isDead()||e.close(),e.emit("end"),e.emit("finish")):"function"==typeof e.s.streamOptions.transform&&null!=r?e.push(e.s.streamOptions.transform(r)):e.cursorState.transforms&&"function"==typeof e.cursorState.transforms.doc&&null!=r?e.push(e.cursorState.transforms.doc(r)):void e.push(r)})},Object.defineProperty(y.prototype,"readPreference",{enumerable:!0,get:function(){return this&&this.s?this.s.options.readPreference:null}}),Object.defineProperty(y.prototype,"namespace",{enumerable:!0,get:function(){if(!this||!this.s)return null;var e=this.s.ns||"",t=e.indexOf(".");return t<0?{database:this.s.ns,collection:""}:{database:e.substr(0,t),collection:e.substr(t+1)}}}),y.INIT=0,y.OPEN=1,y.CLOSED=2,y.GET_MORE=3,e.exports=y},320:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(51);class LoopEndState extends o.ATNState{get stateType(){return 12}}n([r(0).Override],LoopEndState.prototype,"stateType",null),t.LoopEndState=LoopEndState},321:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(0),i=r(33);class ConflictInfo{constructor(e,t){this._conflictedAlts=e,this.exact=t}get conflictedAlts(){return this._conflictedAlts}get isExact(){return this.exact}equals(e){return e===this||e instanceof ConflictInfo&&(this.isExact===e.isExact&&i.equals(this.conflictedAlts,e.conflictedAlts))}hashCode(){return this.conflictedAlts.hashCode()}}n([o.Override],ConflictInfo.prototype,"equals",null),n([o.Override],ConflictInfo.prototype,"hashCode",null),t.ConflictInfo=ConflictInfo},322:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(323),s=r(324),a=r(52),l=r(127),c=r(24),u=r(13),p=r(0);class DefaultErrorStrategy{constructor(){this.errorRecoveryMode=!1,this.lastErrorIndex=-1}reset(e){this.endErrorCondition(e)}beginErrorCondition(e){this.errorRecoveryMode=!0}inErrorRecoveryMode(e){return this.errorRecoveryMode}endErrorCondition(e){this.errorRecoveryMode=!1,this.lastErrorStates=void 0,this.lastErrorIndex=-1}reportMatch(e){this.endErrorCondition(e)}reportError(e,t){this.inErrorRecoveryMode(e)||(this.beginErrorCondition(e),t instanceof l.NoViableAltException?this.reportNoViableAlternative(e,t):t instanceof s.InputMismatchException?this.reportInputMismatch(e,t):t instanceof i.FailedPredicateException?this.reportFailedPredicate(e,t):(console.error(`unknown recognition error type: ${t}`),this.notifyErrorListeners(e,t.toString(),t)))}notifyErrorListeners(e,t,r){let n=r.getOffendingToken(e);void 0===n&&(n=null),e.notifyErrorListeners(t,n,r)}recover(e,t){this.lastErrorIndex===e.inputStream.index&&this.lastErrorStates&&this.lastErrorStates.contains(e.state)&&e.consume(),this.lastErrorIndex=e.inputStream.index,this.lastErrorStates||(this.lastErrorStates=new a.IntervalSet),this.lastErrorStates.add(e.state);let r=this.getErrorRecoverySet(e);this.consumeUntil(e,r)}sync(e){let t=e.interpreter.atn.states[e.state];if(this.inErrorRecoveryMode(e))return;let r=e.inputStream.LA(1),n=e.atn.nextTokens(t);if(!n.contains(u.Token.EPSILON)&&!n.contains(r))switch(t.stateType){case 3:case 5:case 4:case 10:if(this.singleTokenDeletion(e))return;throw new s.InputMismatchException(e);case 11:case 9:this.reportUnwantedToken(e);let r=e.getExpectedTokens().or(this.getErrorRecoverySet(e));this.consumeUntil(e,r)}}reportNoViableAlternative(e,t){let r,n=e.inputStream;r=n?t.startToken.type===u.Token.EOF?"<EOF>":n.getTextFromRange(t.startToken,t.getOffendingToken()):"<unknown input>";let o="no viable alternative at input "+this.escapeWSAndQuote(r);this.notifyErrorListeners(e,o,t)}reportInputMismatch(e,t){let r=t.expectedTokens,n=r?r.toStringVocabulary(e.vocabulary):"",o="mismatched input "+this.getTokenErrorDisplay(t.getOffendingToken(e))+" expecting "+n;this.notifyErrorListeners(e,o,t)}reportFailedPredicate(e,t){let r="rule "+e.ruleNames[e.context.ruleIndex]+" "+t.message;this.notifyErrorListeners(e,r,t)}reportUnwantedToken(e){if(this.inErrorRecoveryMode(e))return;this.beginErrorCondition(e);let t=e.currentToken,r="extraneous input "+this.getTokenErrorDisplay(t)+" expecting "+this.getExpectedTokens(e).toStringVocabulary(e.vocabulary);e.notifyErrorListeners(r,t,void 0)}reportMissingToken(e){if(this.inErrorRecoveryMode(e))return;this.beginErrorCondition(e);let t=e.currentToken,r="missing "+this.getExpectedTokens(e).toStringVocabulary(e.vocabulary)+" at "+this.getTokenErrorDisplay(t);e.notifyErrorListeners(r,t,void 0)}recoverInline(e){let t=this.singleTokenDeletion(e);if(t)return e.consume(),t;if(this.singleTokenInsertion(e))return this.getMissingSymbol(e);throw new s.InputMismatchException(e)}singleTokenInsertion(e){let t=e.inputStream.LA(1),r=e.interpreter.atn.states[e.state].transition(0).target,n=e.interpreter.atn;return!!n.nextTokens(r,c.PredictionContext.fromRuleContext(n,e.context)).contains(t)&&(this.reportMissingToken(e),!0)}singleTokenDeletion(e){let t=e.inputStream.LA(2);if(this.getExpectedTokens(e).contains(t)){this.reportUnwantedToken(e),e.consume();let t=e.currentToken;return this.reportMatch(e),t}}getMissingSymbol(e){let t,r=e.currentToken,n=this.getExpectedTokens(e).minElement;t=n===u.Token.EOF?"<missing EOF>":"<missing "+e.vocabulary.getDisplayName(n)+">";let o=r,i=e.inputStream.tryLT(-1);return o.type===u.Token.EOF&&null!=i&&(o=i),this.constructToken(e.inputStream.tokenSource,n,t,o)}constructToken(e,t,r,n){let o=e.tokenFactory,i=n.tokenSource,s=i?i.inputStream:void 0;return o.create({source:e,stream:s},t,r,u.Token.DEFAULT_CHANNEL,-1,-1,n.line,n.charPositionInLine)}getExpectedTokens(e){return e.getExpectedTokens()}getTokenErrorDisplay(e){if(!e)return"<no token>";let t=this.getSymbolText(e);return t||(t=this.getSymbolType(e)===u.Token.EOF?"<EOF>":`<${this.getSymbolType(e)}>`),this.escapeWSAndQuote(t)}getSymbolText(e){return e.text}getSymbolType(e){return e.type}escapeWSAndQuote(e){return"'"+(e=(e=(e=e.replace("\n","\\n")).replace("\r","\\r")).replace("\t","\\t"))+"'"}getErrorRecoverySet(e){let t=e.interpreter.atn,r=e.context,n=new a.IntervalSet;for(;r&&r.invokingState>=0;){let e=t.states[r.invokingState].transition(0),o=t.nextTokens(e.followState);n.addAll(o),r=r._parent}return n.remove(u.Token.EPSILON),n}consumeUntil(e,t){let r=e.inputStream.LA(1);for(;r!==u.Token.EOF&&!t.contains(r);)e.consume(),r=e.inputStream.LA(1)}}n([p.Override],DefaultErrorStrategy.prototype,"reset",null),n([o(0,p.NotNull)],DefaultErrorStrategy.prototype,"beginErrorCondition",null),n([p.Override],DefaultErrorStrategy.prototype,"inErrorRecoveryMode",null),n([o(0,p.NotNull)],DefaultErrorStrategy.prototype,"endErrorCondition",null),n([p.Override],DefaultErrorStrategy.prototype,"reportMatch",null),n([p.Override],DefaultErrorStrategy.prototype,"reportError",null),n([o(0,p.NotNull)],DefaultErrorStrategy.prototype,"notifyErrorListeners",null),n([p.Override],DefaultErrorStrategy.prototype,"recover",null),n([p.Override],DefaultErrorStrategy.prototype,"sync",null),n([o(0,p.NotNull),o(1,p.NotNull)],DefaultErrorStrategy.prototype,"reportNoViableAlternative",null),n([o(0,p.NotNull),o(1,p.NotNull)],DefaultErrorStrategy.prototype,"reportInputMismatch",null),n([o(0,p.NotNull),o(1,p.NotNull)],DefaultErrorStrategy.prototype,"reportFailedPredicate",null),n([o(0,p.NotNull)],DefaultErrorStrategy.prototype,"reportUnwantedToken",null),n([o(0,p.NotNull)],DefaultErrorStrategy.prototype,"reportMissingToken",null),n([p.Override],DefaultErrorStrategy.prototype,"recoverInline",null),n([o(0,p.NotNull)],DefaultErrorStrategy.prototype,"singleTokenInsertion",null),n([o(0,p.NotNull)],DefaultErrorStrategy.prototype,"singleTokenDeletion",null),n([p.NotNull,o(0,p.NotNull)],DefaultErrorStrategy.prototype,"getMissingSymbol",null),n([p.NotNull,o(0,p.NotNull)],DefaultErrorStrategy.prototype,"getExpectedTokens",null),n([o(0,p.NotNull)],DefaultErrorStrategy.prototype,"getSymbolText",null),n([o(0,p.NotNull)],DefaultErrorStrategy.prototype,"getSymbolType",null),n([p.NotNull,o(0,p.NotNull)],DefaultErrorStrategy.prototype,"escapeWSAndQuote",null),n([p.NotNull,o(0,p.NotNull)],DefaultErrorStrategy.prototype,"getErrorRecoverySet",null),n([o(0,p.NotNull),o(1,p.NotNull)],DefaultErrorStrategy.prototype,"consumeUntil",null),t.DefaultErrorStrategy=DefaultErrorStrategy},323:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(75),s=r(0),a=r(185);let l=class FailedPredicateException extends i.RecognitionException{constructor(e,t,r){super(e,e.inputStream,e.context,FailedPredicateException.formatMessage(t,r));let n=e.interpreter.atn.states[e.state].transition(0);n instanceof a.PredicateTransition?(this._ruleIndex=n.ruleIndex,this._predicateIndex=n.predIndex):(this._ruleIndex=0,this._predicateIndex=0),this._predicate=t,super.setOffendingToken(e,e.currentToken)}get ruleIndex(){return this._ruleIndex}get predicateIndex(){return this._predicateIndex}get predicate(){return this._predicate}static formatMessage(e,t){return t||`failed predicate: {${e}}?`}};n([s.NotNull],l,"formatMessage",null),l=n([o(0,s.NotNull)],l),t.FailedPredicateException=l},324:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(75);let s=class InputMismatchException extends i.RecognitionException{constructor(e){super(e,e.inputStream,e.context),super.setOffendingToken(e,e.currentToken)}};s=n([o(0,r(0).NotNull)],s),t.InputMismatchException=s},325:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(175),i=r(0);class ProxyParserErrorListener extends o.ProxyErrorListener{constructor(e){super(e)}reportAmbiguity(e,t,r,n,o,i,s){this.getDelegates().forEach(a=>{a.reportAmbiguity&&a.reportAmbiguity(e,t,r,n,o,i,s)})}reportAttemptingFullContext(e,t,r,n,o,i){this.getDelegates().forEach(s=>{s.reportAttemptingFullContext&&s.reportAttemptingFullContext(e,t,r,n,o,i)})}reportContextSensitivity(e,t,r,n,o,i){this.getDelegates().forEach(s=>{s.reportContextSensitivity&&s.reportContextSensitivity(e,t,r,n,o,i)})}}n([i.Override],ProxyParserErrorListener.prototype,"reportAmbiguity",null),n([i.Override],ProxyParserErrorListener.prototype,"reportAttemptingFullContext",null),n([i.Override],ProxyParserErrorListener.prototype,"reportContextSensitivity",null),t.ProxyParserErrorListener=ProxyParserErrorListener},326:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(41),i=r(94),s=r(186),a=r(23),l=r(0),c=r(327),u=r(63);class RuleContext extends s.RuleNode{constructor(e,t){super(),this._parent=e,this.invokingState=null!=t?t:-1}static getChildContext(e,t){return new RuleContext(e,t)}depth(){let e=0,t=this;for(;t;)t=t._parent,e++;return e}get isEmpty(){return-1===this.invokingState}get sourceInterval(){return a.Interval.INVALID}get ruleContext(){return this}get parent(){return this._parent}get payload(){return this}get text(){if(0===this.childCount)return"";let e="";for(let t=0;t<this.childCount;t++)e+=this.getChild(t).text;return e.toString()}get ruleIndex(){return-1}get altNumber(){return o.ATN.INVALID_ALT_NUMBER}set altNumber(e){}getChild(e){throw new RangeError("i must be greater than or equal to 0 and less than childCount")}get childCount(){return 0}accept(e){return e.visitChildren(this)}toStringTree(e){return c.Trees.toStringTree(this,e)}toString(e,t){const r=e instanceof i.Recognizer?e.ruleNames:e;t=t||u.ParserRuleContext.emptyContext();let n="",o=this;for(n+="[";o&&o!==t;){if(r){let e=o.ruleIndex;n+=e>=0&&e<r.length?r[e]:e.toString()}else o.isEmpty||(n+=o.invokingState);!o._parent||!r&&o._parent.isEmpty||(n+=" "),o=o._parent}return(n+="]").toString()}}n([l.Override],RuleContext.prototype,"sourceInterval",null),n([l.Override],RuleContext.prototype,"ruleContext",null),n([l.Override],RuleContext.prototype,"parent",null),n([l.Override],RuleContext.prototype,"payload",null),n([l.Override],RuleContext.prototype,"text",null),n([l.Override],RuleContext.prototype,"getChild",null),n([l.Override],RuleContext.prototype,"childCount",null),n([l.Override],RuleContext.prototype,"accept",null),n([l.Override],RuleContext.prototype,"toStringTree",null),t.RuleContext=RuleContext},327:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(41),s=r(116),a=r(125),l=r(0),c=r(128),u=r(63),p=r(186),h=r(83),d=r(13),f=r(33);class Trees{static toStringTree(e,t){let r;r=t instanceof c.Parser?t.ruleNames:t;let n=f.escapeWhitespace(this.getNodeText(e,r),!1);if(0==e.childCount)return n;let o="";o+="(",o+=n=f.escapeWhitespace(this.getNodeText(e,r),!1),o+=" ";for(let t=0;t<e.childCount;t++)t>0&&(o+=" "),o+=this.toStringTree(e.getChild(t),r);return o+=")"}static getNodeText(e,t){let r;if(t instanceof c.Parser)r=t.ruleNames;else{if(!t){let t=e.payload;return"string"==typeof t.text?t.text:e.payload.toString()}r=t}if(e instanceof p.RuleNode){let t=e.ruleContext,n=r[t.ruleIndex],o=t.altNumber;return o!==i.ATN.INVALID_ALT_NUMBER?n+":"+o:n}if(e instanceof a.ErrorNode)return e.toString();if(e instanceof h.TerminalNode){return e.symbol.text||""}throw new TypeError("Unexpected node type")}static getChildren(e){let t=[];for(let r=0;r<e.childCount;r++)t.push(e.getChild(r));return t}static getAncestors(e){let t=[],r=e.parent;for(;r;)t.unshift(r),r=r.parent;return t}static isAncestorOf(e,t){if(!e||!t||!e.parent)return!1;let r=t.parent;for(;r;){if(e===r)return!0;r=r.parent}return!1}static findAllTokenNodes(e,t){return Trees.findAllNodes(e,t,!0)}static findAllRuleNodes(e,t){return Trees.findAllNodes(e,t,!1)}static findAllNodes(e,t,r){let n=[];return Trees._findAllNodes(e,t,r,n),n}static _findAllNodes(e,t,r,n){r&&e instanceof h.TerminalNode?e.symbol.type===t&&n.push(e):!r&&e instanceof u.ParserRuleContext&&e.ruleIndex===t&&n.push(e);for(let o=0;o<e.childCount;o++)Trees._findAllNodes(e.getChild(o),t,r,n)}static getDescendants(e){let t=[];return function e(r){t.push(r);const n=r.childCount;for(let t=0;t<n;t++)e(r.getChild(t))}(e),t}static getRootOfSubtreeEnclosingRegion(e,t,r){let n=e.childCount;for(let o=0;o<n;o++){let n=e.getChild(o),i=Trees.getRootOfSubtreeEnclosingRegion(n,t,r);if(i)return i}if(e instanceof u.ParserRuleContext){let n=e.stop;if(t>=e.start.tokenIndex&&(null==n||r<=n.tokenIndex))return e}}static stripChildrenOutOfRange(e,t,r,n){if(!e)return;let o=e.childCount;for(let i=0;i<o;i++){let o=e.getChild(i),a=o.sourceInterval;if(o instanceof u.ParserRuleContext&&(a.b<r||a.a>n)&&Trees.isAncestorOf(o,t)){let t=new s.CommonToken(d.Token.INVALID_TYPE,"...");e.children[i]=new h.TerminalNode(t)}}}}n([o(0,l.NotNull)],Trees,"toStringTree",null),n([l.NotNull,o(0,l.NotNull)],Trees,"getAncestors",null),n([o(0,l.NotNull)],Trees,"getRootOfSubtreeEnclosingRegion",null),t.Trees=Trees},328:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});r(60);const o=r(49),i=r(11),s=r(0),a=r(74);!function(e){e[e.SLL=0]="SLL",e[e.LL=1]="LL",e[e.LL_EXACT_AMBIG_DETECTION=2]="LL_EXACT_AMBIG_DETECTION"}(t.PredictionMode||(t.PredictionMode={})),function(e){class AltAndContextConfigEqualityComparator{AltAndContextConfigEqualityComparator(){}hashCode(e){let t=i.MurmurHash.initialize(7);return t=i.MurmurHash.update(t,e.state.stateNumber),t=i.MurmurHash.update(t,e.context),t=i.MurmurHash.finish(t,2)}equals(e,t){return e===t||null!=e&&null!=t&&(e.state.stateNumber==t.state.stateNumber&&e.context.equals(t.context))}}AltAndContextConfigEqualityComparator.INSTANCE=new AltAndContextConfigEqualityComparator,n([s.Override],AltAndContextConfigEqualityComparator.prototype,"hashCode",null),n([s.Override],AltAndContextConfigEqualityComparator.prototype,"equals",null),e.hasConfigInRuleStopState=function(e){for(let t of o.asIterable(e))if(t.state instanceof a.RuleStopState)return!0;return!1},e.allConfigsInRuleStopStates=function(e){for(let t of o.asIterable(e))if(!(t.state instanceof a.RuleStopState))return!1;return!0}}(t.PredictionMode||(t.PredictionMode={}))},329:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0),s=r(63);let a=class SimulatorState{constructor(e,t,r,n){this.outerContext=null!=e?e:s.ParserRuleContext.emptyContext(),this.s0=t,this.useContext=r,this.remainingOuterContext=n}};a=n([o(1,i.NotNull)],a),t.SimulatorState=a},33:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.escapeWhitespace=function(e,t){return t?e.replace(/ /,""):e.replace(/\t/,"\\t").replace(/\n/,"\\n").replace(/\r/,"\\r")},t.join=function(e,t){let r="",n=!0;for(let o of e)n?n=!1:r+=t,r+=o;return r},t.equals=function(e,t){return e===t||null!=e&&null!=t&&e.equals(t)},t.toMap=function(e){let t=new Map;for(let r=0;r<e.length;r++)t.set(e[r],r);return t},t.toCharArray=function(e){let t=new Uint16Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}},330:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(95);class PlusBlockStartState extends o.BlockStartState{get stateType(){return 4}}n([r(0).Override],PlusBlockStartState.prototype,"stateType",null),t.PlusBlockStartState=PlusBlockStartState},331:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(50);class PlusLoopbackState extends o.DecisionState{get stateType(){return 11}}n([r(0).Override],PlusLoopbackState.prototype,"stateType",null),t.PlusLoopbackState=PlusLoopbackState},332:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(121),s=r(0),a=r(73);let l=class PrecedencePredicateTransition extends i.AbstractPredicateTransition{constructor(e,t){super(e),this.precedence=t}get serializationType(){return 10}get isEpsilon(){return!0}matches(e,t,r){return!1}get predicate(){return new a.SemanticContext.PrecedencePredicate(this.precedence)}toString(){return this.precedence+" >= _p"}};n([s.Override],l.prototype,"serializationType",null),n([s.Override],l.prototype,"isEpsilon",null),n([s.Override],l.prototype,"matches",null),n([s.Override],l.prototype,"toString",null),l=n([o(0,s.NotNull)],l),t.PrecedencePredicateTransition=l},333:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(52),s=r(0),a=r(43);let l=class RangeTransition extends a.Transition{constructor(e,t,r){super(e),this.from=t,this.to=r}get serializationType(){return 2}get label(){return i.IntervalSet.of(this.from,this.to)}matches(e,t,r){return e>=this.from&&e<=this.to}toString(){return"'"+String.fromCharCode(this.from)+"'..'"+String.fromCharCode(this.to)+"'"}};n([s.Override],l.prototype,"serializationType",null),n([s.Override,s.NotNull],l.prototype,"label",null),n([s.Override],l.prototype,"matches",null),n([s.Override,s.NotNull],l.prototype,"toString",null),l=n([o(0,s.NotNull)],l),t.RangeTransition=l},334:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(51);class RuleStartState extends o.ATNState{constructor(){super(...arguments),this.isPrecedenceRule=!1,this.leftFactored=!1}get stateType(){return 2}}n([r(0).Override],RuleStartState.prototype,"stateType",null),t.RuleStartState=RuleStartState},335:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(95);class StarBlockStartState extends o.BlockStartState{get stateType(){return 5}}n([r(0).Override],StarBlockStartState.prototype,"stateType",null),t.StarBlockStartState=StarBlockStartState},336:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(51);class StarLoopbackState extends o.ATNState{get loopEntryState(){return this.transition(0).target}get stateType(){return 9}}n([r(0).Override],StarLoopbackState.prototype,"stateType",null),t.StarLoopbackState=StarLoopbackState},337:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(50);class TokensStartState extends o.DecisionState{get stateType(){return 6}}n([r(0).Override],TokensStartState.prototype,"stateType",null),t.TokensStartState=TokensStartState},338:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(11);class UUID{constructor(e,t,r,n){this.data=new Uint32Array(4),this.data[0]=e,this.data[1]=t,this.data[2]=r,this.data[3]=n}static fromString(e){if(!/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/.test(e))throw new Error("Incorrectly formatted UUID");let t=e.split("-"),r=parseInt(t[0],16),n=(parseInt(t[1],16)<<16>>>0)+parseInt(t[2],16),o=(parseInt(t[3],16)<<16>>>0)+parseInt(t[4].substr(0,4),16),i=parseInt(t[4].substr(-8),16);return new UUID(r,n,o,i)}hashCode(){return n.MurmurHash.hashCode([this.data[0],this.data[1],this.data[2],this.data[3]])}equals(e){return e===this||e instanceof UUID&&(this.data[0]===e.data[0]&&this.data[1]===e.data[1]&&this.data[2]===e.data[2]&&this.data[3]===e.data[3])}toString(){return("00000000"+this.data[0].toString(16)).substr(-8)+"-"+("0000"+(this.data[1]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[1].toString(16)).substr(-4)+"-"+("0000"+(this.data[2]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[2].toString(16)).substr(-4)+("00000000"+this.data[3].toString(16)).substr(-8)}}t.UUID=UUID},339:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.RuleVersion=function(e){return function(e,t,r){}}},34:function(e,t){e.exports=require("fs")},340:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(222);t.Event=n.Event;const o=r(1217),i=r(1218),s=r(593),a=r(1219);!function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(222));const l=r(1220);!function(e){e.uriToFilePath=l.uriToFilePath,e.resolveGlobalNodePath=l.resolveGlobalNodePath,e.resolveGlobalYarnPath=l.resolveGlobalYarnPath,e.resolve=l.resolve,e.resolveModule=l.resolveModule,e.resolveModule2=l.resolveModule2,e.resolveModulePath=l.resolveModulePath}(t.Files||(t.Files={}));let c=!1,u=void 0;function p(e){if(null!==e)return e}!function(){function e(e){try{let t=parseInt(e);isNaN(t)||(u=setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(c?0:1)}},3e3))}catch(e){}}for(let t=2;t<process.argv.length;t++){let r=process.argv[t];if("--clientProcessId"===r&&t+1<process.argv.length)return void e(process.argv[t+1]);{let t=r.split("=");"--clientProcessId"===t[0]&&e(t[1])}}}();t.TextDocuments=class TextDocuments{constructor(){this._documents=Object.create(null),this._onDidChangeContent=new n.Emitter,this._onDidOpen=new n.Emitter,this._onDidClose=new n.Emitter,this._onDidSave=new n.Emitter,this._onWillSave=new n.Emitter}get syncKind(){return n.TextDocumentSyncKind.Full}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=n.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(e=>{let t=e.textDocument,r=n.TextDocument.create(t.uri,t.languageId,t.version,t.text);this._documents[t.uri]=r;let o=Object.freeze({document:r});this._onDidOpen.fire(o),this._onDidChangeContent.fire(o)}),e.onDidChangeTextDocument(e=>{let t=e.textDocument,r=e.contentChanges,n=r.length>0?r[r.length-1]:void 0;if(n){let e=this._documents[t.uri];if(e&&function(e){return s.func(e.update)}(e)){if(null===t.version||void 0===t.version)throw new Error(`Recevied document change event for ${t.uri} without valid version identifier`);e.update(n,t.version),this._onDidChangeContent.fire(Object.freeze({document:e}))}}}),e.onDidCloseTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&(delete this._documents[e.textDocument.uri],this._onDidClose.fire(Object.freeze({document:t})))}),e.onWillSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))}),e.onWillSaveTextDocumentWaitUntil((e,t)=>{let r=this._documents[e.textDocument.uri];return r&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:r,reason:e.reason}),t):[]}),e.onDidSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onDidSave.fire(Object.freeze({document:t}))})}};t.ErrorMessageTracker=class ErrorMessageTracker{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}},function(e){e.create=function(){return new BulkRegistrationImpl}}(t.BulkRegistration||(t.BulkRegistration={}));class BulkRegistrationImpl{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const r=s.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);const n=a.generateUuid();this._registrations.push({id:n,method:r,registerOptions:t||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}}!function(e){e.create=function(){return new BulkUnregistrationImpl(void 0,[])}}(t.BulkUnregistration||(t.BulkUnregistration={}));class BulkUnregistrationImpl{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(e=>{this._unregistrations.set(e.method,e)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let t={unregisterations:e};this._connection.sendRequest(n.UnregistrationRequest.type,t).then(void 0,e=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){const t=s.string(e)?e:e.method,r=this._unregistrations.get(t);if(!r)return!1;let o={unregisterations:[r]};return this._connection.sendRequest(n.UnregistrationRequest.type,o).then(()=>{this._unregistrations.delete(t)},e=>{this._connection.console.info(`Unregistering request handler for ${r.id} failed.`)}),!0}}class ConnectionLogger{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(n.MessageType.Error,e)}warn(e){this.send(n.MessageType.Warning,e)}info(e){this.send(n.MessageType.Info,e)}log(e){this.send(n.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(n.LogMessageNotification.type,{type:e,message:t})}}class RemoteWindowImpl{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let r={type:n.MessageType.Error,message:e,actions:t};return this._connection.sendRequest(n.ShowMessageRequest.type,r).then(p)}showWarningMessage(e,...t){let r={type:n.MessageType.Warning,message:e,actions:t};return this._connection.sendRequest(n.ShowMessageRequest.type,r).then(p)}showInformationMessage(e,...t){let r={type:n.MessageType.Info,message:e,actions:t};return this._connection.sendRequest(n.ShowMessageRequest.type,r).then(p)}}class RemoteClientImpl{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,r){return e instanceof BulkRegistrationImpl?this.registerMany(e):e instanceof BulkUnregistrationImpl?this.registerSingle1(e,t,r):this.registerSingle2(e,t)}registerSingle1(e,t,r){const o=s.string(t)?t:t.method,i=a.generateUuid();let l={registrations:[{id:i,method:o,registerOptions:r||{}}]};return e.isAttached||e.attach(this._connection),this._connection.sendRequest(n.RegistrationRequest.type,l).then(t=>(e.add({id:i,method:o}),e),e=>(this.connection.console.info(`Registering request handler for ${o} failed.`),Promise.reject(e)))}registerSingle2(e,t){const r=s.string(e)?e:e.method,o=a.generateUuid();let i={registrations:[{id:o,method:r,registerOptions:t||{}}]};return this._connection.sendRequest(n.RegistrationRequest.type,i).then(e=>n.Disposable.create(()=>{this.unregisterSingle(o,r)}),e=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(e)))}unregisterSingle(e,t){let r={unregisterations:[{id:e,method:t}]};return this._connection.sendRequest(n.UnregistrationRequest.type,r).then(void 0,t=>{this.connection.console.info(`Unregistering request handler for ${e} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this._connection.sendRequest(n.RegistrationRequest.type,t).then(()=>new BulkUnregistrationImpl(this._connection,t.registrations.map(e=>({id:e.id,method:e.method}))),e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e)))}}const h=i.WorkspaceFoldersFeature(o.ConfigurationFeature(class _RemoteWorkspaceImpl{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let t=(r=e)&&r.edit?e:{edit:e};var r;return this._connection.sendRequest(n.ApplyWorkspaceEditRequest.type,t)}}));class TracerImpl{constructor(){this._trace=n.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==n.Trace.Off&&this._connection.sendNotification(n.LogTraceNotification.type,{message:e,verbose:this._trace===n.Trace.Verbose?t:void 0})}}class TelemetryImpl{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this._connection.sendNotification(n.TelemetryEventNotification.type,e)}}function d(e,t){return function(r){return t(e(r))}}function f(e,t){return function(r){return t(e(r))}}function m(e,t){return function(r){return t(e(r))}}function g(e,t){return function(r){return t(e(r))}}function y(e,t){return function(r){return t(e(r))}}function v(e,t){return function(r){return t(e(r))}}t.combineConsoleFeatures=d,t.combineTelemetryFeatures=f,t.combineTracerFeatures=m,t.combineClientFeatures=g,t.combineWindowFeatures=y,t.combineWorkspaceFeatures=v,t.combineFeatures=function(e,t){function r(e,t,r){return e&&t?r(e,t):e||t}return{__brand:"features",console:r(e.console,t.console,d),tracer:r(e.tracer,t.tracer,m),telemetry:r(e.telemetry,t.telemetry,f),client:r(e.client,t.client,g),window:r(e.window,t.window,y),workspace:r(e.workspace,t.workspace,v)}},t.createConnection=function(e,t,r,o){let i,a,l,p;return void 0!==e&&"features"===e.__brand&&(i=e,e=t,t=r,r=o),n.ConnectionStrategy.is(e)?p=e:(a=e,l=t,p=r),function(e,t,r,o){if(!e&&!t&&process.argv.length>2){let r=void 0,o=void 0,s=process.argv.slice(2);for(let a=0;a<s.length;a++){let l=s[a];if("--node-ipc"===l){e=new n.IPCMessageReader(process),t=new n.IPCMessageWriter(process);break}if("--stdio"===l){e=process.stdin,t=process.stdout;break}if("--socket"===l){r=parseInt(s[a+1]);break}if("--pipe"===l){o=s[a+1];break}var i=l.split("=");if("--socket"===i[0]){r=parseInt(i[1]);break}if("--pipe"===i[0]){o=i[1];break}}if(r){let o=n.createServerSocketTransport(r);e=o[0],t=o[1]}else if(o){let r=n.createServerPipeTransport(o);e=r[0],t=r[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+a);if(!t)throw new Error("Connection output stream is not set. "+a);if(s.func(e.read)&&s.func(e.on)){let t=e;t.on("end",()=>{process.exit(c?0:1)}),t.on("close",()=>{process.exit(c?0:1)})}const l=o&&o.console?new(o.console(ConnectionLogger)):new ConnectionLogger,p=n.createProtocolConnection(e,t,l,r);l.rawAttach(p);const d=o&&o.tracer?new(o.tracer(TracerImpl)):new TracerImpl,f=o&&o.telemetry?new(o.telemetry(TelemetryImpl)):new TelemetryImpl,m=o&&o.client?new(o.client(RemoteClientImpl)):new RemoteClientImpl,g=o&&o.window?new(o.window(RemoteWindowImpl)):new RemoteWindowImpl,y=o&&o.workspace?new(o.workspace(h)):new h,v=[l,d,f,m,g,y];let b=void 0,x=void 0,S=void 0,C={listen:()=>p.listen(),sendRequest:(e,...t)=>p.sendRequest(s.string(e)?e:e.method,...t),onRequest:(e,t)=>p.onRequest(e,t),sendNotification:(e,t)=>{const r=s.string(e)?e:e.method;1===arguments.length?p.sendNotification(r):p.sendNotification(r,t)},onNotification:(e,t)=>p.onNotification(e,t),onInitialize:e=>x=e,onInitialized:e=>p.onNotification(n.InitializedNotification.type,e),onShutdown:e=>b=e,onExit:e=>S=e,get console(){return l},get telemetry(){return f},get tracer(){return d},get client(){return m},get window(){return g},get workspace(){return y},onDidChangeConfiguration:e=>p.onNotification(n.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>p.onNotification(n.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>p.onNotification(n.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>p.onNotification(n.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>p.onNotification(n.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>p.onNotification(n.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>p.onRequest(n.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>p.onNotification(n.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>p.sendNotification(n.PublishDiagnosticsNotification.type,e),onHover:e=>p.onRequest(n.HoverRequest.type,e),onCompletion:e=>p.onRequest(n.CompletionRequest.type,e),onCompletionResolve:e=>p.onRequest(n.CompletionResolveRequest.type,e),onSignatureHelp:e=>p.onRequest(n.SignatureHelpRequest.type,e),onDefinition:e=>p.onRequest(n.DefinitionRequest.type,e),onTypeDefinition:e=>p.onRequest(n.TypeDefinitionRequest.type,e),onImplementation:e=>p.onRequest(n.ImplementationRequest.type,e),onReferences:e=>p.onRequest(n.ReferencesRequest.type,e),onDocumentHighlight:e=>p.onRequest(n.DocumentHighlightRequest.type,e),onDocumentSymbol:e=>p.onRequest(n.DocumentSymbolRequest.type,e),onWorkspaceSymbol:e=>p.onRequest(n.WorkspaceSymbolRequest.type,e),onCodeAction:e=>p.onRequest(n.CodeActionRequest.type,e),onCodeLens:e=>p.onRequest(n.CodeLensRequest.type,e),onCodeLensResolve:e=>p.onRequest(n.CodeLensResolveRequest.type,e),onDocumentFormatting:e=>p.onRequest(n.DocumentFormattingRequest.type,e),onDocumentRangeFormatting:e=>p.onRequest(n.DocumentRangeFormattingRequest.type,e),onDocumentOnTypeFormatting:e=>p.onRequest(n.DocumentOnTypeFormattingRequest.type,e),onRenameRequest:e=>p.onRequest(n.RenameRequest.type,e),onDocumentLinks:e=>p.onRequest(n.DocumentLinkRequest.type,e),onDocumentLinkResolve:e=>p.onRequest(n.DocumentLinkResolveRequest.type,e),onDocumentColor:e=>p.onRequest(n.DocumentColorRequest.type,e),onColorPresentation:e=>p.onRequest(n.ColorPresentationRequest.type,e),onFoldingRanges:e=>p.onRequest(n.FoldingRangeRequest.type,e),onExecuteCommand:e=>p.onRequest(n.ExecuteCommandRequest.type,e),dispose:()=>p.dispose()};for(let e of v)e.attach(C);return p.onRequest(n.InitializeRequest.type,e=>{s.number(e.processId)&&void 0===u&&setInterval(()=>{try{process.kill(e.processId,0)}catch(e){process.exit(c?0:1)}},3e3),s.string(e.trace)&&(d.trace=n.Trace.fromString(e.trace));for(let t of v)t.initialize(e.capabilities);if(x)return function(e){return s.thenable(e)?e:Promise.resolve(e)}(x(e,(new n.CancellationTokenSource).token)).then(e=>{if(e instanceof n.ResponseError)return e;let t=e;t||(t={capabilities:{}});let r=t.capabilities;r||(r={},t.capabilities=r),r.textDocumentSync?s.number(r.textDocumentSync)||s.number(r.textDocumentSync.change)||(r.textDocumentSync.change=s.number(C.__textDocumentSync)?C.__textDocumentSync:n.TextDocumentSyncKind.None):r.textDocumentSync=s.number(C.__textDocumentSync)?C.__textDocumentSync:n.TextDocumentSyncKind.None;for(let e of v)e.fillServerCapabilities(r);return t});{let e={capabilities:{textDocumentSync:n.TextDocumentSyncKind.None}};for(let t of v)t.fillServerCapabilities(e.capabilities);return e}}),p.onRequest(n.ShutdownRequest.type,()=>(c=!0,b?b((new n.CancellationTokenSource).token):void 0)),p.onNotification(n.ExitNotification.type,()=>{try{S&&S()}finally{c?process.exit(0):process.exit(1)}}),p.onNotification(n.SetTraceNotification.type,e=>{d.trace=n.Trace.fromString(e.value)}),C}(a,l,p,i)},function(e){e.all={__brand:"features"}}(t.ProposedFeatures||(t.ProposedFeatures={}))},35:function(e,t){e.exports=require("os")},4:function(e,t){e.exports=require("util")},41:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(60),s=r(173),a=r(52),l=r(177),c=r(305),u=r(0),p=r(29),h=r(24),d=r(13),f=r(9);let m=class ATN{constructor(e,t){this.states=[],this.decisionToState=[],this.modeNameToStartState=new Map,this.modeToStartState=[],this.contextCache=new i.Array2DHashMap(p.ObjectEqualityComparator.INSTANCE),this.decisionToDFA=[],this.modeToDFA=[],this.LL1Table=new Map,this.grammarType=e,this.maxTokenType=t}clearDFA(){this.decisionToDFA=new Array(this.decisionToState.length);for(let e=0;e<this.decisionToDFA.length;e++)this.decisionToDFA[e]=new s.DFA(this.decisionToState[e],e);this.modeToDFA=new Array(this.modeToStartState.length);for(let e=0;e<this.modeToDFA.length;e++)this.modeToDFA[e]=new s.DFA(this.modeToStartState[e]);this.contextCache.clear(),this.LL1Table.clear()}get contextCacheSize(){return this.contextCache.size}getCachedContext(e){return h.PredictionContext.getCachedContext(e,this.contextCache,new h.PredictionContext.IdentityHashMap)}getDecisionToDFA(){return f(null!=this.decisionToDFA&&this.decisionToDFA.length===this.decisionToState.length),this.decisionToDFA}nextTokens(e,t){if(t){return new c.LL1Analyzer(this).LOOK(e,t)}return e.nextTokenWithinRule?e.nextTokenWithinRule:(e.nextTokenWithinRule=this.nextTokens(e,h.PredictionContext.EMPTY_LOCAL),e.nextTokenWithinRule.setReadonly(!0),e.nextTokenWithinRule)}addState(e){e.atn=this,e.stateNumber=this.states.length,this.states.push(e)}removeState(e){let t=new l.InvalidState;t.atn=this,t.stateNumber=e.stateNumber,this.states[e.stateNumber]=t}defineMode(e,t){this.modeNameToStartState.set(e,t),this.modeToStartState.push(t),this.modeToDFA.push(new s.DFA(t)),this.defineDecisionState(t)}defineDecisionState(e){return this.decisionToState.push(e),e.decision=this.decisionToState.length-1,this.decisionToDFA.push(new s.DFA(e,e.decision)),e.decision}getDecisionState(e){if(this.decisionToState.length>0)return this.decisionToState[e]}get numberOfDecisions(){return this.decisionToState.length}getExpectedTokens(e,t){if(e<0||e>=this.states.length)throw new RangeError("Invalid state number.");let r=t,n=this.states[e],o=this.nextTokens(n);if(!o.contains(d.Token.EPSILON))return o;let i=new a.IntervalSet;for(i.addAll(o),i.remove(d.Token.EPSILON);null!=r&&r.invokingState>=0&&o.contains(d.Token.EPSILON);){let e=this.states[r.invokingState].transition(0);o=this.nextTokens(e.followState),i.addAll(o),i.remove(d.Token.EPSILON),r=r._parent}return o.contains(d.Token.EPSILON)&&i.add(d.Token.EOF),i}};n([u.NotNull],m.prototype,"states",void 0),n([u.NotNull],m.prototype,"decisionToState",void 0),n([u.NotNull],m.prototype,"modeNameToStartState",void 0),n([u.NotNull],m.prototype,"modeToStartState",void 0),n([u.NotNull],m.prototype,"decisionToDFA",void 0),n([u.NotNull],m.prototype,"modeToDFA",void 0),n([u.NotNull],m.prototype,"nextTokens",null),n([o(0,u.NotNull)],m.prototype,"removeState",null),n([o(0,u.NotNull),o(1,u.NotNull)],m.prototype,"defineMode",null),n([o(0,u.NotNull)],m.prototype,"defineDecisionState",null),n([u.NotNull],m.prototype,"getExpectedTokens",null),m=n([o(0,u.NotNull)],m),t.ATN=m,function(e){e.INVALID_ALT_NUMBER=0}(m=t.ATN||(t.ATN={})),t.ATN=m},42:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(9),s=r(172),a=r(0),l=r(49),c=r(11),u=16,p=.75;class Array2DHashSet{constructor(e,t=u){if(this.n=0,this.threshold=Math.floor(u*p),e instanceof Array2DHashSet){this.comparator=e.comparator,this.buckets=e.buckets.slice(0);for(let e=0;e<this.buckets.length;e++){let t=this.buckets[e];t&&(this.buckets[e]=t.slice(0))}this.n=e.n,this.threshold=e.threshold}else this.comparator=e||s.DefaultEqualityComparator.INSTANCE,this.buckets=this.createBuckets(t)}getOrAdd(e){return this.n>this.threshold&&this.expand(),this.getOrAddImpl(e)}getOrAddImpl(e){let t=this.getBucket(e),r=this.buckets[t];if(!r)return r=[e],this.buckets[t]=r,this.n++,e;for(let t=0;t<r.length;t++){let n=r[t];if(this.comparator.equals(n,e))return n}return r.push(e),this.n++,e}get(e){if(null==e)return e;let t=this.getBucket(e),r=this.buckets[t];if(r)for(let t of r)if(this.comparator.equals(t,e))return t}getBucket(e){return this.comparator.hashCode(e)&this.buckets.length-1}hashCode(){let e=c.MurmurHash.initialize();for(let t of this.buckets)if(null!=t)for(let r of t){if(null==r)break;e=c.MurmurHash.update(e,this.comparator.hashCode(r))}return e=c.MurmurHash.finish(e,this.size)}equals(e){if(e===this)return!0;if(!(e instanceof Array2DHashSet))return!1;if(e.size!==this.size)return!1;return this.containsAll(e)}expand(){let e=this.buckets,t=2*this.buckets.length,r=this.createBuckets(t);this.buckets=r,this.threshold=Math.floor(t*p);let n=this.size;for(let t of e)if(t)for(let e of t){let t=this.getBucket(e),r=this.buckets[t];r||(r=[],this.buckets[t]=r),r.push(e)}i(this.n===n)}add(e){return this.getOrAdd(e)===e}get size(){return this.n}get isEmpty(){return 0===this.n}contains(e){return this.containsFast(this.asElementType(e))}containsFast(e){return null!=e&&null!=this.get(e)}iterator(){return new SetIterator(this.toArray(),this)}toArray(e){(!e||e.length<this.size)&&(e=new Array(this.size));let t=0;for(let r of this.buckets)if(null!=r)for(let n of r){if(null==n)break;e[t++]=n}return e}remove(e){return this.removeFast(this.asElementType(e))}removeFast(e){if(null==e)return!1;let t=this.getBucket(e),r=this.buckets[t];if(!r)return!1;for(let t=0;t<r.length;t++){let n=r[t];if(this.comparator.equals(n,e))return r.copyWithin(t,t+1),r.length--,this.n--,!0}return!1}containsAll(e){if(e instanceof Array2DHashSet){let t=e;for(let e of t.buckets)if(null!=e)for(let t of e){if(null==t)break;if(!this.containsFast(this.asElementType(t)))return!1}}else for(let t of l.asIterable(e))if(!this.containsFast(this.asElementType(t)))return!1;return!0}addAll(e){let t=!1;for(let r of l.asIterable(e)){this.getOrAdd(r)!==r&&(t=!0)}return t}retainAll(e){let t=0;for(let r of this.buckets){if(null==r)continue;let n,o;for(n=0,o=0;n<r.length&&null!=r[n];n++)e.contains(r[n])&&(n!==o&&(r[o]=r[n]),o++,t++);t+=o,r.length=o}let r=t!=this.n;return this.n=t,r}removeAll(e){let t=!1;for(let r of l.asIterable(e))this.removeFast(this.asElementType(r))&&(t=!0);return t}clear(){this.buckets=this.createBuckets(u),this.n=0,this.threshold=Math.floor(u*p)}toString(){if(0===this.size)return"{}";let e="{",t=!0;for(let r of this.buckets)if(null!=r)for(let n of r){if(null==n)break;t?t=!1:e+=", ",e+=n.toString()}return e+="}"}toTableString(){let e="";for(let t of this.buckets){if(null==t){e+="null\n";continue}e+="[";let r=!0;for(let n of t)r?r=!1:e+=" ",e+=null==n?"_":n.toString();e+="]\n"}return e}asElementType(e){return e}createBuckets(e){return new Array(e)}}n([a.NotNull],Array2DHashSet.prototype,"comparator",void 0),n([a.Override],Array2DHashSet.prototype,"hashCode",null),n([a.Override],Array2DHashSet.prototype,"equals",null),n([a.Override],Array2DHashSet.prototype,"add",null),n([a.Override],Array2DHashSet.prototype,"size",null),n([a.Override],Array2DHashSet.prototype,"isEmpty",null),n([a.Override],Array2DHashSet.prototype,"contains",null),n([o(0,a.Nullable)],Array2DHashSet.prototype,"containsFast",null),n([a.Override],Array2DHashSet.prototype,"iterator",null),n([a.Override],Array2DHashSet.prototype,"toArray",null),n([a.Override],Array2DHashSet.prototype,"remove",null),n([o(0,a.Nullable)],Array2DHashSet.prototype,"removeFast",null),n([a.Override],Array2DHashSet.prototype,"containsAll",null),n([a.Override],Array2DHashSet.prototype,"addAll",null),n([a.Override],Array2DHashSet.prototype,"retainAll",null),n([a.Override],Array2DHashSet.prototype,"removeAll",null),n([a.Override],Array2DHashSet.prototype,"clear",null),n([a.Override],Array2DHashSet.prototype,"toString",null),n([a.SuppressWarnings("unchecked")],Array2DHashSet.prototype,"asElementType",null),n([a.SuppressWarnings("unchecked")],Array2DHashSet.prototype,"createBuckets",null),t.Array2DHashSet=Array2DHashSet;class SetIterator{constructor(e,t){this.data=e,this.set=t,this.nextIndex=0,this.removed=!0}hasNext(){return this.nextIndex<this.data.length}next(){if(this.nextIndex>=this.data.length)throw new RangeError("Attempted to iterate past end.");return this.removed=!1,this.data[this.nextIndex++]}remove(){if(this.removed)throw new Error("This entry has already been removed");this.set.remove(this.data[this.nextIndex-1]),this.removed=!0}}},43:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(0);let s=class Transition{constructor(e){if(null==e)throw new Error("target cannot be null.");this.target=e}get isEpsilon(){return!1}get label(){}};s.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"],n([i.NotNull],s.prototype,"target",void 0),s=n([o(0,i.NotNull)],s),t.Transition=s},48:function(e,t,r){"use strict";var n=r(4).inherits,o=r(28),i=r(5).MongoError,s=r(18).Readable||r(76).Readable,a=r(20),l=r(32),c=r(5).ReadPreference,u=function(e,t,n,o,i,a){l.apply(this,Array.prototype.slice.call(arguments,0));var c=u.INIT,p=o.promiseLibrary;p||(p="function"==typeof global.Promise?global.Promise:r(16).Promise),s.call(this,{objectMode:!0}),this.s={maxTimeMS:null,state:c,streamOptions:{},bson:e,ns:t,cmd:n,options:o,topology:i,topologyOptions:a,promiseLibrary:p}};n(u,s);for(var p=["_next","next","hasNext","each","forEach","toArray","rewind","bufferedCount","readBufferedDocuments","close","isClosed","kill","setCursorBatchSize","_find","_getmore","_killcursor","isDead","explain","isNotified","isKilled"],h=0;h<p.length;h++)u.prototype[p[h]]=l.prototype[p[h]];var d=u.define=new a("CommandCursor",u,!0);u.prototype.setReadPreference=function(e){if(this.s.state==u.CLOSED||this.isDead())throw i.create({message:"Cursor is closed",driver:!0});if(this.s.state!=u.INIT)throw i.create({message:"cannot change cursor readPreference after cursor has been accessed",driver:!0});return e instanceof o?this.s.options.readPreference=new c(e.mode,e.tags,{maxStalenessSeconds:e.maxStalenessSeconds}):"string"==typeof e?this.s.options.readPreference=new c(e):e instanceof c&&(this.s.options.readPreference=e),this},d.classMethod("setReadPreference",{callback:!1,promise:!1,returns:[u]}),u.prototype.batchSize=function(e){if(this.s.state==u.CLOSED||this.isDead())throw i.create({message:"Cursor is closed",driver:!0});if("number"!=typeof e)throw i.create({message:"batchSize requires an integer",driver:!0});return this.s.cmd.cursor&&(this.s.cmd.cursor.batchSize=e),this.setCursorBatchSize(e),this},d.classMethod("batchSize",{callback:!1,promise:!1,returns:[u]}),u.prototype.maxTimeMS=function(e){return this.s.topology.lastIsMaster().minWireVersion>2&&(this.s.cmd.maxTimeMS=e),this},d.classMethod("maxTimeMS",{callback:!1,promise:!1,returns:[u]}),u.prototype.get=u.prototype.toArray,d.classMethod("get",{callback:!0,promise:!1}),d.classMethod("toArray",{callback:!0,promise:!0}),d.classMethod("each",{callback:!0,promise:!1}),d.classMethod("forEach",{callback:!0,promise:!1}),d.classMethod("next",{callback:!0,promise:!0}),d.classMethod("hasNext",{callback:!0,promise:!0}),d.classMethod("close",{callback:!0,promise:!0}),d.classMethod("isClosed",{callback:!1,promise:!1,returns:[Boolean]}),d.classMethod("rewind",{callback:!1,promise:!1}),d.classMethod("bufferedCount",{callback:!1,promise:!1,returns:[Number]}),d.classMethod("readBufferedDocuments",{callback:!1,promise:!1,returns:[Array]}),u.INIT=0,u.OPEN=1,u.CLOSED=2,e.exports=u},49:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.asIterable=function(e){return e[Symbol.iterator]?e:new IterableAdapter(e)};class IterableAdapter{constructor(e){this.collection=e}[Symbol.iterator](){return this._iterator=this.collection.iterator(),this}next(){return this._iterator.hasNext()?{done:!1,value:this._iterator.next()}:{done:!0,value:void 0}}}},5:function(e,t){e.exports=require("mongodb-core")},50:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(51);t.DecisionState=class DecisionState extends n.ATNState{constructor(){super(...arguments),this.decision=-1,this.nonGreedy=!1,this.sll=!1}}},51:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(0);class ATNState{constructor(){this.stateNumber=ATNState.INVALID_STATE_NUMBER,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.optimizedTransitions=this.transitions}getStateNumber(){return this.stateNumber}get nonStopStateNumber(){return this.getStateNumber()}hashCode(){return this.stateNumber}equals(e){return e instanceof ATNState&&this.stateNumber===e.stateNumber}get isNonGreedyExitState(){return!1}toString(){return String(this.stateNumber)}getTransitions(){return this.transitions.slice(0)}get numberOfTransitions(){return this.transitions.length}addTransition(e,t){if(0===this.transitions.length)this.epsilonOnlyTransitions=e.isEpsilon;else if(this.epsilonOnlyTransitions!==e.isEpsilon)throw this.epsilonOnlyTransitions=!1,new Error("ATN state "+this.stateNumber+" has both epsilon and non-epsilon transitions.");this.transitions.splice(void 0!==t?t:this.transitions.length,0,e)}transition(e){return this.transitions[e]}setTransition(e,t){this.transitions[e]=t}removeTransition(e){return this.transitions.splice(e,1)[0]}get onlyHasEpsilonTransitions(){return this.epsilonOnlyTransitions}setRuleIndex(e){this.ruleIndex=e}get isOptimized(){return this.optimizedTransitions!==this.transitions}get numberOfOptimizedTransitions(){return this.optimizedTransitions.length}getOptimizedTransition(e){return this.optimizedTransitions[e]}addOptimizedTransition(e){this.isOptimized||(this.optimizedTransitions=new Array),this.optimizedTransitions.push(e)}setOptimizedTransition(e,t){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions[e]=t}removeOptimizedTransition(e){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions.splice(e,1)}}ATNState.serializationNames=["INVALID","BASIC","RULE_START","BLOCK_START","PLUS_BLOCK_START","STAR_BLOCK_START","TOKEN_START","RULE_STOP","BLOCK_END","STAR_LOOP_BACK","STAR_LOOP_ENTRY","PLUS_LOOP_BACK","LOOP_END"],n([o.Override],ATNState.prototype,"hashCode",null),n([o.Override],ATNState.prototype,"equals",null),n([o.Override],ATNState.prototype,"toString",null),t.ATNState=ATNState,function(e){e.INVALID_STATE_NUMBER=-1}(ATNState=t.ATNState||(t.ATNState={}))},52:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(91),s=r(117),a=r(23),l=r(71),c=r(11),u=r(0),p=r(13);class IntervalSet{constructor(e){this.readonly=!1,this._intervals=null!=e?e.slice(0):[]}static get COMPLETE_CHAR_SET(){return void 0===IntervalSet._COMPLETE_CHAR_SET&&(IntervalSet._COMPLETE_CHAR_SET=IntervalSet.of(l.Lexer.MIN_CHAR_VALUE,l.Lexer.MAX_CHAR_VALUE),IntervalSet._COMPLETE_CHAR_SET.setReadonly(!0)),IntervalSet._COMPLETE_CHAR_SET}static get EMPTY_SET(){return null==IntervalSet._EMPTY_SET&&(IntervalSet._EMPTY_SET=new IntervalSet,IntervalSet._EMPTY_SET.setReadonly(!0)),IntervalSet._EMPTY_SET}static of(e,t=e){let r=new IntervalSet;return r.add(e,t),r}clear(){if(this.readonly)throw new Error("can't alter readonly IntervalSet");this._intervals.length=0}add(e,t=e){this.addRange(a.Interval.of(e,t))}addRange(e){if(this.readonly)throw new Error("can't alter readonly IntervalSet");if(!(e.b<e.a)){for(let t=0;t<this._intervals.length;t++){let r=this._intervals[t];if(e.equals(r))return;if(e.adjacent(r)||!e.disjoint(r)){let n=e.union(r);for(this._intervals[t]=n;t<this._intervals.length-1;){t++;let e=this._intervals[t];if(!n.adjacent(e)&&n.disjoint(e))break;this._intervals.splice(t,1),t--,this._intervals[t]=n.union(e)}return}if(e.startsBeforeDisjoint(r))return void this._intervals.splice(t,0,e)}this._intervals.push(e)}}static or(e){let t=new IntervalSet;for(let r of e)t.addAll(r);return t}addAll(e){if(null==e)return this;if(e instanceof IntervalSet){let t=e,r=t._intervals.length;for(let e=0;e<r;e++){let r=t._intervals[e];this.add(r.a,r.b)}}else for(let t of e.toList())this.add(t);return this}complementRange(e,t){return this.complement(IntervalSet.of(e,t))}complement(e){if(e.isNil)return IntervalSet.EMPTY_SET;let t;return e instanceof IntervalSet?t=e:(t=new IntervalSet).addAll(e),t.subtract(this)}subtract(e){if(null==e||e.isNil)return new IntervalSet(this._intervals);if(e instanceof IntervalSet)return IntervalSet.subtract(this,e);let t=new IntervalSet;return t.addAll(e),IntervalSet.subtract(this,t)}static subtract(e,t){if(e.isNil)return new IntervalSet;let r=new IntervalSet(e._intervals);if(t.isNil)return r;let n=0,o=0;for(;n<r._intervals.length&&o<t._intervals.length;){let e,i,s=r._intervals[n],l=t._intervals[o];if(l.b<s.a)o++;else if(l.a>s.b)n++;else if(l.a>s.a&&(e=new a.Interval(s.a,l.a-1)),l.b<s.b&&(i=new a.Interval(l.b+1,s.b)),e){if(i){r._intervals[n]=e,r._intervals.splice(n+1,0,i),n++,o++;continue}r._intervals[n]=e,n++}else i?(r._intervals[n]=i,o++):r._intervals.splice(n,1)}return r}or(e){let t=new IntervalSet;return t.addAll(this),t.addAll(e),t}and(e){if(e.isNil)return new IntervalSet;let t,r=this._intervals,n=e._intervals,o=r.length,i=n.length,s=0,a=0;for(;s<o&&a<i;){let e=r[s],o=n[a];e.startsBeforeDisjoint(o)?s++:o.startsBeforeDisjoint(e)?a++:e.properlyContains(o)?(t||(t=new IntervalSet),t.addRange(e.intersection(o)),a++):o.properlyContains(e)?(t||(t=new IntervalSet),t.addRange(e.intersection(o)),s++):e.disjoint(o)||(t||(t=new IntervalSet),t.addRange(e.intersection(o)),e.startsAfterNonDisjoint(o)?a++:o.startsAfterNonDisjoint(e)&&s++)}return t||new IntervalSet}contains(e){let t=this._intervals.length;for(let r=0;r<t;r++){let t=this._intervals[r],n=t.a,o=t.b;if(e<n)break;if(e>=n&&e<=o)return!0}return!1}get isNil(){return null==this._intervals||0===this._intervals.length}getSingleElement(){if(null!=this._intervals&&1===this._intervals.length){let e=this._intervals[0];if(e.a===e.b)return e.a}return p.Token.INVALID_TYPE}get maxElement(){if(this.isNil)return p.Token.INVALID_TYPE;return this._intervals[this._intervals.length-1].b}get minElement(){return this.isNil?p.Token.INVALID_TYPE:this._intervals[0].a}get intervals(){return this._intervals}hashCode(){let e=c.MurmurHash.initialize();for(let t of this._intervals)e=c.MurmurHash.update(e,t.a),e=c.MurmurHash.update(e,t.b);return e=c.MurmurHash.finish(e,2*this._intervals.length)}equals(e){return null!=e&&e instanceof IntervalSet&&i.ArrayEqualityComparator.INSTANCE.equals(this._intervals,e._intervals)}toString(e=!1){let t="";if(null==this._intervals||0===this._intervals.length)return"{}";this.size>1&&(t+="{");let r=!0;for(let n of this._intervals){r?r=!1:t+=", ";let o=n.a,i=n.b;o===i?o==p.Token.EOF?t+="<EOF>":t+=e?"'"+String.fromCharCode(o)+"'":o:t+=e?"'"+String.fromCharCode(o)+"'..'"+String.fromCharCode(i)+"'":o+".."+i}return this.size>1&&(t+="}"),t}toStringVocabulary(e){if(null==this._intervals||0===this._intervals.length)return"{}";let t="";this.size>1&&(t+="{");let r=!0;for(let n of this._intervals){r?r=!1:t+=", ";let o=n.a,i=n.b;if(o===i)t+=this.elementName(e,o);else for(let r=o;r<=i;r++)r>o&&(t+=", "),t+=this.elementName(e,r)}return this.size>1&&(t+="}"),t}elementName(e,t){return t===p.Token.EOF?"<EOF>":t===p.Token.EPSILON?"<EPSILON>":e.getDisplayName(t)}get size(){let e=0,t=this._intervals.length;if(1==t){let e=this._intervals[0];return e.b-e.a+1}for(let r=0;r<t;r++){let t=this._intervals[r];e+=t.b-t.a+1}return e}toIntegerList(){let e=new s.IntegerList(this.size),t=this._intervals.length;for(let r=0;r<t;r++){let t=this._intervals[r],n=t.a,o=t.b;for(let t=n;t<=o;t++)e.add(t)}return e}toList(){let e=new Array,t=this._intervals.length;for(let r=0;r<t;r++){let t=this._intervals[r],n=t.a,o=t.b;for(let t=n;t<=o;t++)e.push(t)}return e}toSet(){let e=new Set;for(let t of this._intervals){let r=t.a,n=t.b;for(let t=r;t<=n;t++)e.add(t)}return e}toArray(){return this.toList()}remove(e){if(this.readonly)throw new Error("can't alter readonly IntervalSet");let t=this._intervals.length;for(let r=0;r<t;r++){let t=this._intervals[r],n=t.a,o=t.b;if(e<n)break;if(e===n&&e===o){this._intervals.splice(r,1);break}if(e===n){this._intervals[r]=a.Interval.of(t.a+1,t.b);break}if(e===o){this._intervals[r]=a.Interval.of(t.a,t.b-1);break}if(e>n&&e<o){let n=t.b;this._intervals[r]=a.Interval.of(t.a,e-1),this.add(e+1,n)}}}get isReadonly(){return this.readonly}setReadonly(e){if(this.readonly&&!e)throw new Error("can't alter readonly IntervalSet");this.readonly=e}}n([u.Override],IntervalSet.prototype,"addAll",null),n([u.Override],IntervalSet.prototype,"complement",null),n([u.Override],IntervalSet.prototype,"subtract",null),n([u.Override],IntervalSet.prototype,"or",null),n([u.Override],IntervalSet.prototype,"and",null),n([u.Override],IntervalSet.prototype,"contains",null),n([u.Override],IntervalSet.prototype,"isNil",null),n([u.Override],IntervalSet.prototype,"getSingleElement",null),n([u.Override],IntervalSet.prototype,"hashCode",null),n([u.Override],IntervalSet.prototype,"equals",null),n([o(0,u.NotNull)],IntervalSet.prototype,"toStringVocabulary",null),n([u.NotNull,o(0,u.NotNull)],IntervalSet.prototype,"elementName",null),n([u.Override],IntervalSet.prototype,"size",null),n([u.Override],IntervalSet.prototype,"toList",null),n([u.Override],IntervalSet.prototype,"remove",null),n([u.NotNull],IntervalSet,"of",null),n([u.NotNull],IntervalSet,"subtract",null),t.IntervalSet=IntervalSet},53:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,i,s,a,l=r(7),c=r(34),u=Object.prototype.toString;function p(e){return void 0!==e}function h(e){return"[object String]"===u.call(e)}function d(e){return JSON.parse(c.readFileSync(e,"utf8"))}function f(e,t){return a&&(e=""+e.replace(/[aouei]/g,"$&$&")+""),0===t.length?e:e.replace(/\{(\d+)\}/g,function(e,r){var n=r[0],o=t[n],i=e;return"string"==typeof o?i=o:"number"!=typeof o&&"boolean"!=typeof o&&null!=o||(i=String(o)),i})}function m(e){return function(t,r){for(var n,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return n=t,"[object Number]"===u.call(n)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: "+new Error("").stack):f(e[t],o):h(r)?(console.warn("Message "+r+" didn't get externalized correctly."),f(r,o)):void console.error("Broken localize call found. Stacktrace is\n: "+new Error("").stack)}}function g(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return f(t,r)}function y(e,t){return i[e]=t,t}function v(e,t){var r,n,o,i=l.join(s.cacheRoot,e.id+"-"+e.hash+".json"),a=!1,u=!1;try{return r=JSON.parse(c.readFileSync(i,{encoding:"utf8",flag:"r"})),n=i,o=new Date,c.utimes(n,o,o,function(){}),r}catch(e){if("ENOENT"===e.code)u=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: "+e.message+"."),c.unlink(i,function(e){e&&console.error("Deleting corrupted bundle "+i+" failed.")}),a=!0}}if(!(r=function(e,t){var r=s.translationsConfig[e.id];if(r){var n=d(r).contents,o=d(l.join(t,"nls.metadata.json")),i=Object.create(null);for(var a in o){var c=o[a],u=n[e.outDir+"/"+a];if(u){for(var p=[],f=0;f<c.keys.length;f++){var m=c.keys[f],g=u[h(m)?m:m.key];void 0===g&&(g=c.messages[f]),p.push(g)}i[a]=p}else i[a]=c.messages}return i}}(e,t))||a)return r;if(u)try{c.writeFileSync(i,JSON.stringify(r),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return r;throw e}return r}function b(e){try{return function(e){var t=d(l.join(e,"nls.metadata.json")),r=Object.create(null);for(var n in t){var o=t[n];r[n]=o.messages}return r}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function x(e,t){var r;if(!0===s.languagePackSupport&&void 0!==s.cacheRoot&&void 0!==s.languagePackId&&void 0!==s.translationsConfigFile&&void 0!==s.translationsConfig)try{r=v(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!r){if(s.languagePackSupport)return b(t);var n=function(e){for(var t=s.locale;t;){var r=l.join(e,"nls.bundle."+t+".json");if(c.existsSync(r))return r;var n=t.lastIndexOf("-");t=n>0?t.substring(0,n):void 0}if(void 0===t&&(r=l.join(e,"nls.bundle.json"),c.existsSync(r)))return r}(t);if(n)try{return d(n)}catch(e){console.log("Loading in the box message bundle failed.",e)}r=b(t)}return r}function S(e){if(!e)return g;var t=l.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),s.messageFormat===n.both||s.messageFormat===n.bundle){var r=function(e){for(var t,r=l.dirname(e);t=l.join(r,"nls.metadata.header.json"),!c.existsSync(t);){var n=l.dirname(r);if(n===r){t=void 0;break}r=n}return t}(e);if(r){var o=l.dirname(r),u=i[o];if(void 0===u)try{var h=JSON.parse(c.readFileSync(r,"utf8"));try{var f=x(h,o);u=y(o,f?{header:h,nlsBundle:f}:null)}catch(e){console.error("Failed to load nls bundle",e),u=y(o,null)}}catch(e){console.error("Failed to read header file",e),u=y(o,null)}if(u){var v=e.substr(o.length+1).replace(/\\/g,"/"),b=u.nlsBundle[v];return void 0===b?(console.error("Messages for file "+e+" not found. See console for details."),function(){return"Messages not found."}):m(b)}}}if(s.messageFormat===n.both||s.messageFormat===n.file)try{var S=d(function(e){var t;if(s.cacheLanguageResolution&&t)t=t;else{if(a||!s.locale)t=".nls.json";else for(var r=s.locale;r;){var n=".nls."+r+".json";if(c.existsSync(e+n)){t=n;break}var o=r.lastIndexOf("-");o>0?r=r.substring(0,o):(t=".nls.json",r=null)}s.cacheLanguageResolution&&(t=t)}return e+t}(e));return Array.isArray(S)?m(S):p(S.messages)&&p(S.keys)?m(S.messages):(console.error("String bundle '"+e+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file "+e),function(){return"Failed to load message bundle. See console for details."}}!function(e){e.file="file",e.bundle="bundle",e.both="both"}(n=t.MessageFormat||(t.MessageFormat={})),function(e){e.is=function(e){var t=e;return t&&p(t.key)&&p(t.comment)}}(o||(o={})),function(){if(s={locale:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:n.bundle},h(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG);if(h(e.locale)&&(s.locale=e.locale.toLowerCase()),(!0===(t=e._languagePackSupport)||!1===t)&&(s.languagePackSupport=e._languagePackSupport),h(e._cacheRoot)&&(s.cacheRoot=e._cacheRoot),h(e._languagePackId)&&(s.languagePackId=e._languagePackId),h(e._translationsConfigFile)){s.translationsConfigFile=e._translationsConfigFile;try{s.translationsConfig=d(s.translationsConfigFile)}catch(t){e._corruptedFile&&c.writeFile(e._corruptedFile,"corrupted","utf8",function(e){console.error(e)})}}}catch(e){}var t;a="pseudo"===s.locale,void 0,i=Object.create(null)}(),t.loadMessageBundle=S,t.config=function(e){return e&&(h(e.locale)&&(s.locale=e.locale.toLowerCase(),void 0,i=Object.create(null)),void 0!==e.messageFormat&&(s.messageFormat=e.messageFormat)),a="pseudo"===s.locale,S}},58:function(e,t,r){"use strict";var n=r(4).inherits,o=r(5).MongoError,i=r(18).Readable||r(76).Readable,s=r(20),a=r(32),l=function(e,t,n,o,s,c){a.apply(this,Array.prototype.slice.call(arguments,0));var u=l.INIT,p=o.promiseLibrary;p||(p="function"==typeof global.Promise?global.Promise:r(16).Promise),i.call(this,{objectMode:!0}),this.s={maxTimeMS:null,state:u,streamOptions:{},bson:e,ns:t,cmd:n,options:o,topology:s,topologyOptions:c,promiseLibrary:p}};for(var c in n(l,i),a.prototype)l.prototype[c]=a.prototype[c];var u=l.define=new s("AggregationCursor",l,!0);l.prototype.batchSize=function(e){if(this.s.state==l.CLOSED||this.isDead())throw o.create({message:"Cursor is closed",driver:!0});if("number"!=typeof e)throw o.create({message:"batchSize requires an integer",driver:!0});return this.s.cmd.cursor&&(this.s.cmd.cursor.batchSize=e),this.setCursorBatchSize(e),this},u.classMethod("batchSize",{callback:!1,promise:!1,returns:[l]}),l.prototype.geoNear=function(e){return this.s.cmd.pipeline.push({$geoNear:e}),this},u.classMethod("geoNear",{callback:!1,promise:!1,returns:[l]}),l.prototype.group=function(e){return this.s.cmd.pipeline.push({$group:e}),this},u.classMethod("group",{callback:!1,promise:!1,returns:[l]}),l.prototype.limit=function(e){return this.s.cmd.pipeline.push({$limit:e}),this},u.classMethod("limit",{callback:!1,promise:!1,returns:[l]}),l.prototype.match=function(e){return this.s.cmd.pipeline.push({$match:e}),this},u.classMethod("match",{callback:!1,promise:!1,returns:[l]}),l.prototype.maxTimeMS=function(e){return this.s.topology.lastIsMaster().minWireVersion>2&&(this.s.cmd.maxTimeMS=e),this},u.classMethod("maxTimeMS",{callback:!1,promise:!1,returns:[l]}),l.prototype.out=function(e){return this.s.cmd.pipeline.push({$out:e}),this},u.classMethod("out",{callback:!1,promise:!1,returns:[l]}),l.prototype.project=function(e){return this.s.cmd.pipeline.push({$project:e}),this},u.classMethod("project",{callback:!1,promise:!1,returns:[l]}),l.prototype.lookup=function(e){return this.s.cmd.pipeline.push({$lookup:e}),this},u.classMethod("lookup",{callback:!1,promise:!1,returns:[l]}),l.prototype.redact=function(e){return this.s.cmd.pipeline.push({$redact:e}),this},u.classMethod("redact",{callback:!1,promise:!1,returns:[l]}),l.prototype.skip=function(e){return this.s.cmd.pipeline.push({$skip:e}),this},u.classMethod("skip",{callback:!1,promise:!1,returns:[l]}),l.prototype.sort=function(e){return this.s.cmd.pipeline.push({$sort:e}),this},u.classMethod("sort",{callback:!1,promise:!1,returns:[l]}),l.prototype.unwind=function(e){return this.s.cmd.pipeline.push({$unwind:e}),this},u.classMethod("unwind",{callback:!1,promise:!1,returns:[l]}),l.prototype.get=l.prototype.toArray,u.classMethod("toArray",{callback:!0,promise:!0}),u.classMethod("each",{callback:!0,promise:!1}),u.classMethod("forEach",{callback:!0,promise:!1}),u.classMethod("hasNext",{callback:!0,promise:!0}),u.classMethod("next",{callback:!0,promise:!0}),u.classMethod("close",{callback:!0,promise:!0}),u.classMethod("isClosed",{callback:!1,promise:!1,returns:[Boolean]}),u.classMethod("rewind",{callback:!1,promise:!1}),u.classMethod("bufferedCount",{callback:!1,promise:!1,returns:[Number]}),u.classMethod("readBufferedDocuments",{callback:!1,promise:!1,returns:[Array]}),l.INIT=0,l.OPEN=1,l.CLOSED=2,e.exports=l},59:function(e,t,r){"use strict";var n=r(5).MongoError,o=r(4).format,i=function(e,t){var r=this;t=t||{force:!1,bufferMaxEntries:-1},this.s={storedOps:[],storeOptions:t,topology:e},Object.defineProperty(this,"length",{enumerable:!0,get:function(){return r.s.storedOps.length}})};i.prototype.add=function(e,t,r,i,s){if(this.s.storeOptions.force)return s(n.create({message:"db closed by application",driver:!0}));if(0==this.s.storeOptions.bufferMaxEntries)return s(n.create({message:o("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries),driver:!0}));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries)for(;this.s.storedOps.length>0;){this.s.storedOps.shift().c(n.create({message:o("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries),driver:!0}))}else this.s.storedOps.push({t:e,n:t,o:r,op:i,c:s})},i.prototype.addObjectAndMethod=function(e,t,r,i,s){if(this.s.storeOptions.force)return s(n.create({message:"db closed by application",driver:!0}));if(0==this.s.storeOptions.bufferMaxEntries)return s(n.create({message:o("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries),driver:!0}));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries)for(;this.s.storedOps.length>0;){this.s.storedOps.shift().c(n.create({message:o("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries),driver:!0}))}else this.s.storedOps.push({t:e,m:r,o:t,p:i,c:s})},i.prototype.flush=function(e){for(;this.s.storedOps.length>0;)this.s.storedOps.shift().c(e||n.create({message:o("no connection available for operation"),driver:!0}))};var s=["primary","primaryPreferred","nearest","secondaryPreferred"],a=["secondary","secondaryPreferred"];i.prototype.execute=function(e){e=e||{};var t=this.s.storedOps;this.s.storedOps=[];for(var r="boolean"!=typeof e.executePrimary||e.executePrimary,n="boolean"!=typeof e.executeSecondary||e.executeSecondary;t.length>0;){var o=t.shift();"cursor"==o.t?r&&n?o.o[o.m].apply(o.o,o.p):r&&o.o.options&&o.o.options.readPreference&&-1!=s.indexOf(o.o.options.readPreference.mode)?o.o[o.m].apply(o.o,o.p):!r&&n&&o.o.options&&o.o.options.readPreference&&-1!=a.indexOf(o.o.options.readPreference.mode)&&o.o[o.m].apply(o.o,o.p):"auth"==o.t?this.s.topology[o.t].apply(this.s.topology,o.o):r&&n?this.s.topology[o.t](o.n,o.o,o.op,o.c):r&&o.op&&o.op.readPreference&&-1!=s.indexOf(o.op.readPreference.mode)?this.s.topology[o.t](o.n,o.o,o.op,o.c):!r&&n&&o.op&&o.op.readPreference&&-1!=a.indexOf(o.op.readPreference.mode)&&this.s.topology[o.t](o.n,o.o,o.op,o.c)}},i.prototype.all=function(){return this.s.storedOps};t.Store=i,t.ServerCapabilities=function(e){var t=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:function(){return r}})},r=!1,n=!1,o=!1,i=!1,s=!1,a=!1,l=e.maxWriteBatchSize||1e3,c=!1,u=!1;e.minWireVersion>=0&&(o=!0),e.maxWireVersion>=1&&(r=!0,i=!0),e.maxWireVersion>=2&&(n=!0),e.maxWireVersion>=3&&(s=!0,a=!0),e.maxWireVersion>=5&&(c=!0,u=!0),null==e.minWireVersion&&(e.minWireVersion=0),null==e.maxWireVersion&&(e.maxWireVersion=0),t(this,"hasAggregationCursor",r),t(this,"hasWriteCommands",n),t(this,"hasTextSearch",o),t(this,"hasAuthCommands",i),t(this,"hasListCollectionsCommand",s),t(this,"hasListIndexesCommand",a),t(this,"minWireVersion",e.minWireVersion),t(this,"maxWireVersion",e.maxWireVersion),t(this,"maxNumberOfDocsInBatch",l),t(this,"commandsTakeWriteConcern",c),t(this,"commandsTakeCollation",u)}},593:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=Object.prototype.toString;function o(e){return"[object String]"===n.call(e)}function i(e){return"[object Function]"===n.call(e)}function s(e){return Array.isArray(e)}t.defined=function(e){return void 0!==e},t.undefined=function(e){return void 0===e},t.nil=function(e){return null===e},t.boolean=function(e){return!0===e||!1===e},t.string=o,t.number=function(e){return"[object Number]"===n.call(e)},t.error=function(e){return"[object Error]"===n.call(e)},t.func=i,t.array=s,t.stringArray=function(e){return s(e)&&e.every(e=>o(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&i(e.then)}},60:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(42),o=r(49),i=r(172);class MapKeyEqualityComparator{constructor(e){this.keyComparator=e}hashCode(e){return this.keyComparator.hashCode(e.key)}equals(e,t){return this.keyComparator.equals(e.key,t.key)}}class Array2DHashMap{constructor(e){this.backingStore=e instanceof Array2DHashMap?new n.Array2DHashSet(e.backingStore):new n.Array2DHashSet(new MapKeyEqualityComparator(e))}clear(){this.backingStore.clear()}containsKey(e){return this.backingStore.contains({key:e})}containsValue(e){return this.values().contains(e)}entrySet(){return new EntrySet(this,this.backingStore)}get(e){let t=this.backingStore.get({key:e});if(t)return t.value}get isEmpty(){return this.backingStore.isEmpty}keySet(){return new KeySet(this,this.backingStore)}put(e,t){let r,n=this.backingStore.get({key:e,value:t});return n?(r=n.value,n.value=t):this.backingStore.add({key:e,value:t}),r}putIfAbsent(e,t){let r,n=this.backingStore.get({key:e,value:t});return n?r=n.value:this.backingStore.add({key:e,value:t}),r}putAll(e){for(let t of o.asIterable(e.entrySet()))this.put(t.getKey(),t.getValue())}remove(e){let t=this.get(e);return this.backingStore.remove({key:e}),t}get size(){return this.backingStore.size}values(){return new ValueCollection(this,this.backingStore)}hashCode(){return this.backingStore.hashCode()}equals(e){return e instanceof Array2DHashMap&&this.backingStore.equals(e.backingStore)}}t.Array2DHashMap=Array2DHashMap;class EntrySet{constructor(e,t){this.map=e,this.backingStore=t}add(e){throw new Error("Not implemented")}addAll(e){throw new Error("Not implemented")}clear(){this.map.clear()}contains(e){throw new Error("Not implemented")}containsAll(e){for(let t of o.asIterable(e))if(!this.contains(t))return!1;return!0}equals(e){return e===this||e instanceof EntrySet&&this.backingStore.equals(e.backingStore)}hashCode(){return this.backingStore.hashCode()}get isEmpty(){return this.backingStore.isEmpty}iterator(){throw new Error("Not implemented")}remove(e){throw new Error("Not implemented")}removeAll(e){let t=!1;for(let r of o.asIterable(e))t=this.remove(r)||t;return t}retainAll(e){throw new Error("Not implemented")}get size(){return this.backingStore.size}toArray(e){throw new Error("Not implemented")}}class KeySet{constructor(e,t){this.map=e,this.backingStore=t}add(e){throw new Error("Not supported")}addAll(e){throw new Error("Not supported")}clear(){this.map.clear()}contains(e){return this.backingStore.contains({key:e})}containsAll(e){for(let t of o.asIterable(e))if(!this.contains(t))return!1;return!0}equals(e){return e===this||e instanceof KeySet&&this.backingStore.equals(e.backingStore)}hashCode(){return this.backingStore.hashCode()}get isEmpty(){return this.backingStore.isEmpty}iterator(){throw new Error("Not implemented")}remove(e){return this.backingStore.remove({key:e})}removeAll(e){let t=!1;for(let r of o.asIterable(e))t=this.remove(r)||t;return t}retainAll(e){throw new Error("Not implemented")}get size(){return this.backingStore.size}toArray(e){throw new Error("Not implemented")}}class ValueCollection{constructor(e,t){this.map=e,this.backingStore=t}add(e){throw new Error("Not supported")}addAll(e){throw new Error("Not supported")}clear(){this.map.clear()}contains(e){for(let t of o.asIterable(this.backingStore))if(i.DefaultEqualityComparator.INSTANCE.equals(e,t.value))return!0;return!1}containsAll(e){for(let t of o.asIterable(e))if(!this.contains(t))return!1;return!0}equals(e){return e===this||e instanceof ValueCollection&&this.backingStore.equals(e.backingStore)}hashCode(){return this.backingStore.hashCode()}get isEmpty(){return this.backingStore.isEmpty}iterator(){let e=this.backingStore.iterator();return{hasNext:()=>e.hasNext(),next:()=>e.next().value,remove(){throw new Error("Not supported")}}}remove(e){throw new Error("Not implemented")}removeAll(e){let t=!1;for(let r of o.asIterable(e))t=this.remove(r)||t;return t}retainAll(e){throw new Error("Not implemented")}get size(){return this.backingStore.size}toArray(e){(void 0===e||e.length<this.backingStore.size)&&(e=new Array(this.backingStore.size));let t=0;for(let r of o.asIterable(this.backingStore))e[t++]=r.value;return e}}},61:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(4),o=r(11),i=new Uint16Array(0);function s(e){return e>>>4}function a(e){return 16*e}function l(e){let t=1;for(let r=0;r<16;r++){if(0!=(e&t))return r;t=t<<1>>>0}throw new RangeError("No specified bit found")}function c(e){let t=32768;for(let r=15;r>=0;r--){if(0!=(e&t))return r;t>>>=1}throw new RangeError("No specified bit found")}function u(e,t){return(e&=15)===(t&=15)?1<<e>>>0:65535>>>15-t^65535>>>16-e}const p=new Uint8Array(65536);for(let e=0;e<16;e++){const t=1<<e>>>0;let r=0;for(;r<p.length;){r+=t;for(let e=0;e<t;e++)p[r]++,r++}}class BitSet{constructor(e){if(e)if("number"==typeof e){if(e<0)throw new RangeError("nbits cannot be negative");this.data=new Uint16Array(s(e-1)+1)}else if(e instanceof BitSet)this.data=e.data.slice(0);else{let t=-1;for(let r of e)t<r&&(t=r);this.data=new Uint16Array(s(t-1)+1);for(let t of e)this.set(t)}else this.data=i}and(e){const t=this.data,r=e.data,n=Math.min(t.length,r.length);let o=-1;for(let e=0;e<n;e++)0!=(t[e]&=r[e])&&(o=e);-1===o&&(this.data=i),o<t.length-1&&(this.data=t.slice(0,o+1))}andNot(e){const t=this.data,r=e.data,n=Math.min(t.length,r.length);let o=-1;for(let e=0;e<n;e++)0!=(t[e]&=65535^r[e])&&(o=e);-1===o&&(this.data=i),o<t.length-1&&(this.data=t.slice(0,o+1))}cardinality(){if(this.isEmpty)return 0;const e=this.data,t=e.length;let r=0;for(let n=0;n<t;n++)r+=p[e[n]];return r}clear(e,t){null==e?this.data.fill(0):null==t?this.set(e,!1):this.set(e,t,!1)}flip(e,t){if(null==t&&(t=e),e<0||t<e)throw new RangeError;let r=s(e);const n=s(t);if(r===n)this.data[r]^=u(e,t);else{for(this.data[r++]^=u(e,15);r<n;)this.data[r++]^=65535;this.data[r++]^=u(0,t)}}get(e,t){if(void 0===t)return!!(this.data[s(e)]&u(e,e));{let r=new BitSet(t+1);for(let n=e;n<=t;n++)r.set(n,this.get(n));return r}}intersects(e){let t=Math.min(this.length(),e.length());if(0===t)return!1;let r=s(t-1);for(let t=0;t<=r;t++)if(0!=(this.data[t]&e.data[t]))return!0;return!1}get isEmpty(){return 0===this.length()}length(){return this.data.length?this.previousSetBit(a(this.data.length)-1)+1:0}nextClearBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,r=t.length;let n=s(e);if(n>r)return-1;let o=65535^u(e,15);if(65535==(t[n]|o)){for(n++,o=0;n<r&&65535===t[n];n++);if(n===r)return-1}return a(n)+l(65535^(t[n]|o))}nextSetBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,r=t.length;let n=s(e);if(n>r)return-1;let o=u(e,15);if(0==(t[n]&o)){for(n++,o=65535;n<r&&0===t[n];n++);if(n>=r)return-1}return a(n)+l(t[n]&o)}or(e){const t=this.data,r=e.data,n=Math.min(t.length,r.length),o=Math.max(t.length,r.length),s=t.length===o?t:new Uint16Array(o);let a=-1;for(let e=0;e<n;e++)0!=(s[e]=t[e]|r[e])&&(a=e);const l=t.length>r.length?t:r;for(let e=n;e<o;e++)0!==(s[e]=l[e])&&(a=e);-1===a?this.data=i:s.length===a+1?this.data=s:this.data=s.slice(0,a)}previousClearBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,r=t.length;let n=s(e);n>=r&&(n=r-1);let o=65535^u(0,e);if(65535==(t[n]|o)){for(o=0,n--;n>=0&&65535===t[n];n--);if(n<0)return-1}return a(n)+c(65535^(t[n]|o))}previousSetBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,r=t.length;let n=s(e);n>=r&&(n=r-1);let o=u(0,e);if(0==(t[n]&o)){for(n--,o=65535;n>=0&&0===t[n];n--);if(n<0)return-1}return a(n)+c(t[n]&o)}set(e,t,r){if(void 0===t?(t=e,r=!0):"boolean"==typeof t&&(r=t,t=e),void 0===r&&(r=!0),e<0||e>t)throw new RangeError;let n=s(e),o=s(t);if(r&&o>=this.data.length){var i=new Uint16Array(o+1);this.data.forEach((e,t)=>i[t]=e),this.data=i}else if(!r){if(n>=this.data.length)return;o>=this.data.length&&(o=this.data.length-1,t=16*this.data.length-1)}if(n===o)this._setBits(n,r,u(e,t));else{for(this._setBits(n++,r,u(e,15));n<o;)this.data[n++]=r?65535:0;this._setBits(n,r,u(0,t))}}_setBits(e,t,r){t?this.data[e]|=r:this.data[e]&=65535^r}get size(){return 8*this.data.byteLength}hashCode(){return o.MurmurHash.hashCode(this.data,22)}equals(e){if(e===this)return!0;if(!(e instanceof BitSet))return!1;const t=this.length();if(t!==e.length())return!1;if(0===t)return!0;let r=s(t-1);for(let t=0;t<=r;t++)if(this.data[t]!==e.data[t])return!1;return!0}toString(){let e="{",t=!0;for(let r=this.nextSetBit(0);r>=0;r=this.nextSetBit(r+1))t?t=!1:e+=", ",e+=r;return e+="}"}xor(e){const t=this.data,r=e.data,n=Math.min(t.length,r.length),o=Math.max(t.length,r.length),s=t.length===o?t:new Uint16Array(o);let a=-1;for(let e=0;e<n;e++)0!=(s[e]=t[e]^r[e])&&(a=e);const l=t.length>r.length?t:r;for(let e=n;e<o;e++)0!==(s[e]=l[e])&&(a=e);-1===a?this.data=i:s.length===a+1?this.data=s:this.data=s.slice(0,a+1)}clone(){return new BitSet(this)}[Symbol.iterator](){return new BitSetIterator(this.data)}[n.inspect.custom](){return"BitSet "+this.toString()}}t.BitSet=BitSet;class BitSetIterator{constructor(e){this.data=e,this.index=0,this.mask=65535}next(){for(;this.index<this.data.length;){const e=this.data[this.index]&this.mask;if(0!==e){const t=a(this.index)+l(e);return this.mask=u(t+1,15),{done:!1,value:t}}this.index++,this.mask=65535}return{done:!0,value:-1}}[Symbol.iterator](){return this}}},62:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(0),i=r(13);class VocabularyImpl{constructor(e,t,r){this.literalNames=e,this.symbolicNames=t,this.displayNames=r,this._maxTokenType=Math.max(this.displayNames.length,Math.max(this.literalNames.length,this.symbolicNames.length))-1}get maxTokenType(){return this._maxTokenType}getLiteralName(e){if(e>=0&&e<this.literalNames.length)return this.literalNames[e]}getSymbolicName(e){return e>=0&&e<this.symbolicNames.length?this.symbolicNames[e]:e===i.Token.EOF?"EOF":void 0}getDisplayName(e){if(e>=0&&e<this.displayNames.length){let t=this.displayNames[e];if(t)return t}let t=this.getLiteralName(e);if(t)return t;let r=this.getSymbolicName(e);return r||String(e)}}VocabularyImpl.EMPTY_VOCABULARY=new VocabularyImpl([],[],[]),n([o.NotNull],VocabularyImpl.prototype,"literalNames",void 0),n([o.NotNull],VocabularyImpl.prototype,"symbolicNames",void 0),n([o.NotNull],VocabularyImpl.prototype,"displayNames",void 0),n([o.Override],VocabularyImpl.prototype,"maxTokenType",null),n([o.Override],VocabularyImpl.prototype,"getLiteralName",null),n([o.Override],VocabularyImpl.prototype,"getSymbolicName",null),n([o.Override,o.NotNull],VocabularyImpl.prototype,"getDisplayName",null),n([o.NotNull],VocabularyImpl,"EMPTY_VOCABULARY",void 0),t.VocabularyImpl=VocabularyImpl},63:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(125),i=r(23),s=r(0),a=r(326),l=r(83);class ParserRuleContext extends a.RuleContext{constructor(e,t){null==t?super():super(e,t)}static emptyContext(){return ParserRuleContext.EMPTY}copyFrom(e){if(this._parent=e._parent,this.invokingState=e.invokingState,this._start=e._start,this._stop=e._stop,e.children){this.children=[];for(let t of e.children)t instanceof o.ErrorNode&&(this.children.push(t),t._parent=this)}}enterRule(e){}exitRule(e){}addChild(e){let t;return e instanceof l.TerminalNode||e instanceof a.RuleContext||((e=new l.TerminalNode(e))._parent=this,t=e),this.children?this.children.push(e):this.children=[e],t}removeLastChild(){this.children&&this.children.pop()}addErrorNode(e){let t=new o.ErrorNode(e);return this.addChild(t),t._parent=this,t}get parent(){let e=super.parent;if(void 0===e||e instanceof ParserRuleContext)return e;throw new TypeError("Invalid parent type for ParserRuleContext")}getChild(e,t){if(!this.children||e<0||e>=this.children.length)throw new RangeError("index parameter must be between >= 0 and <= number of children.");if(null==t)return this.children[e];let r=this.tryGetChild(e,t);if(void 0===r)throw new Error("The specified node does not exist");return r}tryGetChild(e,t){if(!this.children||e<0||e>=this.children.length)return;let r=-1;for(let n of this.children)if(n instanceof t&&++r===e)return n}getToken(e,t){let r=this.tryGetToken(e,t);if(void 0===r)throw new Error("The specified token does not exist");return r}tryGetToken(e,t){if(!this.children||t<0||t>=this.children.length)return;let r=-1;for(let n of this.children)if(n instanceof l.TerminalNode){if(n.symbol.type===e&&++r===t)return n}}getTokens(e){let t=[];if(!this.children)return t;for(let r of this.children)if(r instanceof l.TerminalNode){r.symbol.type===e&&t.push(r)}return t}get ruleContext(){return this}getRuleContext(e,t){return this.getChild(e,t)}tryGetRuleContext(e,t){return this.tryGetChild(e,t)}getRuleContexts(e){let t=[];if(!this.children)return t;for(let r of this.children)r instanceof e&&t.push(r);return t}get childCount(){return this.children?this.children.length:0}get sourceInterval(){return this._start?!this._stop||this._stop.tokenIndex<this._start.tokenIndex?i.Interval.of(this._start.tokenIndex,this._start.tokenIndex-1):i.Interval.of(this._start.tokenIndex,this._stop.tokenIndex):i.Interval.INVALID}get start(){return this._start}get stop(){return this._stop}toInfoString(e){return"ParserRuleContext"+e.getRuleInvocationStack(this).reverse()+"{start="+this._start+", stop="+this._stop+"}"}}ParserRuleContext.EMPTY=new ParserRuleContext,n([s.Override],ParserRuleContext.prototype,"parent",null),n([s.Override],ParserRuleContext.prototype,"childCount",null),n([s.Override],ParserRuleContext.prototype,"sourceInterval",null),t.ParserRuleContext=ParserRuleContext},7:function(e,t){e.exports=require("path")},70:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EOF=-1,e.UNKNOWN_SOURCE_NAME="<unknown>"}(t.IntStream||(t.IntStream={}))},71:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(302),i=r(169),s=r(23),a=r(70),l=r(170),c=r(180),u=r(0),p=r(94),h=r(13);class Lexer extends p.Recognizer{constructor(e){super(),this._factory=o.CommonTokenFactory.DEFAULT,this._tokenStartCharIndex=-1,this._tokenStartLine=0,this._tokenStartCharPositionInLine=0,this._hitEOF=!1,this._channel=0,this._type=0,this._modeStack=new i.IntegerStack,this._mode=Lexer.DEFAULT_MODE,this._input=e,this._tokenFactorySourcePair={source:this,stream:e}}static get DEFAULT_TOKEN_CHANNEL(){return h.Token.DEFAULT_CHANNEL}static get HIDDEN(){return h.Token.HIDDEN_CHANNEL}reset(e){void 0!==e&&!0!==e||this._input.seek(0),this._token=void 0,this._type=h.Token.INVALID_TYPE,this._channel=h.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartCharPositionInLine=-1,this._tokenStartLine=-1,this._text=void 0,this._hitEOF=!1,this._mode=Lexer.DEFAULT_MODE,this._modeStack.clear(),this.interpreter.reset()}nextToken(){if(null==this._input)throw new Error("nextToken requires a non-null input stream.");let e=this._input.mark();try{e:for(;;){if(this._hitEOF)return this.emitEOF();this._token=void 0,this._channel=h.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartCharPositionInLine=this.interpreter.charPositionInLine,this._tokenStartLine=this.interpreter.line,this._text=void 0;do{let e;this._type=h.Token.INVALID_TYPE;try{e=this.interpreter.match(this._input,this._mode)}catch(t){if(!(t instanceof c.LexerNoViableAltException))throw t;this.notifyListeners(t),this.recover(t),e=Lexer.SKIP}if(this._input.LA(1)===a.IntStream.EOF&&(this._hitEOF=!0),this._type===h.Token.INVALID_TYPE&&(this._type=e),this._type===Lexer.SKIP)continue e}while(this._type===Lexer.MORE);return null==this._token?this.emit():this._token}}finally{this._input.release(e)}}skip(){this._type=Lexer.SKIP}more(){this._type=Lexer.MORE}mode(e){this._mode=e}pushMode(e){l.LexerATNSimulator.debug&&console.log("pushMode "+e),this._modeStack.push(this._mode),this.mode(e)}popMode(){if(this._modeStack.isEmpty)throw new Error("EmptyStackException");return l.LexerATNSimulator.debug&&console.log("popMode back to "+this._modeStack.peek()),this.mode(this._modeStack.pop()),this._mode}get tokenFactory(){return this._factory}set tokenFactory(e){this._factory=e}set inputStream(e){this.reset(!1),this._input=e,this._tokenFactorySourcePair={source:this,stream:this._input}}get sourceName(){return this._input.sourceName}get inputStream(){return this._input}emit(e){return e||(e=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.charIndex-1,this._tokenStartLine,this._tokenStartCharPositionInLine)),this._token=e,e}emitEOF(){let e=this.charPositionInLine,t=this.line,r=this._factory.create(this._tokenFactorySourcePair,h.Token.EOF,void 0,h.Token.DEFAULT_CHANNEL,this._input.index,this._input.index-1,t,e);return this.emit(r),r}get line(){return this.interpreter.line}get charPositionInLine(){return this.interpreter.charPositionInLine}set line(e){this.interpreter.line=e}set charPositionInLine(e){this.interpreter.charPositionInLine=e}get charIndex(){return this._input.index}get text(){return null!=this._text?this._text:this.interpreter.getText(this._input)}set text(e){this._text=e}get token(){return this._token}set token(e){this._token=e}set type(e){this._type=e}get type(){return this._type}set channel(e){this._channel=e}get channel(){return this._channel}getAllTokens(){let e=[],t=this.nextToken();for(;t.type!=h.Token.EOF;)e.push(t),t=this.nextToken();return e}notifyListeners(e){let t=this._input.getText(s.Interval.of(this._tokenStartCharIndex,this._input.index)),r="token recognition error at: '"+this.getErrorDisplay(t)+"'",n=this.getErrorListenerDispatch();n.syntaxError&&n.syntaxError(this,void 0,this._tokenStartLine,this._tokenStartCharPositionInLine,r,e)}getErrorDisplay(e){if("number"==typeof e){switch(e){case h.Token.EOF:return"<EOF>";case 10:return"\\n";case 9:return"\\t";case 13:return"\\r"}return String.fromCharCode(e)}return e.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}getCharErrorDisplay(e){return"'"+this.getErrorDisplay(e)+"'"}recover(e){e instanceof c.LexerNoViableAltException?this._input.LA(1)!=a.IntStream.EOF&&this.interpreter.consume(this._input):this._input.consume()}}Lexer.DEFAULT_MODE=0,Lexer.MORE=-2,Lexer.SKIP=-3,Lexer.MIN_CHAR_VALUE=0,Lexer.MAX_CHAR_VALUE=65535,n([u.Override],Lexer.prototype,"nextToken",null),n([u.Override],Lexer.prototype,"tokenFactory",null),n([u.Override],Lexer.prototype,"sourceName",null),n([u.Override],Lexer.prototype,"inputStream",null),n([u.Override],Lexer.prototype,"line",null),n([u.Override],Lexer.prototype,"charPositionInLine",null),t.Lexer=Lexer},72:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(60),i=r(42),s=r(91),a=r(41),l=r(92),c=r(61),u=r(49),p=r(0),h=r(29),d=r(24),f=r(119),m=r(73),g=r(9),y=r(33);class KeyTypeEqualityComparer{hashCode(e){return e.state^e.alt}equals(e,t){return e.state===t.state&&e.alt===t.alt}}function v(e){return e?new o.Array2DHashMap(e):new o.Array2DHashMap(KeyTypeEqualityComparer.INSTANCE)}KeyTypeEqualityComparer.INSTANCE=new KeyTypeEqualityComparer;class ATNConfigSet{constructor(e,t){this._uniqueAlt=0,this._hasSemanticContext=!1,this._dipsIntoOuterContext=!1,this.outermostConfigSet=!1,this.cachedHashCode=-1,e?(t?(this.mergedConfigs=void 0,this.unmerged=void 0):e.isReadOnly?(this.mergedConfigs=v(),this.unmerged=[]):(this.mergedConfigs=v(e.mergedConfigs),this.unmerged=e.unmerged.slice(0)),this.configs=e.configs.slice(0),this._dipsIntoOuterContext=e._dipsIntoOuterContext,this._hasSemanticContext=e._hasSemanticContext,this.outermostConfigSet=e.outermostConfigSet,!t&&e.isReadOnly||(this._uniqueAlt=e._uniqueAlt,this._conflictInfo=e._conflictInfo)):(this.mergedConfigs=v(),this.unmerged=[],this.configs=[],this._uniqueAlt=a.ATN.INVALID_ALT_NUMBER)}getRepresentedAlternatives(){if(null!=this._conflictInfo)return this._conflictInfo.conflictedAlts.clone();let e=new c.BitSet;for(let t of u.asIterable(this))e.set(t.alt);return e}get isReadOnly(){return null==this.mergedConfigs}get isOutermostConfigSet(){return this.outermostConfigSet}set isOutermostConfigSet(e){if(this.outermostConfigSet&&!e)throw new Error("IllegalStateException");g(!e||!this._dipsIntoOuterContext),this.outermostConfigSet=e}getStates(){let e=new i.Array2DHashSet(h.ObjectEqualityComparator.INSTANCE);for(let t of this.configs)e.add(t.state);return e}optimizeConfigs(e){if(0!==this.configs.length)for(let t=0;t<this.configs.length;t++){let r=this.configs[t];r.context=e.atn.getCachedContext(r.context)}}clone(e){let t=new ATNConfigSet(this,e);return!e&&this.isReadOnly&&t.addAll(this.configs),t}get size(){return this.configs.length}get isEmpty(){return 0===this.configs.length}contains(e){if(!(e instanceof l.ATNConfig))return!1;if(this.mergedConfigs&&this.unmerged){let t=e,r=this.getKey(t),n=this.mergedConfigs.get(r);if(null!=n&&this.canMerge(t,r,n))return n.contains(t);for(let t of this.unmerged)if(t.contains(e))return!0}else for(let t of this.configs)if(t.contains(e))return!0;return!1}iterator(){return new ATNConfigSetIterator(this,this.configs)}toArray(e){if(!e||e.length<this.configs.length)return this.configs;for(let t=0;t<this.configs.length;t++)e[t]=this.configs[t];return e}add(e,t){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");let r;g(!this.outermostConfigSet||!e.reachesIntoOuterContext),null==t&&(t=f.PredictionContextCache.UNCACHED);let n=this.getKey(e),o=this.mergedConfigs.get(n);if(r=null==o,null!=o&&this.canMerge(e,n,o)){o.outerContextDepth=Math.max(o.outerContextDepth,e.outerContextDepth),e.isPrecedenceFilterSuppressed&&(o.isPrecedenceFilterSuppressed=!0);let r=d.PredictionContext.join(o.context,e.context,t);return this.updatePropertiesForMergedConfig(e),o.context==r?!1:(o.context=r,!0)}for(let o=0;o<this.unmerged.length;o++){let i=this.unmerged[o];if(this.canMerge(e,n,i)){i.outerContextDepth=Math.max(i.outerContextDepth,e.outerContextDepth),e.isPrecedenceFilterSuppressed&&(i.isPrecedenceFilterSuppressed=!0);let s=d.PredictionContext.join(i.context,e.context,t);return this.updatePropertiesForMergedConfig(e),i.context==s?!1:(i.context=s,r&&(this.mergedConfigs.put(n,i),this.unmerged.splice(o,1)),!0)}}return this.configs.push(e),r?this.mergedConfigs.put(n,e):this.unmerged.push(e),this.updatePropertiesForAddedConfig(e),!0}updatePropertiesForMergedConfig(e){this._dipsIntoOuterContext=this._dipsIntoOuterContext||e.reachesIntoOuterContext,g(!this.outermostConfigSet||!this._dipsIntoOuterContext)}updatePropertiesForAddedConfig(e){1===this.configs.length?this._uniqueAlt=e.alt:this._uniqueAlt!==e.alt&&(this._uniqueAlt=a.ATN.INVALID_ALT_NUMBER),this._hasSemanticContext=this._hasSemanticContext||!m.SemanticContext.NONE.equals(e.semanticContext),this._dipsIntoOuterContext=this._dipsIntoOuterContext||e.reachesIntoOuterContext,g(!this.outermostConfigSet||!this._dipsIntoOuterContext)}canMerge(e,t,r){return e.state.stateNumber==r.state.stateNumber&&(t.alt===r.alt&&e.semanticContext.equals(r.semanticContext))}getKey(e){return{state:e.state.stateNumber,alt:e.alt}}containsAll(e){for(let t of u.asIterable(e)){if(!(t instanceof l.ATNConfig))return!1;if(!this.contains(t))return!1}return!0}addAll(e,t){this.ensureWritable();let r=!1;for(let n of u.asIterable(e))this.add(n,t)&&(r=!0);return r}retainAll(e){throw this.ensureWritable(),new Error("Not supported yet.")}removeAll(e){throw this.ensureWritable(),new Error("Not supported yet.")}clear(){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");this.mergedConfigs.clear(),this.unmerged.length=0,this.configs.length=0,this._dipsIntoOuterContext=!1,this._hasSemanticContext=!1,this._uniqueAlt=a.ATN.INVALID_ALT_NUMBER,this._conflictInfo=void 0}equals(e){return this===e||e instanceof ATNConfigSet&&(this.outermostConfigSet==e.outermostConfigSet&&y.equals(this._conflictInfo,e._conflictInfo)&&s.ArrayEqualityComparator.INSTANCE.equals(this.configs,e.configs))}hashCode(){if(this.isReadOnly&&-1!=this.cachedHashCode)return this.cachedHashCode;let e=1;return e=5*(e=5*e^(this.outermostConfigSet?1:0))^s.ArrayEqualityComparator.INSTANCE.hashCode(this.configs),this.isReadOnly&&(this.cachedHashCode=e),e}toString(e){null==e&&(e=!1);let t="",r=this.configs.slice(0);r.sort((e,t)=>e.alt!=t.alt?e.alt-t.alt:e.state.stateNumber!=t.state.stateNumber?e.state.stateNumber-t.state.stateNumber:e.semanticContext.toString().localeCompare(t.semanticContext.toString())),t+="[";for(let n=0;n<r.length;n++)n>0&&(t+=", "),t+=r[n].toString(void 0,!0,e);return t+="]",this._hasSemanticContext&&(t+=",hasSemanticContext="+this._hasSemanticContext),this._uniqueAlt!==a.ATN.INVALID_ALT_NUMBER&&(t+=",uniqueAlt="+this._uniqueAlt),null!=this._conflictInfo&&(t+=",conflictingAlts="+this._conflictInfo.conflictedAlts,this._conflictInfo.isExact||(t+="*")),this._dipsIntoOuterContext&&(t+=",dipsIntoOuterContext"),t.toString()}get uniqueAlt(){return this._uniqueAlt}get hasSemanticContext(){return this._hasSemanticContext}set hasSemanticContext(e){this.ensureWritable(),this._hasSemanticContext=e}get conflictInfo(){return this._conflictInfo}set conflictInfo(e){this.ensureWritable(),this._conflictInfo=e}get conflictingAlts(){if(null!=this._conflictInfo)return this._conflictInfo.conflictedAlts}get isExactConflict(){return null!=this._conflictInfo&&this._conflictInfo.isExact}get dipsIntoOuterContext(){return this._dipsIntoOuterContext}get(e){return this.configs[e]}remove(e){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");if("number"!=typeof e)throw new Error("Not supported yet");let t=e,r=this.configs[t];this.configs.splice(t,1);let n=this.getKey(r);if(this.mergedConfigs.get(n)===r)this.mergedConfigs.remove(n);else for(let e=0;e<this.unmerged.length;e++)if(this.unmerged[e]===r)return void this.unmerged.splice(e,1)}ensureWritable(){if(this.isReadOnly)throw new Error("This ATNConfigSet is read only.")}}n([p.NotNull],ATNConfigSet.prototype,"getRepresentedAlternatives",null),n([p.Override],ATNConfigSet.prototype,"size",null),n([p.Override],ATNConfigSet.prototype,"isEmpty",null),n([p.Override],ATNConfigSet.prototype,"contains",null),n([p.Override],ATNConfigSet.prototype,"iterator",null),n([p.Override],ATNConfigSet.prototype,"toArray",null),n([p.Override],ATNConfigSet.prototype,"containsAll",null),n([p.Override],ATNConfigSet.prototype,"retainAll",null),n([p.Override],ATNConfigSet.prototype,"removeAll",null),n([p.Override],ATNConfigSet.prototype,"clear",null),n([p.Override],ATNConfigSet.prototype,"equals",null),n([p.Override],ATNConfigSet.prototype,"hashCode",null),t.ATNConfigSet=ATNConfigSet;class ATNConfigSetIterator{constructor(e,t){this.index=-1,this.removed=!1,this.configs=t}hasNext(){return this.index+1<this.configs.length}next(){if(!this.hasNext())throw new Error("NoSuchElementException");return this.index++,this.removed=!1,this.configs[this.index]}remove(){if(this.removed||this.index<0||this.index>=this.configs.length)throw new Error("IllegalStateException");this.set.remove(this.index),this.removed=!0}}n([p.Override],ATNConfigSetIterator.prototype,"hasNext",null),n([p.Override],ATNConfigSetIterator.prototype,"next",null),n([p.Override],ATNConfigSetIterator.prototype,"remove",null)},73:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(42),s=r(91),a=r(11),l=r(0),c=r(29),u=r(33);class SemanticContext{static get NONE(){return void 0===SemanticContext._NONE&&(SemanticContext._NONE=new SemanticContext.Predicate),SemanticContext._NONE}evalPrecedence(e,t){return this}static and(e,t){if(!e||e===SemanticContext.NONE)return t;if(t===SemanticContext.NONE)return e;let r=new SemanticContext.AND(e,t);return 1===r.opnds.length?r.opnds[0]:r}static or(e,t){if(!e)return t;if(e===SemanticContext.NONE||t===SemanticContext.NONE)return SemanticContext.NONE;let r=new SemanticContext.OR(e,t);return 1===r.opnds.length?r.opnds[0]:r}}t.SemanticContext=SemanticContext,function(e){function t(t){let r=[];for(let n=0;n<t.length;n++){let o=t[n];o instanceof e.PrecedencePredicate&&(r.push(o),t.splice(n,1),n--)}return r}class Predicate extends e{constructor(e=-1,t=-1,r=!1){super(),this.ruleIndex=e,this.predIndex=t,this.isCtxDependent=r}eval(e,t){let r=this.isCtxDependent?t:void 0;return e.sempred(r,this.ruleIndex,this.predIndex)}hashCode(){let e=a.MurmurHash.initialize();return e=a.MurmurHash.update(e,this.ruleIndex),e=a.MurmurHash.update(e,this.predIndex),e=a.MurmurHash.update(e,this.isCtxDependent?1:0),e=a.MurmurHash.finish(e,3)}equals(e){return e instanceof Predicate&&(this===e||this.ruleIndex===e.ruleIndex&&this.predIndex===e.predIndex&&this.isCtxDependent===e.isCtxDependent)}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}}n([l.Override],Predicate.prototype,"eval",null),n([l.Override],Predicate.prototype,"hashCode",null),n([l.Override],Predicate.prototype,"equals",null),n([l.Override],Predicate.prototype,"toString",null),e.Predicate=Predicate;class PrecedencePredicate extends e{constructor(e){super(),this.precedence=e}eval(e,t){return e.precpred(t,this.precedence)}evalPrecedence(t,r){return t.precpred(r,this.precedence)?e.NONE:void 0}compareTo(e){return this.precedence-e.precedence}hashCode(){let e=1;return e=31*e+this.precedence}equals(e){return e instanceof PrecedencePredicate&&(this===e||this.precedence===e.precedence)}toString(){return"{"+this.precedence+">=prec}?"}}n([l.Override],PrecedencePredicate.prototype,"eval",null),n([l.Override],PrecedencePredicate.prototype,"evalPrecedence",null),n([l.Override],PrecedencePredicate.prototype,"compareTo",null),n([l.Override],PrecedencePredicate.prototype,"hashCode",null),n([l.Override],PrecedencePredicate.prototype,"equals",null),n([l.Override],PrecedencePredicate.prototype,"toString",null),e.PrecedencePredicate=PrecedencePredicate;class Operator extends e{}e.Operator=Operator;let r=class AND extends Operator{constructor(e,r){super();let n=new i.Array2DHashSet(c.ObjectEqualityComparator.INSTANCE);e instanceof AND?n.addAll(e.opnds):n.add(e),r instanceof AND?n.addAll(r.opnds):n.add(r),this.opnds=n.toArray();let o=function(e){let t;for(let r of e)void 0!==t?t.compareTo(r)>0&&(t=r):t=r;return t}(t(this.opnds));o&&this.opnds.push(o)}get operands(){return this.opnds}equals(e){return this===e||e instanceof AND&&s.ArrayEqualityComparator.INSTANCE.equals(this.opnds,e.opnds)}hashCode(){return a.MurmurHash.hashCode(this.opnds,40363613)}eval(e,t){for(let r of this.opnds)if(!r.eval(e,t))return!1;return!0}evalPrecedence(t,r){let n=!1,o=[];for(let i of this.opnds){let s=i.evalPrecedence(t,r);if(n=n||s!==i,null==s)return;s!==e.NONE&&o.push(s)}if(!n)return this;if(0===o.length)return e.NONE;let i=o[0];for(let t=1;t<o.length;t++)i=e.and(i,o[t]);return i}toString(){return u.join(this.opnds,"&&")}};n([l.Override],r.prototype,"operands",null),n([l.Override],r.prototype,"equals",null),n([l.Override],r.prototype,"hashCode",null),n([l.Override],r.prototype,"eval",null),n([l.Override],r.prototype,"evalPrecedence",null),n([l.Override],r.prototype,"toString",null),r=n([o(0,l.NotNull),o(1,l.NotNull)],r),e.AND=r;let p=class OR extends Operator{constructor(e,r){super();let n=new i.Array2DHashSet(c.ObjectEqualityComparator.INSTANCE);e instanceof OR?n.addAll(e.opnds):n.add(e),r instanceof OR?n.addAll(r.opnds):n.add(r),this.opnds=n.toArray();let o=function(e){let t;for(let r of e)void 0!==t?t.compareTo(r)<0&&(t=r):t=r;return t}(t(this.opnds));o&&this.opnds.push(o)}get operands(){return this.opnds}equals(e){return this===e||e instanceof OR&&s.ArrayEqualityComparator.INSTANCE.equals(this.opnds,e.opnds)}hashCode(){return a.MurmurHash.hashCode(this.opnds,486279973)}eval(e,t){for(let r of this.opnds)if(r.eval(e,t))return!0;return!1}evalPrecedence(t,r){let n=!1,o=[];for(let i of this.opnds){let s=i.evalPrecedence(t,r);if(n=n||s!==i,s===e.NONE)return e.NONE;s&&o.push(s)}if(!n)return this;if(0===o.length)return;let i=o[0];for(let t=1;t<o.length;t++)i=e.or(i,o[t]);return i}toString(){return u.join(this.opnds,"||")}};n([l.Override],p.prototype,"operands",null),n([l.Override],p.prototype,"equals",null),n([l.Override],p.prototype,"hashCode",null),n([l.Override],p.prototype,"eval",null),n([l.Override],p.prototype,"evalPrecedence",null),n([l.Override],p.prototype,"toString",null),p=n([o(0,l.NotNull),o(1,l.NotNull)],p),e.OR=p}(SemanticContext=t.SemanticContext||(t.SemanticContext={}))},74:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(51),i=r(0);class RuleStopState extends o.ATNState{get nonStopStateNumber(){return-1}get stateType(){return 7}}n([i.Override],RuleStopState.prototype,"nonStopStateNumber",null),n([i.Override],RuleStopState.prototype,"stateType",null),t.RuleStopState=RuleStopState},75:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0});t.RecognitionException=class RecognitionException extends Error{constructor(e,t,r,n){super(n),this._offendingState=-1,this._recognizer=e,this.input=t,this.ctx=r,e&&(this._offendingState=e.state)}get offendingState(){return this._offendingState}setOffendingState(e){this._offendingState=e}get expectedTokens(){if(this._recognizer)return this._recognizer.atn.getExpectedTokens(this._offendingState,this.ctx)}get context(){return this.ctx}get inputStream(){return this.input}getOffendingToken(e){if(!e||e===this._recognizer)return this.offendingToken}setOffendingToken(e,t){e===this._recognizer&&(this.offendingToken=t)}get recognizer(){return this._recognizer}}},76:function(e,t){e.exports=require("readable-stream")},83:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(23),i=r(0),s=r(13);class TerminalNode{constructor(e){this._symbol=e}getChild(e){throw new RangeError("Terminal Node has no children.")}get symbol(){return this._symbol}get parent(){return this._parent}get payload(){return this._symbol}get sourceInterval(){let e=this._symbol.tokenIndex;return new o.Interval(e,e)}get childCount(){return 0}accept(e){return e.visitTerminal(this)}get text(){return this._symbol.text||""}toStringTree(e){return this.toString()}toString(){return this._symbol.type===s.Token.EOF?"<EOF>":this._symbol.text||""}}n([i.Override],TerminalNode.prototype,"getChild",null),n([i.Override],TerminalNode.prototype,"parent",null),n([i.Override],TerminalNode.prototype,"payload",null),n([i.Override],TerminalNode.prototype,"sourceInterval",null),n([i.Override],TerminalNode.prototype,"childCount",null),n([i.Override],TerminalNode.prototype,"accept",null),n([i.Override],TerminalNode.prototype,"text",null),n([i.Override],TerminalNode.prototype,"toStringTree",null),n([i.Override],TerminalNode.prototype,"toString",null),t.TerminalNode=TerminalNode},84:function(e,t){e.exports=require("buffer")},89:function(e,t,r){"use strict";var n=r(3).checkCollectionName,o=r(5).BSON.ObjectID,i=r(5).BSON.Long,s=r(5).BSON.Code,a=r(4).format,l=r(58),c=r(5).MongoError,u=r(3).shallowClone,p=r(3).isObject,h=r(3).toError,d=r(3).normalizeHintField,f=r(3).handleCallback,m=r(3).decorateCommand,g=r(3).formattedOrderClause,y=r(28),v=r(5).ReadPreference,b=r(48),x=r(20),S=r(32),C=r(110),_=r(109),O=r(3).assign,T=["readPreference","ignoreUndefined"],N=function(e,t,i,s,l,c){n(s);var u=null==c||null==c.slaveOk?e.slaveOk:c.slaveOk,p=null==c||null==c.serializeFunctions?e.s.options.serializeFunctions:c.serializeFunctions,h=null==c||null==c.raw?e.s.options.raw:c.raw,d=null==c||null==c.promoteLongs?e.s.options.promoteLongs:c.promoteLongs,f=null==c||null==c.promoteValues?e.s.options.promoteValues:c.promoteValues,m=null==c||null==c.promoteBuffers?e.s.options.promoteBuffers:c.promoteBuffers,g=null,y=a("%s.%s",i,s),v=c.promiseLibrary;v||(v="function"==typeof global.Promise?global.Promise:r(16).Promise),c&&c.readPreference?g=c.readPreference:e.options.readPreference&&(g=e.options.readPreference),l=null==l?o:l,this.s={pkFactory:l,db:e,topology:t,dbName:i,options:c,namespace:y,readPreference:g,slaveOk:u,serializeFunctions:p,raw:h,promoteLongs:d,promoteValues:f,promoteBuffers:m,internalHint:null,collectionHint:null,name:s,promiseLibrary:v,readConcern:c.readConcern}},A=N.define=new x("Collection",N,!1);Object.defineProperty(N.prototype,"collectionName",{enumerable:!0,get:function(){return this.s.name}}),Object.defineProperty(N.prototype,"namespace",{enumerable:!0,get:function(){return this.s.namespace}}),Object.defineProperty(N.prototype,"readConcern",{enumerable:!0,get:function(){return this.s.readConcern||{level:"local"}}}),Object.defineProperty(N.prototype,"writeConcern",{enumerable:!0,get:function(){var e={};return null!=this.s.options.w&&(e.w=this.s.options.w),null!=this.s.options.j&&(e.j=this.s.options.j),null!=this.s.options.fsync&&(e.fsync=this.s.options.fsync),null!=this.s.options.wtimeout&&(e.wtimeout=this.s.options.wtimeout),e}}),Object.defineProperty(N.prototype,"hint",{enumerable:!0,get:function(){return this.s.collectionHint},set:function(e){this.s.collectionHint=d(e)}}),N.prototype.find=function(){var e,t=Array.prototype.slice.call(arguments,0),r="function"==typeof t[t.length-1],n="function"==typeof t[0],o=r?t.pop():n?t.shift():null,i=t.length,s=i>=1?t[0]:{},a=i>=2?t[1]:void 0;if(1===i&&n&&(s={},e=t[0]),2!==i||void 0===a||Array.isArray(a)){if(2===i&&Array.isArray(a)&&!Array.isArray(a[0])){var l={};for(h=0;h<a.length;h++)l[a[h]]=1;a=l}}else{for(var u=Object.keys(a),p=!1,h=0;h<u.length;h++)if(null!=ye[u[h]]){p=!0;break}p?(e=a,a=void 0):e={}}3===i&&(e=t[2]);var m=s=null==s?{}:s;if(Buffer.isBuffer(m)){var y=m[0]|m[1]<<8|m[2]<<16|m[3]<<24;if(y!=m.length){var v=new Error("query selector raw message size does not match message header size ["+m.length+"] != ["+y+"]");throw v.name="MongoError",v}}if(m=a,Buffer.isBuffer(m)&&(y=m[0]|m[1]<<8|m[2]<<16|m[3]<<24)!=m.length)throw(v=new Error("query fields raw message size does not match message header size ["+m.length+"] != ["+y+"]")).name="MongoError",v;if(null!=s&&"ObjectID"==s._bsontype&&(s={_id:s}),e&&e.fields&&!Buffer.isBuffer(e.fields))if(a={},Array.isArray(e.fields))if(e.fields.length){var b=e.fields.length;for(h=0;h<b;h++)a[e.fields[h]]=1}else a._id=1;else a=e.fields;e||(e={});var x={};for(var S in this.s.options)-1!=T.indexOf(S)&&(x[S]=this.s.options[S]);for(var S in e)x[S]=e[S];if(x.skip=i>3?t[2]:e.skip?e.skip:0,x.limit=i>3?t[3]:e.limit?e.limit:0,x.raw=null!=e.raw&&"boolean"==typeof e.raw?e.raw:this.s.raw,x.hint=null!=e.hint?d(e.hint):this.s.collectionHint,x.timeout=5==i?t[4]:void 0===e.timeout?void 0:e.timeout,x.slaveOk=null!=e.slaveOk?e.slaveOk:this.s.db.slaveOk,null==(x=ge(this,x,this.s.db,this)).readPreference||"primary"==x.readPreference&&"primary"==x.readPreference.mode||(x.slaveOk=!0),null!=s&&"object"!=typeof s)throw c.create({message:"query selector must be an object",driver:!0});var C={find:this.s.namespace,limit:x.limit,skip:x.skip,query:s};for(var _ in"boolean"==typeof x.awaitdata&&(x.awaitData=x.awaitdata),"boolean"==typeof x.timeout&&(x.noCursorTimeout=x.timeout),x)null!=x[_]&&(C[_]=x[_]);return a&&(C.fields=function(e){var t={};if(Array.isArray(e))for(var r=0;r<e.length;r++)Array.isArray(e[r])?t[e[r][0]]=e[r][1]:t[e[r][0]]=1;else t=e;return t}(a)),x.db=this.s.db,x.promiseLibrary=this.s.promiseLibrary,null==x.raw&&"boolean"==typeof this.s.raw&&(x.raw=this.s.raw),null==x.promoteLongs&&"boolean"==typeof this.s.promoteLongs&&(x.promoteLongs=this.s.promoteLongs),null==x.promoteValues&&"boolean"==typeof this.s.promoteValues&&(x.promoteValues=this.s.promoteValues),null==x.promoteBuffers&&"boolean"==typeof this.s.promoteBuffers&&(x.promoteBuffers=this.s.promoteBuffers),C.sort&&(C.sort=g(C.sort)),this.s.readConcern&&(C.readConcern=this.s.readConcern),le(C,this,e),"function"==typeof o?f(o,null,this.s.topology.cursor(this.s.namespace,C,x)):this.s.topology.cursor(this.s.namespace,C,x)},A.classMethod("find",{callback:!1,promise:!1,returns:[S]}),N.prototype.insertOne=function(e,t,r){var n=this;return"function"==typeof t&&(r=t,t={}),t=t||{},Array.isArray(e)&&"function"==typeof r?r(c.create({message:"doc parameter must be an object",driver:!0})):Array.isArray(e)?new this.s.promiseLibrary(function(e,t){t(c.create({message:"doc parameter must be an object",driver:!0}))}):(this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),"function"==typeof r?E(n,e,t,r):new this.s.promiseLibrary(function(r,o){E(n,e,t,function(e,t){if(e)return o(e);r(t)})}))};var E=function(e,t,r,n){k(e,[t],r,function(e,r){if(null!=n){if(e&&n)return n(e);if(null==r)return n(null,{result:{ok:1}});r.insertedCount=r.result.n,r.insertedId=t._id,n&&n(null,r)}})},w=function(e,t){for(var r=t.getInsertedIds(),n=Object.keys(r),o=new Array(n.length),i=0;i<n.length;i++)r[n[i]]._id&&(o[r[n[i]].index]=r[n[i]]._id);var s={result:{ok:1,n:t.insertedCount},ops:e,insertedCount:t.insertedCount,insertedIds:o};return t.getLastOp()&&(s.result.opTime=t.getLastOp()),s};A.classMethod("insertOne",{callback:!0,promise:!0}),N.prototype.insertMany=function(e,t,r){var n=this;if("function"==typeof t&&(r=t,t={}),t=t?u(t):{ordered:!0},!Array.isArray(e)&&"function"==typeof r)return r(c.create({message:"docs parameter must be an array of documents",driver:!0}));if(!Array.isArray(e))return new this.s.promiseLibrary(function(e,t){t(c.create({message:"docs parameter must be an array of documents",driver:!0}))});if("boolean"!=typeof t.checkKeys&&(t.checkKeys=!0),t.serializeFunctions=t.serializeFunctions||n.s.serializeFunctions,!0!==("boolean"==typeof t.forceServerObjectId?t.forceServerObjectId:n.s.db.options.forceServerObjectId))for(var o=0;o<e.length;o++)null==e[o]._id&&(e[o]._id=n.s.pkFactory.createPk());var i=[{insertMany:e}];return"function"==typeof r?P(n,i,t,function(t,n){if(t)return r(t,n);r(null,w(e,n))}):new this.s.promiseLibrary(function(r,o){P(n,i,t,function(t,n){if(t)return o(t);r(w(e,n))})})},A.classMethod("insertMany",{callback:!0,promise:!0}),N.prototype.bulkWrite=function(e,t,r){var n=this;if("function"==typeof t&&(r=t,t={}),t=t||{ordered:!0},!Array.isArray(e))throw c.create({message:"operations must be an array of documents",driver:!0});return"function"==typeof r?P(n,e,t,r):new this.s.promiseLibrary(function(r,o){P(n,e,t,function(e,t){if(e&&null==t)return o(e);r(t)})})};var P=function(e,t,r,n){e.s.options.ignoreUndefined&&((r=u(r)).ignoreUndefined=e.s.options.ignoreUndefined);var o=1==r.ordered||null==r.ordered?e.initializeOrderedBulkOp(r):e.initializeUnorderedBulkOp(r),i=!1;try{for(var s=0;s<t.length;s++){var l=Object.keys(t[s])[0];t[s][l].collation&&(i=!0),o.raw(t[s])}}catch(e){return n(e,null)}var p=me(u(r),e.s.db,e,r),d=p.writeConcern?p.writeConcern:{},f=e.s.topology.capabilities();if(i&&f&&!f.commandsTakeCollation)return n(new c(a("server/primary/mongos does not support collation")));o.execute(d,function(e,t){if(!t&&e)return n(e,null);if(t&&t.hasWriteErrors()&&1==t.getWriteErrorCount())return n(h(t.getWriteErrorAt(0)),t);t.insertedCount=t.nInserted,t.matchedCount=t.nMatched,t.modifiedCount=t.nModified||0,t.deletedCount=t.nRemoved,t.upsertedCount=t.getUpsertedIds().length,t.upsertedIds={},t.insertedIds={},t.n=t.insertedCount;for(var r=t.getInsertedIds(),o=0;o<r.length;o++)t.insertedIds[r[o].index]=r[o]._id;var i=t.getUpsertedIds();for(o=0;o<i.length;o++)t.upsertedIds[i[o].index]=i[o]._id;if(t.hasWriteErrors()){var s=t.getWriteErrors();return n(h({message:"write operation failed",code:s[0].code,writeErrors:s}),t)}if(t.getWriteConcernError())return n(h(t.getWriteConcernError()),t);n(null,t)})},k=function(e,t,r,n){"function"==typeof r&&(n=r,r={}),r=r||{},t=Array.isArray(t)?t:[t];var o=me(u(r),e.s.db,e,r);if("boolean"!=typeof o.checkKeys&&(o.checkKeys=!0),1==o.keepGoing&&(o.ordered=!1),o.serializeFunctions=r.serializeFunctions||e.s.serializeFunctions,!0!==("boolean"==typeof r.forceServerObjectId?r.forceServerObjectId:e.s.db.options.forceServerObjectId))for(var i=0;i<t.length;i++)void 0===t[i]._id&&(t[i]._id=e.s.pkFactory.createPk());e.s.topology.insert(e.s.namespace,t,o,function(e,r){if(null!=n){if(e)return f(n,e);if(null==r)return f(n,null,null);if(r.result.code)return f(n,h(r.result));if(r.result.writeErrors)return f(n,h(r.result.writeErrors[0]));r.ops=t,f(n,null,r)}})};A.classMethod("bulkWrite",{callback:!0,promise:!0}),N.prototype.insert=function(e,t,r){return"function"==typeof t&&(r=t,t={}),t=t||{ordered:!1},e=Array.isArray(e)?e:[e],1==t.keepGoing&&(t.ordered=!1),this.insertMany(e,t,r)},A.classMethod("insert",{callback:!0,promise:!0}),N.prototype.updateOne=function(e,t,r,n){var o=this;return"function"==typeof r&&(n=r,r={}),r=u(r),this.s.options.ignoreUndefined&&((r=u(r)).ignoreUndefined=this.s.options.ignoreUndefined),"function"==typeof n?I(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){I(o,e,t,r,function(e,t){if(e)return i(e);n(t)})})};var I=function(e,t,r,n,o){n.multi=!1,D(e,t,r,n,function(e,t){if(null!=o){if(e&&o)return o(e);if(null==t)return o(null,{result:{ok:1}});t.modifiedCount=null!=t.result.nModified?t.result.nModified:t.result.n,t.upsertedId=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?t.result.upserted[0]:null,t.upsertedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length?t.result.upserted.length:0,t.matchedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?0:t.result.n,o&&o(null,t)}})};A.classMethod("updateOne",{callback:!0,promise:!0}),N.prototype.replaceOne=function(e,t,r,n){var o=this;return"function"==typeof r&&(n=r,r={}),r=u(r),this.s.options.ignoreUndefined&&((r=u(r)).ignoreUndefined=this.s.options.ignoreUndefined),"function"==typeof n?R(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){R(o,e,t,r,function(e,t){if(e)return i(e);n(t)})})};var R=function(e,t,r,n,o){n.multi=!1,D(e,t,r,n,function(e,t){if(null!=o){if(e&&o)return o(e);if(null==t)return o(null,{result:{ok:1}});t.modifiedCount=null!=t.result.nModified?t.result.nModified:t.result.n,t.upsertedId=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?t.result.upserted[0]:null,t.upsertedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length?t.result.upserted.length:0,t.matchedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?0:t.result.n,t.ops=[r],o&&o(null,t)}})};A.classMethod("replaceOne",{callback:!0,promise:!0}),N.prototype.updateMany=function(e,t,r,n){var o=this;return"function"==typeof r&&(n=r,r={}),r=u(r),this.s.options.ignoreUndefined&&((r=u(r)).ignoreUndefined=this.s.options.ignoreUndefined),"function"==typeof n?L(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){L(o,e,t,r,function(e,t){if(e)return i(e);n(t)})})};var L=function(e,t,r,n,o){n.multi=!0,D(e,t,r,n,function(e,t){if(null!=o){if(e&&o)return o(e);if(null==t)return o(null,{result:{ok:1}});t.modifiedCount=null!=t.result.nModified?t.result.nModified:t.result.n,t.upsertedId=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?t.result.upserted[0]:null,t.upsertedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length?t.result.upserted.length:0,t.matchedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?0:t.result.n,o&&o(null,t)}})};A.classMethod("updateMany",{callback:!0,promise:!0});var D=function(e,t,r,n,o){if("function"==typeof n&&(o=n,n=null),null==n&&(n={}),"function"!=typeof o&&(o=null),null==t||"object"!=typeof t)return o(h("selector must be a valid JavaScript object"));if(null==r||"object"!=typeof r)return o(h("document must be a valid JavaScript object"));var i=me(u(n),e.s.db,e,n);i.serializeFunctions=n.serializeFunctions||e.s.serializeFunctions;var s={q:t,u:r};s.upsert=void 0!==n.upsert&&!!n.upsert,s.multi=void 0!==n.multi&&!!n.multi,le(i,e,n),e.s.topology.update(e.s.namespace,[s],i,function(e,t){if(null!=o)return e?f(o,e,null):null==t?f(o,null,null):t.result.code?f(o,h(t.result)):t.result.writeErrors?f(o,h(t.result.writeErrors[0])):void f(o,null,t)})};N.prototype.update=function(e,t,r,n){var o=this;return this.s.options.ignoreUndefined&&((r=u(r)).ignoreUndefined=this.s.options.ignoreUndefined),"function"==typeof n?D(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){D(o,e,t,r,function(e,t){if(e)return i(e);n(t)})})},A.classMethod("update",{callback:!0,promise:!0}),N.prototype.deleteOne=function(e,t,r){var n=this;return"function"==typeof t&&(r=t,t={}),t=u(t),this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),"function"==typeof r?M(n,e,t,r):new this.s.promiseLibrary(function(r,o){M(n,e,t,function(e,t){if(e)return o(e);r(t)})})};var M=function(e,t,r,n){r.single=!0,F(e,t,r,function(e,t){if(null!=n){if(e&&n)return n(e);if(null==t)return n(null,{result:{ok:1}});t.deletedCount=t.result.n,n&&n(null,t)}})};A.classMethod("deleteOne",{callback:!0,promise:!0}),N.prototype.removeOne=N.prototype.deleteOne,A.classMethod("removeOne",{callback:!0,promise:!0}),N.prototype.deleteMany=function(e,t,r){var n=this;return"function"==typeof t&&(r=t,t={}),t=u(t),this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),"function"==typeof r?j(n,e,t,r):new this.s.promiseLibrary(function(r,o){j(n,e,t,function(e,t){if(e)return o(e);r(t)})})};var j=function(e,t,r,n){r.single=!1,F(e,t,r,function(e,t){if(null!=n){if(e&&n)return n(e);if(null==t)return n(null,{result:{ok:1}});t.deletedCount=t.result.n,n&&n(null,t)}})},F=function(e,t,r,n){"function"==typeof r?(n=r,r={}):"function"==typeof t&&(n=t,r={},t={});var o=me(u(r=r||{}),e.s.db,e,r);null==t&&(t={});var i={q:t,limit:0};r.single&&(i.limit=1),le(o,e,r),e.s.topology.remove(e.s.namespace,[i],o,function(e,t){if(null!=n)return e?f(n,e,null):null==t?f(n,null,null):t.result.code?f(n,h(t.result)):t.result.writeErrors?f(n,h(t.result.writeErrors[0])):void f(n,null,t)})};A.classMethod("deleteMany",{callback:!0,promise:!0}),N.prototype.removeMany=N.prototype.deleteMany,A.classMethod("removeMany",{callback:!0,promise:!0}),N.prototype.remove=function(e,t,r){var n=this;return this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),"function"==typeof r?F(n,e,t,r):new this.s.promiseLibrary(function(r,o){F(n,e,t,function(e,t){if(e)return o(e);r(t)})})},A.classMethod("remove",{callback:!0,promise:!0}),N.prototype.save=function(e,t,r){var n=this;return"function"==typeof t&&(r=t,t={}),t=t||{},this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),"function"==typeof r?z(n,e,t,r):new this.s.promiseLibrary(function(r,o){z(n,e,t,function(e,t){if(e)return o(e);r(t)})})};var z=function(e,t,r,n){var o=me(u(r),e.s.db,e,r);if(null!=t._id)return o.upsert=!0,D(e,{_id:t._id},t,o,n);k(e,[t],r,function(e,r){if(null!=n)return null==t?f(n,null,null):e?f(n,e,null):void f(n,null,r)})};A.classMethod("save",{callback:!0,promise:!0}),N.prototype.findOne=function(){var e=this,t=Array.prototype.slice.call(arguments,0),r=t.pop();return"function"!=typeof r&&t.push(r),"function"==typeof r?U(e,t,r):new this.s.promiseLibrary(function(r,n){U(e,t,function(e,t){if(e)return n(e);r(t)})})};var U=function(e,t,r){e.find.apply(e,t).limit(-1).batchSize(1).next(function(e,t){if(null!=e)return f(r,h(e),null);f(r,null,t)})};A.classMethod("findOne",{callback:!0,promise:!0}),N.prototype.rename=function(e,t,r){var n=this;return"function"==typeof t&&(r=t,t={}),t=O({},t,{readPreference:y.PRIMARY}),"function"==typeof r?B(n,e,t,r):new this.s.promiseLibrary(function(r,o){B(n,e,t,function(e,t){if(e)return o(e);r(t)})})};var B=function(e,t,r,o){n(t);var i={renameCollection:a("%s.%s",e.s.dbName,e.s.name),to:a("%s.%s",e.s.dbName,t),dropTarget:"boolean"==typeof r.dropTarget&&r.dropTarget};ae(i,e,r),e.s.db.admin().command(i,r,function(r,n){if(r)return f(o,r,null);if(n.errmsg)return f(o,h(n),null);try{return f(o,null,new N(e.s.db,e.s.topology,e.s.dbName,t,e.s.pkFactory,e.s.options))}catch(r){return f(o,h(r),null)}})};A.classMethod("rename",{callback:!0,promise:!0}),N.prototype.drop=function(e,t){var r=this;return"function"==typeof e&&(t=e,e={}),e=e||{},"function"==typeof t?r.s.db.dropCollection(r.s.name,e,t):new this.s.promiseLibrary(function(t,n){r.s.db.dropCollection(r.s.name,e,function(e,r){if(e)return n(e);t(r)})})},A.classMethod("drop",{callback:!0,promise:!0}),N.prototype.options=function(e){var t=this;return"function"==typeof e?V(t,e):new this.s.promiseLibrary(function(e,r){V(t,function(t,n){if(t)return r(t);e(n)})})};var V=function(e,t){e.s.db.listCollections({name:e.s.name}).toArray(function(r,n){return r?f(t,r):0==n.length?f(t,c.create({message:a("collection %s not found",e.s.namespace),driver:!0})):void f(t,r,n[0].options||null)})};A.classMethod("options",{callback:!0,promise:!0}),N.prototype.isCapped=function(e){var t=this;return"function"==typeof e?q(t,e):new this.s.promiseLibrary(function(e,r){q(t,function(t,n){if(t)return r(t);e(n)})})};var q=function(e,t){e.options(function(e,r){if(e)return f(t,e);f(t,null,r&&r.capped)})};A.classMethod("isCapped",{callback:!0,promise:!0}),N.prototype.createIndex=function(e,t,r){var n=this,o=Array.prototype.slice.call(arguments,1);return"function"!=typeof(r=o.pop())&&o.push(r),t=o.length&&o.shift()||{},t=null==(t="function"==typeof r?t:r)?{}:t,"function"==typeof r?H(n,e,t,r):new this.s.promiseLibrary(function(r,o){H(n,e,t,function(e,t){if(e)return o(e);r(t)})})};var H=function(e,t,r,n){e.s.db.createIndex(e.s.name,t,r,n)};A.classMethod("createIndex",{callback:!0,promise:!0}),N.prototype.createIndexes=function(e,t){var r=this;return"function"==typeof t?$(r,e,t):new this.s.promiseLibrary(function(t,n){$(r,e,function(e,r){if(e)return n(e);t(r)})})};var $=function(e,t,r){for(var n=e.s.topology.capabilities(),o=0;o<t.length;o++)if(null==t[o].name){var i=[];if(t[o].collation&&n&&!n.commandsTakeCollation)return r(new c(a("server/primary/mongos does not support collation")));for(var s in t[o].key)i.push(a("%s_%s",s,t[o].key[s]));t[o].name=i.join("_")}e.s.db.command({createIndexes:e.s.name,indexes:t},{readPreference:y.PRIMARY},r)};A.classMethod("createIndexes",{callback:!0,promise:!0}),N.prototype.dropIndex=function(e,t,r){var n=this,o=Array.prototype.slice.call(arguments,1);return"function"!=typeof(r=o.pop())&&o.push(r),(t=o.length&&o.shift()||{}).readPreference=y.PRIMARY,"function"==typeof r?W(n,e,t,r):new this.s.promiseLibrary(function(r,o){W(n,e,t,function(e,t){if(e)return o(e);r(t)})})};var W=function(e,t,r,n){var o={dropIndexes:e.s.name,index:t};ae(o,e,r),e.s.db.command(o,r,function(e,t){if("function"==typeof n)return e?f(n,e,null):void f(n,null,t)})};A.classMethod("dropIndex",{callback:!0,promise:!0}),N.prototype.dropIndexes=function(e,t){var r=this;return"function"==typeof e&&(t=e,e={}),e=e||{},"function"==typeof t?K(r,e,t):new this.s.promiseLibrary(function(e,t){K(r,function(r,n){if(r)return t(r);e(n)})})};var K=function(e,t,r){e.dropIndex("*",t,function(e){if(e)return f(r,e,!1);f(r,null,!0)})};A.classMethod("dropIndexes",{callback:!0,promise:!0}),N.prototype.dropAllIndexes=N.prototype.dropIndexes,A.classMethod("dropAllIndexes",{callback:!0,promise:!0}),N.prototype.reIndex=function(e,t){var r=this;return"function"==typeof e&&(t=e,e={}),e=e||{},"function"==typeof t?Y(r,e,t):new this.s.promiseLibrary(function(t,n){Y(r,e,function(e,r){if(e)return n(e);t(r)})})};var Y=function(e,t,r){var n={reIndex:e.s.name};e.s.db.command(n,t,function(e,t){if(null!=r)return e?f(r,e,null):void f(r,null,!!t.ok)})};A.classMethod("reIndex",{callback:!0,promise:!0}),N.prototype.listIndexes=function(e){if(e=u(e=e||{}),(e=ge(this,e,this.s.db,this)).cursorFactory=b,e.promiseLibrary=this.s.promiseLibrary,!this.s.topology.capabilities())throw new c("cannot connect to server");if(this.s.topology.capabilities().hasListIndexesCommand){var t=e.batchSize?{batchSize:e.batchSize}:{},r={listIndexes:this.s.name,cursor:t};return t=this.s.topology.cursor(a("%s.$cmd",this.s.dbName),r,e),e.readPreference&&t.setReadPreference(e.readPreference),t}var n=a("%s.system.indexes",this.s.dbName);return t=this.s.topology.cursor(n,{find:n,query:{ns:this.s.namespace}},e),e.readPreference&&t.setReadPreference(e.readPreference),e.batchSize&&(t=t.batchSize(e.batchSize)),t},A.classMethod("listIndexes",{callback:!1,promise:!1,returns:[b]}),N.prototype.ensureIndex=function(e,t,r){var n=this;return"function"==typeof t&&(r=t,t={}),t=t||{},"function"==typeof r?G(n,e,t,r):new this.s.promiseLibrary(function(r,o){G(n,e,t,function(e,t){if(e)return o(e);r(t)})})};var G=function(e,t,r,n){e.s.db.ensureIndex(e.s.name,t,r,n)};A.classMethod("ensureIndex",{callback:!0,promise:!0}),N.prototype.indexExists=function(e,t){var r=this;return"function"==typeof t?J(r,e,t):new this.s.promiseLibrary(function(t,n){J(r,e,function(e,r){if(e)return n(e);t(r)})})};var J=function(e,t,r){e.indexInformation(function(e,n){if(null!=e)return f(r,e,null);if(!Array.isArray(t))return f(r,null,null!=n[t]);for(var o=0;o<t.length;o++)if(null==n[t[o]])return f(r,null,!1);return f(r,null,!0)})};A.classMethod("indexExists",{callback:!0,promise:!0}),N.prototype.indexInformation=function(e,t){var r=this,n=Array.prototype.slice.call(arguments,0);return"function"!=typeof(t=n.pop())&&n.push(t),e=n.length&&n.shift()||{},"function"==typeof t?Q(r,e,t):new this.s.promiseLibrary(function(t,n){Q(r,e,function(e,r){if(e)return n(e);t(r)})})};var Q=function(e,t,r){e.s.db.indexInformation(e.s.name,t,r)};A.classMethod("indexInformation",{callback:!0,promise:!0}),N.prototype.count=function(e,t,r){var n=this,o=Array.prototype.slice.call(arguments,0);"function"!=typeof(r=o.pop())&&o.push(r);var i=o.length&&o.shift()||{},s=o.length&&o.shift()||{};return"function"==typeof r?X(n,i,s,r):(e=e||{},t=t||{},new this.s.promiseLibrary(function(r,o){X(n,e,t,function(e,t){if(e)return o(e);r(t)})}))};var X=function(e,t,r,n){var o=r.skip,i=r.limit,s=r.hint,a=r.maxTimeMS,l={count:e.s.name,query:t};"number"==typeof o&&(l.skip=o),"number"==typeof i&&(l.limit=i),"number"==typeof a&&(l.maxTimeMS=a),s&&(l.hint=s),r=u(r),r=ge(e,r,e.s.db,e),e.s.readConcern&&(l.readConcern=e.s.readConcern),le(l,e,r),e.s.db.command(l,r,function(e,t){if(e)return f(n,e);f(n,null,t.n)})};A.classMethod("count",{callback:!0,promise:!0}),N.prototype.distinct=function(e,t,r,n){var o=this,i=Array.prototype.slice.call(arguments,1);"function"!=typeof(n=i.pop())&&i.push(n);var s=i.length&&i.shift()||{},a=i.length&&i.shift()||{};return"function"==typeof n?Z(o,e,s,a,n):(t=t||{},r=r||{},new this.s.promiseLibrary(function(n,i){Z(o,e,t,r,function(e,t){if(e)return i(e);n(t)})}))};var Z=function(e,t,r,n,o){var i=n.maxTimeMS,s={distinct:e.s.name,key:t,query:r};n=u(n),n=ge(e,n,e.s.db,e),"number"==typeof i&&(s.maxTimeMS=i),e.s.readConcern&&(s.readConcern=e.s.readConcern),le(s,e,n),e.s.db.command(s,n,function(e,t){if(e)return f(o,e);f(o,null,t.values)})};A.classMethod("distinct",{callback:!0,promise:!0}),N.prototype.indexes=function(e){var t=this;return"function"==typeof e?ee(t,e):new this.s.promiseLibrary(function(e,r){ee(t,function(t,n){if(t)return r(t);e(n)})})};var ee=function(e,t){e.s.db.indexInformation(e.s.name,{full:!0},t)};A.classMethod("indexes",{callback:!0,promise:!0}),N.prototype.stats=function(e,t){var r=this,n=Array.prototype.slice.call(arguments,0);return"function"!=typeof(t=n.pop())&&n.push(t),e=n.length&&n.shift()||{},"function"==typeof t?te(r,e,t):new this.s.promiseLibrary(function(t,n){te(r,e,function(e,r){if(e)return n(e);t(r)})})};var te=function(e,t,r){var n={collStats:e.s.name};null!=t.scale&&(n.scale=t.scale),t=u(t),t=ge(e,t,e.s.db,e),e.s.db.command(n,t,r)};A.classMethod("stats",{callback:!0,promise:!0}),N.prototype.findOneAndDelete=function(e,t,r){var n=this;if("function"==typeof t&&(r=t,t={}),t=t||{},null==e||"object"!=typeof e)throw h("filter parameter must be an object");return"function"==typeof r?re(n,e,t,r):new this.s.promiseLibrary(function(r,o){re(n,e,t=t||{},function(e,t){if(e)return o(e);r(t)})})};var re=function(e,t,r,n){var o=u(r);o.fields=r.projection,o.remove=!0,e.findAndModify(t,r.sort,null,o,n)};A.classMethod("findOneAndDelete",{callback:!0,promise:!0}),N.prototype.findOneAndReplace=function(e,t,r,n){var o=this;if("function"==typeof r&&(n=r,r={}),r=r||{},null==e||"object"!=typeof e)throw h("filter parameter must be an object");if(null==t||"object"!=typeof t)throw h("replacement parameter must be an object");return"function"==typeof n?ne(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){ne(o,e,t,r=r||{},function(e,t){if(e)return i(e);n(t)})})};var ne=function(e,t,r,n,o){var i=u(n);i.fields=n.projection,i.update=!0,i.new="boolean"==typeof n.returnOriginal&&!n.returnOriginal,i.upsert="boolean"==typeof n.upsert&&n.upsert,e.findAndModify(t,n.sort,r,i,o)};A.classMethod("findOneAndReplace",{callback:!0,promise:!0}),N.prototype.findOneAndUpdate=function(e,t,r,n){var o=this;if("function"==typeof r&&(n=r,r={}),r=r||{},null==e||"object"!=typeof e)throw h("filter parameter must be an object");if(null==t||"object"!=typeof t)throw h("update parameter must be an object");return"function"==typeof n?oe(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){oe(o,e,t,r=r||{},function(e,t){if(e)return i(e);n(t)})})};var oe=function(e,t,r,n,o){var i=u(n);i.fields=n.projection,i.update=!0,i.new=void 0!==n.returnOriginal&&!n.returnOriginal,i.upsert=void 0!==n.upsert&&!!n.upsert,e.findAndModify(t,n.sort,r,i,o)};A.classMethod("findOneAndUpdate",{callback:!0,promise:!0}),N.prototype.findAndModify=function(e,t,r,n,o){var i=this,s=Array.prototype.slice.call(arguments,1);return"function"!=typeof(o=s.pop())&&s.push(o),t=s.length&&s.shift()||[],r=s.length?s.shift():null,n=s.length&&s.shift()||{},(n=u(n)).readPreference=y.PRIMARY,"function"==typeof o?ie(i,e,t,r,n,o):new this.s.promiseLibrary(function(o,s){ie(i,e,t,r,n=n||{},function(e,t){if(e)return s(e);o(t)})})};var ie=function(e,t,r,n,o,i){var s={findandmodify:e.s.name,query:t};(r=g(r))&&(s.sort=r),s.new=!!o.new,s.remove=!!o.remove,s.upsert=!!o.upsert,o.fields&&(s.fields=o.fields),n&&!o.remove&&(s.update=n),o.maxTimeMS&&(s.maxTimeMS=o.maxTimeMS),null!=o.serializeFunctions?o.serializeFunctions=o.serializeFunctions:o.serializeFunctions=e.s.serializeFunctions,o.checkKeys=!1;var a=me(o,e.s.db,e,o);a.writeConcern&&(s.writeConcern=a.writeConcern),"boolean"==typeof a.bypassDocumentValidation&&(s.bypassDocumentValidation=a.bypassDocumentValidation),le(s,e,o),e.s.db.command(s,o,function(e,t){return e?f(i,e,null):f(i,null,t)})};A.classMethod("findAndModify",{callback:!0,promise:!0}),N.prototype.findAndRemove=function(e,t,r,n){var o=this,i=Array.prototype.slice.call(arguments,1);return"function"!=typeof(n=i.pop())&&i.push(n),t=i.length&&i.shift()||[],r=i.length&&i.shift()||{},"function"==typeof n?se(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){se(o,e,t,r,function(e,t){if(e)return i(e);n(t)})})};var se=function(e,t,r,n,o){n.remove=!0,e.findAndModify(t,r,null,n,o)};function ae(e,t,r){var n=t.s.topology.capabilities();if(n&&n.commandsTakeWriteConcern){var o=me(u(r),t.s.db,t,r);o.writeConcern&&(e.writeConcern=o.writeConcern)}}function le(e,t,r){var n=t.s.topology.capabilities();n&&n.commandsTakeCollation&&r.collation&&"object"==typeof r.collation&&(e.collation=r.collation)}A.classMethod("findAndRemove",{callback:!0,promise:!0}),N.prototype.aggregate=function(e,t,r){if(Array.isArray(e))"function"==typeof t&&(r=t,t={}),null==t&&null==r&&(t={});else{var n=Array.prototype.slice.call(arguments,0);r=n.pop();var o=n[n.length-1];t=o&&(o.readPreference||o.explain||o.cursor||o.out||o.maxTimeMS||o.allowDiskUse)?n.pop():{},e=n}var i=!1,s={aggregate:this.s.name,pipeline:e};if("string"==typeof t.out?(e.push({$out:t.out}),i=!0):e.length>0&&e[e.length-1].$out&&(i=!0),e.length>0&&e[e.length-1].$out&&ae(s,this,t),le(s,this,t),"boolean"==typeof t.bypassDocumentValidation&&(s.bypassDocumentValidation=t.bypassDocumentValidation),!i&&this.s.readConcern&&(s.readConcern=this.s.readConcern),t.allowDiskUse&&(s.allowDiskUse=t.allowDiskUse),"number"==typeof t.maxTimeMS&&(s.maxTimeMS=t.maxTimeMS),t=u(t),(t=ge(this,t,this.s.db,this)).explain&&(s.explain=t.explain),null!=t.cursor&&"object"!=typeof t.cursor)throw h("cursor options must be an object");if(this.s.topology.capabilities().hasAggregationCursor&&(t.cursor=t.cursor||{batchSize:1e3},s.cursor=t.cursor),t.promiseLibrary=this.s.promiseLibrary,t.cursorFactory=l,"function"!=typeof r){if(!this.s.topology.capabilities())throw new c("cannot connect to server");return"boolean"==typeof t.allowDiskUse&&(s.allowDiskUse=t.allowDiskUse),"number"==typeof t.maxTimeMS&&(s.maxTimeMS=t.maxTimeMS),this.s.topology.cursor(this.s.namespace,s,t)}if(t.cursor)return this.s.topology.cursor(this.s.namespace,s,t).toArray(function(e,t){if(e)return f(r,e);f(r,null,t)});this.s.db.command(s,t,function(e,t){e?f(r,e):t.err||t.errmsg?f(r,h(t)):"object"==typeof t&&t.serverPipeline?f(r,null,t.serverPipeline):"object"==typeof t&&t.stages?f(r,null,t.stages):f(r,null,t.result)})},A.classMethod("aggregate",{callback:!0,promise:!1}),N.prototype.parallelCollectionScan=function(e,t){var r=this;return"function"==typeof e&&(t=e,e={numCursors:1}),e.numCursors=e.numCursors||1,e.batchSize=e.batchSize||1e3,e=u(e),(e=ge(this,e,this.s.db,this)).promiseLibrary=this.s.promiseLibrary,"function"==typeof t?ce(r,e,t):new this.s.promiseLibrary(function(t,n){ce(r,e,function(e,r){if(e)return n(e);t(r)})})};var ce=function(e,t,r){var n={parallelCollectionScan:e.s.name,numCursors:t.numCursors};e.s.readConcern&&(n.readConcern=e.s.readConcern);var o=t.raw;delete t.raw,e.s.db.command(n,t,function(n,s){if(n)return f(r,n,null);if(null==s)return f(r,new Error("no result returned for parallelCollectionScan"),null);var a=[];o&&(t.raw=o);for(var l=0;l<s.cursors.length;l++){var c=s.cursors[l].cursor.id,u="number"==typeof c?i.fromNumber(c):c;a.push(e.s.topology.cursor(e.s.namespace,u,t))}f(r,null,a)})};A.classMethod("parallelCollectionScan",{callback:!0,promise:!0}),N.prototype.geoNear=function(e,t,r,n){var o=this,i="object"==typeof e&&e,s=Array.prototype.slice.call(arguments,i?1:2);return"function"!=typeof(n=s.pop())&&s.push(n),r=s.length&&s.shift()||{},"function"==typeof n?ue(o,e,t,i,r,n):new this.s.promiseLibrary(function(n,s){ue(o,e,t,i,r,function(e,t){if(e)return s(e);n(t)})})};var ue=function(e,t,r,n,o,i){var s={geoNear:e.s.name,near:n||[t,r]};o=u(o),o=ge(e,o,e.s.db,e);s=m(s,o,{readPreference:!0,geoNear:!0,near:!0}),e.s.readConcern&&(s.readConcern=e.s.readConcern),le(s,e,o),e.s.db.command(s,o,function(e,t){return e?f(i,e):t.err||t.errmsg?f(i,h(t)):void f(i,null,t)})};A.classMethod("geoNear",{callback:!0,promise:!0}),N.prototype.geoHaystackSearch=function(e,t,r,n){var o=this,i=Array.prototype.slice.call(arguments,2);return"function"!=typeof(n=i.pop())&&i.push(n),r=i.length&&i.shift()||{},"function"==typeof n?pe(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){pe(o,e,t,r,function(e,t){if(e)return i(e);n(t)})})};var pe=function(e,t,r,n,o){var i={geoSearch:e.s.name,near:[t,r]};i=m(i,n,{readPreference:!0}),n=u(n),n=ge(e,n,e.s.db,e),e.s.readConcern&&(i.readConcern=e.s.readConcern),e.s.db.command(i,n,function(e,t){if(e)return f(o,e);(t.err||t.errmsg)&&f(o,h(t)),f(o,null,t)})};A.classMethod("geoHaystackSearch",{callback:!0,promise:!0});N.prototype.group=function(e,t,r,n,o,i,s,a){var l=this,c=Array.prototype.slice.call(arguments,3);return"function"!=typeof(a=c.pop())&&c.push(a),n=c.length?c.shift():null,o=c.length?c.shift():null,i=c.length?c.shift():null,s=c.length&&c.shift()||{},"function"!=typeof o&&(i=o,o=null),!Array.isArray(e)&&e instanceof Object&&"function"!=typeof e&&"Code"!=e._bsontype&&(e=Object.keys(e)),"function"==typeof n&&(n=n.toString()),"function"==typeof o&&(o=o.toString()),i=null==i||i,"function"==typeof a?he(l,e,t,r,n,o,i,s,a):new this.s.promiseLibrary(function(a,c){he(l,e,t,r,n,o,i,s,function(e,t){if(e)return c(e);a(t)})})};var he=function(e,t,r,n,o,i,a,l,c){if(a){var p=o&&"Code"==o._bsontype?o:new s(o),h={group:{ns:e.s.name,$reduce:p,cond:r,initial:n,out:"inline"}};if(null!=i&&(h.group.finalize=i),"function"==typeof t||t&&"Code"==t._bsontype)h.group.$keyf=t&&"Code"==t._bsontype?t:new s(t);else{var d={};t.forEach(function(e){d[e]=1}),h.group.key=d}l=u(l),l=ge(e,l,e.s.db,e),e.s.readConcern&&(h.readConcern=e.s.readConcern),le(h,e,l),e.s.db.command(h,l,function(e,t){if(e)return f(c,e,null);f(c,null,t.retval)})}else{var m=null!=o&&"Code"==o._bsontype?o.scope:{};m.ns=e.s.name,m.keys=t,m.condition=r,m.initial=n;var g='function () {\nvar c = db[ns].find(condition);\nvar map = new Map();\nvar reduce_function = reduce;\n\nwhile (c.hasNext()) {\nvar obj = c.next();\nvar key = {};\n\nfor (var i = 0, len = keys.length; i < len; ++i) {\nvar k = keys[i];\nkey[k] = obj[k];\n}\n\nvar aggObj = map.get(key);\n\nif (aggObj == null) {\nvar newObj = Object.extend({}, key);\naggObj = Object.extend(newObj, initial);\nmap.put(key, aggObj);\n}\n\nreduce_function(obj, aggObj);\n}\n\nreturn { "result": map.values() };\n}'.replace(/ reduce;/,o.toString()+";");e.s.db.eval(new s(g,m),function(e,t){if(e)return f(c,e,null);f(c,null,t.result||t)})}};function de(e){if(!p(e)||"ObjectID"==e._bsontype)return e;for(var t,r=Object.keys(e),n=r.length,o={};n--;)"function"==typeof e[t=r[n]]?o[t]=new s(String(e[t])):o[t]=de(e[t]);return o}A.classMethod("group",{callback:!0,promise:!0}),N.prototype.mapReduce=function(e,t,r,n){var o=this;if("function"==typeof r&&(n=r,r={}),null==r.out)throw new Error("the out option parameter must be defined, see mongodb docs for possible values");return"function"==typeof e&&(e=e.toString()),"function"==typeof t&&(t=t.toString()),"function"==typeof r.finalize&&(r.finalize=r.finalize.toString()),"function"==typeof n?fe(o,e,t,r,n):new this.s.promiseLibrary(function(n,i){fe(o,e,t,r,function(e,t,r){return e?i(e):r?void n({results:t,stats:r}):n(t)})})};var fe=function(e,t,r,n,o){var i={mapreduce:e.s.name,map:t,reduce:r},s=["readPreference"];for(var a in n)"scope"==a?i[a]=de(n[a]):-1==s.indexOf(a)&&(i[a]=n[a]);n=u(n),0!=(n=ge(e,n,e.s.db,e)).readPreference&&"primary"!=n.readPreference&&n.out&&1!=n.out.inline&&"inline"!=n.out?(n.readPreference="primary",ae(i,e,n)):e.s.readConcern&&(i.readConcern=e.s.readConcern),"boolean"==typeof n.bypassDocumentValidation&&(i.bypassDocumentValidation=n.bypassDocumentValidation),le(i,e,n),e.s.db.command(i,{readPreference:n.readPreference},function(t,r){if(t)return f(o,t);if(1!=r.ok||r.err||r.errmsg)return f(o,h(r));var i={};if(r.timeMillis&&(i.processtime=r.timeMillis),r.counts&&(i.counts=r.counts),r.timing&&(i.timing=r.timing),r.results)return null!=n.verbose&&n.verbose?f(o,null,r.results,i):f(o,null,r.results);var s=null;if(null!=r.result&&"object"==typeof r.result){var a=r.result;s=e.s.db.db(a.db).collection(a.collection)}else s=e.s.db.collection(r.result);if(null==n.verbose||!n.verbose)return f(o,t,s);f(o,t,s,i)})};A.classMethod("mapReduce",{callback:!0,promise:!0}),N.prototype.initializeUnorderedBulkOp=function(e){return(e=e||{}).promiseLibrary=this.s.promiseLibrary,C(this.s.topology,this,e)},A.classMethod("initializeUnorderedBulkOp",{callback:!1,promise:!1,returns:[_.UnorderedBulkOperation]}),N.prototype.initializeOrderedBulkOp=function(e){return(e=e||{}).promiseLibrary=this.s.promiseLibrary,_(this.s.topology,this,e)},A.classMethod("initializeOrderedBulkOp",{callback:!1,promise:!1,returns:[_.OrderedBulkOperation]});var me=function(e,t,r,n){if(null!=n.w||null!=n.j||null!=n.fsync){var o={};null!=n.w&&(o.w=n.w),null!=n.wtimeout&&(o.wtimeout=n.wtimeout),null!=n.j&&(o.j=n.j),null!=n.fsync&&(o.fsync=n.fsync),e.writeConcern=o}else null!=r.writeConcern.w||null!=r.writeConcern.j||null!=r.writeConcern.fsync?e.writeConcern=r.writeConcern:null==t.writeConcern.w&&null==t.writeConcern.j&&null==t.writeConcern.fsync||(e.writeConcern=t.writeConcern);return e},ge=function(e,t,r){var n=null;if(t.readPreference?n=t.readPreference:e.s.readPreference?n=e.s.readPreference:r.s.readPreference&&(n=r.s.readPreference),n instanceof y)t.readPreference=new v(n.mode,n.tags,{maxStalenessSeconds:n.maxStalenessSeconds});else if("string"==typeof n)t.readPreference=new v(n);else if(n&&!(n instanceof y)&&"object"==typeof n){var o=n.mode||n.preference;o&&"string"==typeof o&&(t.readPreference=new v(o,n.tags,{maxStalenessSeconds:n.maxStalenessSeconds}))}return t},ye={limit:1,sort:1,fields:1,skip:1,hint:1,explain:1,snapshot:1,timeout:1,tailable:1,tailableRetryInterval:1,numberOfRetries:1,awaitdata:1,awaitData:1,exhaust:1,batchSize:1,returnKey:1,maxScan:1,min:1,max:1,showDiskLoc:1,comment:1,raw:1,readPreference:1,partial:1,read:1,dbName:1,oplogReplay:1,connection:1,maxTimeMS:1,transforms:1,collation:1,noCursorTimeout:1};e.exports=N},9:function(e,t){e.exports=require("assert")},90:function(e,t,r){"use strict";var n=r(26).EventEmitter,o=r(4).inherits,i=r(5).Server,s=r(32),a=r(58),l=r(48),c=r(4).format,u=r(59).ServerCapabilities,p=r(59).Store,h=r(20),d=r(5).MongoError,f=r(3).MAX_JS_INT,m=r(3).translateOptions,g=r(3).filterOptions,y=r(3).mergeOptions,v=r(3).getReadPreference,b=r(35),x=r(113).version,S=c("Node.js %s, %s",process.version,b.endianness()),C=b.type(),_=process.platform,O=process.arch,T=b.release(),N=["ha","haInterval","acceptableLatencyMS","poolSize","ssl","checkServerIdentity","sslValidate","ciphers","ecdhCurve","sslCA","sslCRL","sslCert","sslKey","sslPass","socketOptions","bufferMaxEntries","store","auto_reconnect","autoReconnect","emitError","keepAlive","noDelay","connectTimeoutMS","socketTimeoutMS","family","loggerLevel","logger","reconnectTries","reconnectInterval","monitoring","appname","domainsEnabled","servername","promoteLongs","promoteValues","promoteBuffers"],A=function(e,t,r){if(r=r||{},!(this instanceof A))return new A(e,t,r);n.call(this);var o={force:!1,bufferMaxEntries:"number"==typeof(r=g(r,N)).bufferMaxEntries?r.bufferMaxEntries:f},a=r.store||new p(this,o);if(-1!=e.indexOf("/"))null!=t&&"object"==typeof t&&(r=t,t=null);else if(null==t)throw d.create({message:"port must be specified",driver:!0});var l="boolean"!=typeof r.auto_reconnect||r.auto_reconnect;l="boolean"==typeof r.autoReconnect?r.autoReconnect:l;var c=y({},{host:e,port:t,disconnectHandler:a,cursorFactory:s,reconnect:l,emitError:"boolean"!=typeof r.emitError||r.emitError,size:"number"==typeof r.poolSize?r.poolSize:5});c=m(c,r);var u=r.socketOptions&&Object.keys(r.socketOptions).length>0?r.socketOptions:r;"number"==typeof(c=m(c,u)).keepAlive&&(c.keepAliveInitialDelay=c.keepAlive,c.keepAlive=c.keepAlive>0),this.clientInfo={driver:{name:"nodejs",version:x},os:{type:C,name:_,architecture:O,version:T},platform:S},c.clientInfo=this.clientInfo,r.appname&&(c.clientInfo.application={name:r.appname});var h=new i(c);this.s={server:h,sCapabilities:null,clonedOptions:c,reconnect:c.reconnect,emitError:c.emitError,poolSize:c.size,storeOptions:o,store:a,host:e,port:t,options:r}};o(A,n);var E=A.define=new h("Server",A,!1);Object.defineProperty(A.prototype,"bson",{enumerable:!0,get:function(){return this.s.server.s.bson}}),Object.defineProperty(A.prototype,"isMasterDoc",{enumerable:!0,get:function(){return this.s.server.lastIsMaster()}}),Object.defineProperty(A.prototype,"parserType",{enumerable:!0,get:function(){return this.s.server.parserType}}),Object.defineProperty(A.prototype,"poolSize",{enumerable:!0,get:function(){return this.s.server.connections().length}}),Object.defineProperty(A.prototype,"autoReconnect",{enumerable:!0,get:function(){return this.s.reconnect}}),Object.defineProperty(A.prototype,"host",{enumerable:!0,get:function(){return this.s.host}}),Object.defineProperty(A.prototype,"port",{enumerable:!0,get:function(){return this.s.port}}),A.prototype.connect=function(e,t,r){var n=this;"function"==typeof t&&(r=t,t={}),null==t&&(t={}),"function"!=typeof r&&(r=null),n.s.options=t,n.s.storeOptions.bufferMaxEntries=e.bufferMaxEntries;var o=function(){return function(e){["timeout","error","close"].forEach(function(e){n.s.server.removeListener(e,l[e])}),n.s.server.removeListener("connect",o);try{r(e)}catch(e){process.nextTick(function(){throw e})}}},i=function(e){return function(t){"error"!=e&&n.emit(e,t)}},s=function(){n.s.store.flush()},a=function(e){return function(t,r){n.emit(e,t,r)}},l={timeout:o("timeout"),error:o("error"),close:o("close")};["timeout","error","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged"].forEach(function(e){n.s.server.removeAllListeners(e)}),n.s.server.once("timeout",l.timeout),n.s.server.once("error",l.error),n.s.server.once("close",l.close),n.s.server.once("connect",function(){["timeout","error","close","destroy"].forEach(function(e){n.s.server.removeAllListeners(e)}),n.s.server.on("timeout",i("timeout")),n.s.server.once("error",i("error")),n.s.server.on("close",i("close")),n.s.server.on("destroy",s),n.emit("open",null,n);try{r(null,n)}catch(e){console.log(e.stack),process.nextTick(function(){throw e})}}),n.s.server.on("reconnect",function(){n.emit("reconnect",n),n.s.store.execute()}),n.s.server.on("reconnectFailed",function(e){n.emit("reconnectFailed",e),n.s.store.flush(e)}),n.s.server.on("serverDescriptionChanged",a("serverDescriptionChanged")),n.s.server.on("serverHeartbeatStarted",a("serverHeartbeatStarted")),n.s.server.on("serverHeartbeatSucceeded",a("serverHeartbeatSucceeded")),n.s.server.on("serverHeartbeatFailed",a("serverHeartbeatFailed")),n.s.server.on("serverOpening",a("serverOpening")),n.s.server.on("serverClosed",a("serverClosed")),n.s.server.on("topologyOpening",a("topologyOpening")),n.s.server.on("topologyClosed",a("topologyClosed")),n.s.server.on("topologyDescriptionChanged",a("topologyDescriptionChanged")),n.s.server.on("attemptReconnect",a("attemptReconnect")),n.s.server.on("monitoring",a("monitoring")),n.s.server.connect(t)},A.prototype.capabilities=function(){return this.s.sCapabilities?this.s.sCapabilities:null==this.s.server.lastIsMaster()?null:(this.s.sCapabilities=new u(this.s.server.lastIsMaster()),this.s.sCapabilities)},E.classMethod("capabilities",{callback:!1,promise:!1,returns:[u]}),A.prototype.command=function(e,t,r,n){this.s.server.command(e,t,v(r),n)},E.classMethod("command",{callback:!0,promise:!1}),A.prototype.insert=function(e,t,r,n){this.s.server.insert(e,t,r,n)},E.classMethod("insert",{callback:!0,promise:!1}),A.prototype.update=function(e,t,r,n){this.s.server.update(e,t,r,n)},E.classMethod("update",{callback:!0,promise:!1}),A.prototype.remove=function(e,t,r,n){this.s.server.remove(e,t,r,n)},E.classMethod("remove",{callback:!0,promise:!1}),A.prototype.isConnected=function(){return this.s.server.isConnected()},A.prototype.isDestroyed=function(){return this.s.server.isDestroyed()},E.classMethod("isConnected",{callback:!1,promise:!1,returns:[Boolean]}),A.prototype.cursor=function(e,t,r){return r.disconnectHandler=this.s.store,this.s.server.cursor(e,t,r)},E.classMethod("cursor",{callback:!1,promise:!1,returns:[s,a,l]}),A.prototype.lastIsMaster=function(){return this.s.server.lastIsMaster()},A.prototype.unref=function(){this.s.server.unref()},A.prototype.close=function(e){this.s.server.destroy(),1==e&&(this.s.storeOptions.force=e,this.s.store.flush())},E.classMethod("close",{callback:!1,promise:!1}),A.prototype.auth=function(){var e=Array.prototype.slice.call(arguments,0);this.s.server.auth.apply(this.s.server,e)},E.classMethod("auth",{callback:!0,promise:!1}),A.prototype.logout=function(){var e=Array.prototype.slice.call(arguments,0);this.s.server.logout.apply(this.s.server,e)},E.classMethod("logout",{callback:!0,promise:!1}),A.prototype.connections=function(){return this.s.server.connections()},E.classMethod("connections",{callback:!1,promise:!1,returns:[Array]}),e.exports=A},91:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(0),i=r(11),s=r(29);class ArrayEqualityComparator{hashCode(e){return null==e?0:i.MurmurHash.hashCode(e,0)}equals(e,t){if(null==e)return null==t;if(null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!s.ObjectEqualityComparator.INSTANCE.equals(e[r],t[r]))return!1;return!0}}ArrayEqualityComparator.INSTANCE=new ArrayEqualityComparator,n([o.Override],ArrayEqualityComparator.prototype,"hashCode",null),n([o.Override],ArrayEqualityComparator.prototype,"equals",null),t.ArrayEqualityComparator=ArrayEqualityComparator},92:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(60),s=r(50),a=r(11),l=r(0),c=r(29),u=r(24),p=r(73),h=r(9);let d=class ATNConfig{constructor(e,t,r){"number"==typeof t?(h((16777215&t)==t),this._state=e,this.altAndOuterContextDepth=t,this._context=r):(this._state=e,this.altAndOuterContextDepth=t.altAndOuterContextDepth,this._context=r)}static create(e,t,r,n=p.SemanticContext.NONE,o){return n!=p.SemanticContext.NONE?null!=o?new g(o,n,e,t,r,!1):new f(n,e,t,r):null!=o?new m(o,e,t,r,!1):new ATNConfig(e,t,r)}get state(){return this._state}get alt(){return 16777215&this.altAndOuterContextDepth}get context(){return this._context}set context(e){this._context=e}get reachesIntoOuterContext(){return 0!==this.outerContextDepth}get outerContextDepth(){return this.altAndOuterContextDepth>>>24&127}set outerContextDepth(e){h(e>=0),e=Math.min(e,127),this.altAndOuterContextDepth=e<<24|(-2130706433&this.altAndOuterContextDepth)>>>0}get lexerActionExecutor(){}get semanticContext(){return p.SemanticContext.NONE}get hasPassedThroughNonGreedyDecision(){return!1}clone(){return this.transform(this.state,!1)}transform(e,t,r){return null==r?this.transformImpl(e,this._context,this.semanticContext,t,this.lexerActionExecutor):r instanceof u.PredictionContext?this.transformImpl(e,r,this.semanticContext,t,this.lexerActionExecutor):r instanceof p.SemanticContext?this.transformImpl(e,this._context,r,t,this.lexerActionExecutor):this.transformImpl(e,this._context,this.semanticContext,t,r)}transformImpl(e,t,r,n,o){let i=n&&ATNConfig.checkNonGreedyDecision(this,e);return r!=p.SemanticContext.NONE?null!=o||i?new g(o,r,e,this,t,i):new f(r,e,this,t):null!=o||i?new m(o,e,this,t,i):new ATNConfig(e,this,t)}static checkNonGreedyDecision(e,t){return e.hasPassedThroughNonGreedyDecision||t instanceof s.DecisionState&&t.nonGreedy}appendContext(e,t){if("number"==typeof e){let r=this.context.appendSingleContext(e,t);return this.transform(this.state,!1,r)}{let r=this.context.appendContext(e,t);return this.transform(this.state,!1,r)}}contains(e){if(this.state.stateNumber!==e.state.stateNumber||this.alt!==e.alt||!this.semanticContext.equals(e.semanticContext))return!1;let t=[],r=[];for(t.push(this.context),r.push(e.context);;){let e=t.pop(),n=r.pop();if(!e||!n)break;if(e===n)return!0;if(e.size<n.size)return!1;if(n.isEmpty)return e.hasEmpty;for(let o=0;o<n.size;o++){let i=e.findReturnState(n.getReturnState(o));if(i<0)return!1;t.push(e.getParent(i)),r.push(n.getParent(o))}}return!1}get isPrecedenceFilterSuppressed(){return 0!=(2147483648&this.altAndOuterContextDepth)}set isPrecedenceFilterSuppressed(e){e?this.altAndOuterContextDepth|=2147483648:this.altAndOuterContextDepth&=2147483647}equals(e){return this===e||e instanceof ATNConfig&&(this.state.stateNumber==e.state.stateNumber&&this.alt==e.alt&&this.reachesIntoOuterContext==e.reachesIntoOuterContext&&this.context.equals(e.context)&&this.semanticContext.equals(e.semanticContext)&&this.isPrecedenceFilterSuppressed==e.isPrecedenceFilterSuppressed&&this.hasPassedThroughNonGreedyDecision==e.hasPassedThroughNonGreedyDecision&&c.ObjectEqualityComparator.INSTANCE.equals(this.lexerActionExecutor,e.lexerActionExecutor))}hashCode(){let e=a.MurmurHash.initialize(7);return e=a.MurmurHash.update(e,this.state.stateNumber),e=a.MurmurHash.update(e,this.alt),e=a.MurmurHash.update(e,this.reachesIntoOuterContext?1:0),e=a.MurmurHash.update(e,this.context),e=a.MurmurHash.update(e,this.semanticContext),e=a.MurmurHash.update(e,this.hasPassedThroughNonGreedyDecision?1:0),e=a.MurmurHash.update(e,this.lexerActionExecutor),e=a.MurmurHash.finish(e,7)}toDotString(){let e="";e+="digraph G {\n",e+="rankdir=LR;\n";let t=new i.Array2DHashMap(u.PredictionContext.IdentityEqualityComparator.INSTANCE),r=[];function n(e){let n=t.size,o=t.putIfAbsent(e,n);return null!=o?o:(r.push(e),n)}for(r.push(this.context),t.put(this.context,0);;){let t=r.pop();if(!t)break;for(let r=0;r<t.size;r++)e+="  s"+n(t),e+="->",e+="s"+n(t.getParent(r)),e+='[label="'+t.getReturnState(r)+'"];\n'}return(e+="}\n").toString()}toString(e,t,r){null==r&&(r=null!=t),null==t&&(t=!0);let n,o="";n=r?this.context.toStrings(e,this.state.stateNumber):["?"];let i=!0;for(let e of n)i?i=!1:o+=", ",o+="(",o+=this.state,t&&(o+=",",o+=this.alt),this.context&&(o+=",",o+=e),this.semanticContext!==p.SemanticContext.NONE&&(o+=",",o+=this.semanticContext),this.reachesIntoOuterContext&&(o+=",up="+this.outerContextDepth),o+=")";return o.toString()}};n([l.NotNull],d.prototype,"_state",void 0),n([l.NotNull],d.prototype,"_context",void 0),n([l.NotNull],d.prototype,"state",null),n([l.NotNull,o(0,l.NotNull)],d.prototype,"context",null),n([l.NotNull],d.prototype,"semanticContext",null),n([l.Override],d.prototype,"clone",null),n([o(0,l.NotNull),o(2,l.NotNull)],d.prototype,"transformImpl",null),n([l.Override],d.prototype,"equals",null),n([l.Override],d.prototype,"hashCode",null),n([o(0,l.NotNull),o(3,l.NotNull)],d,"create",null),d=n([o(0,l.NotNull),o(2,l.NotNull)],d),t.ATNConfig=d;let f=class SemanticContextATNConfig extends d{constructor(e,t,r,n){super(t,r,n),this._semanticContext=e}get semanticContext(){return this._semanticContext}};n([l.NotNull],f.prototype,"_semanticContext",void 0),n([l.Override],f.prototype,"semanticContext",null),f=n([o(1,l.NotNull),o(2,l.NotNull)],f);let m=class ActionATNConfig extends d{constructor(e,t,r,n,o){if("number"==typeof r)super(t,r,n);else if(super(t,r,n),r.semanticContext!==p.SemanticContext.NONE)throw new Error("Not supported");this._lexerActionExecutor=e,this.passedThroughNonGreedyDecision=o}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};n([l.Override],m.prototype,"lexerActionExecutor",null),n([l.Override],m.prototype,"hasPassedThroughNonGreedyDecision",null),m=n([o(1,l.NotNull),o(2,l.NotNull)],m);let g=class ActionSemanticContextATNConfig extends f{constructor(e,t,r,n,o,i){super(t,r,n,o),this._lexerActionExecutor=e,this.passedThroughNonGreedyDecision=i}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};n([l.Override],g.prototype,"lexerActionExecutor",null),n([l.Override],g.prototype,"hasPassedThroughNonGreedyDecision",null),g=n([o(1,l.NotNull),o(2,l.NotNull)],g)},93:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(41),s=r(61),a=r(11),l=r(0),c=r(24),u=r(9);class DFAState{constructor(e){this.stateNumber=-1,this.configs=e,this.edges=new Map,this.contextEdges=new Map}get isContextSensitive(){return!!this.contextSymbols}isContextSymbol(e){return!!this.isContextSensitive&&this.contextSymbols.get(e)}setContextSymbol(e){u(this.isContextSensitive),this.contextSymbols.set(e)}setContextSensitive(e){u(!this.configs.isOutermostConfigSet),this.isContextSensitive||this.contextSymbols||(this.contextSymbols=new s.BitSet)}get acceptStateInfo(){return this._acceptStateInfo}set acceptStateInfo(e){this._acceptStateInfo=e}get isAcceptState(){return!!this._acceptStateInfo}get prediction(){return this._acceptStateInfo?this._acceptStateInfo.prediction:i.ATN.INVALID_ALT_NUMBER}get lexerActionExecutor(){if(this._acceptStateInfo)return this._acceptStateInfo.lexerActionExecutor}getTarget(e){return this.edges.get(e)}setTarget(e,t){this.edges.set(e,t)}getEdgeMap(){return this.edges}getContextTarget(e){return e===c.PredictionContext.EMPTY_FULL_STATE_KEY&&(e=-1),this.contextEdges.get(e)}setContextTarget(e,t){if(!this.isContextSensitive)throw new Error("The state is not context sensitive.");e===c.PredictionContext.EMPTY_FULL_STATE_KEY&&(e=-1),this.contextEdges.set(e,t)}getContextEdgeMap(){let e=new Map(this.contextEdges),t=e.get(-1);if(void 0!==t){if(1===e.size){let e=new Map;return e.set(c.PredictionContext.EMPTY_FULL_STATE_KEY,t),e}e.delete(-1),e.set(c.PredictionContext.EMPTY_FULL_STATE_KEY,t)}return e}hashCode(){let e=a.MurmurHash.initialize(7);return e=a.MurmurHash.update(e,this.configs.hashCode()),e=a.MurmurHash.finish(e,1)}equals(e){if(this===e)return!0;if(!(e instanceof DFAState))return!1;let t=e;return this.configs.equals(t.configs)}toString(){let e="";return e+=this.stateNumber+":"+this.configs,this.isAcceptState&&(e+="=>",this.predicates?e+=this.predicates:e+=this.prediction),e.toString()}}n([l.NotNull],DFAState.prototype,"configs",void 0),n([l.NotNull],DFAState.prototype,"edges",void 0),n([l.NotNull],DFAState.prototype,"contextEdges",void 0),n([l.Override],DFAState.prototype,"hashCode",null),n([l.Override],DFAState.prototype,"equals",null),n([l.Override],DFAState.prototype,"toString",null),t.DFAState=DFAState,function(e){let t=class PredPrediction{constructor(e,t){this.alt=t,this.pred=e}toString(){return"("+this.pred+", "+this.alt+")"}};n([l.NotNull],t.prototype,"pred",void 0),n([l.Override],t.prototype,"toString",null),t=n([o(0,l.NotNull)],t),e.PredPrediction=t}(DFAState=t.DFAState||(t.DFAState={}))},94:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(303),s=r(175),a=r(0),l=r(13),c=r(33);class Recognizer{constructor(){this._listeners=[i.ConsoleErrorListener.INSTANCE],this._stateNumber=-1}getTokenTypeMap(){let e=this.vocabulary,t=Recognizer.tokenTypeMapCache.get(e);if(null==t){let r=new Map;for(let t=0;t<=this.atn.maxTokenType;t++){let n=e.getLiteralName(t);null!=n&&r.set(n,t);let o=e.getSymbolicName(t);null!=o&&r.set(o,t)}r.set("EOF",l.Token.EOF),t=Object.freeze(r),Recognizer.tokenTypeMapCache.set(e,t)}return t}getRuleIndexMap(){let e=this.ruleNames;if(null==e)throw new Error("The current recognizer does not provide a list of rule names.");let t=Recognizer.ruleIndexMapCache.get(e);return null==t&&(t=Object.freeze(c.toMap(e)),Recognizer.ruleIndexMapCache.set(e,t)),t}getTokenType(e){let t=this.getTokenTypeMap().get(e);return null!=t?t:l.Token.INVALID_TYPE}get serializedATN(){throw new Error("there is no serialized ATN")}get atn(){return this._interp.atn}get interpreter(){return this._interp}get parseInfo(){}set interpreter(e){this._interp=e}getErrorHeader(e){let t=e.getOffendingToken();return t?"line "+t.line+":"+t.charPositionInLine:""}addErrorListener(e){if(!e)throw new TypeError("listener must not be null");this._listeners.push(e)}removeErrorListener(e){let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}removeErrorListeners(){this._listeners.length=0}getErrorListeners(){return this._listeners.slice(0)}getErrorListenerDispatch(){return new s.ProxyErrorListener(this.getErrorListeners())}sempred(e,t,r){return!0}precpred(e,t){return!0}action(e,t,r){}get state(){return this._stateNumber}set state(e){this._stateNumber=e}}Recognizer.EOF=-1,Recognizer.tokenTypeMapCache=new WeakMap,Recognizer.ruleIndexMapCache=new WeakMap,n([a.SuppressWarnings("serial"),a.NotNull],Recognizer.prototype,"_listeners",void 0),n([a.NotNull],Recognizer.prototype,"getTokenTypeMap",null),n([a.NotNull],Recognizer.prototype,"getRuleIndexMap",null),n([a.NotNull],Recognizer.prototype,"serializedATN",null),n([a.NotNull],Recognizer.prototype,"atn",null),n([a.NotNull,o(0,a.NotNull)],Recognizer.prototype,"interpreter",null),n([a.NotNull,o(0,a.NotNull)],Recognizer.prototype,"getErrorHeader",null),n([o(0,a.NotNull)],Recognizer.prototype,"addErrorListener",null),n([o(0,a.NotNull)],Recognizer.prototype,"removeErrorListener",null),n([a.NotNull],Recognizer.prototype,"getErrorListeners",null),t.Recognizer=Recognizer},95:function(e,t,r){"use strict";
/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(t,"__esModule",{value:!0});const n=r(50);t.BlockStartState=class BlockStartState extends n.DecisionState{}}});